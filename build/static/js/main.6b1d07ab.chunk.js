(this.webpackJsonpbeactive=this.webpackJsonpbeactive||[]).push([[0],{35:function(e,t,a){},40:function(e,t,a){"use strict";(function(e){var n=a(18),s=a(9),c=a(10),i=a(22),r=a(12),o=a(11),l=a(1),d=a.n(l),u=a(41),h=a(29),p=a.n(h),b=(a(56),a(35),a(15)),j=a(30),m=a(17),g=a(0),v={1:["span 12/span 24"],2:["span 12/span 12/13/25","span 12/span 12/13/13"],3:["span 6/span 12","span 6/span 12","span 6/span 12/7/19"],4:["span 6/span 12","span 6/span 12","span 6/span 12","span 6/span 12/7/13"],5:["span 3/span 4/13/9","span 3/span 4/13/13","span 3/span 4/13/17","span 3/span 4/13/21","span 9/span 16/10/21"],6:["span 3/span 4/13/7","span 3/span 4/13/11","span 3/span 4/13/15","span 3/span 4/13/19","span 3/span 4/13/23","span 9/span 16/10/21"],7:["span 3/span 4/13/5","span 3/span 4/13/9","span 3/span 4/13/13","span 3/span 4/13/17","span 3/span 4/13/21","span 3/span 4/13/25","span 9/span 16/10/21"]},f=function(t){Object(r.a)(l,t);var a=Object(o.a)(l);function l(e){var t;return Object(s.a)(this,l),(t=a.call(this,e)).streamInit=function(e,t,a,n){var s={streamID:e,audio:!0,video:!0,screen:!1};switch(t){case"audio-only":s.video=!1;break;case"audience":s.video=!1,s.audio=!1;break;default:case"video":}var c=p.a.createStream(Object(u.merge)(s,n));return c.setVideoProfile(a),c},t.subscribeStreamEvents=function(){var e=Object(i.a)(t);e.client.on("stream-added",(function(t){var a=t.stream;console.log("New stream added: "+a.getId()),console.log("At "+(new Date).toLocaleTimeString()),console.log("Subscribe ",a),e.client.subscribe(a,(function(e){console.log("Subscribe stream failed",e)}))})),e.client.on("peer-leave",(function(t){console.log("Peer has left: "+t.uid),console.log((new Date).toLocaleTimeString()),console.log(t),e.removeStream(t.uid)})),e.client.on("stream-subscribed",(function(t){var a=t.stream;console.log("Got stream-subscribed event"),console.log((new Date).toLocaleTimeString()),console.log("Subscribe remote stream successfully: "+a.getId()),console.log(t),e.addStream(a)})),e.client.on("stream-removed",(function(t){var a=t.stream;console.log("Stream removed: "+a.getId()),console.log((new Date).toLocaleTimeString()),console.log(t),e.removeStream(a.getId())}))},t.removeStream=function(e){t.state.streamList.map((function(a,s){if(a.getId()===e){a.close();var c=document.querySelector("#ag-item-"+e);c&&c.parentNode.removeChild(c);var i=Object(n.a)(t.state.streamList);i.splice(s,1),t.setState({streamList:i})}}))},t.addStream=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.state.streamList.some((function(t){return t.getId()===e.getId()}));n||(a?t.setState({streamList:t.state.streamList.concat([e])}):t.setState({streamList:[e].concat(t.state.streamList)}))},t.handleCamera=function(e){e.currentTarget.classList.toggle("off");try{t.localStream.isVideoOn()?t.localStream.disableVideo():t.localStream.enableVideo()}catch(e){console.log(e)}},t.handleMic=function(e){e.currentTarget.classList.toggle("off"),t.localStream.isAudioOn()?t.localStream.disableAudio():t.localStream.enableAudio()},t.openChat=function(e){e.currentTarget.classList.toggle("off"),t.props.chatToggle()},t.switchDisplay=function(e){e.currentTarget.classList.contains("disabled")||t.state.streamList.length<=1||("pip"===t.state.displayMode?t.setState({displayMode:"tile"}):"tile"===t.state.displayMode?t.setState({displayMode:"pip"}):"share"===t.state.displayMode||console.error("Display Mode can only be tile/pip/share"))},t.hideRemote=function(e){if(!(e.currentTarget.classList.contains("disabled")||t.state.streamList.length<=1)){var a=t.state.streamList[t.state.streamList.length-1].getId();Array.from(document.querySelectorAll(".ag-item:not(#ag-item-".concat(a,")"))).map((function(e){"none"!==e.style.display?e.style.display="none":e.style.display="block"}))}},t.handleExit=function(e){if(!e.currentTarget.classList.contains("disabled"))try{t.client&&t.client.unpublish(t.localStream),t.localStream&&t.localStream.close(),t.client&&t.client.leave((function(){console.log("Client succeed to leave.")}),(function(){console.log("Client failed to leave.")}))}finally{t.setState({readyState:!1}),t.client=null,t.localStream=null,window.location.hash=""}},t.client={},t.localStream={},t.shareClient={},t.shareStream={},t.state={displayMode:"pip",streamList:[],readyState:!1},t}return Object(c.a)(l,[{key:"componentWillMount",value:function(){var e=this,t=this.props;this.client=p.a.createClient({mode:t.transcode}),this.client.init(t.appId,(function(){console.log("AgoraRTC client initialized"),e.subscribeStreamEvents(),e.client.join(t.appId,t.channel,t.uid,(function(a){console.log("User "+a+" join channel successfully"),console.log("At "+(new Date).toLocaleTimeString()),e.localStream=e.streamInit(a,t.attendeeMode,t.videoProfile),e.localStream.init((function(){"audience"!==t.attendeeMode&&(e.addStream(e.localStream,!0),e.client.publish(e.localStream,(function(e){console.log("Publish local stream error: "+e)}))),e.setState({readyState:!0})}),(function(t){console.log("getUserMedia failed",t),e.setState({readyState:!0})}))}))}))}},{key:"componentDidMount",value:function(){var t=document.querySelector("#ag-canvas"),a=document.querySelector(".ag-btn-group");t.addEventListener("mousemove",(function(){e._toolbarToggle&&clearTimeout(e._toolbarToggle),a.classList.add("active"),e._toolbarToggle=setTimeout((function(){a.classList.remove("active")}),2e3)}))}},{key:"componentDidUpdate",value:function(){var e=document.querySelector("#ag-canvas");if("pip"===this.state.displayMode){var t=this.state.streamList.length;if(t>4)return void this.setState({displayMode:"tile"});this.state.streamList.map((function(a,n){var s=a.getId(),c=document.querySelector("#ag-item-"+s);c||((c=document.createElement("section")).setAttribute("id","ag-item-"+s),c.setAttribute("class","ag-item"),e.appendChild(c),a.play("ag-item-"+s)),n===t-1?c.setAttribute("style","grid-area: span 12/span 24/13/25"):c.setAttribute("style","grid-area: span 3/span 4/".concat(4+3*n,"/25;\n                    z-index:1;width:calc(100% - 20px);height:calc(100% - 20px)")),a.player&&a.player.resize&&a.player.resize()}))}else if("tile"===this.state.displayMode){var a=this.state.streamList.length;this.state.streamList.map((function(t,n){var s=t.getId(),c=document.querySelector("#ag-item-"+s);c||((c=document.createElement("section")).setAttribute("id","ag-item-"+s),c.setAttribute("class","ag-item"),e.appendChild(c),t.play("ag-item-"+s)),c.setAttribute("style","grid-area: ".concat(v[a][n])),t.player.resize&&t.player.resize()}))}else this.state.displayMode}},{key:"componentWillUnmount",value:function(){this.client&&this.client.unpublish(this.localStream),this.localStream&&this.localStream.close(),this.client&&this.client.leave((function(){console.log("Client succeed to leave.")}),(function(){console.log("Client failed to leave.")}))}},{key:"render",value:function(){var e="video"===this.props.attendeeMode?Object(g.jsxs)("span",{onClick:this.handleCamera,className:"ag-btn videoControlBtn",title:"Enable/Disable Video",children:[Object(g.jsx)("i",{className:"ag-icon ag-icon-camera",children:Object(g.jsx)(b.a,{icon:m.g})}),Object(g.jsx)("i",{className:"ag-icon ag-icon-camera-off",children:Object(g.jsx)(b.a,{icon:m.h})})]}):"",t="audience"!==this.props.attendeeMode?Object(g.jsxs)("span",{onClick:this.handleMic,className:"ag-btn audioControlBtn",title:"Enable/Disable Audio",children:[Object(g.jsx)("i",{className:"ag-icon ag-icon-mic",children:Object(g.jsx)(b.a,{icon:m.b})}),Object(g.jsx)("i",{className:"ag-icon ag-icon-mic-off",children:Object(g.jsx)(b.a,{icon:m.c})})]}):"",a=Object(g.jsx)("span",{onClick:this.switchDisplay,className:this.state.streamList.length>4?"ag-btn displayModeBtn disabled":"ag-btn displayModeBtn",title:"Switch Display Mode",children:Object(g.jsx)("i",{className:"ag-icon",children:Object(g.jsx)(b.a,{icon:j.b})})}),n=Object(g.jsx)("span",{onClick:this.openChat,className:this.state.streamList.length>4?"ag-btn displayModeBtn disabled":"ag-btn displayModeBtn",title:"Open chat",children:Object(g.jsx)("i",{className:"ag-icon",children:Object(g.jsx)(b.a,{icon:j.a})})}),s=Object(g.jsx)("span",{className:this.state.streamList.length>4||"pip"!==this.state.displayMode?"ag-btn disableRemoteBtn disabled":"ag-btn disableRemoteBtn",onClick:this.hideRemote,title:"Hide Remote Stream",children:"pip"!==this.state.displayMode?Object(g.jsx)("i",{className:"ag-icon",children:Object(g.jsx)(b.a,{icon:m.f})}):Object(g.jsx)("i",{className:"ag-icon",children:Object(g.jsx)(b.a,{icon:m.e})})}),c=Object(g.jsx)("span",{onClick:this.handleExit,className:this.state.readyState?"ag-btn exitBtn":"ag-btn exitBtn disabled",title:"Exit",children:Object(g.jsx)("i",{className:"ag-icon",children:Object(g.jsx)(b.a,{icon:m.d})})});return Object(g.jsx)("div",{id:"ag-canvas",style:{display:"grid",gridGap:"10px",alignItems:"center",justifyItems:"center",gridTemplateRows:"repeat(12, auto)",gridTemplateColumns:"repeat(24, auto)"},children:Object(g.jsxs)("div",{className:"ag-btn-group",children:[c,e,t,a,s,n]})})}}]),l}(d.a.Component);t.a=f}).call(this,a(20))},51:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t),t.default="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAAGega+EAAAABGdBTUEAALGPC/xhBQAAASFJREFUOBHNk71qAkEUhR3jDwGFpLGSCBaCjZB0VoEQErAWHyMvYKFWiiD4LFaWFmmCnW9gmyZlcCBsvqM7G2aDu9p54XDn3HPu3ZnZ3UyGCIJgBG60GIQFa1QV+Qsnuwrc7tcSwAcYgpJ6Jyg750zPaplhuwZ3YK3NzJP60L+zGL6STGhXMhVTTPlIZ2wnIizgNce1yUfIkyvE8q0x5k0d/ZjgUfSy9lTwqv/JTqbUONl0eFXH5xV1uhf0dui5J1fBBmyB5XRj8iEwt9xaGd5zXJNeIQswBGknxeJFA9bkaQ+aOgCxD9EzJxJ6LSicdEuJk0Lx8gbl2NkKLHVW8rmX/UxPnsu2hoUXDOxSmIIf8A4qQH/1J9D3UQczmvW3R/ELvLZ7YNQHvpUAAAAASUVORK5CYII="},55:function(e,t,a){},56:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(39),i=a.n(c),r=a(9),o=a(10),l=a(12),d=a(11),u=a(44),h=a(4),p=(a(50),a(51),a(6)),b=(a(35),function(e,t){return e.length<t?1:0}),j=function(e,t){return e.length>t?1:0},m=function(e){return/^[0-9a-zA-Z\_]+$/.test(e)?0:1},g=function(e){return""===e?1:0},v={"120p,120p_1":[160,120,15,65],"120p_3":[120,120,15,50],"180p,180p_1":[320,180,15,140],"180p_3":[180,180,15,100],"180p_4":[240,180,15,120],"240p,240p_1":[320,240,15,200],"240p_3":[240,240,15,140],"240p_4":[424,240,15,220],"360p,360p_1":[640,360,15,400],"360p_3":[360,360,15,260],"360p_4":[640,360,30,600],"360p_6":[360,360,30,400],"360p_7":[480,360,15,320],"360p_8":[480,360,30,490],"360p_9":[640,360,15,800],"360p_10":[640,360,24,800],"360p_11":[640,360,24,1e3],"480p,480p_1":[640,480,15,500],"480p_2":[640,480,30,1e3],"480p_3":[480,480,15,400],"480p_4":[640,480,30,750],"480p_6":[480,480,30,600],"480p_8":[848,480,15,610],"480p_9":[848,480,30,930],"480p_10":[640,480,10,400],"720p,720p_1":[1280,720,15,1130],"720p_2":[1280,720,15,2080],"720p_3":[1280,720,30,1710],"720p_5":[960,720,15,910],"720p_6":[960,720,30,1380],"1080p,1080p_1":[1920,1080,15,2080],"1080p_2":[1920,1080,30,3e3],"1080p_3":[1920,1080,30,3150],"1080p_5":[1920,1080,60,4780],"1440p,1440p_1":[2560,1440,30,4850],"1440p_2":[2560,1440,60,7350],"4k,4k_1":[3840,2160,30,8910],"4k_3":[3840,2160,60,13500]},f=(a(52),a.p+"static/media/be-active-logo.a52ba7ee.png"),O=a(0),x=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleChannel=function(e,t){n.setState({channel:e,joinBtn:t})},n.handleName=function(e){n.setState({username:e})},n.handleJoin=function(){n.state.joinBtn&&(console.log(n.state),p.set("channel",n.state.channel),p.set("baseMode",n.state.baseMode),p.set("transcode",n.state.transcode),p.set("attendeeMode",n.state.attendeeMode),p.set("videoProfile",n.state.videoProfile),p.set("username",n.state.username),window.location.hash="meeting")},n.state={joinBtn:!1,channel:"",baseMode:"avc",transcode:"interop",attendeeMode:"video",videoProfile:"480p_4"},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("keypress",(function(t){13===t.keyCode&&e.handleJoin()}))}},{key:"render",value:function(){var e=this;return Object(O.jsxs)("div",{className:"wrapper index",children:[Object(O.jsx)("div",{className:"ag-header"}),Object(O.jsx)("div",{className:"ag-main",children:Object(O.jsxs)("section",{className:"login-wrapper",children:[Object(O.jsxs)("div",{className:"login-header",children:[Object(O.jsx)("img",{src:f,alt:"logo"}),Object(O.jsx)("p",{className:"login-title",children:"BeActive"}),Object(O.jsx)("p",{className:"login-subtitle",children:"Virtual Sport"})]}),Object(O.jsxs)("div",{className:"login-body",children:[Object(O.jsx)("div",{className:"columns",children:Object(O.jsxs)("div",{className:"column is-12",children:[Object(O.jsx)(y,{onChange:this.handleChannel,placeholder:"Input a room name here"}),Object(O.jsx)("input",{className:"ag-rounded input name-input",value:this.state.username,onChange:function(t){return e.handleName(t.target.value)},placeholder:"Input name here",label:"input name here"})]})}),Object(O.jsxs)("div",{className:"columns",children:[Object(O.jsx)("div",{className:"column is-7",children:Object(O.jsx)(N,{onChange:function(t){return e.setState({baseMode:t})}})}),Object(O.jsx)("div",{className:"column is-5",children:Object(O.jsx)(S,{onRadioChange:function(t){return e.setState({transcode:t})},onSelectChange:function(t){return e.setState({videoProfile:t})}})})]}),Object(O.jsx)("div",{className:"columns",children:Object(O.jsx)("div",{className:"column",children:Object(O.jsxs)("div",{id:"attendeeMode",className:"control",children:[Object(O.jsxs)("label",{className:"radio",children:[Object(O.jsx)("input",{onChange:function(t){return e.setState({attendeeMode:t.target.value})},value:"video",type:"radio",name:"attendee",defaultChecked:!0}),Object(O.jsx)("span",{className:"radio-btn"}),Object(O.jsx)("span",{className:"radio-img video"}),Object(O.jsx)("span",{className:"radio-msg",children:"Video Call : join with video call"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{className:"radio",children:[Object(O.jsx)("input",{onChange:function(t){return e.setState({attendeeMode:t.target.value})},value:"audio-only",type:"radio",name:"attendee"}),Object(O.jsx)("span",{className:"radio-btn"}),Object(O.jsx)("span",{className:"radio-img audio"}),Object(O.jsx)("span",{className:"radio-msg",children:"Audio-only : join with audio call"})]}),Object(O.jsx)("br",{}),Object(O.jsxs)("label",{className:"radio",children:[Object(O.jsx)("input",{onChange:function(t){return e.setState({attendeeMode:t.target.value})},value:"audience",type:"radio",name:"attendee"}),Object(O.jsx)("span",{className:"radio-btn"}),Object(O.jsx)("span",{className:"radio-img audience"}),Object(O.jsx)("span",{className:"radio-msg",children:"Audience : join as an audience"})]})]})})})]}),Object(O.jsx)("div",{className:"login-footer",children:Object(O.jsx)("button",{id:"joinBtn",onClick:this.handleJoin,disabled:!this.state.joinBtn,className:"ag-rounded button is-info",children:"Join"})})]})}),Object(O.jsxs)("div",{className:"ag-footer",children:[Object(O.jsx)("a",{className:"ag-href",href:"https://www.agora.io",children:Object(O.jsx)("span",{children:"BeActive"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("span",{children:"contact BeActive "}),Object(O.jsx)("span",{className:"ag-contact",children:"support@beactive.com"})]})]})]})}}]),a}(s.a.Component),y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).validate=function(e){return a.setState({state:"",errorMsg:""}),g(e.trim())?(a.setState({errorMsg:"Cannot be empty!",state:"is-danger"}),!1):b(e.trim(),1)?(a.setState({errorMsg:"No shorter than 1!",state:"is-danger"}),!1):j(e.trim(),16)?(a.setState({errorMsg:"No longer than 16!",state:"is-danger"}),!1):m(e.trim())?(a.setState({state:"is-danger",errorMsg:'Only capital or lower-case letter, number and "_" are permitted!'}),!1):(a.setState({state:"is-success"}),!0)},a.handleChange=function(e){var t=a.validate(e.target.value);a.props.onChange(e.target.value,t)},a.state={errorMsg:"",state:""},a}return Object(o.a)(n,[{key:"render",value:function(){var e="";switch(this.state.state){default:case"":e="";break;case"is-success":e=Object(O.jsx)("i",{className:"ag-icon ag-icon-valid"});break;case"is-danger":e=Object(O.jsx)("i",{className:"ag-icon ag-icon-invalid"})}return Object(O.jsxs)("div",{className:"channel-wrapper control has-icons-left",children:[Object(O.jsx)("input",{onInput:this.handleChange,id:"channel",className:"ag-rounded input "+this.state.state,type:"text",placeholder:this.props.placeholder}),Object(O.jsx)("span",{className:"icon is-small is-left",children:Object(O.jsx)("img",{src:a(54),alt:""})}),Object(O.jsx)("span",{className:"validate-icon",children:e}),Object(O.jsx)("div",{className:"validate-msg",children:this.state.errorMsg})]})}}]),n}(s.a.Component),N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSelect=function(e){var t=e.label,a=e.value;n.setState({message:t,active:!1}),n.props.onChange(a)},n._options=[{label:"Agora Video Call",value:"avc",content:"One to one and group calls"},{label:"Agora Live",value:"al",content:"Enabling real-time interactions between the host and the audience"}],n.state={active:!1,message:"Agora Video Call"},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this._options.map((function(t,a){return Object(O.jsxs)("div",{className:"dropdown-item",onClick:function(a){return e.handleSelect(t,a)},children:[Object(O.jsx)("p",{children:t.label}),Object(O.jsx)("hr",{}),Object(O.jsx)("p",{children:t.content})]},a)}));return Object(O.jsxs)("div",{className:this.state.active?"dropdown is-active":"dropdown",children:[Object(O.jsx)("div",{className:"dropdown-trigger",onClick:function(){return e.setState({active:!e.state.active})},children:Object(O.jsxs)("button",{id:"baseMode",className:"ag-rounded button","aria-haspopup":"true","aria-controls":"baseModeOptions",children:[Object(O.jsx)("span",{id:"baseOptionLabel",children:this.state.message}),Object(O.jsx)("span",{className:"icon is-small",children:Object(O.jsx)("i",{className:"ag-icon ag-icon-arrow-down","aria-hidden":"true"})})]})}),Object(O.jsx)("div",{className:"dropdown-menu",id:"baseModeOptions",role:"menu",children:Object(O.jsx)("div",{className:"dropdown-content",children:t})})]})}}]),a}(s.a.Component),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleRadio=function(e){n.props.onRadioChange(e.target.value)},n.handleSelect=function(e){n.props.onSelectChange(e.target.value)},n.state={active:!1},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=Object.entries(v).map((function(e,t){return Object(O.jsxs)("option",{value:e[0].split(",")[0],children:[e[1][0],"x ",e[1][1],", ",e[1][2],"fps, ",e[1][3],"kbps"]},t)}));return Object(O.jsxs)("div",{className:this.state.active?"dropdown is-active":"dropdown",children:[Object(O.jsx)("div",{className:"dropdown-trigger",onClick:function(){return e.setState({active:!e.state.active})},children:Object(O.jsx)("button",{id:"advancedProfile",className:"ag-rounded button","aria-haspopup":"true","aria-controls":"advancedOptions",children:Object(O.jsx)("span",{children:"Advanced"})})}),Object(O.jsx)("div",{className:"dropdown-menu",id:"advancedOptions",role:"menu",children:Object(O.jsxs)("div",{className:"dropdown-content",children:[Object(O.jsx)("div",{className:"dropdown-item",children:Object(O.jsxs)("div",{className:"control",children:[Object(O.jsxs)("label",{className:"radio",children:[Object(O.jsx)("input",{value:"",type:"radio",name:"transcode",onChange:this.handleRadio}),Object(O.jsx)("span",{children:"VP8-only"})]}),Object(O.jsxs)("label",{className:"radio",children:[Object(O.jsx)("input",{value:"interop",type:"radio",defaultChecked:!0,onChange:this.handleRadio,name:"transcode"}),Object(O.jsx)("span",{children:"VP8 & H264"})]}),Object(O.jsxs)("label",{className:"radio",children:[Object(O.jsx)("input",{value:"h264_interop",type:"radio",onChange:this.handleRadio,name:"transcode"}),Object(O.jsx)("span",{children:"H264-only"})]})]})}),Object(O.jsx)("div",{className:"dropdown-item",children:Object(O.jsx)("div",{className:"select is-rounded",children:Object(O.jsx)("select",{onChange:this.handleSelect,defaultValue:"480p_4",id:"videoProfile",className:"ag-rounded is-clipped",children:t})})})]})})]})}}]),a}(s.a.Component),w=x,_=a(26),C=a(22),M=(a(55),a(40)),k=a(34),A=a(18),L=a(3),T=a.n(L),I=a(7),B=a(19),E=a(8),P=a.n(E),R=a(15),D=a(17);function J(e){return Object(O.jsxs)("div",{className:P.a.chat_wrapper,children:[Object(O.jsx)("div",{className:P.a.bubble_holder,children:e.chat.map((function(e,t){return Object(O.jsx)("div",{className:P.a.bubble,children:e},t)}))}),Object(O.jsx)("div",{className:P.a.text_field,children:Object(O.jsxs)("form",{onSubmit:function(t){e.sendChannelMessage(t,e.chatText)},children:[Object(O.jsx)("input",{required:!0,placeholder:"send message...",className:P.a.text_input,value:e.chatText,onChange:function(t){return e.setChatText(t.target.value)}}),Object(O.jsx)("button",{type:"submit",className:P.a.send_text,children:Object(O.jsx)(R.a,{icon:D.a})})]})})]})}var U=a(42),V=a.n(U),q=a(43),G=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).channels={},e._logined=!1,e}return Object(o.a)(a,[{key:"init",value:function(e){this.client=V.a.createInstance(e),this.subscribeClientEvents()}},{key:"subscribeClientEvents",value:function(){var e=this;this.setMaxListeners(0);["ConnectionStateChanged","MessageFromPeer"].forEach((function(t){e.client.on(t,(function(){for(var a,n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];(a=console).log.apply(a,["emit ",t].concat(s)),e.emit.apply(e,[t].concat(s))}))}))}},{key:"subscribeChannelEvents",value:function(e){var t=this;this.setMaxListeners(0);["ChannelMessage","MemberJoined","MemberLeft"].forEach((function(a){t.channels[e].channel.on(a,(function(){for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];console.log("emit ",a,s),t.emit(a,{channelName:e,args:s})}))}))}},{key:"login",value:function(){var e=Object(I.a)(T.a.mark((function e(t,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.accountName=t,e.abrupt("return",this.client.login({uid:this.accountName,token:a}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(I.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.logout());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinChannel",value:function(){var e=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("joinChannel",t),a=this.client.createChannel(t),this.channels[t]={channel:a,joined:!1},this.subscribeChannelEvents(t),e.abrupt("return",a.join());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"leaveChannel",value:function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("leaveChannel",t),this.channels[t]&&(!this.channels[t]||this.channels[t].joined)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.channels[t].channel.leave());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendChannelMessage",value:function(){var e=Object(I.a)(T.a.mark((function e(t,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setMaxListeners(0),this.channels[a]&&this.channels[a].joined){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.channels[a].channel.sendMessage({text:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sendPeerMessage",value:function(){var e=Object(I.a)(T.a.mark((function e(t,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendPeerMessage",t,a),e.abrupt("return",this.client.sendMessageToPeer({text:t},a.toString()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("queryPeersOnlineStatus",t),e.abrupt("return",this.client.queryPeersOnlineStatus([t]));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(a.n(q).a),z=a(31),F=a.p+"static/media/notification.90bb8c38.mp3",H=a.p+"static/media/sendMessage.8515d2a4.mp3";function Q(e){var t=Object(n.useRef)(new G),a=Object(n.useState)([]),s=Object(B.a)(a,2),c=s[0],i=s[1],r=Object(n.useState)(""),o=Object(B.a)(r,2),l=o[0],d=o[1],u=Object(n.useState)(!1),h=Object(B.a)(u,2),b=(h[0],h[1]),j=Object(n.useState)(!1),m=Object(B.a)(j,2),g=(m[0],m[1]),v=Object(z.a)(F,{volume:.5}),f=Object(B.a)(v,1)[0],x=Object(z.a)(H),y=Object(B.a)(x,1)[0],N=e.data;N.name=p.get("username"),Object(n.useEffect)((function(){function e(){return(e=Object(I.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),t.current.on("ConnectionStateChanged",(function(e,t){console.log("reason:",t)})),t.current.on("MemberJoined",(function(e){var t=e.channelName,a=e.args[0];console.log("channel:",t,"member joined:",a);var n=Object(O.jsx)("div",{className:P.a.chat_bubble,children:"".concat(a," joined channel ").concat(t)});i([].concat(Object(A.a)(c),[n]))})),t.current.on("MemberLeft",(function(e){var t=e.channelName,a=e.args[0];console.log("channel:",t,"member left:",a);var n=Object(O.jsx)("div",{className:P.a.chat_bubble,children:"".concat(a," left channel ").concat(t)});i([].concat(Object(A.a)(c),[n]))})),t.current.on("ChannelMessage",function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,s,r,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.channelName,a=t.args,n=Object(B.a)(a,2),s=n[0],r=n[1],o=Object(O.jsxs)("div",{className:P.a.chat_bubble,children:[Object(O.jsx)("span",{children:"".concat(r,": ")}),"".concat(s.text)]}),i([].concat(Object(A.a)(c),[o])),f();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var S=function(){var e=Object(I.a)(T.a.mark((function e(a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current._logined){e.next=2;break}return e.abrupt("return");case 2:try{t.current.init(N.appId),t.current.login(N.name,N.token).then(Object(I.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current._logined=!0,b(!0),e.next=4,w();case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e)}))}catch(a){alert("login failed"),console.log(a)}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(I.a)(T.a.mark((function e(a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.current.channels[N.channelName]||t.current.channels[N.channelName]&&t.current.channels[N.channelName].joined)){e.next=3;break}return console.log("you already joined"),e.abrupt("return");case 3:t.current.joinChannel(N.channelName).then((function(){var e=Object(O.jsx)("div",{className:P.a.chat_bubble,children:"".concat(t.current.accountName," joined ").concat([N.channelName])});i([].concat(Object(A.a)(c),[e])),g(!0),t.current.channels[N.channelName].joined=!0})).catch((function(e){alert("joining channel failed"),console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(J,Object(k.a)(Object(k.a)({},e),{},{chat:c,login:S,logout:function(e){t.current._logined&&t.current.logout().then((function(){t.current._logined=!1,b(!1)})).catch((function(e){alert("Logout failed"),console.log(e)}))},join:w,leave:function(e){t.current._logined||alert("login first"),(!t.current.channels[N.channelName]||t.current.channels[N.channelName]&&!t.current.channels[N.channelName].joined)&&alert("You already left"),t.current.leaveChannel(N.name).then((function(){var e=Object(O.jsx)("div",{className:P.a.chat_bubble,children:"".concat(t.current.accountName," joined ").concat(t.current.channels[N.channelName])});i([].concat(Object(A.a)(c),[e])),t.current.channels[N.channelName].joined=!1,t.current.channels[N.channelName]=null})).catch((function(e){alert("leaving channel failed"),console.log(e)}))},sendChannelMessage:function(e,a){e.preventDefault(),t.current._logined&&((!t.current.channels[N.channelName]||t.current.channels[N.channelName]&&!t.current.channels[N.channelName].joined)&&w(),t.current.sendChannelMessage(a,N.channelName).then((function(){var e=Object(O.jsxs)("div",{className:P.a.chat_bubble,children:[Object(O.jsx)("span",{children:"".concat(t.current.accountName,": ")}),"".concat(a)]});i([].concat(Object(A.a)(c),[e])),y(),d("")})).catch((function(e){alert("sending message failed,"),console.log(e)})))},chatText:l,setChatText:d,rtm:t.current,data:N}))}var W=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).videoProfile=p.get("videoProfile").split(",")[0]||"480p_4",n.channel=p.get("channel")||"test",n.transcode=p.get("transcode")||"interop",n.attendeeMode=p.get("attendeeMode")||"video",n.baseMode=p.get("baseMode")||"avc",n.appId="7e7e37eef70144dfb2941c2408a3e4de",n.appId?(n.uid=void 0,n.token=void 0,n.chatToggle=n.chatToggle.bind(Object(C.a)(n)),n.state={chatToggle:!1},n):Object(_.a)(n,alert("Get App ID first!"))}return Object(o.a)(a,[{key:"chatToggle",value:function(){this.setState({chatToggle:!this.state.chatToggle})}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"wrapper meeting",children:[Object(O.jsxs)("div",{className:"ag-header",children:[Object(O.jsx)("div",{className:"ag-header-lead",children:Object(O.jsx)("img",{className:"header-logo",src:f,alt:"logo"})}),Object(O.jsxs)("div",{className:"ag-header-msg",children:["Room:\xa0",Object(O.jsx)("span",{id:"room-name",children:this.channel})]})]}),Object(O.jsxs)("div",{className:"ag-content",children:[Object(O.jsx)("div",{className:"ag-main",children:Object(O.jsx)("div",{className:"ag-container",children:Object(O.jsx)(M.a,{videoProfile:this.videoProfile,channel:this.channel,transcode:this.transcode,attendeeMode:this.attendeeMode,baseMode:this.baseMode,appId:this.appId,uid:this.uid,chat:(this.channel,this.appId),chatToggle:this.chatToggle})})}),Object(O.jsx)("div",{className:"ag-side",style:this.state.chatToggle?{display:"block"}:{display:"none"},children:Object(O.jsx)(Q,{data:{appId:this.appId,channelName:this.channel,token:this.token}})})]}),Object(O.jsxs)("div",{className:"ag-footer",children:[Object(O.jsx)("a",{className:"ag-href",href:"https://www.agora.io",children:Object(O.jsx)("span",{children:"BeActive 2021"})}),Object(O.jsx)("span",{children:"Talk to Support: 88888888"})]})]})}}]),a}(s.a.Component),Z=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(O.jsx)(u.a,{children:Object(O.jsxs)("div",{className:"full",children:[Object(O.jsx)(h.a,{exact:!0,path:"/",component:w}),Object(O.jsx)(h.a,{path:"/meeting",component:W})]})})}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),a=t.length,n=new Array(a);a--;)n[a]=[t[a],e[t[a]]];return n});i.a.render(Object(O.jsx)(Z,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},8:function(e,t,a){e.exports={chat_wrapper:"AgoraRTMStyle_chat_wrapper__3eguz",bubble_holder:"AgoraRTMStyle_bubble_holder__26O3R",text_field:"AgoraRTMStyle_text_field__3U7SZ",text_input:"AgoraRTMStyle_text_input__2NqlO",send_text:"AgoraRTMStyle_send_text__3elnJ",bubble:"AgoraRTMStyle_bubble__3MORM"}}},[[64,1,2]]]);
//# sourceMappingURL=main.6b1d07ab.chunk.js.map