/*! For license information please see 2.f739a517.chunk.js.LICENSE.txt */
(this.webpackJsonpbeactive=this.webpackJsonpbeactive||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(53)},function(e,t,n){"use strict";e.exports=n(46)},function(e,t,n){e.exports=n(59)()},function(e,t,n){e.exports=n(61)},function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return y}));var r=n(14),i=n(1),o=n.n(i),a=(n(2),n(16)),s=n(32),u=n(13),c=n(5),l=n(33),d=n.n(l),f=(n(38),n(21)),p=(n(45),function(e){var t=Object(s.a)();return t.displayName=e,t}("Router-History")),h=function(e){var t=Object(s.a)();return t.displayName=e,t}("Router"),v=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(h.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(p.Provider,{children:this.props.children||null,value:this.props.history}))},t}(o.a.Component);o.a.Component;o.a.Component;var g={},m=0;function y(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=g[n]||(g[n]={});if(r[e])return r[e];var i=[],o={regexp:d()(e,i,t),keys:i};return m<1e4&&(r[e]=o,m++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),p=e===l;return o&&!p?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:p,params:a.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var b=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(h.Consumer,null,(function(t){t||Object(u.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?y(n.pathname,e.props):t.match,i=Object(c.a)({},t,{location:n,match:r}),a=e.props,s=a.children,l=a.component,d=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(h.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:l?o.a.createElement(l,i):d?d(i):null:"function"===typeof s?s(i):null)}))},t}(o.a.Component);function _(e){return"/"===e.charAt(0)?e:"/"+e}function E(e,t){if(!e)return t;var n=_(e);return 0!==t.pathname.indexOf(n)?t:Object(c.a)({},t,{pathname:t.pathname.substr(n.length)})}function w(e){return"string"===typeof e?e:Object(a.e)(e)}function S(e){return function(){Object(u.a)(!1)}}function I(){}o.a.Component;o.a.Component;o.a.useContext},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){var r,i;!function(o){if(void 0===(i="function"===typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var a=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!==typeof document){"number"===typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(c){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,!0!==o[u]&&(s+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!==typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(l){}if(i[c]=u,e===c)break}catch(l){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return i}))},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return o}));var i=n(26);function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";var r="Invariant failed";t.a=function(e,t){if(!e)throw new Error(r)}},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(24),i=n(2),o=n.n(i),a=n(1),s=n.n(a);function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function v(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=h(t.slice(0,r)),o=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[i]=o,e}),{})}var g=!1;try{g=!0}catch(E){}function m(e){return r.b.icon?r.b.icon(e):null===e?null:"object"===u(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function y(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?c({},e,t):{}}function b(e){var t=e.forwardedRef,n=f(e,["forwardedRef"]),i=n.icon,o=n.mask,a=n.symbol,s=n.className,u=n.title,l=n.titleId,h=m(i),v=y("classes",[].concat(p(function(e){var t,n=e.spin,r=e.pulse,i=e.fixedWidth,o=e.inverse,a=e.border,s=e.listItem,u=e.flip,l=e.size,d=e.rotation,f=e.pull,p=(c(t={"fa-spin":n,"fa-pulse":r,"fa-fw":i,"fa-inverse":o,"fa-border":a,"fa-li":s,"fa-flip-horizontal":"horizontal"===u||"both"===u,"fa-flip-vertical":"vertical"===u||"both"===u},"fa-".concat(l),"undefined"!==typeof l&&null!==l),c(t,"fa-rotate-".concat(d),"undefined"!==typeof d&&null!==d&&0!==d),c(t,"fa-pull-".concat(f),"undefined"!==typeof f&&null!==f),c(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(p).map((function(e){return p[e]?e:null})).filter((function(e){return e}))}(n)),p(s.split(" ")))),E=y("transform","string"===typeof n.transform?r.b.transform(n.transform):n.transform),w=y("mask",m(o)),S=Object(r.a)(h,d({},v,{},E,{},w,{symbol:a,title:u,titleId:l}));if(!S)return function(){var e;!g&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",h),null;var I=S.abstract,O={ref:t};return Object.keys(n).forEach((function(e){b.defaultProps.hasOwnProperty(e)||(O[e]=n[e])})),_(I[0],O)}b.displayName="FontAwesomeIcon",b.propTypes={border:o.a.bool,className:o.a.string,mask:o.a.oneOfType([o.a.object,o.a.array,o.a.string]),fixedWidth:o.a.bool,inverse:o.a.bool,flip:o.a.oneOf(["horizontal","vertical","both"]),icon:o.a.oneOfType([o.a.object,o.a.array,o.a.string]),listItem:o.a.bool,pull:o.a.oneOf(["right","left"]),pulse:o.a.bool,rotation:o.a.oneOf([0,90,180,270]),size:o.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:o.a.bool,symbol:o.a.oneOfType([o.a.bool,o.a.string]),title:o.a.string,transform:o.a.oneOfType([o.a.string,o.a.object]),swapOpacity:o.a.bool},b.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var _=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=v(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[h(t)]=r}return e}),{attrs:{}}),a=r.style,s=void 0===a?{}:a,u=f(r,["style"]);return o.attrs.style=d({},o.attrs.style,{},s),t.apply(void 0,[n.tag,d({},o.attrs,{},u)].concat(p(i)))}.bind(null,s.a.createElement)},function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return N})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return h}));var r=n(5);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var a=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&i(e),u=t&&i(t),c=s||u;if(e&&i(e)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var d=0,f=a.length;f>=0;f--){var p=a[f];"."===p?o(a,f):".."===p?(o(a,f),d++):d&&(o(a,f),d--)}if(!c)for(;d--;d)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var h=a.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=s(t),i=s(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(13);function l(e){return"/"===e.charAt(0)?e:"/"+e}function d(e){return"/"===e.charAt(0)?e.substr(1):e}function f(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function p(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function h(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(e,t,n,i){var o;"string"===typeof e?(o=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(o=Object(r.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function g(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function m(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var y=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}var _="popstate",E="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function S(e){void 0===e&&(e={}),y||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,d=void 0===u?b:u,g=o.keyLength,S=void 0===g?6:g,I=e.basename?p(l(e.basename)):"";function O(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return I&&(o=f(o,I)),v(o,r,n)}function T(){return Math.random().toString(36).substr(2,S)}var A=m();function R(e){Object(r.a)(B,e),B.length=t.length,A.notifyListeners(B.location,B.action)}function k(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||x(O(e.state))}function C(){x(O(w()))}var N=!1;function x(e){if(N)N=!1,R();else{A.confirmTransitionTo(e,"POP",d,(function(t){t?R({action:"POP",location:e}):function(e){var t=B.location,n=P.indexOf(t.key);-1===n&&(n=0);var r=P.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,M(i))}(e)}))}}var L=O(w()),P=[L.key];function D(e){return I+h(e)}function M(e){t.go(e)}var j=0;function U(e){1===(j+=e)&&1===e?(window.addEventListener(_,k),i&&window.addEventListener(E,C)):0===j&&(window.removeEventListener(_,k),i&&window.removeEventListener(E,C))}var F=!1;var B={length:t.length,action:"POP",location:L,createHref:D,push:function(e,r){var i="PUSH",o=v(e,r,T(),B.location);A.confirmTransitionTo(o,i,d,(function(e){if(e){var r=D(o),a=o.key,u=o.state;if(n)if(t.pushState({key:a,state:u},null,r),s)window.location.href=r;else{var c=P.indexOf(B.location.key),l=P.slice(0,c+1);l.push(o.key),P=l,R({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=v(e,r,T(),B.location);A.confirmTransitionTo(o,i,d,(function(e){if(e){var r=D(o),a=o.key,u=o.state;if(n)if(t.replaceState({key:a,state:u},null,r),s)window.location.replace(r);else{var c=P.indexOf(B.location.key);-1!==c&&(P[c]=o.key),R({action:i,location:o})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=A.appendListener(e);return U(1),function(){U(-1),t()}}};return B}var I="hashchange",O={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:d,decodePath:l},slash:{encodePath:l,decodePath:l}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function A(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function R(e){window.location.replace(T(window.location.href)+"#"+e)}function k(e){void 0===e&&(e={}),y||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?b:i,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?p(l(e.basename)):"",d=O[s],g=d.encodePath,_=d.decodePath;function E(){var e=_(A());return u&&(e=f(e,u)),v(e)}var w=m();function S(e){Object(r.a)(B,e),B.length=t.length,w.notifyListeners(B.location,B.action)}var k=!1,C=null;function N(){var e,t,n=A(),r=g(n);if(n!==r)R(r);else{var i=E(),a=B.location;if(!k&&(t=i,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(C===h(i))return;C=null,function(e){if(k)k=!1,S();else{var t="POP";w.confirmTransitionTo(e,t,o,(function(n){n?S({action:t,location:e}):function(e){var t=B.location,n=D.lastIndexOf(h(t));-1===n&&(n=0);var r=D.lastIndexOf(h(e));-1===r&&(r=0);var i=n-r;i&&(k=!0,M(i))}(e)}))}}(i)}}var x=A(),L=g(x);x!==L&&R(L);var P=E(),D=[h(P)];function M(e){t.go(e)}var j=0;function U(e){1===(j+=e)&&1===e?window.addEventListener(I,N):0===j&&window.removeEventListener(I,N)}var F=!1;var B={length:t.length,action:"POP",location:P,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+g(u+h(e))},push:function(e,t){var n="PUSH",r=v(e,void 0,void 0,B.location);w.confirmTransitionTo(r,n,o,(function(e){if(e){var t=h(r),i=g(u+t);if(A()!==i){C=t,function(e){window.location.hash=e}(i);var o=D.lastIndexOf(h(B.location)),a=D.slice(0,o+1);a.push(t),D=a,S({action:n,location:r})}else S()}}))},replace:function(e,t){var n="REPLACE",r=v(e,void 0,void 0,B.location);w.confirmTransitionTo(r,n,o,(function(e){if(e){var t=h(r),i=g(u+t);A()!==i&&(C=t,R(i));var o=D.indexOf(h(B.location));-1!==o&&(D[o]=t),S({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=w.setPrompt(e);return F||(U(1),F=!0),function(){return F&&(F=!1,U(-1)),t()}},listen:function(e){var t=w.appendListener(e);return U(1),function(){U(-1),t()}}};return B}function C(e,t,n){return Math.min(Math.max(e,t),n)}function N(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,a=t.initialIndex,s=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=m();function d(e){Object(r.a)(_,e),_.length=_.entries.length,l.notifyListeners(_.location,_.action)}function f(){return Math.random().toString(36).substr(2,c)}var p=C(s,0,o.length-1),g=o.map((function(e){return v(e,void 0,"string"===typeof e?f():e.key||f())})),y=h;function b(e){var t=C(_.index+e,0,_.entries.length-1),r=_.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?d({action:"POP",location:r,index:t}):d()}))}var _={length:g.length,action:"POP",location:g[p],index:p,entries:g,createHref:y,push:function(e,t){var r="PUSH",i=v(e,t,f(),_.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),d({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=v(e,t,f(),_.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(_.entries[_.index]=i,d({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return _}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l}));var r={prefix:"fas",iconName:"arrow-right",icon:[448,512,[],"f061","M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"]},i={prefix:"fas",iconName:"microphone-alt",icon:[352,512,[],"f3c9","M336 192h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16zM176 352c53.02 0 96-42.98 96-96h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H272c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96z"]},o={prefix:"fas",iconName:"microphone-alt-slash",icon:[640,512,[],"f539","M633.82 458.1L476.26 336.33C488.74 312.21 496 284.98 496 256v-48c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v48c0 17.92-3.96 34.8-10.72 50.2l-26.55-20.52c3.1-9.4 5.28-19.22 5.28-29.67h-43.67l-41.4-32H416v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H416v-32h-85.33c-5.89 0-10.67-3.58-10.67-8v-16c0-4.42 4.78-8 10.67-8H416c0-53.02-42.98-96-96-96s-96 42.98-96 96v45.36L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.36 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.41-6.97 4.16-17.02-2.82-22.45zM400 464h-56v-33.78c11.71-1.62 23.1-4.28 33.96-8.08l-50.4-38.96c-6.71.4-13.41.87-20.35.2-55.85-5.45-98.74-48.63-111.18-101.85L144 241.31v6.85c0 89.64 63.97 169.55 152 181.69V464h-56c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16z"]},a={prefix:"fas",iconName:"phone-slash",icon:[640,512,[],"f3dd","M268.2 381.4l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48c-10.7 4.6-16.5 16.1-13.9 27.5l24 104c2.5 10.8 12.1 18.6 23.4 18.6 100.7 0 193.7-32.4 269.7-86.9l-80-61.8c-10.9 6.5-22.1 12.7-33.6 18.1zm365.6 76.7L475.1 335.5C537.9 256.4 576 156.9 576 48c0-11.2-7.7-20.9-18.6-23.4l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-12.2 26.1-27.9 50.3-46 72.8L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4l588.4 454.7c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.4-6.8 4.1-16.9-2.9-22.3z"]},s={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"]},u={prefix:"fas",iconName:"users-slash",icon:[640,512,[],"e073","M132.65,212.32,36.21,137.78A63.4,63.4,0,0,0,32,160a63.84,63.84,0,0,0,100.65,52.32Zm40.44,62.28A63.79,63.79,0,0,0,128,256H64A64.06,64.06,0,0,0,0,320v32a32,32,0,0,0,32,32H97.91A146.62,146.62,0,0,1,173.09,274.6ZM544,224a64,64,0,1,0-64-64A64.06,64.06,0,0,0,544,224ZM500.56,355.11a114.24,114.24,0,0,0-84.47-65.28L361,247.23c41.46-16.3,71-55.92,71-103.23A111.93,111.93,0,0,0,320,32c-57.14,0-103.69,42.83-110.6,98.08L45.46,3.38A16,16,0,0,0,23,6.19L3.37,31.46A16,16,0,0,0,6.18,53.91L594.53,508.63A16,16,0,0,0,617,505.82l19.64-25.27a16,16,0,0,0-2.81-22.45ZM128,403.21V432a48,48,0,0,0,48,48H464a47.45,47.45,0,0,0,12.57-1.87L232,289.13C173.74,294.83,128,343.42,128,403.21ZM576,256H512a63.79,63.79,0,0,0-45.09,18.6A146.29,146.29,0,0,1,542,384h66a32,32,0,0,0,32-32V320A64.06,64.06,0,0,0,576,256Z"]},c={prefix:"fas",iconName:"video",icon:[576,512,[],"f03d","M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"]},l={prefix:"fas",iconName:"video-slash",icon:[640,512,[],"f4e2","M633.8 458.1l-55-42.5c15.4-1.4 29.2-13.7 29.2-31.1v-257c0-25.5-29.1-40.4-50.4-25.8L448 177.3v137.2l-32-24.7v-178c0-26.4-21.4-47.8-47.8-47.8H123.9L45.5 3.4C38.5-2 28.5-.8 23 6.2L3.4 31.4c-5.4 7-4.2 17 2.8 22.4L42.7 82 416 370.6l178.5 138c7 5.4 17 4.2 22.5-2.8l19.6-25.3c5.5-6.9 4.2-17-2.8-22.4zM32 400.2c0 26.4 21.4 47.8 47.8 47.8h288.4c11.2 0 21.4-4 29.6-10.5L32 154.7v245.5z"]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(23);var i=n(25);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(i.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(25);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(err){i=!0,o=err}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e,r){function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(err){i=!0,o=err}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return Ce})),n.d(t,"b",(function(){return ke}));var c=function(){},l={},d={},f={mark:c,measure:c};try{"undefined"!==typeof window&&(l=window),"undefined"!==typeof document&&(d=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(f=performance)}catch(Ne){}var p=(l.navigator||{}).userAgent,h=void 0===p?"":p,v=l,g=d,m=f,y=(v.document,!!g.documentElement&&!!g.head&&"function"===typeof g.addEventListener&&"function"===typeof g.createElement),b=(~h.indexOf("MSIE")||h.indexOf("Trident/"),"svg-inline--fa"),_="data-fa-i2svg",E=(function(){try{}catch(Ne){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),w=E.concat([11,12,13,14,15,16,17,18,19,20]),S={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},I=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",S.GROUP,S.SWAP_OPACITY,S.PRIMARY,S.SECONDARY].concat(E.map((function(e){return"".concat(e,"x")}))).concat(w.map((function(e){return"w-".concat(e)}))),v.FontAwesomeConfig||{});if(g&&"function"===typeof g.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=u(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=g.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(I[r]=i)}))}var O=s({},{familyPrefix:"fa",replacementClass:b,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},I);O.autoReplaceSvg||(O.observeMutations=!1);var T=s({},O);v.FontAwesomeConfig=T;var A=v||{};A.___FONT_AWESOME___||(A.___FONT_AWESOME___={}),A.___FONT_AWESOME___.styles||(A.___FONT_AWESOME___.styles={}),A.___FONT_AWESOME___.hooks||(A.___FONT_AWESOME___.hooks={}),A.___FONT_AWESOME___.shims||(A.___FONT_AWESOME___.shims=[]);var R=A.___FONT_AWESOME___,k=[];y&&((g.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(g.readyState)||g.addEventListener("DOMContentLoaded",(function e(){g.removeEventListener("DOMContentLoaded",e),1,k.map((function(e){return e()}))})));var C,N="pending",x="settled",L="fulfilled",P="rejected",D=function(){},M="undefined"!==typeof e&&"undefined"!==typeof e.process&&"function"===typeof e.process.emit,j="undefined"===typeof r?setTimeout:r,U=[];function F(){for(var e=0;e<U.length;e++)U[e][0](U[e][1]);U=[],C=!1}function B(e,t){U.push([e,t]),C||(C=!0,j(F,0))}function q(e){var t=e.owner,n=t._state,r=t._data,i=e[n],o=e.then;if("function"===typeof i){n=L;try{r=i(r)}catch(Ne){H(o,Ne)}}V(o,r)||(n===L&&G(o,r),n===P&&H(o,r))}function V(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===i(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?z(e,r):G(e,r))}),(function(t){n||(n=!0,H(e,t))})),!0}}catch(Ne){return n||H(e,Ne),!0}return!1}function G(e,t){e!==t&&V(e,t)||z(e,t)}function z(e,t){e._state===N&&(e._state=x,e._data=t,B(K,e))}function H(e,t){e._state===N&&(e._state=x,e._data=t,B(J,e))}function W(e){e._then=e._then.forEach(q)}function K(e){e._state=L,W(e)}function J(t){t._state=P,W(t),!t._handled&&M&&e.process.emit("unhandledRejection",t._data,t)}function Y(t){e.process.emit("rejectionHandled",t)}function $(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof $===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){H(t,e)}try{e((function(e){G(t,e)}),n)}catch(Ne){n(Ne)}}(e,this)}$.prototype={constructor:$,_state:N,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(D),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===P&&M&&B(Y,this)),this._state===L||this._state===P?B(q,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},$.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new $((function(t,n){var r=[],i=0;function o(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var a,s=0;s<e.length;s++)(a=e[s])&&"function"===typeof a.then?a.then(o(s),n):r[s]=a;i||t(r)}))},$.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new $((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},$.resolve=function(e){return e&&"object"===i(e)&&e.constructor===$?e:new $((function(t){t(e)}))},$.reject=function(e){return new $((function(t,n){n(e)}))};var Q={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function X(e){if(e&&y){var t=g.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=g.head.childNodes,r=null,i=n.length-1;i>-1;i--){var o=n[i],a=(o.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=o)}return g.head.insertBefore(t,r),e}}function Z(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function ee(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function te(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function ne(e){return e.size!==Q.size||e.x!==Q.x||e.y!==Q.y||e.rotate!==Q.rotate||e.flipX||e.flipY}function re(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},o="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(o," ").concat(a," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var ie={x:0,y:0,width:"100%",height:"100%"};function oe(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function ae(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,o=e.iconName,a=e.transform,u=e.symbol,c=e.title,l=e.maskId,d=e.titleId,f=e.extra,p=e.watchable,h=void 0!==p&&p,v=r.found?r:n,g=v.width,m=v.height,y="fak"===i,b=y?"":"fa-w-".concat(Math.ceil(g/m*16)),E=[T.replacementClass,o?"".concat(T.familyPrefix,"-").concat(o):"",b].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),w={children:[],attributes:s({},f.attributes,{"data-prefix":i,"data-icon":o,class:E,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},S=y&&!~f.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};h&&(w.attributes[_]=""),c&&w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(d||Z())},children:[c]});var I=s({},w,{prefix:i,iconName:o,main:n,mask:r,maskId:l,transform:a,symbol:u,styles:s({},S,f.styles)}),O=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,o=e.mask,a=e.maskId,u=e.transform,c=i.width,l=i.icon,d=o.width,f=o.icon,p=re({transform:u,containerWidth:d,iconWidth:c}),h={tag:"rect",attributes:s({},ie,{fill:"white"})},v=l.children?{children:l.children.map(oe)}:{},g={tag:"g",attributes:s({},p.inner),children:[oe(s({tag:l.tag,attributes:s({},l.attributes,p.path)},v))]},m={tag:"g",attributes:s({},p.outer),children:[g]},y="mask-".concat(a||Z()),b="clip-".concat(a||Z()),_={tag:"mask",attributes:s({},ie,{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,m]},E={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:(t=f,"g"===t.tag?t.children:[t])},_]};return n.push(E,{tag:"rect",attributes:s({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(y,")")},ie)}),{children:n,attributes:r}}(I):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,o=te(e.styles);if(o.length>0&&(n.style=o),ne(i)){var a=re({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:s({},a.outer),children:[{tag:"g",attributes:s({},a.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:s({},r.icon.attributes,a.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(I),A=O.children,R=O.attributes;return I.children=A,I.attributes=R,u?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,o=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:s({},i,{id:!0===o?"".concat(t,"-").concat(T.familyPrefix,"-").concat(n):o}),children:r}]}]}(I):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,o=e.styles,a=e.transform;if(ne(a)&&n.found&&!r.found){var u={x:n.width/n.height/2,y:.5};i.style=te(s({},o,{"transform-origin":"".concat(u.x+a.x/16,"em ").concat(u.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(I)}var se=function(){},ue=(T.measurePerformance&&m&&m.mark&&m.measure,function(e,t,n,r){var i,o,a,s=Object.keys(e),u=s.length,c=void 0!==r?function(e,t){return function(n,r,i,o){return e.call(t,n,r,i,o)}}(t,r):t;for(void 0===n?(i=1,a=e[s[0]]):(i=0,a=n);i<u;i++)a=c(a,e[o=s[i]],o,e);return a});function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,o=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof R.hooks.addPack||i?R.styles[e]=s({},R.styles[e]||{},o):R.hooks.addPack(e,o),"fas"===e&&ce("fa",t)}var le=R.styles,de=R.shims,fe=function(){var e=function(e){return ue(le,(function(t,n,r){return t[r]=ue(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in le;ue(de,(function(e,n){var r=n[0],i=n[1],o=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:o},e}),{})};fe();R.styles;function pe(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function he(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,o=void 0===i?[]:i;return"string"===typeof e?ee(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(ee(e[n]),'" ')}),"").trim()}(r),">").concat(o.map(he).join(""),"</").concat(t,">")}var ve=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function ge(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge;var me={fill:"currentColor"},ye={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},be={tag:"path",attributes:s({},me,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},_e=s({},ye,{attributeName:"opacity"});s({},me,{cx:"256",cy:"364",r:"28"}),s({},ye,{attributeName:"r",values:"28;14;28;28;14;28;"}),s({},_e,{values:"1;0;1;1;0;1;"}),s({},me,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),s({},_e,{values:"1;0;0;0;0;1;"}),s({},me,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),s({},_e,{values:"0;0;1;1;0;0;"}),R.styles;function Ee(e){var t=e[0],n=e[1],r=u(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(T.familyPrefix,"-").concat(S.GROUP)},children:[{tag:"path",attributes:{class:"".concat(T.familyPrefix,"-").concat(S.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(T.familyPrefix,"-").concat(S.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}R.styles;function we(){var e="fa",t=b,n=T.familyPrefix,r=T.replacementClass,i='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(n!==e||r!==t){var o=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(o,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(s,".".concat(r))}return i}function Se(){T.autoAddCss&&!Re&&(X(we()),Re=!0)}function Ie(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return he(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(y){var t=g.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Oe(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return pe(Ae.definitions,n,r)||pe(R.styles,n,r)}var Te,Ae=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,(n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=s({},e.definitions[t]||{},i[t]),ce(t,i[t]),fe()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,o=r.iconName,a=r.icon;e[i]||(e[i]={}),e[i][o]=a})),e}}])&&o(t.prototype,n),r&&o(t,r),e}()),Re=!1,ke={transform:function(e){return ve(e)}},Ce=(Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?Q:n,i=t.symbol,o=void 0!==i&&i,a=t.mask,u=void 0===a?null:a,c=t.maskId,l=void 0===c?null:c,d=t.title,f=void 0===d?null:d,p=t.titleId,h=void 0===p?null:p,v=t.classes,g=void 0===v?[]:v,m=t.attributes,y=void 0===m?{}:m,b=t.styles,_=void 0===b?{}:b;if(e){var E=e.prefix,w=e.iconName,S=e.icon;return Ie(s({type:"icon"},e),(function(){return Se(),T.autoA11y&&(f?y["aria-labelledby"]="".concat(T.replacementClass,"-title-").concat(h||Z()):(y["aria-hidden"]="true",y.focusable="false")),ae({icons:{main:Ee(S),mask:u?Ee(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:w,transform:s({},Q,r),symbol:o,title:f,maskId:l,titleId:h,extra:{attributes:y,styles:_,classes:g}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:Oe(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:Oe(r||{})),Te(n,s({},t,{mask:r}))})}).call(this,n(20),n(57).setImmediate)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(23);function i(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return o}));var i=n(22);function o(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?Object(i.a)(e):t}},,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(err){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var d=0;d<s.length;d++)o.call(n,s[d])&&(u[s[d]]=n[s[d]])}}return u}},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=26)}([function(e,t,n){"use strict";n.r(t);var r=n(6),i=n.n(r),o=n(7),a=n(2),s=n(1),u=0,c="free",l=[],d=[],f=0;setInterval((function(){Object(a.getParameter)("UPLOAD_LOG")&&p.info("console log upload")}),9e5);var p=function(){var e,t,n,r,p,h,v="https://".concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v1"),g=["DEBUG","INFO","WARNING","ERROR","NONE"],m=0,y=function e(t){c="uploading",setTimeout((function(){!function(e,t,n){var r;Array.isArray(e)||(e=[e]),e=e.map((function(e){return{log_item_id:u++,log_level:e.log_level,payload_str:e.payload}})),r={sdk_version:a.VERSION,process_id:Object(s.a)(),payload:JSON.stringify(e)};try{Object(o.c)(v,r,(function(e){"OK"===e?t&&t(e):n&&n(e)}),(function(e){n&&n(e)}),{withCredentials:!0})}catch(e){n&&n(e)}}(t,(function(){f=0,0!==l.length?(d=l.length<10?l.splice(0,l.length):l.splice(0,10),e(d)):c="free"}),(function(){setTimeout((function(){e(d)}),f++<2?200:1e4)}))}),3e3)};t=function(){for(var t=[0],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},n=function(){for(var t=[1],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},r=function(){for(var t=[2],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},p=function(){for(var t=[3],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)};var b={};return h=function(e){b[e]||(r.apply(void 0,arguments),b[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,enableLogUpload:function(){Object(a.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(a.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){v=e?"https://".concat(e,"/ls/?h=").concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Object(a.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v1")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),m=e},log:e=function(){var e,t=arguments[0],n=arguments;if(n[0]=(e=new Date).toTimeString().split(" ")[0]+":"+e.getMilliseconds()+" Agora-SDK ["+(g[t]||"DEFAULT")+"]:",function(e,t){if(Object(a.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var n="";t.forEach((function(e){"object"===i()(e)&&(e=JSON.stringify(e)),n=n+e+" "})),l.push({payload:n,log_level:e}),"free"===c&&(d=l.length<10?l.splice(0,l.length):l.splice(0,10),y(d))}catch(e){}}(t,n),!(t<m))switch(t){case 0:case 1:console.log.apply(console,n);break;case 2:console.warn.apply(console,n);break;case 3:console.error.apply(console,n);break;default:return void console.log.apply(console,n)}},debug:t,info:n,warning:r,deprecate:h,error:p}}();t.default=p},function(e,t,n){"use strict";var r=n(11),i=n.n(r),o=n(4),a=n.n(o),s=n(2),u=n(0),c=n(7),l=n(12),d=n.n(l);n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return h}));var f={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},p=null,h=function(){return p||(p="process-"+d()(),u.default.info("processId: "+p)),p},v=function(){var e={list:{}};e.url=Object(c.e)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6080/events/message"),e.urlBackup=Object(c.e)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6080/events/message"),e.setProxyServer=function(t){t?(e.url=Object(c.e)()?"https://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"http://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6080&d=events/message"),e.urlBackup=Object(c.e)()?"https://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"http://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6080&d=events/message"),u.default.debug("reportProxyServerURL: ".concat(e.url)),u.default.debug("reportProxyServerBackupURL: ".concat(e.urlBackup))):(e.url=Object(c.e)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6080/events/message"),e.urlBackup=Object(c.e)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6080/events/message"))},e.sessionInit=function(t,n){var r=a()({},f);r.startTime=+new Date,r.sid=t,r.cname=n.cname,e.list[t]=r;var i=a()({},{willUploadConsoleLog:Object(s.getParameter)("UPLOAD_LOG")},n.extend),o=a()({},r);o.eventType="session_init",o.appid=n.appid,o.browser=navigator.userAgent,o.build=s.BUILD,o.lts=+new Date,o.elapse=o.lts-o.startTime,o.extend=JSON.stringify(i),o.mode=n.mode,o.process=h(),o.success=n.succ,o.version=s.VERSION,delete o.startTime,e.send({type:"io.agora.pb.Wrtc.Session",data:o}),e._flushInvokeReport(t)},e.joinChooseServer=function(t,n,r){if(e.list[t]){n.uid&&(e.list[t].uid=parseInt(n.uid)),n.cid&&(e.list[t].cid=parseInt(n.cid));var i=a()({},e.list[t]);i.eventType="join_choose_server";var o=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-o,i.chooseServerAddr=n.csAddr,i.errorCode=n.ec,i.elapse=i.lts-i.startTime,i.success=n.succ,i.chooseServerAddrList=JSON.stringify(n.serverList),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.JoinChooseServer",data:i})}},e.reqUserAccount=function(t,n){n.vid&&(e.list[t].vid=n.vid);var r=a()({},e.list[t]),i=n.lts;r.eventType="req_user_account",r.lts=Date.now(),r.success=n.success,r.serverAddress=n.serverAddress,r.stringUid=n.stringUid,r.uid=n.uid,r.errorCode=n.errorCode,r.elapse=r.lts-r.startTime,r.eventElapse=r.lts-i,r.extend="string"==typeof n.extend?n.extend:JSON.stringify(n.extend),delete r.startTime,e.send({type:"io.agora.pb.Wrtc.ReqUserAccount",data:r})},e.joinGateway=function(t,n){n.vid&&(e.list[t].vid=n.vid);var r=a()({},e.list[t]),i=n.lts;r.eventType="join_gateway",r.lts=Date.now(),r.gatewayAddr=n.addr,r.success=n.succ,r.errorCode=n.ec,r.elapse=r.lts-r.startTime,r.eventElapse=r.lts-i,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.JoinGateway",data:r})},e.publish=function(t,n){var r=a()({},e.list[t]);r.eventType="publish";var i=n.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.elapse=r.lts-r.startTime,r.success=n.succ,r.errorCode=n.ec,n.videoName&&(r.videoName=n.videoName),n.audioName&&(r.audioName=n.audioName),n.screenName&&(r.screenName=n.screenName),delete r.startTime,e.send({type:"io.agora.pb.Wrtc.Publish",data:r}),e._flushInvokeReport(t)},e.subscribe=function(t,n){var r=a()({},e.list[t]);r.eventType="subscribe";var i=n.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.elapse=r.lts-r.startTime,r.errorCode=n.ec,r.success=n.succ,isFinite(n.peerid)?r.peer=n.peerid:r.peerSuid=""+n.peerid,"boolean"==typeof n.video&&(r.video=n.video),"boolean"==typeof n.audio&&(r.audio=n.audio),delete r.startTime,e.send({type:"io.agora.pb.Wrtc.Subscribe",data:r}),e._flushInvokeReport(t)},e.firstRemoteFrame=function(t,n){var r=a()({},e.list[t]);r.eventType="first_remote_frame";var i=n.lts;r.lts=Date.now(),r.eventElapse=r.lts-i,r.elapse=r.lts-r.startTime,r.width=n.width,r.height=n.height,r.success=n.succ,r.errorCode=n.ec,isFinite(n.peerid)?r.peer=n.peerid:r.peerSuid=""+n.peerid,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.FirstFrame",data:r})},e.streamSwitch=function(t,n){var r=a()({},e.list[t]);r.eventType="stream_switch",r.lts=Date.now(),r.isDual=n.isdual,r.elapse=r.lts-r.startTime,r.success=r.succ,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.StreamSwitch",data:r})},e.audioSendingStopped=function(t,n){var r=a()({},e.list[t]);r.eventType="audio_sending_stopped",r.lts=Date.now(),r.elapse=r.lts-r.startTime,r.reason=n.reason,r.success=n.succ,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.AudioSendingStopped",data:r})},e.videoSendingStopped=function(t,n){var r=a()({},e.list[t]);r.eventType="video_sending_stopped",r.lts=Date.now(),r.elapse=r.lts-r.startTime,r.reson=n.reason,r.success=n.succ,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.VideoSendingStopped",data:r})},e.requestProxyAppCenter=function(t,n){var r=a()({},e.list[t]),i=n.lts;r.eventType="request_proxy_appcenter",r.lts=Date.now(),r.eventElapse=r.lts-i,r.elapse=r.lts-r.startTime,r.extend=n.extend+"",r.APAddr=n.APAddr,r.workerManagerList=n.workerManagerList,r.response=n.response,r.errorCode=n.ec,r.success=n.succ,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.RequestProxyAppCenter",data:r})},e.requestProxyWorkerManager=function(t,n){var r=a()({},e.list[t]),i=n.lts;r.eventType="request_proxy_worker_manager",r.lts=Date.now(),r.eventElapse=r.lts-i,r.elapse=r.lts-r.startTime,r.extend=n.extend,r.workerManagerAddr=n.workerManagerAddr,r.response=n.response,r.errorCode=n.ec,r.success=n.succ,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.RequestProxyWorkerManager",data:r})};var t=0;return e.reportApiInvoke=function(e,n){var r=n.tag,o=n.name,a=n.getStates,c=n.options,l=n.timeout,d=void 0===l?6e4:l,f=n.callback,p=n.reportResult,h=void 0===p||p,g=Date.now(),m=0,y=t++,b=function(){return i()({tag:r,invokeId:y,sid:e,name:o,apiInvokeTime:g,options:c},a&&{states:(t=a(),Object.keys(t).reduce((function(e,n){var r=e;return null!=t[n]&&(r[n]=t[n]),r}),{}))});var t},_=!!Object(s.getParameter)("SHOW_REPORT_INVOKER_LOG");_&&u.default.info("".concat(o," start"));var E=setTimeout((function(){v._sendApiInvoke(i()({},b(),{error:"API_INVOKE_TIMEOUT",success:!1}))}),d);return function(e,t){if(clearTimeout(E),++m>1&&(e="EXECUTOR_INVOKE_".concat(m)),e)return v._sendApiInvoke(i()({},b(),{success:!1,error:e},a&&{states:a()})),_&&u.default.info("".concat(o," onFailure"),e),f&&f(e);v._sendApiInvoke(i()({},b(),{success:!0},h&&{result:t},a&&{states:a()})),_&&u.default.info("".concat(o," onSuccess")),f&&f(null,t)}},e._cachedItems=[],e._cacheInvokeReport=function(t){t.lts||(t.lts=Date.now()),e._cachedItems.push(t),e._cachedItems.length>50&&e._cachedItems.shift()},e._flushInvokeReport=function(t){if(e._cachedItems.length){var n=e._cachedItems;e._cachedItems=[],u.default.debug("Flush cached event reporting:",n.length),n.forEach((function(n,r){n.sid=t,setTimeout((function(){e._sendApiInvoke(n)}),5e3+500*r)}))}},e._sendApiInvoke=function(t){var n=t.tag,r=t.invokeId,o=t.sid,a=t.name,u=t.result,c=t.states,l=t.options,d=t.error,f=t.success,p=t.apiInvokeTime,h=t.lts,v=Object(s.getParameter)("NOT_REPORT_EVENT");if(!(n&&v instanceof Array&&-1!==v.indexOf(n)))if(e.list[o]){var g=e.list[o],m=g.startTime,y=g.cname,b=g.uid,_=g.cid,E=(h=h||Date.now())-m,w=h-p,S="";if(l)try{S=JSON.stringify(l)}catch(e){S=l.toString()}var I=i()({invokeId:r,sid:o,cname:y,cid:_,lts:h,uid:b,success:f,elapse:E,apiName:a,execElapse:w},void 0!==l&&{options:S},void 0!==c&&{execStates:JSON.stringify(c)},void 0!==d&&{errorCode:JSON.stringify(d)},void 0!==u&&{execResult:JSON.stringify(u)});e.send({type:"io.agora.pb.Wrtc.ApiInvoke",data:I})}else e._cacheInvokeReport(arguments[0])},e._send=function(t){try{var n=[];t&&t.data&&t.data.apiName?n.push(["apiName",""+t.data.apiName]):t&&t.data&&t.data.eventType&&n.push(["eventType",t.data.eventType]);var r=n.map((function(e){return"".concat(e[0],"=").concat(encodeURIComponent(e[1]))})).join("&"),i=-1===e.url.indexOf("?")?"".concat(e.url,"?").concat(r):e.url;Object(c.c)(i,t,null,(function(n){var i=-1===e.urlBackup.indexOf("?")?"".concat(e.urlBackup,"?").concat(r):e.urlBackup;Object(c.c)(i,t,null,(function(e){}),{timeout:1e4})}),{timeout:1e4})}catch(e){}},e.sendCache=[],e.sendTimer=null,e.send=function(t){if(e.sendCache.push(t),null===e.sendTimer)return function t(){e.sendTimer=setTimeout((function(){if(0!==e.sendCache.length)return e._send(e.sendCache.shift()),t();e.sendTimer=null}),Object(s.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()},e}()},function(e,t,n){"use strict";t.__esModule=!0,t.BUILD="v2.9.0-0-gd55f286",t.VERSION="2.9.0",t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,20,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]},t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var r={WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"webcollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"webcollector-2.agoraio.cn",WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:""};t.setParameter=function(e,t){return void 0!==r[e]&&(r[e]=t,!0)},t.getParameter=function(e){return void 0!==r[e]?r[e]:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBrowserInfo",(function(){return y})),n.d(t,"getBrowserVersion",(function(){return f})),n.d(t,"getBrowserOS",(function(){return p})),n.d(t,"isChrome",(function(){return r})),n.d(t,"isSafari",(function(){return i})),n.d(t,"isFireFox",(function(){return a})),n.d(t,"isOpera",(function(){return s})),n.d(t,"isEdge",(function(){return o})),n.d(t,"isQQBrowser",(function(){return u})),n.d(t,"isWeChatBrowser",(function(){return c})),n.d(t,"isLegacyChrome",(function(){return v})),n.d(t,"isSupportedPC",(function(){return l})),n.d(t,"isSupportedMobile",(function(){return d})),n.d(t,"getChromeKernelVersion",(function(){return m})),n.d(t,"isChromeKernel",(function(){return h}));var r=function(){var e=y();return e.name&&"Chrome"===e.name},i=function(){var e=y();return e.name&&"Safari"===e.name},o=function(){var e=y();return e.name&&"Edge"===e.name},a=function(){var e=y();return e.name&&"Firefox"===e.name},s=function(){var e=y();return e.name&&"OPR"===e.name},u=function(){var e=y();return e.name&&"QQBrowser"===e.name},c=function(){var e=y();return e.name&&"MicroMessenger"===e.name},l=function(){var e=p();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},d=function(){var e=p();return"Android"===e||"iOS"===e},f=function(){return y().version},p=function(){return y().os},h=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function v(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var g,m=function(){var e=navigator.userAgent.match(/chrome\/[\d]./i);return e&&e[0]&&e[0].split("/")[1]},y=(g=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===n[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=e),"Safari"===n[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(n[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(n=[null,"IE",e[1]]);var r=void 0,i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var o in i){var a=i[o];if(a.r.test(navigator.userAgent)){r=a.s;break}}return{name:n[1],version:n[2],os:r}}(),function(){return g})},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){e.exports=n(24)},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return c}));var r=n(2),i=n(8),o=0,a=0,s=function(){return o},u=function(){return a},c=function(){o=0,a=0},l=function(e,t,n,s,u){var c=new XMLHttpRequest;if(c.timeout=t.timeout||Object(r.getParameter)("HTTP_CONNECT_TIMEOUT"),c.open("POST",e,!0),c.setRequestHeader("Content-type","application/json; charset=utf-8"),u)for(var l in u)"withCredentials"==l?c.withCredentials=!0:c.setRequestHeader(l,u[l]);c.onload=function(e){a+=Object(i.d)(c.responseText),n&&n(c.responseText)},c.onerror=function(t){s&&s(t,e)},c.ontimeout=function(t){s&&s(t,e)};var d=JSON.stringify(t);o+=Object(i.d)(d),c.send(d)},d=function(){return"https:"==document.location.protocol}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return h})),n(6);var r=n(3),i=n(0),o=n(12),a=n.n(o),s=n(13),u=n(10),c=function(e){return this.audioContext=Object(s.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return i.default.warning("can't find analyser in audioLevelHelper"),0},this};function l(){return a()().replace(/-/g,"").toUpperCase()}var d=function(e,t,n){try{i.default.debug("start vsResHack",e);var o=document.createElement("video");o.setAttribute("autoplay",""),o.setAttribute("muted",""),o.muted=!0,o.setAttribute("playsinline",""),o.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(o),o.addEventListener("playing",(function(n){r.isFireFox()?o.videoWidth&&(i.default.debug("[vsResHack] get stream resolution: ","".concat(o.videoWidth," x ").concat(o.videoHeight),e),t(o.videoWidth,o.videoHeight),document.body.removeChild(o)):(i.default.debug("[vsResHack] get stream resolution: ","".concat(o.videoWidth," x ").concat(o.videoHeight),e),t(o.videoWidth,o.videoHeight),document.body.removeChild(o))})),Object(u.setSrcObject)(o,e)}catch(e){n(e)}},f=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},p=function(e){isNaN(e)&&(e=1e3);var t=+new Date,n=(t=(9301*t+49297)%233280)/233280;return Math.ceil(n*e)},h=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},v=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var n=document.createElement("div");n.style="height: 76px; display: flex; justify-content: center; align-items: center;";var r=document.createElement("span");r.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",r.innerText="!";var i=document.createElement("span");i.innerText="This browser does not support webRTC",n.append(r),n.append(i);var o=document.createElement("div");o.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",o.innerText="OK",t.append(n),t.append(o),o.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"RTCPeerConnection",(function(){return S})),n.d(t,"getUserMedia",(function(){return a})),n.d(t,"attachMediaStream",(function(){return s})),n.d(t,"reattachMediaStream",(function(){return u})),n.d(t,"setSrcObject",(function(){return p})),n.d(t,"getSrcObject",(function(){return h})),n.d(t,"webrtcDetectedBrowser",(function(){return c})),n.d(t,"webrtcDetectedVersion",(function(){return l})),n.d(t,"webrtcMinimumVersion",(function(){return d})),n.d(t,"webrtcTesting",(function(){return I})),n.d(t,"webrtcUtils",(function(){return m}));var r=n(6),i=n.n(r),o=n(3),a=null,s=null,u=null,c=null,l=null,d=null,f=null,p=null,h=null,v=null,g={addStream:null},m={log:function(){},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n])}};if("object"==("undefined"==typeof window?"undefined":i()(window))?(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype?(p=function(e,t){e.srcObject=t},h=function(e){return e.srcObject}):(p=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},h=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}),a=window.navigator&&window.navigator.getUserMedia):(p=function(e,t){e.srcObject=t},h=function(e){return e.srcObject}),s=function(e,t){p(e,t)},u=function(e,t){p(e,h(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var y in m.log("This appears to be Firefox"),c="firefox",l=m.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),d=31,v=mozRTCPeerConnection,g)g[y]=v.prototype[y];if(f=function(e,t){if(l<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var a={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(a.username=i.username,a.credential=i.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}var s=new v(e,t);for(var u in g)s[u]=g[u];return s},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),a=function(e,t,n){var r=function(e){if("object"!==i()(e)||e.require)return e;var t=[];return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"===i()(e[n])?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof r.ideal?o[n]={min:r.ideal,max:r.ideal}:o[n]=r.ideal,e.advanced.push(o),delete r.ideal,Object.keys(r).length||delete e[n]}}})),t.length&&(e.require=t),e};return l<38&&(m.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),m.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=a,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:w,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise((function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])}))},l<41){var b=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return b().then(void 0,(function(e){if("NotFoundError"===e.name)return[];throw e}))}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var y in m.log("This appears to be Chrome"),c="chrome",l=m.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),d=38,v=webkitRTCPeerConnection,g)g[y]=v.prototype[y];f=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new v(e,t);for(var r in g)n[r]=g[r];var i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;o.length>0&&"function"==typeof e&&(t?(n=t,t=e,o=[e=null,t,n]):(t=e,o=[e=null,t]));var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t};return o.length>=2?i.apply(this,[function(e){o[1](a(e))},o[0]]):new Promise((function(t,n){1===o.length&&null===e?i.apply(r,[function(e){t.apply(null,[a(e)])},n]):i.apply(r,[t,n])}))},n},["createOffer","createAnswer"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===i()(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise((function(r,i){t.apply(e,[r,i,n])}))}return t.apply(this,arguments)}})),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise((function(r,i){t.apply(n,[e[0],function(){r(),e.length>=2&&e[1].apply(null,[])},function(t){i(t),e.length>=3&&e[2].apply(null,[t])}])}))}}));var _=function(e){if("object"!==i()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i()(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"==typeof r.ideal?(a[o("min",n)]=r.ideal,t.optional.push(a),(a={})[o("max",n)]=r.ideal,t.optional.push(a)):(a[o("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(a=function(e,t,n){return e.audio&&(e.audio=_(e.audio)),e.video&&(e.video=_(e.video)),m.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=a,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:w,enumerateDevices:function(){return new Promise((function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources((function(n){e(n.map((function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}})))}))}))}}),navigator.mediaDevices.getUserMedia){if(Number(Object(o.getBrowserVersion)().split(".")[0])<46){var E=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return m.log("spec:   "+JSON.stringify(e)),e.audio=_(e.audio),e.video=_(e.video),m.log("chrome: "+JSON.stringify(e)),E(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return w(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){m.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){m.log("Dummy mediaDevices.removeEventListener called.")}),s=function(e,t){l>=43?p(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:m.log("Error attaching stream to element.")},u=function(e,t){l>=43?p(e,h(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(m.log("This appears to be Edge"),c="edge",l=m.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),d=12):m.log("Browser does not appear to be WebRTC-capable");else m.log("This does not appear to be a browser"),c="not a browser";function w(e){return new Promise((function(t,n){a(e,t,n)}))}var S,I={};try{Object.defineProperty(I,"version",{set:function(e){l=e}})}catch(e){}f?S=f:"undefined"!=typeof window&&(S=window.RTCPeerConnection)},function(e,t,n){var r=n(19);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}},function(e,t,n){var r=n(17),i=n(18);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=window.AudioContext||window.webkitAudioContext,i=n(2),o=i.getParameter,a=i.setParameter,s=function(){return o("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),a("AUDIO_CONTEXT",function(){if(r)return new r;throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),o("AUDIO_CONTEXT")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(0),o=n(10);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(r||(r={}));var a=function(){function e(e){this.candidate=null,this.state=r.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:"h264"===this.config.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var n=[];this.config.isSubscriber?(n.push(this.receiveVideoStats),n.push(this.receiveAudioStats)):(n.push(this.sendAudioStats),n.push(this.sendVideoStats)),n.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(n)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,n=[];this.peerConnection.getStats(null).then((function(r){t.lastTimeGetStats=Date.now(),Object.keys(r).map((function(e){var n=r[e];t.config.isSubscriber?n.type&&"inboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.receiveAudioStats.id=n.id+"recv",t.receiveAudioStats.type=n.type+"",t.receiveAudioStats.mediaType=n.mediaType+"",t.receiveAudioStats.packetsReceived=n.packetsReceived+"",t.receiveAudioStats.bytesReceived=n.bytesReceived+"",t.receiveAudioStats.packetsLost=n.packetsLost+"",t.receiveAudioStats.googJitterReceived=n.jitter+""):n.type&&"inboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.receiveVideoStats.id=n.id+"recv",t.receiveVideoStats.type=n.type+"",t.receiveVideoStats.mediaType=n.mediaType+"",t.receiveVideoStats.packetsReceived=n.packetsReceived+"",t.receiveVideoStats.bytesReceived=n.bytesReceived+"",t.receiveVideoStats.packetsLost=n.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=n.jitter+"",t.receiveVideoStats.googPlisSent=n.pliCount+"",t.receiveVideoStats.googFirsSent=n.firCount+"",t.receiveVideoStats.googNacksSent=n.nackCount+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=n.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=n.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=n.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=n.framesDecoded+"",t.receiveVideoStats.googFrameReceived=n.framesReceived+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=n.audioLevel+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.sendAudioStats.id=n.id+"send",t.sendAudioStats.type=n.type+"",t.sendAudioStats.mediaType=n.mediaType+"",t.sendAudioStats.packetsSent=n.packetsSent+"",t.sendAudioStats.bytesSent=n.bytesSent+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.sendVideoStats.id=n.id+"send",t.sendVideoStats.type=n.type+"",t.sendVideoStats.mediaType=n.mediaType+"",t.sendVideoStats.packetsSent=n.packetsSent+"",t.sendVideoStats.bytesSent=n.bytesSent+"",t.sendVideoStats.googRtt=n.roundTripTime+"",t.sendVideoStats.googPlisReceived=n.pliCount+"",t.sendVideoStats.googFirsReceived=n.firCount+"",t.sendVideoStats.googNacksReceived=n.nackCount+""):!n.remoteSource&&n.type&&"track"===n.type&&n.framesSent&&0!==n.framesSent&&(t.sendVideoStats.googFrameHeightSent=n.frameHeight+"",t.sendVideoStats.googFrameHeightInput=n.frameHeight+"",t.sendVideoStats.googFrameWidthSent=n.frameWidth+"",t.sendVideoStats.googFrameWidthInput=n.frameWidth+"",t.sendVideoStats.googFramesEncoded=n.framesSent+"",t.sendVideoStats.googFrameRateSent=n.framesPerSecond+"")})),t.config.isSubscriber?(n.push(t.receiveVideoStats),n.push(t.receiveAudioStats)):(n.push(t.sendAudioStats),n.push(t.sendVideoStats)),n.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(n)}))},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,n=e.turnServer,r=e.iceServers;return this.pcConfig={iceServers:[{urls:"stun:webcs.agora.io:3478"}]},r instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map((function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})})):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),n&&(n instanceof Array?n.map((function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==n.mode&&"manual"!==n.mode||(n.udpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.udpport+"?transport=udp"}),"string"==typeof n.tcpport&&""!==n.tcpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.tcpport+"?transport=tcp"}),!0===n.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new o.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=r.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=r.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,n,r=this.config,o=r.codec,a=r.minVideoBW,s=r.maxVideoBW,u=r.maxAudioBW,c=r.clientId;if((t=e.match(/m=video.*\r\n/))&&a&&s){n=t[0]+"b=AS:"+s+"\r\n";var l=0,d=0;"h264"===o?(l=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),d=e.search(/H264\/90000\r\n/)):"vp8"===o&&(l=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),d=e.search(/VP8\/90000\r\n/)),-1!==l&&-1!==d&&d-l>10&&(n=n+"a=fmtp:"+e.slice(l+9,d-1)+" x-google-min-bitrate="+a+"\r\n"),e=e.replace(t[0],n),i.default.debug("["+c+"]Set Video Bitrate - min:"+a+" max:"+s)}return(t=e.match(/m=audio.*\r\n/))&&u&&(n=t[0]+"b=AS:"+u+"\r\n",e=e.replace(t[0],n)),e},e.prototype.reviseOpus=function(e){return(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=r.OFFER_SENT},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this;t.__esModule=!0;var a=n(20),s=n(3),u=n(0);t.getSupportedCodec=function(e){return r(o,void 0,void 0,(function(){var t,n,r,o,l;return i(this,(function(i){switch(i.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(u.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{n=a.createRTCPeerConnection({iceServers:[]})}catch(e){return u.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return n?[3,2]:(u.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(r={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},o=void 0,(s.isSafari()||s.isFireFox()||s.isWeChatBrowser())&&n.addTransceiver?(n.addTransceiver("audio"),n.addTransceiver("video"),[4,n.createOffer()]):[3,4]);case 3:return o=i.sent(),[3,6];case 4:return[4,new Promise((function(e,t){var i=setTimeout((function(){t("CREATEOFFER_TIMEOUT")}),3e3);n.createOffer((function(t){clearTimeout(i),e(t)}),(function(e){clearTimeout(i),t(e)}),r)}))];case 5:o=i.sent(),i.label=6;case 6:return n.close(),l=o.sdp,[2,c(l)];case 7:return e.stream.getTracks&&n.addTrack?e.stream.getTracks().forEach((function(t){n.addTrack(t,e.stream)})):n.addStream(e.stream),o=void 0,s.isSafari()||s.isFireFox()?[4,n.createOffer()]:[3,9];case 8:return o=i.sent(),[3,11];case 9:return[4,new Promise((function(e,t){n.createOffer(e,t)}))];case 10:o=i.sent(),i.label=11;case 11:return n.close(),l=o.sdp,[2,c(l)]}}))}))};var c=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,n){var r=n(21),i=n(22),o=n(23);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";t.__esModule=!0;var r="object"==typeof window&&window.RTCPeerConnection,i="object"==typeof window&&window.webkitRTCPeerConnection,o="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=r||i||o;return t?new t(e):null}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(25),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=_;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={},g={};g[a]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(N([])));y&&y!==r&&i.call(y,a)&&(g=y);var b=I.prototype=w.prototype=Object.create(g);S.prototype=b.constructor=I,I.constructor=S,I[u]=S.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},O(T.prototype),T.prototype[s]=function(){return this},l.AsyncIterator=T,l.async=function(e,t,n,r){var i=new T(_(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(b),b[u]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function _(e,t,n,r){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=E(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function w(){}function S(){}function I(){}function O(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function T(e){var t;this._invoke=function(n,r){function o(){return new Promise((function(t,o){!function t(n,r,o,a){var s=E(e[n],e,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,o,a)}),(function(e){t("throw",e,o,a)})):Promise.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return t("throw",e,o,a)}))}a(s.arg)}(n,r,t,o)}))}return t=t?t.then(o,o):o()}}function A(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,A(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=E(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(0),a=n(1),s=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,n){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(n)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,n){var r;-1!==(r=e.dispatcher.eventListeners[t].indexOf(n))&&e.dispatcher.eventListeners[t].splice(r,1)},e.dispatchEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t)},e.dispatchSocketEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t.msg)},e},u=function(e){var t={};return t.type=e.type,t},c=function(e){var t=u(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},l=function(e){var t=u(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},d=function(e){var t=u(e);return t.msg=e.msg,t},f=function(e){var t=u(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t},p=n(3),h=function(){};h.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var v=new function(){var e=s();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,n){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then((function(n){e.batteryManager=n,t&&setTimeout((function(){t()}),0)})).catch((function(e){o.default.debug("navigator.getBattery is disabled",e),t&&t()})):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return e.batteryManager&&e.batteryManager.level?t.BatteryLevel=Math.floor(100*e.batteryManager.level):t.BatteryLevel="UNSUPPORTED",t},e.getStats=function(t,n){var r=new h,i=e._getBatteryStats();i&&i.BatteryLevel&&r.set("BatteryLevel",i.BatteryLevel),t&&t(r)},e._init(),e},g=n(4),m=n.n(g),y=function(e){var t=s(e);return t.url=".",t},b=n(10),_={101100:"NO_FLAG_SET",101101:"FLAG_SET_BUT_EMPTY",101102:"INVALID_FALG_SET",101203:"NO_SERVICE_AVIABLE",0:"OK_CODE",5:"INVALID_VENDOR_KEY",7:"INVALID_CHANNEL_NAME",8:"INTERNAL_ERROR",9:"NO_AUTHORIZED",10:"DYNAMIC_KEY_TIMEOUT",11:"NO_ACTIVE_STATUS",13:"DYNAMIC_KEY_EXPIRED",14:"STATIC_USE_DYANMIC_KEY",15:"DYNAMIC_USE_STATIC_KEY",1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",1010200:"NO_SERVICE_AVAILABLE",1010203:"NO_SERVICE_AVAILABLE_WEBRTC",1010205:"NO_SERVICE_AVAILABLE_DISPATCHER",1010208:"NO_SERVICE_AVAILABLE_APPCENTER",1010211:"NO_SERVICE_AVAILABLE_SUA",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY"},E={2e3:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},w={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},S=["NO_FLAG_SET","NO_SERVICE_AVIABLE","FLAG_SET_BUT_EMPTY","EMPTY_ADDRESS_RESPONSE"],I=0,O=1,T=2,A=3,R=4,k=5,C=6,N=7,x=8,L=9,P=10,D={19:"ERR_ALREADY_IN_USE",10:"ERR_TIMEDOUT",3:"ERR_NOT_READY",9:"ERR_NO_PERMISSION",0:"UNKNOW_ERROR"},M={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"},j=0,U=function(e){var t=y({});t.id=e.id,t.playerId=j++,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.elementID=e.elementID,t.setAudioOutput=function(e,n,r){var i=t.video||t.audio;return i?i.setSinkId?void i.setSinkId(e).then((function(){return o.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),i==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()})).then((function(){return o.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),n&&n()})).catch((function(e){return o.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),r&&r(e)})):(o.default.error("["+t.id+"] ",M.WEB_API_NOT_SUPPORTED),r&&r(M.WEB_API_NOT_SUPPORTED)):(o.default.error("["+t.id+"] ",M.PLAYER_NOT_FOUND),r&&r(M.PLAYER_NOT_FOUND))},t.destroy=function(){o.default.debug("destroy ".concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(b.setSrcObject)(t.video,null),Object(b.setSrcObject)(t.audio,null),t.video.pause(),delete t.resizer,clearInterval(t.mediaPlayerTimer),t.mediaPlayerTimer=null,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.parentNode.removeChild(t.div),["video","audio"].forEach((function(n){t[n];var r=s[n];clearTimeout(r.playDeferTimeout),r.formerMediaState=null;var i={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};s[n]=i;var u={type:"player-status-change",playerId:t.playerId,mediaType:n,status:i.status,reason:i.reason,isErrorState:!1};o.default.debug("Media Player Status Change Triggered by destroy()",u),e.stream.dispatchEvent(u),a.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:u,tag:"tracer"})()}))},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),e.stream.video?t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"):t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),e.stream.local&&!e.stream.screen?e.stream.mirror?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.video?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.screen?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!e.stream.local||!(!p.isSafari()&&"iOS"!==p.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!(!p.isSafari()&&"iOS"!==p.getBrowserOS()||e.stream.local),volume:null},i=m()({},n,e.options);!0!==i.muted||i.volume||(i.volume=0),i.autoplay&&t.video.setAttribute("autoplay",""),!0!==i.muted&&"video_element_muted"!==i.muted||(t.video.setAttribute("muted",""),t.video.muted=!0),i.playsinline&&t.video.setAttribute("playsinline",""),i.controls&&t.video.setAttribute("controls",""),Number.isFinite(i.volume)&&(t.video.volume=i.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),i.autoplay&&t.audio.setAttribute("autoplay",""),!0===i.muted&&t.audio.setAttribute("muted",""),!0===i.muted&&(t.audio.muted=!0),i.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(i.volume)&&(t.audio.volume=i.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var s={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,n=0;n<Object(r.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;n++)t=t.parentNode;return!!t};var u=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},c=function(e,t,n){var r=u(e),i=!0;return"paused"===r?("audio"===t&&!0===n.muted&&(i=!1),n.autoplay||(i=!1)):"play"===r?"video"===t?i=!1:!0===n.muted?e.muted&&(i=!1):e.muted||(i=!1):"aborted"===r&&(i=!1),i},l=function(n){var l,d=this;if(d===t.video?l="video":d===t.audio&&(l="audio"),l){n.type||o.default.error("Unexpected evt",n);var f=u(d);clearTimeout(s[l].playDeferTimeout),s[l].playDeferTimeout=setTimeout((function(){s[l].playDeferTimeout=null;var r=s[l],p=u(d);if(f===p){var h={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:c(d,l,i),status:u(d),reason:n.type,updatedAt:Date.now()};if(r.status!==h.status){s[l]=h;var v={type:"player-status-change",playerId:t.playerId,mediaType:l,status:h.status,reason:h.reason,isErrorState:h.error};o.default.debug("Media Player Status Change",v),e.stream.dispatchEvent(v),a.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:v,tag:"tracer"})()}}else o.default.debug("Status Change after event Triggered."+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(l," Status ").concat(f,"=>").concat(p))}),Object(r.getParameter)("PLAYER_STATE_DEFER"))}else o.default.error("Unknown media element",d)};if(t.mediaPlayerTimer=setInterval((function(){["video","audio"].forEach((function(n){var r=t[n],l=s[n];if(!l.playDeferTimeout){var d={playerId:t.playerId,stateId:l.stateId+1,playDeferTimeout:null,error:c(r,n,i),status:u(r),reason:"timer",updatedAt:Date.now()};if(l.status!==d.status){o.default.debug("Player ".concat(t.playerId," ").concat(n," Status Changed Detected by Timer: ").concat(l.status,"=>").concat(d.status)),s[n]=d;var f={type:"player-status-change",playerId:t.playerId,mediaType:n,status:d.status,reason:d.reason,isErrorState:d.error};o.default.debug("Media Player Status Change",f),e.stream.dispatchEvent(f),a.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:f,tag:"tracer"})()}}}))}),Object(r.getParameter)("PLAYER_STATE_DEFER")),t.video.addEventListener("playing",(function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?o.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()})),t.video.addEventListener("playing",l),t.video.addEventListener("canplay",l),t.video.addEventListener("abort",l),t.video.addEventListener("onerror",l),t.video.addEventListener("suspend",l),t.video.addEventListener("stalled",l),t.video.addEventListener("pause",l),t.audio.addEventListener("playing",l),t.audio.addEventListener("canplay",l),t.audio.addEventListener("abort",l),t.audio.addEventListener("onerror",l),t.audio.addEventListener("suspend",l),t.audio.addEventListener("stalled",l),t.audio.addEventListener("pause",l),e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),p.isEdge()?t.video.srcObject=e.stream.stream:(Object(b.attachMediaStream)(t.video,e.stream.stream),Object(b.attachMediaStream)(t.audio,e.stream.stream));else if(!1!==i.muted&&"video_element_muted"!==i.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.div.appendChild(t.video),window.MediaStream&&(p.isSafari()||"iOS"===p.getBrowserOS())){var d=new MediaStream(e.stream.stream.getAudioTracks());Object(b.setSrcObject)(t.video,d)}else Object(b.setSrcObject)(t.video,e.stream.stream);return t.setAudioVolume=function(e){var n=parseInt(e)/100;isFinite(n)&&(n<0?n=0:n>1&&(n=1),t.video&&(t.video.volume=n),t.audio&&(t.audio.volume=n))},t},F=function(e){var t={},n=b.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{url:"stun:webcs.agora.io:3478"}]},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&(e.turnServer instanceof Array?e.turnServer.map((function(e){"string"==typeof e.url&&""!==e.url&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==e.turnServer.mode&&"manual"!==e.turnServer.mode||(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,a;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),a=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===a||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+r+" relay candidate: "+a+" host candidate : "+i),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},o.default.debug("["+t.clientId+']Created webkitRTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".');var i=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},a=function(n){var r,i;if((r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n";var a=0,s=0;"h264"===e.codec?(a=n.search(/a=rtpmap:(\d+) H264\/90000\r\n/),s=n.search(/H264\/90000\r\n/)):"vp8"===e.codec&&(a=n.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),s=n.search(/VP8\/90000\r\n/)),-1!==a&&-1!==s&&s-a>10&&(i=i+"a=fmtp:"+n.slice(a+9,s-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),n=n.replace(r[0],i),o.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};return t.processSignalingMessage=function(e){var n,r=JSON.parse(e);t.incomingMessage=r,"new"===t.state?"OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="established"):"pr-answer"===r.messageType?(n={sdp:r.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){}))):"offer"===r.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){})),t.state="offer-received",t.markActionNeeded()):"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch((function(e){}))):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state))},t.getVideoRelatedStats=function(e){t.peerConnection.getStats((function(n){Object.keys(n).forEach((function(r){var i=n[r];t.isSubscriber?"video"===i.mediaType&&i.id&&~i.id.indexOf("recv")&&e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:i.googFrameRateReceived,frameRateDecoded:i.googFrameRateDecoded,bytesReceived:i.bytesReceived,packetsReceived:i.packetsReceived,packetsLost:i.packetsLost}):"video"===i.mediaType&&i.id&&~i.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:i.googFrameRateInput,frameRateSent:i.googFrameRateSent,googRtt:i.googRtt})}))}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats((function(n){Object.keys(n).forEach((function(r){var i=n[r];t.isSubscriber&&"audio"===i.mediaType&&i.id&&~i.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(i.googDecodingPLC)+parseInt(i.googDecodingPLCCNG)+"",frameReceived:i.googDecodingCTN,googJitterReceived:i.googJitterReceived,bytesReceived:i.bytesReceived,packetsReceived:i.packetsReceived,packetsLost:i.packetsLost})}))}))},t.getStatsRate=function(e){t.getStats((function(t){e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(e){t.peerConnection.getStats((function(n){var r=[],i=[],o=null;Object.keys(n).forEach((function(e){var t=n[e];i.push(t),"ssrc"!==t.type&&"VideoBwe"!==t.type||(o=t.timestamp,r.push(t))})),r.push({id:"time",startTime:t.connectedTime,timestamp:o||new Date}),e(r,i)}))},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){t.peerConnection.removeTrack(t.peerConnection.getSenders().find((function(t){return t.track==e})))},t.addStream=function(e){t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var e;if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer((function(e){if(e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){o.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){o.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;e=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",e),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=i(e.sdp),e.sdp=a(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){console.log("createOffer error: ",e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t},B=function(e){var t={},n=b.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{urls:["stun:webcs.agora.io:3478","stun:stun.l.google.com:19302"]}],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&(e.turnServer instanceof Array?e.turnServer.map((function(e){"string"==typeof e.url&&""!==e.url&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,url:e.url})})):"auto"!==e.turnServer.mode&&"manual"!==e.turnServer.mode||(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:["turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"]}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:["turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"]}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}o.default.debug("["+t.clientId+']safari Created RTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".'),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,a;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),a=n.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout((function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),1e3)),null===r&&null===i&&null===a||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+r+" relay candidate: "+a+" host candidate : "+i),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var i=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},a=function(n){var r,i;return(r=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(i=r[0]+"b=AS:"+e.maxVideoBW+"\r\n",n=n.replace(r[0],i),o.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(r=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(i=r[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(r[0],i)),n};t.processSignalingMessage=function(e){var n,r=JSON.parse(e);t.incomingMessage=r,"new"===t.state?"OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),n.sdp=n.sdp.replace(/a=x-google-flag:conference\r\n/g,""),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="established"):"pr-answer"===r.messageType?(n={sdp:r.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n))):"offer"===r.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n))):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state))};var s={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},u={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},c={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},l={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},d={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},f=0,p=0,h=0;return t.getVideoRelatedStats=function(n){t.peerConnection.getStats().then((function(r){var i={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};r.forEach((function(r){if(t.isSubscriber){if("track"===r.type&&(~r.id.indexOf("video")||~r.trackIdentifier.indexOf("v"))){if(!t.lastReport)return void(t.lastReport=r);i.frameRateReceived=r.framesReceived-t.lastReport.framesReceived+"",i.frameRateDecoded=r.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=r}"inbound-rtp"===r.type&&~r.id.indexOf("Video")&&(i.bytesReceived=r.bytesReceived+"",i.packetsReceived=r.packetsReceived+"",i.packetsLost=r.packetsLost+"")}else if("outbound-rtp"===r.type&&~r.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=r);n&&n({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:r.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=r}})),n&&n(i)}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){n.forEach((function(n){t.isSubscriber&&"inbound-rtp"===n.type&&~n.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:n.packetsLost+"",frameReceived:n.packetsReceived+"",googJitterReceived:n.jitter+"",bytesReceived:n.bytesReceived+"",packetsReceived:n.packetsReceived+"",packetsLost:n.packetsLost+""})}))}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=((e.googFramesEncoded-f)/3).toString(),f=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=((e.googFrameReceived-h)/3).toString(),h=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-p)/3).toString(),p=e.googFramesDecoded))})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(e){var n=[];t.peerConnection.getStats().then((function(r){r.forEach((function(e){n.push(e),"outbound-rtp"===e.type&&"audio"===e.mediaType&&(s.id=e.id,s.type=e.type,s.mediaType=e.mediaType,s.bytesSent=e.bytesSent?e.bytesSent+"":"0",s.packetsSent=e.packetsSent?e.packetsSent+"":"0"),"outbound-rtp"===e.type&&"video"===e.mediaType&&(u.id=e.id,u.type=e.type,u.mediaType=e.mediaType,u.bytesSent=e.bytesSent?e.bytesSent+"":"0",u.packetsSent=e.packetsSent?e.packetsSent+"":"0",u.googPlisReceived=e.pliCount?e.pliCount+"":"0",u.googNacksReceived=e.nackCount?e.nackCount+"":"0",u.googFirsReceived=e.firCount?e.firCount+"":"0",u.googFramesEncoded=e.framesEncoded?e.framesEncoded+"":"0"),"inbound-rtp"===e.type&&-1!=e.id.indexOf("44444")&&(c.id=e.id,c.type=e.type,c.mediaType="audio",c.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",c.bytesReceived=e.bytesReceived?e.bytesReceived+"":"0",c.packetsLost=e.packetsLost?e.packetsLost+"":"0",c.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",c.googJitterReceived=e.jitter?e.jitter+"":"0"),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(l.id=e.id,l.type=e.type,l.mediaType="video",l.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",l.bytesReceived=e.bytesReceived?e.bytesReceived+"":"0",l.packetsLost=e.packetsLost?e.packetsLost+"":"0",l.googJitterBufferMs=e.jitter?e.jitter+"":"0",l.googNacksSent=e.nackCount?e.nackCount+"":"0",l.googPlisSent=e.pliCount?e.pliCount+"":"0",l.googFirsSent=e.firCount?e.firCount+"":"0"),"track"!==e.type||-1==e.id.indexOf("55543")&&!~e.trackIdentifier.indexOf("v")&&null!=e.audioLevel||(l.googFrameWidthReceived=e.frameWidth?e.frameWidth+"":"0",l.googFrameHeightReceived=e.frameHeight?e.frameHeight+"":"0",l.googFrameReceived=e.framesReceived?e.framesReceived+"":"0",l.googFramesDecoded=e.framesDecoded?e.framesDecoded+"":"0"),"track"!==e.type||-1==e.id.indexOf("44444")&&!~e.trackIdentifier.indexOf("a")&&void 0===e.audioLevel||(c.audioOutputLevel=e.audioLevel+"",s.audioInputLevel=e.audioLevel+""),"candidate-pair"===e.type&&(0==e.availableIncomingBitrate?d.googAvailableSendBandwidth=e.availableOutgoingBitrate+"":d.googAvailableReceiveBandwidth=e.availableIncomingBitrate+"")}));var i=[d,s,u,c,l];i.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(i,n)})).catch((function(e){console.error(e)}))},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){var r=t.peerConnection.getSenders().find((function(t){return t.track==e}));r.replaceTrack(null),t.peerConnection.removeTrack(r)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach((function(n){return t.peerConnection.addTrack(n,e)})):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then((function(n){if(n.sdp=a(n.sdp),e.isSubscriber||(n.sdp=n.sdp.replace(/a=extmap:4 urn:3gpp:video-orientation\r\n/g,"")),n.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")})).catch((function(e){o.default.debug("["+t.clientId+"]peer connection create offer failed ",e)}));else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(e){o.default.debug("["+t.clientId+"]peer connection create answer failed ",e)}),t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){console.log("!!! ontrack, ",e.track.kind,e.track),t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then((function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=i(e.sdp),e.sdp=a(e.sdp),t.peerConnection.setLocalDescription(e)})).then((function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)})).catch((function(e){console.log("createOffer error: ",e)}))},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t},q=function(e){var t={},n=(mozRTCPeerConnection,mozRTCSessionDescription),i=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map((function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})})):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map((function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})})):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&"string"==typeof e.turnServer.url&&""!==e.turnServer.url&&(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay"))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new b.RTCPeerConnection(t.pc_config),o.default.debug("["+t.clientId+']safari Created RTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".'),t.iceCandidateTimer=setTimeout((function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())}),Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,r,i,a;r=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),i=n.match(/a=candidate:.+typ\shost.+\r\n/),a=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===r&&null===i&&null===a||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+r+" relay candidate: "+a+" host candidate : "+i),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),n=t[1].split("m=video"),r="m=video"+n[1],i="m=audio"+n[0];return t[0]+r+i},t.processSignalingMessage=function(e){var r,i=JSON.parse(e);t.incomingMessage=i,"new"===t.state?"OFFER"===i.messageType?(i.sdp=d(i.sdp),r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(r),(function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===i.messageType?(i.sdp=d(i.sdp),i.sdp=i.sdp.replace(/ generation 0/g,""),i.sdp=i.sdp.replace(/ udp /g," UDP "),-1!==i.sdp.indexOf("a=group:BUNDLE")?(i.sdp=i.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),i.sdp=i.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),i.sdp=i.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(i.sdp=i.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),i.sdp=i.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),r={sdp:i.sdp,type:"answer"},t.peerConnection.setRemoteDescription(new n(r),(function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)})),t.state="established"):"pr-answer"===i.messageType?(r={sdp:i.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new n(r),(function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}))):"offer"===i.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===i.messageType?(r={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(r),(function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")}),(function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state))};var a={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},u={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},c={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},l=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r=!0,i=!1,o=void 0;try{for(var a,s=n.values()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(t.isSubscriber){if(("inbound-rtp"===u.type||"inboundrtp"===u.type)&&"video"===u.mediaType){if(!t.lastReport)return void(t.lastReport=u);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:u.framerateMean+"",frameRateDecoded:u.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:u.bytesReceived+"",packetsReceived:u.packetsReceived+"",packetsLost:u.packetsLost+""}),t.lastReport=u}}else if(("outbound-rtp"===u.type||"outboundrtp"===u.type)&&"video"===u.mediaType){if(!t.lastReport)return void(t.lastReport=u);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:u.framerateMean+"",frameRateSent:u.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=u}}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}))},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then((function(n){var r=!0,i=!1,o=void 0;try{for(var a,s=n.values()[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t.isSubscriber&&("inbound-rtp"!==u.type&&"inboundrtp"!==u.type||"audio"!==u.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:u.packetsLost+"",frameReceived:u.packetsReceived+"",googJitterReceived:u.jitter+"",bytesReceived:u.bytesReceived+"",packetsReceived:u.packetsReceived+"",packetsLost:u.packetsLost+""}))}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}))},t.getStatsRate=function(e){t.getStats((function(t){t.forEach((function(e){"inbound-rtp"!==e.type&&"inboundrtp"!==e.type||"video"!==e.mediaType||e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-l)/3).toString(),l=e.googFramesDecoded)})),e(t)}))},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats((function(n,r){t.filterStatsCache=n,t.originStatsCache=r,t.lastTimeGetStats=Date.now(),e&&e(n,r)}))},t._getStats=function(e){t.peerConnection.getStats().then((function(n){var r=[],i=!0,o=!1,l=void 0;try{for(var d,f=n.values()[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p=d.value;r.push(p),"outbound-rtp"!==p.type&&"outboundrtp"!==p.type||"video"!==p.mediaType||-1!==p.id.indexOf("rtcp")||(s.id=p.id,s.type=p.type,s.mediaType=p.mediaType,s.bytesSent=p.bytesSent?p.bytesSent+"":"0",s.packetsSent=p.packetsSent?p.packetsSent+"":"0",s.googPlisReceived=p.pliCount?p.pliCount+"":"0",s.googNacksReceived=p.nackCount?p.nackCount+"":"0",s.googFirsReceived=p.firCount?p.firCount+"":"0",s.googFrameRateSent=p.framerateMean?p.framerateMean+"":"0"),"outbound-rtp"!==p.type&&"outboundrtp"!==p.type||"audio"!==p.mediaType||-1!==p.id.indexOf("rtcp")||(a.id=p.id,a.type=p.type,a.mediaType=p.mediaType,a.bytesSent=p.bytesSent?p.bytesSent+"":"0",a.packetsSent=p.packetsSent?p.packetsSent+"":"0"),"inbound-rtp"!==p.type&&"inboundrtp"!==p.type||"audio"!==p.mediaType||p.isRemote||-1!==p.id.indexOf("rtcp")||(u.id=p.id,u.type=p.type,u.mediaType=p.mediaType,u.bytesReceived=p.bytesReceived?p.bytesReceived+"":"0",u.packetsLost=p.packetsLost?p.packetsLost+"":"0",u.packetsReceived=p.packetsReceived?p.packetsReceived+"":"0",u.googJitterReceived=p.jitter?p.jitter+"":"0"),"inbound-rtp"!==p.type&&"inboundrtp"!==p.type||"video"!==p.mediaType||p.isRemote||-1!==p.id.indexOf("rtcp")||(c.id=p.id,c.type=p.type,c.mediaType=p.mediaType,c.bytesReceived=p.bytesReceived?p.bytesReceived+"":"0",c.googFrameRateReceived=p.framerateMean?p.framerateMean+"":"0",c.googFramesDecoded=p.framesDecoded?p.framesDecoded+"":"0",c.packetsLost=p.packetsLost?p.packetsLost+"":"0",c.packetsReceived=p.packetsReceived?p.packetsReceived+"":"0",c.googJitterBufferMs=p.jitter?p.jitter+"":"0",c.googNacksSent=p.nackCount?p.nackCount+"":"0",c.googPlisSent=p.pliCount?p.pliCount+"":"0",c.googFirsSent=p.firCount?p.firCount+"":"0"),-1!==p.id.indexOf("outbound_rtcp_video")&&(s.packetsLost=p.packetsLost?p.packetsLost+"":"0")}}catch(e){o=!0,l=e}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}var h=[s,a,u,c];h.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(h,r)}),(function(e){o.default.error("["+t.clientId+"]"+e)}))},t.addStream=function(e){i=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater((function(){t.onstablestate()}))},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)i&&(t.mediaConstraints=void 0),t.peerConnection.createOffer((function(e){if(e.sdp=d(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")}),(function(e){o.default.debug("["+t.clientId+"]Ups! create offer failed ",e)}),t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer((function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}}),(function(){o.default.debug("["+t.clientId+"]Ups! Something went wrong")}));else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;var e=t.peerConnection.localDescription.sdp;t.sendMessage("ANSWER",e),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var r={};r.messageType=e,r.sdp=n,"OFFER"===e?(r.offererSessionId=t.sessionId,r.answererSessionId=t.otherSessionId,r.seq=t.sequenceNumber+=1,r.tiebreaker=Math.floor(429496723*Math.random()+1)):(r.offererSessionId=t.incomingMessage.offererSessionId,r.answererSessionId=t.sessionId,r.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(r))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find((function(t){return t.track.kind==e}));if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,r){var i=t._getSender(e.kind);if(!i)return r("NO_SENDER_FOUND");try{i.replaceTrack(e)}catch(e){return r&&r(e)}setTimeout((function(){return n&&n()}),50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var d=function(t){var n;if(e.video&&e.maxVideoBW&&(null==(n=t.match(/m=video.*\r\n/))&&(n=t.match(/m=video.*\n/)),n&&n.length>0)){var r=n[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(n[0],r)}return e.audio&&e.maxAudioBW&&(null==(n=t.match(/m=audio.*\r\n/))&&(n=t.match(/m=audio.*\n/)),n&&n.length>0)&&(r=n[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n",t=t.replace(n[0],r)),t};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t},V=n(14),G=n.n(V),z=null,H=function(){try{z=window.require("electron")}catch(e){}return z},W=function(e){var t=a.b.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),n=H();if(!n)return t&&t("electron is null");n.desktopCapturer.getSources({types:["window","screen"]},(function(e,n){if(e)return t&&t(e);t&&t(null,n)}))},K=function(e,t,n){var r=t.width;t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:r,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}},navigator.webkitGetUserMedia(t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))},J=function(){return!!H()},Y=W,$=K,Q=function(e,t){W((function(n,r){if(n)return t&&t(n);!function(e,t){var n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var i=document.createElement("div");i.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",i.setAttribute("style","height: 12%;");var o=document.createElement("div");o.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var a=document.createElement("div");a.setAttribute("style","text-align: right; padding: 16px 0;");var s=document.createElement("button");s.innerHTML="cancel",s.setAttribute("style","width: 85px;"),s.onclick=function(){document.body.removeChild(u),t&&t("NotAllowedError")},a.appendChild(s),r.appendChild(i),r.appendChild(o),r.appendChild(a);var u=document.createElement("div");u.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),u.appendChild(n),u.appendChild(r),document.body.appendChild(u),e.map((function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;"),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+e.thumbnail.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name+"</span>",n.onclick=function(){document.body.removeChild(u),t&&t(null,e.id)},o.appendChild(n)}}))}(r,(function(n,r){if(n)return t&&t(n);K(r,e,t)}))}))},X=103,Z=function(e){var t={};if(t.clientId=e.clientId,e.session_id=X+=1,"undefined"==typeof window||!window.navigator)throw o.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=q(e)):"iOS"===p.getBrowserOS()||p.isSafari()?(o.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=B(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new G.a(e):(t=F(e)).browser="chrome-stable",t},ee=function(e,t,n){var r={};r.config=e,r.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var i=0,a=1,s=!1,u=null,c=function(e){if(i++,u)if(u===e)o.default.debug("Using Video Source/ Audio Source");else{var n=u.getVideoTracks()[0],r=u.getAudioTracks()[0],c=e.getVideoTracks()[0],l=e.getAudioTracks()[0];c&&(n&&u.removeTrack(n),u.addTrack(c)),l&&(r&&u.removeTrack(r),u.addTrack(l))}else u=e;i!==a||s||(s=!0,setTimeout((function(){t(u)}),0))},l=function(e){o.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),i++,s||(s=!0,setTimeout((function(){n&&n(e)}),0))},d=function(){var t={video:e.video,audio:e.audio};if(o.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(c).catch(l);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,c,l);else{var i={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};o.default.error("["+r.streamId+"]"+i.message),n&&n(i)}};if((e.videoSource||e.audioSource)&&(u=new MediaStream,e.videoSource&&u.addTrack(e.videoSource),e.audioSource&&u.addTrack(e.audioSource)),e.video||e.audio||e.screen)if(e.screen){if(J())return e.screen.sourceId?$(e.screen.sourceId,e.screen,(function(e,t){e?l(e):c(t)})):Q(e.screen,(function(e,t){e?l(e):c(t)}));if(p.isFireFox()){if(o.default.debug("["+r.streamId+"]Screen access requested"),!~["screen","window","application"].indexOf(e.screen.mediaSource))return n&&n({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},(function(t){e.audio&&(a++,d()),c(t)}),l)}else if(p.isChrome()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void n({code:"This browser does not support screen sharing"});o.default.debug("["+r.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},(function(t){void 0===t?(o.default.error("["+r.streamId+"]No response from Chrome Plugin. Plugin not installed properly"),l({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})):(e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},(function(t){e.audio&&(a++,d()),c(t)}),l))}))}catch(e){return o.default.debug("["+r.streamId+"]AgoraRTC screensharing plugin is not accessible"),void n({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var f={};return"number"==typeof e.screen.width&&"number"==typeof e.screen.height?f.video={width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:f.video={width:e.screen.width,height:e.screen.height},e.screen.frameRate&&e.screen.frameRate.min?f.video.frameRate={ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:f.video.frameRate=e.screen.frameRate,o.default.debug("use getDisplayMedia, constraints:",f),window.navigator.mediaDevices.getDisplayMedia(f).then((function(t){e.audio&&(a++,d()),c(t)})).catch(l)}o.default.error("["+r.streamId+"]This browser does not support screenSharing"),n({code:"This browser does not support screen sharing"})}}else d();else c(u)},te=n(8),ne=function(e,t,n){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight"].indexOf(t)>-1&&("string"==typeof n||isFinite(n)))return e[t]=""+n},re=new function(){var e=s();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,n){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo((function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()}),(function(t){o.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,n&&n(t)}))},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return o.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then((function(t){e&&setTimeout((function(){e(t)}),0)})).catch((function(e){t&&t(e)}))},e._reloadDevicesInfo=function(t,n){var r=[];e._enumerateDevices((function(n){var i=Date.now();for(var a in n.forEach((function(t){var n=e.devicesHistory[t.deviceId];if((n?n.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var o=n||{initAt:i};o.device=t,o.state=e.deviceStates.ACTIVE,r.push(o),e.devicesHistory[t.deviceId]=o}e.devicesHistory[t.deviceId].lastReloadAt=i})),e.devicesHistory){var s=e.devicesHistory[a];s&&s.state==e.deviceStates.ACTIVE&&s.lastReloadAt!==i&&(s.state=e.deviceStates.INACTIVE,r.push(s)),s.lastReloadAt=i}e.state==e.states.INITED&&r.forEach((function(t){var n=m()({},t);switch(t.device.kind){case"audioinput":n.type="recordingDeviceChanged";break;case"audiooutput":n.type="playoutDeviceChanged";break;case"videoinput":n.type="cameraChanged";break;default:o.default.warning("Unknown device change",n),n.type="unknownDeviceChanged"}e.dispatchEvent(n)})),t&&t()}),n)},e.getDeviceById=function(t,n,r){e.getDevices((function(e){for(var i=0;i<e.length;i++){var o=e[i];if(o&&o.deviceId===t)return n&&n(o)}return r&&r()}))},e.searchDeviceNameById=function(t){var n=e.devicesHistory[t];return n?n.device.label||n.device.deviceId:null},e.getDevices=function(t,n){e._enumerateDevices(t,(function(e){n&&n(e.name+": "+e.message)}))},e.getVideoCameraIdByLabel=function(t,n,r){e.getCameras((function(e){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c.label===t)return n&&n(c.deviceId)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r&&r(M.NOT_FIND_DEVICE_BY_LABEL)}),r)},e.getRecordingDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audioinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getPlayoutDevices=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"audiooutput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e.getCameras=function(t,n){return e._enumerateDevices((function(e){var n=e.filter((function(e){return"videoinput"==e.kind}));t&&t(n)}),(function(e){n&&n(e)}))},e._init((function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",(function(){e._reloadDevicesInfo()})),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)})),e},ie=n(6),oe=n.n(ie),ae=function(e,t,n){for(var r=0;r<n.length;r++)if(e===n[r])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(n)))},se=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==oe()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},ue=function(e,t,n,r,i){if(_e(n)&&(n=1),r=r||255,_e(i)&&(i=!0),_e(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!de(e,n,r,i))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(i?" ASCII characters only.":""))},ce=function(e,t,n,r){if(_e(n)&&(n=1),r=r||1e4,_e(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!fe(e,n,r))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(r,"]. integer only"))},le=function(e,t){if(_e(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!pe(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},de=function(e,t,n,r){return t||(t=0),n||(n=Number.MAX_SAFE_INTEGER),_e(r)&&(r=!0),ye(e)&&(!r||ve(e))&&e.length>=t&&e.length<=n},fe=function(e,t,n){return ge(e)&&e>=t&&e<=n},pe=function(e){return"boolean"==typeof e},he=function(e){return de(e,1,2047)},ve=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}},ge=function(e){return"number"==typeof e&&e%1==0},me=function(e){return"number"==typeof e},ye=function(e){return"string"==typeof e},be=function(e){return e instanceof Array},_e=function(e){return null==e},Ee=n(13),we=function(e){ue(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),ae(e,"profileName",Object.keys(r.SUPPORT_RESOLUTION_LIST));var t=r.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(r.getParameter)("DEFAULT_PROFILE"),t=r.SUPPORT_RESOLUTION_LIST[e]);var n={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&t[3]&&(n.video.frameRate={ideal:t[2],max:t[3]}),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},Se=function(e){return Object.keys(r.SUPPORT_RESOLUTION_LIST).filter((function(t){var n=r.SUPPORT_RESOLUTION_LIST[t],i=["width","height","frameRate"];for(var o in i){var a=i[o];if(e[a]&&n[o]){if("number"==typeof e[a].max&&e[a].max<n[o])return!1;if("number"==typeof e[a].min&&e[a].min>n[o])return!1}}return!0})).reverse()},Ie=function(e){var t=r.AUDIO_PROFILE_SETTINGS[e]||r.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}},Oe=function(e){var t=s();if(t.params=m()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var e={};t.getVideoTrack()===this?(o.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(o.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):o.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,n){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:n,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,n,r){var i=a.b.reportApiInvoke(e.sid,{callback:r,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});ue(n,"url",1,1024,!1),ue(t,"id",1,1024,!1);var s=function(t){o.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),i(M.LOAD_AUDIO_FAILED)},u=new XMLHttpRequest;u.open("GET",n,!0),u.responseType="arraybuffer",u.onload=function(){if(u.status>400)s("".concat(u.status," ").concat(u.statusText));else{var n=u.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(n,(function(n){e.audioMixing.buffer[t]=n,i(null)}),(function(t){o.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),i(t)}))}},u.onerror=function(){return s("load error")},u.ontimeout=function(){return s("timeout")},u.send()},e.createAudioBufferSource=function(t){var n=a.b.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var r=e.audioMixing.buffer[t.id],i=e.audioMixing.ctx.createBufferSource();i.buffer=r;var s=e.audioMixing.ctx.createGain();if(i.connect(s),s.connect(e.audioMixing.mediaStreamDest),i.gainNode=s,t.loop)i.loop=!0,i.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(p.isChrome)()){i.loop=!0;var u=t.cycle*r.duration*1e3-(t.playTime||0);i.start(0,t.playTime/1e3,u/1e3)}else o.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),i.start(0,t.playTime/1e3);else i.start(0,t.playTime/1e3);var c=e.audioMixing.sounds[t.soundId];return c.source=i,e._flushAudioMixingMuteStatus(),i.addEventListener("ended",(function(){i===c.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:i,sound:c})})),n(),i}return o.default.error("[".concat(e.streamId,"] "),"AUDIOBUFFER_NOT_FOUND",t.id),n(!1),!1},e.on("audioSourceEnded",(function(t){var n=t.source,r=t.sound;r&&r.state===e.audioMixing.states.BUSY&&!r.pauseAt&&(r.state=e.audioMixing.states.IDLE,r.startAt=null,r.startOffset=null,r.resumeAt=null,r.resumeOffset=null,n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))})),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach((function(e){e.stop()}))},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(o.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(Ee.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find((function(e){return e&&e.track&&"audio"==e.track.kind})),r=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];n&&n.replaceTrack&&r&&n.replaceTrack(r)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var n=e.audioMixing.sounds[t];n.state!==e.audioMixing.states.BUSY&&n.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return o.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&r.source&&!r.source.connectedToDestination&&(r.source.gainNode.connect(e.audioMixing.ctx.destination),r.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach((function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)}));case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var n={soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0},r=t.replace,i=e.createAudioBufferSource(n);return i.sound=e.audioMixing.sounds[t.soundId],i?(i.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),r&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),i):null},e._stopAudioMixingBufferSource=function(t){var n=e.audioMixing.sounds[t.soundId].source;return n?(n.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),n.stop(),n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,n):null},e._flushAudioMixingMuteStatus=function(t){for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&(void 0!==t&&(r.muted=!!t),r.source&&(r.muted?r.source.gainNode.gain.value=0:r.source.gainNode.gain.value=r.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,n,r){var i=e.audioMixing.sounds[n.soundId],a=-1===n.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";o.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(a,", state is ").concat(i.state)),r&&r(a)},e._handleAudioMixingNoSourceError=function(t,n,r){e.audioMixing.sounds[n.soundId].state=e.audioMixing.states.IDLE;var i=-1===n.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";o.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(i)),r&&r(i)},e._getOneEffectStates=function(t){var n=e.audioMixing.sounds[t.soundId];return function(){return n?{state:n.state,startAt:n.startAt,resumeAt:n.resumeAt,pauseOffset:n.pauseOffset,pauseAt:n.pauseAt,resumeOffset:n.resumeOffset,stopAt:n.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(o.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,n){se(t,"options");var r=t.soundId,i=(t.filePath,t.cacheResource);if(t.cycle,t.loop,t.playTime,t.replace,Object(p.isSafari)()&&Object(p.getBrowserVersion)()<12){var a="BROWSER_NOT_SUPPORT";return o.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),a),n(a)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(r);var s=e.audioMixing.sounds[r];if(s.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return a="Invalid Parmeter cycle: "+t.cycle,o.default.error("[".concat(e.streamId,"] ").concat(r),a),n(a);if(_e(i)&&(t.cacheResource=!0),s.state=e.audioMixing.states.STARTING,s.options=t,e.audioMixing.buffer[t.filePath]){var u=e._startAudioMixingBufferSource(t);if(u)return s.source=u,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);s.state=e.audioMixing.states.IDLE;var c="CREATE_BUFFERSOURCE_FAILED";if(n)return n(c);o.default.error("[".concat(e.streamId,"] "),c)}else e.loadAudioBuffer(t.filePath,t.filePath,(function(r){if(r)s.state=e.audioMixing.states.IDLE,n?n(r):o.default.error("[".concat(e.streamId,"] "),r);else{var i=e._startAudioMixingBufferSource(t);if(i)return s.source=i,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);if(s.state=e.audioMixing.states.IDLE,r="CREATE_BUFFERSOURCE_FAILED",n)return n(r);o.default.error("[".concat(e.streamId,"] "),r)}}))}else e._handleAudioMixingInvalidStateError("_playEffect",t,n)},e._stopOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?r.state===e.audioMixing.states.BUSY||r.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),r.stopAt=Date.now(),r.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[r.options.filePath]&&!r.options.cacheResource&&(o.default.debug("Recycled buffer ".concat(r.options.filePath)),delete e.audioMixing.buffer[r.options.filePath]),void(n&&n(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,n):n("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(r.pauseAt=Date.now(),r.state=e.audioMixing.states.PAUSED,r.resumeAt?r.pauseOffset=r.pauseAt-r.resumeAt+r.resumeOffset:r.pauseOffset=r.pauseAt-r.startAt+r.startOffset,n&&n(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,n);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,n)},e._resumeOneEffect=function(t,n){var r=e.audioMixing.sounds[t.soundId];if(r.state===e.audioMixing.states.PAUSED){var i={soundId:t.soundId,filePath:r.options.filePath,cycle:r.options.cycle,loop:r.options.loop,playTime:r.pauseOffset,replace:r.options.replace},a=e._startAudioMixingBufferSource(i);if(!a){var s="CREATE_BUFFERSOURCE_FAILED";return n(s),void o.default.error("[".concat(e.streamId,"] "),s)}r.source=a,r.resumeAt=Date.now(),r.resumeOffset=r.pauseOffset,r.state=e.audioMixing.states.BUSY,r.pauseAt=null,r.pauseOffset=null,n(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,n)},e._getOneEffectDuration=function(t){var n=e.audioMixing.sounds[t.soundId];return n.options&&n.options.filePath&&e.audioMixing.buffer[n.options.filePath]?1e3*e.audioMixing.buffer[n.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,n){var r=e.audioMixing.sounds[t.soundId];return r.state===e.audioMixing.states.PAUSED?r.pauseOffset%e._getOneEffectDuration(t):r.state===e.audioMixing.states.BUSY?r.resumeAt?(Date.now()-r.resumeAt+r.resumeOffset+r.startOffset)%e._getOneEffectDuration(t):(Date.now()-r.startAt+r.startOffset)%e._getOneEffectDuration(t):void(n&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,n,r){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,r);var a={soundId:t.soundId,filePath:i.options.filePath,loop:i.options.loop,cycle:i.options.cycle,playTime:n},s=e._startAudioMixingBufferSource(a);if(!s){var u="CREATE_BUFFERSOURCE_FAILED";return r&&r(u),void o.default.error("[".concat(e.streamId,"] "),u)}i.source=s,i.startAt=Date.now(),i.startOffset=n,i.resumeAt=null,i.resumeOffset=null,i.pauseOffset=null,i.pauseAt=null}else{if(i.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,r);i.pauseOffset=n}r&&r(null)},e.startAudioMixing=function(t,n){var i=a.b.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"audioMixingPlayed"}),n&&n(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});se(t,"options");var o=t.filePath,s=t.cacheResource,u=t.cycle,c=t.loop,l=t.playTime,d=t.replace;ue(o,"filePath",1,Object(r.getParameter)("FILEPATH_LENMAX"),!1),ce(l,"playTime",0,1e8),!_e(u)&&ce(u,"cycle"),!_e(c)&&le(c,"loop"),!_e(d)&&le(d,"replace"),!_e(s)&&le(s,"cacheResource");var f=m()({soundId:-1},t);e._playOneEffect(f,i)},e.stopAudioMixing=function(t){var n=a.b.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},n)},e.pauseAudioMixing=function(t){var n=a.b.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},n)},e.resumeAudioMixing=function(t){var n=a.b.reportApiInvoke(e.sid,{callback:function(n,r){if(n)return t&&t(n);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},n)},e.adjustAudioMixingVolume=function(t){var n=a.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});ce(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),n()},e.getAudioMixingDuration=function(){var t=a.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),n=e._getOneEffectDuration({soundId:-1});return t(null,n),n},e.getAudioMixingCurrentPosition=function(){var t=a.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),n=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,n),n},e.setAudioMixingPosition=function(t,n){var r=a.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});ce(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,r)},e.playEffect=function(t,n){var i=a.b.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"effectPlayed"}),n&&n(null)},name:"Stream.playEffect",options:t});se(t,"options");var o=t.soundId,s=t.filePath,u=t.cycle;ce(o,"soundId",1,1e4),ue(s,"filePath",0,Object(r.getParameter)("FILEPATH_LENMAX"),!1),!_e(u)&&ce(u,"cycle"),e._playOneEffect(t,i)},e.stopEffect=function(t,n){var r=a.b.reportApiInvoke(e.sid,{callback:n,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});ce(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},r)},e.stopAllEffects=function(t){var n=a.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var u in e.audioMixing.sounds){var c=e.audioMixing.sounds[u];-1!==c.soundId&&(c.state!==e.audioMixing.states.BUSY&&c.state!==e.audioMixing.states.PAUSED||(o++,e._stopOneEffect({soundId:u},s)))}o||n(null)},e.preloadEffect=function(t,n,i){var o=a.b.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});ce(t,"soundId",1,1e4),ue(n,"filePath",1,Object(r.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,n),e.audioMixing.buffer[n]?o(null):e.loadAudioBuffer(n,n,o)},e.unloadEffect=function(t,n){var r=a.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});ce(t,"soundId",1,1e4);var i=e.audioMixing.sounds[t];if(!i){var s="SOUND_NOT_EXISTS";return o.default.error(s,t),void r(s)}var u=i.options?i.options.filePath:i.filePath;if(u)delete e.audioMixing.buffer[u],delete e.audioMixing.sounds[t],r(null);else{var c="SOUND_BUFFER_NOT_FOUND";o.default.error(c,t),r(c)}},e.pauseEffect=function(t,n){var r=a.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},r)},e.pauseAllEffects=function(t){var n=a.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var u in e.audioMixing.sounds)"-1"!==u&&e.audioMixing.sounds[u].state===e.audioMixing.states.BUSY&&(o++,e._pauseOneEffect({soundId:u},s));o||n(null)},e.resumeEffect=function(t,n){ce(t,"soundId",1,1e4);var r=a.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},r)},e.resumeAllEffects=function(t){var n=a.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),r=!1,i=0,o=0,s=function(e){r||(e?(n(e),r=!0):i+=1,i===o&&(n(null),r=!0))};for(var u in e.audioMixing.sounds)"-1"!==u&&e.audioMixing.sounds[u].state===e.audioMixing.states.PAUSED&&(o++,e._resumeOneEffect({soundId:u},s));o||n(null)},e.getEffectsVolume=function(){var t=[];for(var n in e.audioMixing.sounds){var r=e.audioMixing.sounds[n];r&&"-1"!==n&&t.push({soundId:parseInt(n),volume:r.volume})}return t},e.setEffectsVolume=function(t,n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:n});for(var i in ce(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var o=e.audioMixing.sounds[i];"-1"!==i&&(o.volume=t)}e._flushAudioMixingMuteStatus(),r(null)},e.setVolumeOfEffect=function(t,n,r){var i=a.b.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:r});ce(t,"soundId",0,1e4),ce(n,"volume",0,100),e._initSoundIfNotExists(t),e.audioMixing.sounds[t].volume=n,e._flushAudioMixingMuteStatus(),i(null)}}(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(p.isLegacyChrome)()||(e.videoConstraint.frameRate={ideal:30,max:30}),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(p.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(p.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(p.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(p.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(p.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(p.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(n instanceof Array)){var i=we(n+="");return i&&i.video?(e.videoConstraint=m()(e.videoConstraint,{width:{ideal:i.video.width},height:{ideal:i.video.height}}),t.attributes.resolution=i.attributes.resolution,(s=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&s.applyConstraints?(o.default.debug("setVideoResolution applyConstraints",e.videoConstraint),s.applyConstraints(e.videoConstraint).then(r).catch(r)):r(),!0):(r("NO_PROFILE_".concat(n)),!1)}var s,u=n[0],c=n[1];e.videoConstraint=m()(e.videoConstraint,{width:{ideal:u},height:{ideal:c}}),t.attributes.resolution="".concat(u,"x").concat(c),(s=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&s.applyConstraints?(o.default.debug("setVideoResolution applyConstraints",e.videoConstraint),s.applyConstraints(e.videoConstraint).then(r).catch(r)):r()},e.setVideoFrameRate=function(n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(p.isFireFox)())return r("FIREFOX_NOT_SUPPORTED"),!1;if("object"===oe()(n)&&n instanceof Array&&n.length>1){e.videoConstraint=m()(e.videoConstraint,{frameRate:{ideal:n[0],max:n[1]}}),t.attributes.minFrameRate=n[0],t.attributes.maxFrameRate=n[1];var i=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return i&&i.applyConstraints?(o.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),i.applyConstraints(e.videoConstraint).then(r).catch(r)):r(),!0}return r("INVALID_PARAM_".concat(JSON.stringify(n))),!1},e.setVideoBitRate=function(n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===oe()(n)&&n instanceof Array&&n.length>1?(t.attributes.minVideoBW=n[0],t.attributes.maxVideoBW=n[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=n[0],e.connectionSpec.maxVideoBW=n[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),r(),!0):(r("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenBitRate=function(n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===oe()(n)&&n instanceof Array&&n.length>1?(t.screenAttributes.minVideoBW=n[0],t.screenAttributes.maxVideoBW=n[1],r(),!0):(r("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenProfile=function(t){var n=a.b.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});ae(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var r=we(t);return r&&r.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=r.screen.width,e.screenConstraint.mandatory.maxHeight=r.screen.height,r.screen.frameRate&&r.screen.frameRate.min&&r.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=r.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=r.screen.frameRate.max)):e.screenConstraint=m()(e.screenConstraint,r.screen),e.screenAttributes.width=r.screen.width,e.screenAttributes.height=r.screen.height,e.screenAttributes.minFr=r.screen.frameRate.min,e.screenAttributes.maxFr=r.screen.frameRate.max,n(),!0):(n("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var n=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),n()},e.setVideoProfileCustomPlus=function(n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.videoConstraint.width=n.width,e.videoConstraint.height=n.height,t.attributes.resolution="".concat(n.width,"x").concat(n.height),e.setVideoFrameRate([n.framerate,n.framerate]),e.setVideoBitRate([n.bitrate,n.bitrate]),r()},e.setVideoProfile=function(n){var r=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),i=we(n);if(!i){var s="Invalid Profile ".concat(n);throw new Error(s)}if(e.profile=n,i&&i.video){e.profile=i.profileName,e.videoConstraint=m()(e.videoConstraint,i.video),e.connectionSpec&&i.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=i.attributes.minVideoBW,e.connectionSpec.maxVideoBW=i.attributes.maxVideoBW),Object(p.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(p.isFireFox)()&&(e.videoConstraint.frameRate={ideal:30,max:30}),t.attributes=m()(t.attributes,i.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var u=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return u&&u.applyConstraints?(o.default.debug("setVideoProfile applyConstraints",e.videoConstraint),u.applyConstraints(e.videoConstraint).then((function(t){r(t),Object(te.g)(e.stream,(function(t,n){e.videoWidth=t,e.videoHeight=n}),(function(t){o.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t)}))})).catch(r)):r(),!0}return r("INVALID_VIDEO_PROFILE_".concat(n)),!1},e.setAudioProfile=function(t){var n=a.b.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});ae(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var r=Ie(t);return e.highQuality=r.highQuality,e.stereo=r.stereo,e.speech=r.speech,e.lowQuality=r.lowQuality,e.stereo&&Object(p.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),n(),!0},e.setVideoEncoderConfiguration=function(t){se(t,"config");var n=a.b.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(ce(t.resolution.width,"config.resolution.width"),ce(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(ce(t.frameRate.min,"config.frameRate.min"),ce(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(ce(t.bitrate.min,"config.bitrate.min",1,1e7),ce(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),n()},e.getSupportedProfile=function(t){var n=a.b.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var r="ONLY_LOCAL_STREAM_SUPPORTED";return o.default.error(r),n(r)}if(!e.stream)return r="STREAM_NOT_INIT",o.default.error(r),n(r);if(!e.stream.getVideoTracks)return r="TRACK_NOT_SUPPORT",o.default.error(r),n(r);var i=e.stream.getVideoTracks()[0];if(!i)return r="NO_VIDEO_TRACK_FOUND",o.default.error(r),n(r);if(!i.getCapabilities)return r="GETCAPABILITY_NOT_SUPPORT",o.default.error(r),n(r);var s=i.getCapabilities();return n(null,Se(s))}}(t,e),t.on("collectStats",(function(e){e.promises.push(t._getPCStats(e.interval)),e.promises.push(new Promise((function(e){var n={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(ne(n,"videoReceiveResolutionHeight",t.videoHeight),ne(n,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(p.isSafari)()||Object(p.isFireFox)())&&(ne(n,"videoSendResolutionHeight",t.videoHeight),ne(n,"videoSendResolutionWidth",t.videoWidth)),(Object(p.isSafari)()||Object(p.isFireFox)())&&t.uplinkStats&&ne(n,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(n)}))),e.promises.push(new Promise((function(e){var n={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(ne(n,"accessDelay",t.traffic_stats.access_delay),ne(n,"endToEndDelay",t.traffic_stats.e2e_delay),ne(n,"videoReceiveDelay",t.traffic_stats.video_delay),ne(n,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&ne(n,"accessDelay",t.traffic_stats.access_delay),e(n)})))})),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){return!(!Object(r.getParameter)("DUALSTREAM_OPERATION_CHECK")||!t.isDualStream)&&(o.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED")},t.setUserId=function(e){var n=a.b.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&o.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,n()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return t.audio},t.hasVideo=function(){return t.video},t.hasScreen=function(){return t.screen},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(r,i){var s=a.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.init",options:arguments,tag:"tracer"}),u=((new Date).getTime(),arguments[2]);if(void 0===u&&(u=2),!0===t.initialized)return s({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return s({type:"warning",msg:"STREAM_NOT_LOCAL"});var c=Math.random().toString().slice(3);this._streamInitID=c,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=re.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=re.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.videoSource||e.audioSource){o.default.debug("[".concat(t.streamId,"] Requested access to local media"));var l={streamId:t.streamId};e.videoSource?l.videoSource=e.videoSource:e.screen?l.screen=t.screenConstraint:e.video&&(l.video=t.videoConstraint),e.audioSource?l.audioSource=e.audioSource:e.audio&&(l.audio=t.audioConstraint),ee(l,(function(r){if(l.screen&&o.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(l.video||l.audio)&&o.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){r.getTracks().forEach((function(e){e.stop()}));var i={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return o.default.error(t.streamId,i.info),void s(i)}if(t._streamInitID!==c)return r.getTracks().forEach((function(e){e.stop()})),i={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"},o.default.error(t.streamId,i.info),void s(i);t.dispatchEvent({type:"accessAllowed"}),t.stream=r,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(te.g)(r,(function(e,n){t.videoWidth=e,t.videoHeight=n}),(function(e){o.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)})),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach((function(e){e&&!e.onended&&(e.onended=n)})),s()}),(function(e){var n={type:"error",info:null};switch(e&&(n.msg=e.name||e.code||e,e.message&&(n.info=e.message),e.code&&(n.info?n.info+=". "+e.code:n.info=" "+e.code),e.constraint&&(n.info?n.info+=". Constraint: "+e.constraint:n.info="constraint: "+e.constraint)),n.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),u>0)return void setTimeout((function(){t.init((function(e){return s(e)}),s,u-1)}),1);n.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":n.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":n.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":n.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":n.msg="CONSTRAINT_NOT_SATISFIED";break;default:n.msg||(n.msg="UNDEFINED")}var r="Media access ".concat(n.msg).concat(n.info?": "+n.info:"");o.default.error("[".concat(t.streamId,"] "),r),s(n)}))}else s({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){o.default.error("[".concat(t.streamId,"] Stream init: "),e),s({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];n&&n.label&&(t.audioName=n.label)}}},t.close=function(){var e=a.b.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(o.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),void 0!==t.stream){var n=t.stream.getTracks();for(var r in n)n.hasOwnProperty(r)&&n[r].stop();t.stream=void 0}Object(p.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders&&t.pc.peerConnection.getSenders().forEach((function(e){e&&(o.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))})),t.initialized=!1,t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),e()},t.enableAudio=function(){var e,n=a.b.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return o.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||o.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});o.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&o.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.enableVideo=function(){var e,n=a.b.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return o.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||o.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});o.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&o.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t.unmuteAudio=function(){var e,n=a.b.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||o.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&o.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.unmuteVideo=function(){var e,n=a.b.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||o.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&o.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t._unmuteAudio=function(){return o.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled)&&(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,!0)},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return o.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&a.b.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return o.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled)&&(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),!0)},t._muteVideo=function(){return o.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&a.b.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(r){var i=a.b.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"}),o=t.checkDualStreamEnabled();if(o)return i(o);if(t.pc&&t.pc.addTrack(r,t.stream),"audio"==r.kind){t._cleanupAudioMixing();var s=new MediaStream;t.userMuteAudio&&(r.enabled=!1),s.addTrack(r);var u=t.stream.getVideoTracks()[0];u&&(s.addTrack(u),t.audio=!0,e.audio=!0),t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(r.enabled=!1),t.stream.addTrack(r),t.video=!0,e.video=!0;r.onended||(r.onended=n),i()},t.removeTrack=function(n){var r=a.b.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"}),i=t.checkDualStreamEnabled();if(i)return r(i);t.pc&&t.pc.removeTrack(n,t.stream),t.stream.removeTrack(n),t._cleanupAudioMixing(),"audio"===n.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==n.readyState&&(n.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(n.kind," Stopped"))),r()},t.setAudioOutput=function(e,n,r){var i=a.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return de(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,(function(){return i()}),i):i()):(o.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),i(M.INVALID_PARAMETER))},t.play=function(e,n,r){"function"==typeof n&&(r=n,n=null),o.default.debug("[".concat(t.streamId,"] play()."),e,n);var i=a.b.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:r});if(ue(e,"elementID"),_e(n)||(_e(n.fit)||ae(n.fit,"fit",["cover","contain"]),_e(n.muted)||le(n.muted,"muted")),t.player)o.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then((function(){i(null)})).catch(i);else{t.elementID=e,t.playOptions=n,(!t.local||t.video||t.screen||t.hasAudio())&&(t.player=new U({id:t.getId(),stream:t,elementID:e,options:n}));var s={audio:null,video:null};t.on("player-status-change",(function e(n){if(s[n.mediaType]=n,s.audio&&s.video)if(t.removeEventListener("player-status-change",e),s.video.isErrorState||s.audio.isErrorState){var r=s.video.isErrorState?s.video:s.audio;i({isErrorState:!0,status:r.status,reason:r.reason,video:s.video,audio:s.audio})}else"aborted"===s.video.status&&"aborted"===s.audio.status?i({status:"aborted",reason:"stop",video:s.video,audio:s.audio}):i(null)})),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});o.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(t.player.destroy(),delete t.player):o.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!!t.player&&(!!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video))||!!(t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,n;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(n=t.player.audio.play()),n=n||Promise.resolve(),Promise.all([e,n])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var n=t.stream.getVideoTracks()[0];if(n)return o.default.info("[".concat(t.streamId,"] getVideoTrack"),n),e(),n}o.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=a.b.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];if(n)return o.default.info("[".concat(t.streamId,"] getAudioTracks"),n),e(),n}o.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._replaceMediaStreamTrack=function(e,n,r){if(t.stream){if("video"==e.kind){if(a=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(a),t.stream.addTrack(e),o.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==a.readyState&&(a.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(a.kind," Stopped"))),n&&n();var i="MEDIASTREAM_TRACK_NOT_FOUND";return o.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}if("audio"==e.kind){var a;if(a=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var s=new MediaStream;s.addTrack(e);var u=t.stream&&t.stream.getVideoTracks()[0];return u&&s.addTrack(u),t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),o.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==a.readyState&&(a.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(a.kind," Stopped"))),n&&n()}return i="MEDIASTREAM_TRACK_NOT_FOUND",o.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),r(i)}return i="INVALID_TRACK_TYPE",o.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i," ").concat(e.kind)),r&&r(i)}return i="NO_STREAM_FOUND",o.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(i)),r&&r(i)},t.replaceTrack=function(e,r,i){var s=a.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});if(!e||!e.kind)return s("INVALID_TRACK");var u=t.checkDualStreamEnabled();return u?s(u):(t._cleanupAudioMixing(),e.onended||(e.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,(function(){return o.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,(function(e){return s(null,e)}),s)}),(function(n){return o.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(n)),s(n)})):t._replaceMediaStreamTrack(e,(function(e){return s(null,e)}),s))},t.setAudioVolume=function(e){var n=a.b.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});ce(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),n()},t.getStats=function(e,n,r){var i={type:"collectStats",promises:[],interval:r};t.dispatchEvent(i),Promise.all(i.promises).then((function(n){for(var r={},i=n.length-1;i>=0;i--){var o=n[i];m()(r,o)}e&&setTimeout(e.bind(t,r),0)})).catch((function(e){n&&setTimeout(n.bind(t,e),0)}))},t._getPCStats=function(e){return new Promise((function(n,r){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_NOT_ESTABLISHED");t.pc.getStats((function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats)return r("PEER_CONNECTION_STATE_CHANGE");var i=t.pc.isSubscriber?function(e){var t={};return e.forEach((function(e){e.id&&(-1===e.id.indexOf("recv")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(ne(t,"audioReceiveBytes",e.bytesReceived),ne(t,"audioReceivePackets",e.packetsReceived),ne(t,"audioReceivePacketsLost",e.packetsLost)):(ne(t,"videoReceiveBytes",e.bytesReceived),ne(t,"videoReceivePacketsLost",e.packetsLost),ne(t,"videoReceivePackets",e.packetsReceived),ne(t,"videoReceiveFrameRate",e.googFrameRateReceived),ne(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),ne(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),ne(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))})),t}(e):function(e){var t={};return e.forEach((function(e){e.id&&(-1===e.id.indexOf("send")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(ne(t,"audioSendBytes",e.bytesSent),ne(t,"audioSendPackets",e.packetsSent),ne(t,"audioSendPacketsLost",e.packetsLost)):(ne(t,"videoSendBytes",e.bytesSent),ne(t,"videoSendPackets",e.packetsSent),ne(t,"videoSendPacketsLost",e.packetsLost),ne(t,"videoSendFrameRate",e.googFrameRateSent),ne(t,"videoSendResolutionWidth",e.googFrameWidthSent),ne(t,"videoSendResolutionHeight",e.googFrameHeightSent))))})),t}(e);return n(i)}),e)})).then((function(e){return t.pc.isSubscriber?(Object(p.isFireFox)()||Object(p.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(ne(e,"videoReceiveResolutionHeight",t.videoHeight),ne(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(p.isSafari)()||Object(p.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(ne(e,"videoSendResolutionHeight",t.videoHeight),ne(e,"videoSendResolutionWidth",t.videoWidth))),(Object(p.isSafari)()||Object(p.isFireFox)())&&t.uplinkStats&&ne(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)}))},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new te.a(t.stream),t.audioLevelHelper.getAudioLevel();o.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else o.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480P"),t._switchVideoDevice=function(e,n,r){if(e===t.cameraId)return n&&n();var i={video:m()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};o.default.debug("[".concat(t.streamId,"] ").concat(i)),ee(i,(function(i){try{var o=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),n&&n()};Object(p.isSafari)()?t.replaceTrack(i.getVideoTracks()[0],o,r):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(i.getVideoTracks()[0]),o())}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t._switchAudioDevice=function(e,n,r){if(e===t.microphoneId)return n&&n();var i={video:!1,audio:m()({},t.audioConstraint,{deviceId:{exact:e}})};o.default.debug("[".concat(t.streamId,"] "),i),ee(i,(function(i){var o=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},n&&n()};try{Object(p.isSafari)()?t.replaceTrack(i.getAudioTracks()[0],o,r):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(i.getAudioTracks()[0]),o())}catch(e){return r&&r(e)}}),(function(e){return r&&r(e)}))},t.switchDevice=function(e,n,r,i){var s=a.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});ue(n,"deviceId");var u=function(){return t.inSwitchDevice=!1,s()},c=function(e){t.inSwitchDevice=!1,o.default.error("[".concat(t.streamId,"] "),e),s(e)};if(t.inSwitchDevice)return s("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return c("Only the local stream can switch the device.");if(t.screen&&"video"===e)return c("The device cannot be switched during screen-sharing.");if(t.videoSource||t.audioSource)return c("The device cannot be switched when using videoSource or audioSource.");if(t.lowStream)return c("The device cannot be switched when using lowstream.");var l=!1;for(var d in t.audioMixing.sounds)if(t.audioMixing.sounds[d].state!==t.audioMixing.states.IDLE){l=!0;break}if(t.audioMixing.audioContextInited&&l)return c("The device cannot be switched when using audio Mixing.");re.getDeviceById(n,(function(){if("video"===e)t._switchVideoDevice(n,u,c);else{if("audio"!==e)return c("Invalid type.");t._switchAudioDevice(n,u,c)}}),(function(){return c("The device does not exist.")}))},t},Te=n(15),Ae=["live","rtc","web","interop","h264_interop","web-only"],Re=["vp8","h264"],ke=["aes-128-xts","aes-256-xts","aes-128-ecb"],Ce=n(16),Ne=n.n(Ce),xe=function(e){e&&e.apply(this,[].slice.call(arguments,1))},Le=n(7),Pe=function(e){var t=s(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,e.host instanceof Array?t.host=e.host:t.host=[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,o.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(d({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){if(t.needReconnect=!0,o.default.debug("["+t.clientId+"] start connect:"+t.host[t.hostIndex]),t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={},t.connection.url){var n=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/);if(n)t.turnConfig.url=n[1],Object(r.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(n[2])+30),Object(r.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(n[2])+30);else{var i=t.host[t.hostIndex].split(":");t.turnConfig.url=i[0],Object(r.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[1])+30),Object(r.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[1])+30)}}t.connection.onopen=function(e){o.default.debug("["+t.clientId+"] websockect opened: "+t.host[t.hostIndex]),t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(Le.d)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(d({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(te.d)(e.data);var n=JSON.parse(e.data);t.lastMsgTime=Date.now(),n.hasOwnProperty("_id")?t.dispatchEvent(d({type:n._id,msg:n})):n.hasOwnProperty("_type")&&t.dispatchSocketEvent(d({type:n._type,msg:n._message}))}},t.connection.onclose=function(n){t.needReconnect?t.isTimeout||t.isInit?(o.default.debug("["+t.clientId+"] websockect connect timeout"),a.b.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):t.dispatchEvent(d({type:"disconnect",event:n})):(o.default.debug("["+t.clientId+"] websockect closeed"),xe(e.onFailure,n),clearTimeout(t.timeoutCheck),t.dispatchEvent(d({type:"close",event:n})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout((function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())}),5e3)},t.creatConnection(),t.sendMessage=function(e,n){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var r=JSON.stringify(e);t.sendbytes+=Object(te.d)(r),t.connection.send(r)}else n({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close()},t.sendSignalCommand=function(e,n){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,(function(r){r.msg&&n&&n(r.msg._result,r.msg.message),delete t.dispatcher.eventListeners[e._id]})),t.sendMessage(e,(function(e){e.reason="NOT_CONNECTED",n&&n(e.reason,e)}))},t.requests=[];var n=function(e){var n=t.requests.findIndex((function(t){return t.id===e.type}));if(n>=0)var r=t.requests.splice(n,1)[0];r&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&r.callback&&r.callback(e.msg._result,e.msg._message)):o.default.warning("Detached Response",e.type,e.msg)};return t.sendRequest=function(e,r){e=m()({_id:"_request_"+t.requestID},e),t.requestID+=1;var i={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:r};t.requests.push(i),t.addEventListener(e._id,n),t.sendMessage(e,function(e){var n=this,r=t.requests.findIndex((function(e){return e.id===n.id}));r>=0&&(n=t.requests.splice(r,1)[0]),n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",n.callback&&n.callback(e.reason,e)):o.default.warning("handleSendError",n)}.bind(i))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(r.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(r.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),n=t.requests.length-1;n>=0;n--){var i=t.requests[n];i.timeoutCounter>=e?(t.requests.splice(n,1),o.default.error("Request Timeout",i.timeoutCounter,i.message),i.callback&&i.callback("TIMEOUT")):i.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(r.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,(function(){}))},t},De=function(e,t){var n={connect:function(){t.host=e,n.signal=Pe(t),n.on=n.signal.on,n.dispatchEvent=n.signal.dispatchEvent,n.signal.on("onopen",(function(e){n.signal.onEvent=function(e){n.dispatchEvent(d({type:e.event,msg:e}))},n.dispatchEvent(d({type:"connect",msg:e}))})),n.signal.on("onError",(function(e){var t=e.msg;onError(t.code,"error")}))},getLastMsgTime:function(){return n.signal&&n.signal.lastMsgTime},getSendBytes:function(){return n.signal.getSendBytes()},getRecvBytes:function(){return n.signal.getRecvBytes()},getDuration:function(){return n.signal.getDuration()},disconnect:function(){n.signal.disconnect()},close:function(){n.signal.close()},getURL:function(){return n.signal.getURL()},reconnect:function(){n.signal.reconnect()},connectNext:function(){n.signal.connectNext()},replaceHost:function(e){n.signal.replaceHost(e)},emitSimpleMessage:function(e,t){n.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){n.signal.sendRequest(e,t)},emitReport:function(e){n.signal.sendReport(e)}};return n.connect(),n},Me=n(5),je=n.n(Me),Ue=n(9),Fe=n.n(Ue),Be=function(e,t){var n=!1,i=0,s={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:r.VERSION,seq:0,requestId:1};Object(r.getParameter)("PROXY_CS").map((function(u){var c=(new Date).getTime();qe("https://"+u+"/api/v1",s,(function(s,l){if(s)return o.default.debug("["+e.clientId+"] Request proxy server failed: ",s),i++,a.b.requestProxyAppCenter(e.sid,{lts:c,succ:!1,APAddr:u,workerManagerList:null,ec:JSON.stringify(s),response:JSON.stringify({err:s,res:l})}),void(i>=Object(r.getParameter)("PROXY_CS").length&&t&&t("Get proxy server failed: request all failed"));if(!n)if((l=JSON.parse(l)).json_body){var d=JSON.parse(l.json_body);if(o.default.debug("["+e.clientId+"] App return:",d.servers),200!==d.code)s="Get proxy server failed: response code ["+d.code+"], reason [ "+d.reason+"]",o.default.debug("["+e.clientId+"] "+s),a.b.requestProxyAppCenter(e.sid,{lts:c,succ:!1,APAddr:u,workerManagerList:null,ec:s,response:JSON.stringify({err:s,res:l})});else{n=!0;var f=Ge(d.servers);a.b.requestProxyAppCenter(e.sid,{lts:c,succ:!0,APAddr:u,workerManagerList:JSON.stringify(f),ec:null,response:JSON.stringify({res:l})}),t&&t(null,f)}}else o.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),a.b.requestProxyAppCenter(e.sid,{lts:c,succ:!1,APAddr:u,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:l})})}))}))},qe=function(e,t,n){var r={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(Le.c)(e,r,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":61})},Ve=function(e,t,n){var r=!1,i=0,s={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map((function(u){var c=(new Date).getTime();!function(e,t,n){Object(Le.c)(e,t,(function(e){n&&n(null,e)}),(function(e){n&&n(e)}))}("https://"+u+":4000/v2/machine",s,(function(s,l){if(s)return o.default.debug("["+e.clientId+"] Request worker manager failed: ",s),i++,a.b.requestProxyWorkerManager(e.sid,{lts:c,succ:!1,workerManagerAddr:u,ec:JSON.stringify(s),response:JSON.stringify({res:l})}),void(i>=t.length&&n&&n("requeet worker manager server failed: request failed"));if(!r){if(!(l=JSON.parse(l)).serverResponse)return n&&n("requeet worker manager server failed: serverResponse is undefined");r=!0,a.b.requestProxyWorkerManager(e.sid,{lts:c,succ:!0,workerManagerAddr:u,ec:JSON.stringify(s),response:JSON.stringify({res:l})}),n&&n(null,{address:u,serverResponse:l.serverResponse})}}))}))},Ge=function(e){if(!e||[]instanceof Array==0)return[];var t=[];return e.forEach((function(e){var n;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?n="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(o.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),n="".concat(e.address,":").concat(e.tcp)),t.push(n)):o.default.error("["+joinInfo.clientId+"] Invalid address format ",e)})),t},ze=function(e,t){var n=m()({},e),i=Object(r.getParameter)("CDS_AP"),o=[],a=!1;(i=i.map((function(e){return n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1"):"https://".concat(e,"/api/v1?action=config")}))).map((function(e){!function(e,t,n){var r={flag:64,cipher_method:0,timeout:1e3,features:t};Object(Le.c)(e,r,(function(e){try{var t=JSON.parse(e);n&&n(null,t)}catch(e){n&&n(e)}n&&n(null,e)}),(function(e){n&&n(e)}),{"X-Packet-Service-Type":0,"X-Packet-URI":54})}(e,n,(function(e,n){a||(e?(o.push(e),o.length>=i.length&&t&&t("ALL_REQUEST_FAILED")):(a=!0,t&&t(null,n)))}))}))},He={},We={},Ke=function(e,t,n,r){var i=(new Date).getTime(),s=t,u="";t.multiIP&&t.multiIP.gateway_ip&&(u={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var c={opid:133,flag:4096,ts:+new Date,key:t.token,cname:t.cname,sid:t.sid,detail:{},uid:t.uid||0};u&&(c.detail[5]=JSON.stringify(u)),Object(Le.c)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=wrtc_gateway"),c,(function(u){try{var c=JSON.parse(u);c.res&&(c=c.res);var l=c.code}catch(e){var d="requestChooseServer failed with unexpected body "+u;return o.default.error("["+s.clientId+"]",d),r(d)}if(l){var f=_[c.code]||l;return a.b.joinChooseServer(t.sid,{lts:i,succ:!1,csAddr:e,serverList:null,ec:f}),r("Get server node failed ["+f+"]",e,f)}var p=[],h=[".agora.io",".agoraio.cn"],v=0;if(e.indexOf(h[1])>-1&&(v=1),c.addresses.forEach((function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".edge").concat(h[v++%h.length],":").concat(e.port):(o.default.info("["+s.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),p.push(t)):o.default.error("["+s.clientId+"] Invalid address format ",e)})),!p.length)return o.default.error("["+s.clientId+"] Empty Address response",c),f="EMPTY_ADDRESS_RESPONSE",a.b.joinChooseServer(t.sid,{lts:i,succ:!1,csAddr:e,serverList:null,ec:f}),r("Get server node failed ["+f+"]",e,f);var g={gateway_addr:p,uid:c.uid,cid:c.cid,vid:c.detail&&c.detail[8],res:c,uni_lbs_ip:c.detail};return n(g,e)}),(function(e,n){"timeout"===e.type?(a.b.joinChooseServer(t.sid,{lts:i,succ:!1,csAddr:n,serverList:null,ec:"timeout"}),r("Connect choose server timeout",n)):a.b.joinChooseServer(t.sid,{lts:i,succ:!1,csAddr:n,serverList:null,ec:"server_wrong"})}),{"X-Packet-Service-Type":0,"X-Packet-URI":69})},Je=function(e,t,n){var i=!1,s=null,u=1,c=1,l=null,d=e.clientId,f=function t(n,c){if(!i){var f=!1,h=!1,v=[],g=p.getBrowserInfo()||{};ze({device:g.name,system:g.os,vendor:e.appId,version:r.VERSION,cname:e.cname,sid:e.sid,session_id:Object(a.a)(),detail:"",proxyServer:n},(function(t,n){h=!0;try{var r=Object.keys(n.test_tags)[0],i=JSON.parse(n.test_tags[r]);l=i[1]}catch(e){l=null}a.b.reportApiInvoke(e.sid,{name:"_config-distribute-request",options:{err:t,res:n}})(),We[d]!==at.DISCONNECTED&&We[d]!==at.DISCONNECTING?f&&c&&c(v,l):o.default.debug("[".concat(e.clientId,"] Request config success when connection state is ").concat(We[d]))})),function(e,t,n){for(var i=(new Date).getTime(),s=!1,u=!0,c=function(n,r){if(s)a.b.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null},!1);else{if(clearTimeout(v),s=!0,o.default.debug("["+e.clientId+"] Get gateway address:",n.gateway_addr),e.proxyServer){for(var u=n.gateway_addr,c=0;c<u.length;c++){var l=u[c].split(":");n.gateway_addr[c]=e.proxyServer+"/ws/?h="+l[0]+"&p="+l[1]}o.default.debug("["+e.clientId+"] Get gateway address:",n.gateway_addr)}t(n),a.b.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null},!0)}},l=function(t,r,i){u&&(o.default.error("["+e.clientId+"]",t,r,i),i&&-1===S.indexOf(i)&&(u=!1,n(i)))},d=Object(r.getParameter)("WEBCS_DOMAIN"),f=0;f<d.length;++f){var p;if("string"==typeof d[f]){var h=d[f];p=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(h+"/api/v1"):"https://".concat(h,"/api/v1"),o.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(p)),Ke(p,e,c,l)}else o.default.error("["+e.clientId+"] Invalid Host",d[f])}var v=setTimeout((function(){if(!s)for(var t=Object(r.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),n=0;n<t.length;++n)if("string"==typeof t[n]){var i=t[n];p=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(i+"/api/v1"):"https://".concat(i,"/api/v1"),o.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(p)),Ke(p,e,c,l)}else o.default.error("["+e.clientId+"] Invalid Host",t[n])}),1e3);setTimeout((function(){!s&&u&&n()}),Object(r.getParameter)("WEBCS_BACKUP_CONNECT_TIMEOUT"))}(e,(function(t){i=!0,f=!0,v=t,clearTimeout(s),We[d]!==at.DISCONNECTED&&We[d]!==at.DISCONNECTING?h&&c&&c(v,l):o.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(We[d]))}),(function(r){r?o.default.info("["+e.clientId+"] Join failed: "+r):We[d]!==at.DISCONNECTED&&We[d]!==at.DISCONNECTING?(o.default.debug("["+e.clientId+"] Request gateway list will be restart in "+u+"s"),s=setTimeout((function(){t(n,c)}),1e3*u),He[d]=s,u=u>=3600?3600:2*u):o.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(We[d]))}))}};e.useProxyServer?function n(){!function(e,t){Be(e,(function(n,r){if(n)return t&&t(n);o.default.debug("["+e.clientId+"] getProxyServerList: ",r),Ve(e,r,t)}))}(e,(function(r,i){if(r)return o.default.debug("["+e.clientId+"]",r),o.default.debug("["+e.clientId+"] Request proxy will be restart in "+c+"s"),s=setTimeout((function(){n()}),1e3*c),He[d]=s,void(c=c>=3600?3600:2*c);clearTimeout(s);var u=i.address;e.proxyServer=u,e.turnServer={mode:"manual",url:i.address,tcpport:i.serverResponse.tcpport||"3433",udpport:i.serverResponse.udpport||"3478",username:i.serverResponse.username||"test",credential:i.serverResponse.password||"111111",forceturn:!0},e.turnServer.tcpport+="",e.turnServer.udpport+="",a.b.setProxyServer(u),o.default.setProxyServer(u),f(u,t)}))}():f(null,t)},Ye=function(e,t,n,r){var i=Date.now();r=r||t.stringUid;var s={sid:t.sid,opid:10,appid:t.appId,string_uid:r};return new Promise((function(u,c){Object(Le.c)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),s,(function(l){try{var d=JSON.parse(l),f=d.code}catch(u){var p="requestUserAccount failed with unexpected body "+l;return o.default.error("["+t.clientId+"]",p),c({retryable:!0,info:p,url:e}),n&&n.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void a.b.reqUserAccount(s.sid,{lts:i,success:!1,serverAddress:e,stringUid:r,uid:null,extend:l,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(f){var h=w[d.code%1e4]||"REQ_ACCOUNT_ERR_".concat(f);return n&&n.dispatchEvent({type:"error",reason:h}),a.b.reqUserAccount(s.sid,{lts:i,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:h,extend:s}),c({retryable:!1,info:p="Get String Uid Failed ["+h+"]",url:e,error:h})}var v=d.uid;if(!(v>0&&v<Math.pow(2,32)))return o.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(r," => ").concat(v),d),h="INVALID_UINT_UID_".concat(v),n&&n.dispatchEvent({type:"error",reason:h}),a.b.reqUserAccount(s.sid,{lts:i,success:!1,serverAddress:e,stringUid:r,uid:null,errorCode:h,extend:s}),c({retryable:!0,error:h,info:"Get String Uid failed ["+h+"]",url:e});u({uid:v,url:e}),a.b.reqUserAccount(s.sid,{lts:i,success:!0,serverAddress:e,stringUid:r,uid:v,errorCode:null,extend:s})}),(function(e,t){if("timeout"===e.type){var o="USER_ACCOUNT_TIMEOUT";n&&n.dispatchEvent({type:"error",reason:o}),a.b.reqUserAccount(s.sid,{lts:i,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:o,extend:s}),c({retryable:!0,info:o,url:t})}else{var u="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);n&&n.dispatchEvent({type:"error",reason:u}),a.b.reqUserAccount(s.sid,{lts:i,success:!1,serverAddress:t,stringUid:r,uid:null,errorCode:u,extend:s}),c({retryable:!0,info:u,url:t})}}),{"X-Packet-Service-Type":0,"X-Packet-URI":72})}))},$e=function(e,t,n){Date.now();var a,s=Object(r.getParameter)("ACCOUNT_REGISTER"),u=!1,c=Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),l=null,d=null,f=new Promise(function(){var f=Fe()(je.a.mark((function f(p,h){var v,g,m;return je.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:l=p,d=h,a=0;case 3:if(!(a<Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){f.next=33;break}if(!u){f.next=6;break}return f.abrupt("return");case 6:return v=s[a%s.length],g=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(s[i]+"/api/v1"):"https://".concat(v,"/api/v1"),f.prev=8,f.delegateYield(je.a.mark((function r(){var i;return je.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ye(g,e,t,n);case 2:if(i=r.sent,!u){r.next=5;break}return r.abrupt("return",{v:void 0});case 5:u=!0,setTimeout((function(){o.default.debug("Get UserAccount Successfully",i),l(i)}),0);case 7:case"end":return r.stop()}}),r,this)}))(),"t0",10);case 10:if(m=f.t0,"object"!==oe()(m)){f.next=13;break}return f.abrupt("return",m.v);case 13:f.next=30;break;case 15:if(f.prev=15,f.t1=f.catch(8),!u){f.next=19;break}return f.abrupt("return");case 19:if(!f.t1.retryable){f.next=27;break}return(c=Math.ceil(c*Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(c=Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),o.default.error("".concat(f.t1.info," ").concat(f.t1.url," Will Fetch User Account in ").concat(c/1e3," seconds")),f.next=25,new Promise((function(e){setTimeout(e,c)}));case 25:f.next=30;break;case 27:o.default.error("Get UserAccount Error: ".concat(f.t1.info," ").concat(f.t1.url),f.t1.error),u=!0,d(f.t1);case 30:a++,f.next=3;break;case 33:case"end":return f.stop()}}),f,this,[[8,15]])})));return function(e,t){return f.apply(this,arguments)}}());return f.cancel=function(){u||(u=!0,d({info:"Request Cancelled",retryable:!1}))},f.isFinished=function(){return u},f},Qe={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"recover",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},Xe={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb"},Ze={};for(var et in Xe){var tt=Xe[et];Ze[tt]&&console.error("Key Conflict: ".concat(tt,": ").concat(Xe[tt],"| ").concat(et)),Ze[tt]=et}var nt=function(e){return Xe[e]||e},rt=function(e){return Ze[e]||e},it=function e(t){var n=!1,i=function(e){return{_type:"control",_message:e}},u=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(r.getParameter)("STATS_FILTER")[e]||(n[nt(e)]=t[e])})),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:n}}},h=function(e){return{_type:"publish",_message:e}},v=function(e,t){var n={};return Object.keys(t).forEach((function(e){Object(r.getParameter)("STATS_FILTER")[e]||(n[nt(e)]=t[e])})),{_type:"subscribe_stats",_message:{stream_id:e,stats:n}}},g=e.DISCONNECTED,y=e.CONNECTING,b=e.CONNECTED,_=e.DISCONNECTING,w=g,S=s(t);Object.defineProperty(S,"state",{set:function(t){var n=w;w=t,function(e,t){We[e]=t}(S.clientId,t),n!==t&&S.dispatchEvent({type:"connection-state-change",prevState:e.connetionStateMap[n],curState:e.connetionStateMap[t]})},get:function(){return w}}),S.socket=void 0,S.state=g,S.mode=t.mode,S.role=t.role,S.codec=t.codec,S.config={},S.timers={},S.timer_counter={},S.localStreams={},S.remoteStreams={},S.remoteMuteState={},S.attemps=1,S.p2p_attemps=1,S.audioLevel={},S.activeSpeaker=void 0,S.reconnectMode="retry",S.rejoinAttempt=0,S.hasChangeBGPAddress=!1,S.traffic_stats={},S.clientId=t.clientId,S.pingpongCounter=0,S.hasInvokeLeave=!1,S.p2ps=new Map,S.liveStreams=new Map,S.injectLiveStreams=new Map,S.remoteStreamsInChannel=new Set,function(e){var t=xe;e.makeRequest=function(n,r,i){if(void 0===e.socket)return o.default.error("[".concat(e.clientId,"] No socket available")),void t(i,M.INVALID_OPERATION);try{e.socket.emitRequest(n,(function(e,t){var n;"success"===e?"function"==typeof r&&r(t):"function"==typeof i&&(n=t&&t.error_code&&E[t.error_code]?E[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,i(n,t))}))}catch(r){o.default.error("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(n))),o.default.error("[".concat(e.clientId,"] "),r),t(i,M.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&o.default.error("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(n){o.default.error("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(S),S.inChannelInfo={joinAt:null,duration:0},S._sendMessage=function(e,t){switch(e){case"SubscribeStats":sendMessage(v.apply(void 0,Ne()(t)))}};var I=xe;S.p2pCounter=Object(te.f)(1e5),S.generateP2PId=function(){return++S.p2pCounter},S.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},S.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},S.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},S.configPublisher=function(e){S.config=e},S.getGatewayInfo=function(e,t){S.makeRequest({_type:"gateway_info"},e,t)},S.setClientRole=function(e,t){o.default.debug("[".concat(S.clientId,"] setClientRole to ").concat(e));var n=a.b.reportApiInvoke(S.joinInfo.sid,{name:"_setClientRole",callback:t});S.makeRequest({_type:"set_client_role",_message:{role:e}},(function(){S.role=e,S.dispatchEvent({type:"client-role-changed",role:e}),n&&n(null,{role:e})}),(function(t,r){if(r&&r.code&&(t=D[r.code]||"UNKNOW_ERROR_"+r.code),"ERR_ALREADY_IN_USE"===t)return n&&n(null);o.default.error("set Client role error to "+e+": "+t),n&&n(t)}))},S.join=function(e,n,i,s){e.useProxyServer&&(S.hasChangeBGPAddress=!0);var u=(new Date).getTime(),c=e.uid;if(S.inChannelInfo.joinAt&&(S.inChannelInfo.duration+=u-S.inChannelInfo.joinAt),S.inChannelInfo.joinAt=u,S.state!==y)return o.default.error("[".concat(S.clientId,"] GatewayClient.join Failed: state "),S.state),s&&s(M.INVALID_OPERATION),void a.b.joinGateway(e.sid,{lts:u,succ:!1,ec:M.INVALID_OPERATION,addr:null});if(null!=c&&parseInt(c)!==c)return o.default.error("[".concat(S.clientId,"] Input uid is invalid")),S.state=g,s&&s(M.INVALID_PARAMETER),void a.b.joinGateway(e.sid,{lts:u,succ:!1,ec:M.INVALID_PARAMETER,addr:null});var l=ot.register(S,{uid:c,cname:e&&e.cname});if(l)return S.state=g,s&&s(l),void a.b.joinGateway(e.sid,{lts:u,succ:!1,ec:l,addr:null});S.joinInfo=m()({},e),S.uid=c,S.key=n,S.pingpongCounter=0,R(e,(function(n){var c,l,f;S.state=b,o.default.debug("[".concat(S.clientId,"] Connected to gateway server")),clearInterval(S.pingTimer),S.pingTimer=setInterval((function(){var e=Object(r.getParameter)("PING_PONG_TIME_OUT");if(++S.pingpongCounter>=e){var t=Date.now();o.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-S.socket.getLastMsgTime(),"ms")),S.socket&&S.socket.getLastMsgTime()&&t-S.socket.getLastMsgTime()>Object(r.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(S.pingpongCounter=0,S.socket.close(),S.socket.dispatchEvent(d({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var n=Date.now();S.makeRequest({_type:"ping"},(function(){S.pingpongCounter=0;var e=Date.now()-n;setTimeout((function(){Object(r.getParameter)("REPORT_STATS")&&S.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})}),1e3)}),(function(e,t){"TIMEOUT"!==e&&(o.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&S.socket&&S.socket.signal&&S.socket.signal.connection&&S.socket.signal.connection.readyState===WebSocket.OPEN&&(o.default.info("Disconnecting websocket connection"),S.socket.signal.connection.close()))}))}),3e3),S.makeRequest((c=S.role,l=m()({},S.joinInfo.apResponse),f={session_id:S.joinInfo.sid,app_id:t.appId,channel_key:S.key,channel_name:S.joinInfo.cname,sdk_version:r.VERSION,browser:navigator.userAgent,process_id:Object(a.a)(),mode:S.mode,codec:S.codec,role:c,has_changed_gateway:Object(r.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||S.hasChangeBGPAddress,ap_response:l,extend:Object(r.getParameter)("JOIN_EXTEND"),details:{}},S.joinInfo.hasOwnProperty("stringUid")&&(f.string_uid=S.joinInfo.stringUid),S.joinInfo.aesmode&&S.joinInfo.aespassword&&(f.aes_mode=S.joinInfo.aesmode,f.aes_secret=S.joinInfo.aespassword),S.socket&&S.socket.signal&&S.socket.signal&&(l.addresses[S.socket.signal.hostIndex]&&(f.ap_response.ticket=l.addresses[S.socket.signal.hostIndex].ticket,delete l.addresses),S.joinInfo.turnServer&&"auto"===S.joinInfo.turnServer.mode&&S.socket.signal.turnConfig&&(S.joinInfo.turnServer.url=S.socket.signal.turnConfig.url,S.socket.signal.turnConfig.tcpport&&(S.joinInfo.turnServer.tcpport=""+S.socket.signal.turnConfig.tcpport),S.socket.signal.turnConfig.udpport&&(S.joinInfo.turnServer.udpport=""+S.socket.signal.turnConfig.udpport)),o.default.debug("Turn config",S.joinInfo.turnServer)),S.dispatchEvent({type:"join-message-hook",joinMessage:f}),{_type:"join",_message:f}),(function(t){if(a.b.joinGateway(e.sid,{lts:u,succ:!0,ec:null,vid:e.vid,addr:S.socket.getURL()}),S.rejoinAttempt=0,i&&i(t.uid),S.dispatchEvent({type:"join"}),S.leaveOnConnected){o.default.info("[".concat(S.clientId,"] Calling Leave() once joined"));var n=S.leaveOnConnected;S.leaveOnConnected=null,S.leave(n.onSuccess,n.onFailure)}}),(function(t,n){if(o.default.error("[".concat(S.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t)return S.dispatchEvent({type:"onMultiIP",option:n.option});if(Qe[t]&&S.rejoinAttempt<4){if(S._doWithAction(Qe[t],i,s),S.leaveOnConnected){o.default.error("[".concat(S.clientId,"] Calling Leave() once joined: Join Failed"));var r=S.leaveOnConnected;S.leaveOnConnected=null,r.onFailure(M.JOIN_CHANNEL_FAILED)}}else s&&s(t);a.b.joinGateway(e.sid,{lts:u,succ:!1,ec:t,addr:S.socket.getURL()})}))}),(function(t){o.default.error("[".concat(S.clientId,"] User join failed [").concat(t,"]")),s&&s(t),a.b.joinGateway(e.sid,{lts:u,succ:!1,ec:t,addr:S.socket.getURL()})})),clearInterval(S.timers.trafficStats),S.timers.trafficStats=setInterval((function(){S.makeRequest({_type:"traffic_stats"},(function(e){var t={};for(var n in e)t[rt(n)]=e[n];if(t.peer_delay&&t.peer_delay.length){var r=[];t.peer_delay.forEach((function(e){var t={};for(var n in e)t[rt(n)]=e[n];r.push(t)})),t.peer_delay=r}S.traffic_stats=t;var i=S.joinInfo.stringUid,o=S.localStreams[c]||S.localStreams[i];o&&(o.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach((function(e){var n=S.remoteStreams[e.peer_uid];n&&(n.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})})),S.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})}))}),3e3),this.remoteMuteState={},S.resetAudioVolumeIndication()},S.leave=function(e,t){switch(S.state){case g:return o.default.debug("[".concat(S.clientId,"] Client Already in DISCONNECTED status")),void I(e);case _:return o.default.error("[".concat(S.clientId,"] Client Already in DISCONNECTING status")),void I(t,M.INVALID_OPERATION);case y:if(S.leaveOnConnected)return o.default.error("[".concat(S.clientId,"] Client.leave() already called")),void I(t,M.INVALID_OPERATION);if(1==S.reconnectingCS)return;return o.default.debug("[".concat(S.clientId,"] Client connecting. Waiting for Client Fully Connected(And leave)")),void(S.leaveOnConnected={onSuccess:e,onFailure:t})}var n=ot.unregister(S);if(n)o.default.error("[".concat(S.clientId,"] "),n);else{for(var r in S.state=_,clearInterval(S.pingTimer),S.timers)S.timers.hasOwnProperty(r)&&clearInterval(S.timers[r]);for(var r in S.inChannelInfo.joinAt&&(S.inChannelInfo.duration+=Date.now()-S.inChannelInfo.joinAt,S.inChannelInfo.joinAt=null),S.makeRequest({_type:"leave"},(function(t){S.socket.close(),S.socket=void 0,o.default.info("[".concat(S.clientId,"] Leave channel success")),S.state=g,e&&e(t)}),(function(e){o.default.error("[".concat(S.clientId,"] Leave Channel Failed"),e),S.state=b,t&&t(e)})),S.localStreams)if(S.localStreams.hasOwnProperty(r)){var i=S.localStreams[r];delete S.localStreams[r],void 0!==i.pc&&(i.pc.close(),i.pc=void 0)}N()}},S.publish=function(e,t,n,s){var u=(new Date).getTime(),c=!1;if(e.publishLTS=u,"object"!==oe()(e)||null===e)return o.default.error("[".concat(S.clientId,"] Invalid local stream")),s&&s(M.INVALID_LOCAL_STREAM),void a.b.publish(S.joinInfo.sid,{lts:u,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:M.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return o.default.error("[".concat(S.clientId,"] Invalid local media stream")),s&&s(M.INVALID_LOCAL_STREAM),void a.b.publish(S.joinInfo.sid,{lts:u,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:M.INVALID_LOCAL_STREAM});if(S.state!==b)return o.default.error("[".concat(S.clientId,"] User is not in the session")),s&&s(M.INVALID_OPERATION),void a.b.publish(S.joinInfo.sid,{lts:u,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:M.INVALID_OPERATION});var d=e.getAttributes()||{};if(e.local&&void 0===S.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var f=S.generateP2PId();if(S.p2ps.set(f,e),e.p2pId=f,void 0!==e.url)k(h({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes(),mode:S.mode},e.url),(function(t,n){"success"===t?(e.getUserId()!==n&&e.setUserId(n),S.localStreams[n]=e,e.onClose=function(){S.unpublish(e)}):o.default.error("[".concat(S.clientId,"] Publish local stream failed"),t)}));else{S.localStreams[e.getId()]=e,e.connectionSpec={callback:function(d){o.default.debug("[".concat(S.clientId,"] SDP exchange in publish : send offer --  "),JSON.parse(d)),S.makeRequest(h({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:f,sdp:d,audio:e.audio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,mode:S.mode,codec:S.codec,extend:Object(r.getParameter)("PUB_EXTEND")}),(function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),o.default.info("[".concat(S.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){S.unpublish(e)},e._onAudioUnmute=function(){S.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){S.makeReport(i({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){S.makeReport(i({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){S.makeReport(i({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(o.default.debug("[".concat(S.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(o.default.debug("[".concat(S.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=S.timers[e.getId()]&&(clearInterval(S.timers[e.getId()]),clearInterval(S.timers[e.getId()]+"_RelatedStats")),o.default.error("[".concat(S.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(f)),S.p2ps.delete(f),o.default.debug("[".concat(S.clientId,"] publish p2p failed: "),S.p2ps),!c)return c=!0,a.b.publish(S.joinInfo.sid,{lts:u,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:M.PEERCONNECTION_FAILED}),S.dispatchEvent(l({type:"pubP2PLost",stream:e})),s&&s(M.PEERCONNECTION_FAILED);S.dispatchEvent(l({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(o.default.debug("[".concat(S.clientId,"] publish p2p connected: "),S.p2ps),e._isAudioMuted()?S.makeReport(i({action:"mute_local_audio",stream_id:e.getId()})):S.makeReport(i({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?S.makeReport(i({action:"mute_local_video",stream_id:e.getId()})):S.makeReport(i({action:"unmute_local_video",stream_id:e.getId()})),!c))return c=!0,a.b.publish(S.joinInfo.sid,{lts:u,succ:!0,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null}),n&&n()},o.default.debug("[".concat(S.clientId,"] SDP exchange in publish : receive answer --  "),JSON.parse(t.sdp)),e.pc.processSignalingMessage(t.sdp)}),(function(t,n){o.default.error("Publish Failed: ".concat(t)),a.b.publish(S.joinInfo.sid,{lts:u,succ:!0,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t}),"TIMEOUT"!=t&&(S.processPublishFailure(e),s&&s(t))}))},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),isSubscriber:!1,stunServerUrl:S.stunServerUrl,turnServer:S.joinInfo.turnServer,maxAudioBW:d.maxAudioBW,minVideoBW:d.minVideoBW,maxVideoBW:d.maxVideoBW,mode:S.mode,codec:S.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,clientId:S.clientId},e.pc=Z(e.connectionSpec),e.pc.addStream(e.stream),o.default.debug("[".concat(S.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(n){var r={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:f,sdp:n};S.makeRequest(h(r),(function(t){o.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)}),(function(e,t){o.default.error("Negotiation failed ".concat(e),t,r)}))},clearInterval(S.timers[e.getId()]),S.timers[e.getId()]=setInterval((function(){if(Object(r.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id&&!/_recv$/.test(n.id)&&!/^time$/.test(n.id)&&e.getUserId())if(-1===n.id.indexOf("outbound_rtp")&&-1===n.id.indexOf("OutboundRTP")||"video"!==n.mediaType||(n.googFrameWidthSent=e.videoWidth+"",n.googFrameHeightSent=e.videoHeight+""),e.getId()==e.getUserId()){var i=200*t;t++,setTimeout((function(){var e=S.socket&&S.socket.getLastMsgTime()&&Date.now()-S.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):S.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[nt(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(n))}),i)}else i=200*t,t++,setTimeout((function(){var e=S.socket&&S.socket.getLastMsgTime()&&Date.now()-S.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):S.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[nt(n)]=e[n])})),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(n))}),i)}))}))}}),3e3);var p=function(){Object(r.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){var n,i,a=S.socket&&S.socket.getLastMsgTime()&&Date.now()-S.socket.getLastMsgTime();a>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(a)):e.getId()===e.getUserId()?S.makeReport((n=t,i={},Object.keys(n).forEach((function(e){Object(r.getParameter)("STATS_FILTER")[e]||(i[nt(e)]=n[e])})),{_type:"publish_related_stats",_message:{stream_type:"high",stats:i}})):S.makeReport(function(e){var t={};return Object.keys(e).forEach((function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[nt(n)]=e[n])})),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))}))};p(),clearInterval(S.timers[e.getId()+"_RelatedStats"]),S.timers[e.getId()+"_RelatedStats"]=setInterval(p,1e3)}}},S.unpublish=function(e,t,n,r){if("object"!==oe()(e)||null===e)return o.default.error("[".concat(S.clientId,"] Invalid local stream")),void I(r,M.INVALID_LOCAL_STREAM);if(S.state!==b)return o.default.error("[".concat(S.clientId,"] User not in the session")),void I(r,M.INVALID_OPERATION);if(null!=S.timers[e.getId()]&&(clearInterval(S.timers[e.getId()]),clearInterval(S.timers[e.getId()+"_RelatedStats"])),void 0!==S.socket)if(e.local&&void 0!==S.localStreams[e.getId()]){delete S.localStreams[e.getId()];var i={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};S.makeRequest({_type:"unpublish",_message:i}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,S.p2ps.delete(e.p2pId),S.dispatchEvent({type:"stream-unpublished",stream:e,options:t}),n&&n()}else o.default.error("[".concat(S.clientId,"] Invalid local stream")),I(r,M.INVALID_LOCAL_STREAM);else o.default.error("[".concat(S.clientId,"] User not in the session")),I(r,M.INVALID_OPERATION)},S.subscribe=function(e,t,n){var s=(new Date).getTime();e.subscribeLTS=s;var d=!1;if(o.default.info("[".concat(S.clientId,"] Gatewayclient ").concat(S.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==oe()(e)||null===e)return o.default.error("[".concat(S.clientId,"] Invalid remote stream")),n&&n(M.INVALID_REMOTE_STREAM),void a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:M.INVALID_REMOTE_STREAM});if(S.state!==b&&(o.default.error("[".concat(S.clientId,"] User is not in the session")),!d))return d=!0,a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:M.INVALID_OPERATION}),n&&n(M.INVALID_OPERATION);if(!e.local&&S.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var f=S.generateP2PId();S.p2ps.set(f,e),e.p2pId=f,e.pc=Z({callback:function(t){o.default.debug("[".concat(S.clientId,"] SDP exchange in subscribe : send offer --  "),JSON.parse(t));var i={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,mode:S.mode,codec:S.codec,p2p_id:f,sdp:t,tcc:Object(r.getParameter)("SUBSCRIBE_TCC"),extend:Object(r.getParameter)("SUB_EXTEND")};S.makeRequest({_type:"subscribe",_message:i},(function(t){o.default.debug("[".concat(S.clientId,"] SDP exchange in subscribe : receive answer --  "),JSON.parse(t.sdp)),e.pc.processSignalingMessage(t.sdp)}),(function(t,r){o.default.error("[".concat(S.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),r),a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=err&&(S.processSubscribeFailure(e),n&&n(t))}))},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:S.stunServerUrl,turnServer:S.joinInfo.turnServer,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),clientId:S.clientId}),e.pc.onaddstream=function(t,n){if(e._onAudioUnmute=function(){S.makeRequest(i({action:"unmute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onAudioMute=function(){S.makeRequest(i({action:"mute_remote_audio",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoUnmute=function(){S.makeRequest(i({action:"unmute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},e._onVideoMute=function(){S.makeRequest(i({action:"mute_remote_video",stream_id:e.getId()}),(function(){}),(function(){}))},"ontrack"===n&&"video"===t.track.kind||"onaddstream"===n){o.default.info("[".concat(S.clientId,"] Remote stream subscribed with uid "),e.getId());var r=S.remoteStreams[e.getId()];if(S.remoteStreams[e.getId()].stream="onaddstream"===n?t.stream:t.streams[0],S.remoteStreams[e.getId()].hasVideo()){if(Object(p.isFireFox)()||Object(p.isSafari)()){var a=S.remoteStreams[e.getId()].stream;Object(te.g)(a,(function(t,n){e.videoWidth=t,e.videoHeight=n}),(function(e){return o.default.warning("[".concat(S.clientId,"] vsResHack failed: ")+e)}))}}else{var s=S.remoteStreams[e.getId()];s.peerMuteVideo=!0,S._adjustPCMuteStatus(s)}r&&r.isPlaying()&&r.elementID&&(o.default.debug("[".concat(S.clientId,"] Reload Player ").concat(r.elementID," StreamId ").concat(r.getId())),e.audioOutput=r.audioOutput,r.stop(),e.play(r.elementID,r.playOptions)),delete e.audioLevelHelper;var u=c({type:"stream-subscribed",stream:S.remoteStreams[e.getId()]});S.dispatchEvent(u)}},clearInterval(S.timers[e.getId()]),S.timers[e.getId()]=setInterval((function(){if(Object(r.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate((function(n){n.forEach((function(n){if(n&&n.id){if(/_send$/.test(n.id)||/^time$/.test(n.id)||/^bweforvideo$/.test(n.id))return;-1===n.id.indexOf("inbound_rtp")&&-1===n.id.indexOf("inbound-rtp")||"video"!==n.mediaType||(n.googFrameWidthReceived=e.videoWidth+"",n.googFrameHeightReceived=e.videoHeight+"");var i=200*t;t++;var a=e.getId();setTimeout((function(){var e=S.socket&&S.socket.getLastMsgTime()&&Date.now()-S.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):S.makeReport(v(a,n))}),i)}}))}))}}),3e3),clearInterval(S.timers[e.getId()+"_RelatedStats"]),S.timers[e.getId()+"_RelatedStats"]=setInterval((function(){if(Object(r.getParameter)("REPORT_STATS")&&e&&e.pc){var t=S.socket&&S.socket.getLastMsgTime()&&Date.now()-S.socket.getLastMsgTime();if(t>Object(r.getParameter)("REPORT_STATS_TIMEOUT"))return void o.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats((function(t){S.makeReport(u(e.getId(),t))})),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats((function(t){S.makeReport(u(e.getId(),t))}))}}),1e3),S.audioLevel[e.getId()]=0,clearInterval(S.timers[e.getId()+"audio"]),S.timers[e.getId()+"audio"]=setInterval((function(){S.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats((function(t){t.forEach((function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var n in S.audioLevel[e.getId()]<20&&(S.audioLevel[e.getId()]+=1),S.audioLevel)n!==""+e.getId()&&S.audioLevel[n]>0&&(S.audioLevel[n]-=1);var r=Object.keys(S.audioLevel).sort((function(e,t){return S.audioLevel[t]-S.audioLevel[e]}));if(S.activeSpeaker!==r[0]){var i=l({type:"active-speaker",uid:r[0]});S.dispatchEvent(i),S.activeSpeaker=r[0],o.default.debug("[".concat(S.clientId,"] Update active speaker: ").concat(S.activeSpeaker))}}}))}),50)}),50),e.pc.oniceconnectionstatechange=function(r){if("failed"===r)null!=S.timers[e.getId()]&&(clearInterval(S.timers[e.getId()]),clearInterval(S.timers[e.getId()]+"audio")),o.default.error("[".concat(S.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(f)),o.default.debug("[".concat(S.clientId,"] subscribe p2p failed: "),S.p2ps),d||(d=!0,n&&n(M.PEERCONNECTION_FAILED),a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:M.PEERCONNECTION_FAILED})),S.remoteStreams[e.getId()]&&S.p2ps.has(f)&&(S.p2ps.delete(f),S.dispatchEvent(l({type:"subP2PLost",stream:e})));else if("connected"===r&&(o.default.debug("[".concat(S.clientId,"] subscribe p2p connected: "),S.p2ps),!d)){d=!0,a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null}),S._adjustPCMuteStatus(e);var i=!1,u=setInterval((function(){e.pc?e.pc.getStats((function(t){t.forEach((function(t){-1!==t.id.indexOf("recv")&&"audio"===t.mediaType&&parseInt(t.googDecodingNormal)>0&&(i||(i=!0,S.dispatchEvent({type:"first-audio-frame-decode",stream:e}),clearInterval(u),a.b.reportApiInvoke(S.joinInfo.sid,{name:"firstAudioDecode"})(null,{elapse:Date.now()-e.subscribeLTS})))}))}),100):clearInterval(u)}),100),c=!1,p=setInterval((function(){e.pc?e.pc.getStats((function(t){t.forEach((function(t){-1===t.id.indexOf("recv")&&-1===t.id.indexOf("inbound_rtp")&&-1===t.id.indexOf("inbound-rtp")&&-1===t.id.indexOf("InboundRTP")||"video"===t.mediaType&&(t.framesDecoded>0||t.googFramesDecoded>0)&&(c||(c=!0,S.dispatchEvent({type:"first-video-frame-decode",stream:e}),clearInterval(p),e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,a.b.firstRemoteFrame(S.joinInfo.sid,{lts:(new Date).getTime(),peerid:e.getId(),succ:!0,width:+t.googFrameWidthReceived,height:+t.googFrameHeightReceived})))}))}),100):clearInterval(p)}),100);return e.sid=S.joinInfo.sid,t&&t()}}}else o.default.error("[".concat(S.clientId,"] Invalid remote stream")),d||(d=!0,n&&n(M.INVALID_REMOTE_STREAM),a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:M.INVALID_REMOTE_STREAM}));else o.default.error("[".concat(S.clientId,"] No such remote stream")),d||(d=!0,n&&n(M.NO_SUCH_REMOTE_STREAM),a.b.subscribe(S.joinInfo.sid,{lts:s,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:M.NO_SUCH_REMOTE_STREAM}))},S.subscribeChange=function(e,t,n){var r=Date.now();o.default.info("[".concat(S.clientId,"] Gatewayclient ").concat(S.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),S._adjustPCMuteStatus(e);var i={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};S.makeRequest({_type:"subscribe_change",_message:i},(function(n){var i=c({type:"stream-subscribe-changed",stream:S.remoteStreams[e.getId()]});a.b.subscribe(S.joinInfo.sid,{lts:r,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null}),S.dispatchEvent(i),t&&t()}),(function(t,r){o.default.error("[".concat(S.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,r),n&&n(t,r)}))},S.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&S.p2ps.get(e.p2pId)===e&&S.p2ps.delete(e.p2pId),S.localStreams[e.getUserId()]===e&&delete S.localStreams[e.getUserId()],S.localStreams[e.getId()]===e&&delete S.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},S.processSubscribeFailure=function(e){e.p2pId&&S.p2ps.get(e.p2pId)===e&&S.p2ps.delete(e.p2pId),S.remoteStreams[e.getId()]===e&&delete S.remoteStreams[e.getId()],S.remoteStreams[e.getId()]===e&&delete S.remoteStreams[e.getId()],e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},S._adjustPCMuteStatus=function(e){!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach((function(t){if(t&&t.track&&"audio"===t.track.kind){var n=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(n=!1),t.track.enabled=!!n}else if(t&&t.track&&"video"===t.track.kind){var r=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(r=!1),t.track.enabled=!!r}}))},S.unsubscribe=function(e,t,n){if("object"!==oe()(e)||null===e)return o.default.error("[".concat(S.clientId,"] Invalid remote stream")),void I(n,M.INVALID_REMOTE_STREAM);if(S.state!==b)return o.default.error("[".concat(S.clientId,"] User is not in the session")),void I(n,M.INVALID_OPERATION);if(null!=S.timers[e.getId()]&&(clearInterval(S.timers[e.getId()]),clearInterval(S.timers[e.getId()]+"audio")),null!=S.audioLevel[e.getId()]&&delete S.audioLevel[e.getId()],null!=S.timer_counter[e.getId()]&&delete S.timer_counter[e.getId()],S.remoteStreams.hasOwnProperty(e.getId())){if(!S.socket)return o.default.error("[".concat(S.clientId,"] User is not in the session")),void I(n,M.INVALID_OPERATION);if(e.local)return o.default.error("[".concat(S.clientId,"] Invalid remote stream")),void I(n,M.INVALID_REMOTE_STREAM);e.close();var r={stream_id:e.getId()};S.makeRequest({_type:"unsubscribe",_message:r}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,S.p2ps.delete(e.p2pId),o.default.info("[".concat(S.clientId,"] Unsubscribe stream success")),t&&t()}else I(n,M.NO_SUCH_REMOTE_STREAM)},S.setRemoteVideoStreamType=function(e,t){if(o.default.debug("[".concat(S.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===oe()(e)&&null!==e)if(S.state===b){if(!e.local){switch(t){case S.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case S.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case S.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var n={stream_id:e.getId(),stream_type:t};S.makeRequest({_type:"switch_video_stream",_message:n},(function(){o.default.debug("SwitchVideoStream Success ".concat(n.stream_id," ").concat(n.stream_type))}),(function(e,t){o.default.error("SwitchVideoStream Error ".concat(e," ").concat(n.stream_id," ").concat(n.stream_type),t)}))}}else o.default.error("[".concat(S.clientId,"] User is not in the session"));else o.default.error("[".concat(S.clientId,"] Invalid remote stream"))},S.renewToken=function(e,t,n){e?S.key?S.state!==b?(o.default.debug("[".concat(S.clientId,"] Client is not connected. Trying to rejoin")),S.key=e,S.rejoin(),t&&t()):(o.default.debug("[".concat(S.clientId,"] renewToken from ").concat(S.key," to ").concat(e)),S.makeRequest({_type:"renew_token",_message:{token:e}},t,n)):(o.default.error("[".concat(S.clientId,"] Client is previously joined without token")),n&&n(M.INVALID_PARAMETER)):(o.default.error("[".concat(S.clientId,"] Invalid Token ").concat(e)),n&&n(M.INVALID_PARAMETER))},S.setStreamFallbackOption=function(e,t){if(o.default.debug("[".concat(S.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===oe()(e)&&null!==e)if(S.state===b){if(!e.local){switch(t){case S.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case S.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case S.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var n={stream_id:e.getId(),fallback_type:t};S.makeRequest({_type:"set_fallback_option",_message:n},(function(){o.default.debug("SetStreamFallbackOption success ".concat(n.stream_id," ").concat(t))}),(function(e,r){o.default.error("Failed to SetStreamFallbackOption ".concat(n.stream_id," ").concat(t," ").concat(e),r)}))}}else o.default.error("[".concat(S.clientId,"] User is not in the session"));else o.default.error("[".concat(S.clientId,"] Invalid remote stream"))},S.enableAudioVolumeIndicator=function(e,t){S.audioVolumeIndication.enabled=!0,S.audioVolumeIndication.interval=e,S.audioVolumeIndication.smooth=t,S.resetAudioVolumeIndication()},S.resetAudioVolumeIndication=function(){if(clearInterval(S.timers.audioVolumeIndication),clearInterval(S.timers.audioVolumeSampling),S.audioVolumeIndication.enabled&&S.audioVolumeIndication.interval){var e=Math.floor(1e3*S.audioVolumeIndication.smooth/100);clearInterval(S.timers.audioVolumeSampling),S.timers.audioVolumeSampling=setInterval((function(){S.audioVolumeSampling||(S.audioVolumeSampling={});var t={};for(var n in S.remoteStreams){var r=S.remoteStreams[n];if(r.stream&&r.hasAudio()){var i=r.getAudioLevel();i>0&&i<1&&(i*=100);var o=S.audioVolumeSampling[n]||[];for(o.push(i);o.length>e;)o.shift();t[n]=o}}S.audioVolumeSampling=t}),100),clearInterval(S.timers.audioVolumeIndication),S.timers.audioVolumeIndication=setInterval((function(){if(S.socket&&S.socket.signal&&S.socket.signal.connection&&S.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in S.remoteStreams)if(S.audioVolumeSampling&&S.audioVolumeSampling[t]){var n=S.audioVolumeSampling[t],r=0;n.forEach((function(e){r+=e}));var i={uid:t,level:Math.floor(r/n.length)};i.level&&e.push(i)}var a=e.sort((function(e,t){return e.level-t.level}));o.default.debug("[".concat(S.clientId,"] volume-indicator "),JSON.stringify(a)),S.audioVolumeIndication.sortedAudioVolumes=a;var s=l({type:"volume-indicator",attr:a});S.dispatchEvent(s)}}),S.audioVolumeIndication.interval)}},S.closeGateway=function(){o.default.debug("[".concat(S.clientId,"] close gateway")),S.state=g,S.socket.close(),T()};var O=function(){o.default.debug("[".concat(S.clientId,"] Reconnect gateway")),S.state=g,S.socket.close(),T(),S.reconnectMode="recover",S.state=y,A()};S.recover=O;var T=function(){for(var e in S.dispatchEvent({type:"before-clear-connection"}),S.timers)S.timers.hasOwnProperty(e)&&clearInterval(S.timers[e]);for(var e in S.remoteStreams)if(S.remoteStreams.hasOwnProperty(e)){var t=S.remoteStreams[e],n=l({type:"stream-removed",uid:t.getId(),stream:t});S.dispatchEvent(n)}S.p2ps.clear(),N(),C(),clearInterval(S.pingTimer)};S.rejoin=function(){S.socket&&(clearInterval(S.pingTimer),S.socket.close(),S.socket=void 0),S.state=y,A()};var A=function(e,t){S.dispatchEvent(l({type:"rejoin-start"})),e=e||function(e){o.default.info("[".concat(S.clientId,"] User ").concat(e," is re-joined to ").concat(S.joinInfo.cname)),S.dispatchEvent(l({type:"rejoin"})),S.liveStreams&&S.liveStreams.size&&S.liveStreams.forEach((function(e,t){e&&S.setLiveTranscoding(S.transcoding),S.startLiveStreaming(t,e)})),S.injectLiveStreams&&S.injectLiveStreams.size&&S.injectLiveStreams.forEach((function(e,t){S.addInjectStreamUrl(t,e)}))},t=t||function(e){o.default.error("[".concat(S.clientId,"] Re-join to channel failed "),e),S.dispatchEvent(c({type:"error",reason:e}))},S.key?(++S.rejoinAttempt,S.join(S.joinInfo,S.key,e,t)):o.default.error("[".concat(S.clientId,"] Connection recover failed [Invalid channel key]"))},R=function(e,t,i){if(S.onConnect=t,S.socket){if(S.dispatchEvent({type:"reconnect"}),"retry"===S.reconnectMode)o.default.debug("[".concat(S.clientId,"] Retry current gateway")),S.socket.reconnect();else if("tryNext"===S.reconnectMode)o.default.debug("[".concat(S.clientId,"] Try next gateway")),S.socket.connectNext();else if("recover"===S.reconnectMode){o.default.debug("[".concat(S.clientId,"] Recover gateway")),o.default.debug("[".concat(S.clientId,"] Try to reconnect choose server and get gateway list again ")),S.reconnectingCS=!0;var s=S.joinInfo&&S.joinInfo.sid;Je(S.joinInfo,(function(e){o.default.debug("[".concat(S.clientId,"] session:  ").concat(s," get gateway list success")),S.joinInfo.apResponse=e.res,S.reconnectingCS?S.socket.replaceHost(e.gateway_addr):o.default.debug("[".concat(S.clientId,"] session:  ").concat(s," already leave"))}))}}else u=e.gatewayAddr,S.socket=De(u,{sid:S.joinInfo.sid,clientId:S.clientId}),S.socket.on("start-connection",(function(e){S.ticket=e&&e.msg&&e.msg.ticket})),S.socket.on("on_uplink_stats",(function(e){var t={};for(var n in e)t[rt(n)]=e[n];S.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,S.localStreams[S.uid]&&(S.localStreams[S.uid].uplinkStats=t)})),S.socket.on("connect",(function(){S.dispatchEvent({type:"connected"}),S.attemps=1,S.onConnect()})),S.socket.on("recover",(function(){S.state=y,o.default.debug("[".concat(S.clientId,"] Try to reconnect choose server and get gateway list again ")),S.reconnectingCS=!0,S.leaveOnConnected=null;var e=S.joinInfo&&S.joinInfo.sid;Je(S.joinInfo,(function(t){o.default.debug("[".concat(S.clientId,"] session:  ").concat(e," get gateway list success")),S.reconnectingCS?S.socket.replaceHost(t.gateway_addr):o.default.debug("[".concat(S.clientId,"] session:  ").concat(e," already leave"))}))})),S.socket.on("disconnect",(function(e){if(o.default.debug("[".concat(S.clientId,"] Receive disconnect message")),S.state!==g){S.state=g;var t=c({type:"error",reason:M.SOCKET_DISCONNECTED});if(S.dispatchEvent(t),0===S.p2ps.size?S.reconnectMode="tryNext":S.reconnectMode="retry",T(),1!=n){var i,a=(i=S.attemps,1e3*Math.min(30,Math.pow(2,i)-1));if(o.default.error("[".concat(S.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(S.attemps,"] after ").concat(a/1e3," seconds")),S.hasInvokeLeave)return o.default.debug("[".concat(S.clientId,"] No reconnection becase client.leave has been invoked")),void(S.hasInvokeLeave=!1);setTimeout((function(){S.attemps++,S.state=y,S.inChannelInfo&&Date.now()-S.inChannelInfo.joinAt>Object(r.getParameter)("TICKET_RENEW_TIMEOUT")?(o.default.debug("Recovering to renew ticket"),O()):A()}),a)}}})),S.socket.on("on_add_audio_stream",(function(e){if(o.default.info("[".concat(S.clientId,"] Newly added audio stream with uid ").concat(e.uid)),S.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),S.remoteStreamsInChannel.has(e.uid)||S.remoteStreamsInChannel.add(e.uid),void 0===S.remoteStreams[e.uid]){var t=Oe({streamID:e.uid,local:!1,audio:e.audio,video:e.video});t.peerMuteVideo=!0,S.remoteStreams[e.uid]=t;var n=c({type:"stream-added",stream:t});S.dispatchEvent(n);var r=S.remoteMuteState[e.uid];r&&r.audio&&(n=l({type:"mute-audio",uid:e.uid}),S.dispatchEvent(n)),r&&r.video&&(n=l({type:"mute-video",uid:e.uid}),S.dispatchEvent(n))}})),S.socket.on("on_update_stream",(function(e){var t=S.remoteStreams[e.uid];if(S.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&S._adjustPCMuteStatus(t);var n=c({type:"stream-updated",stream:t});S.dispatchEvent(n)}else o.default.debug("[".concat(S.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid))})),S.socket.on("on_add_video_stream",(function(e){if(o.default.info("[".concat(S.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),S.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),S.remoteStreamsInChannel.has(e.uid)||S.remoteStreamsInChannel.add(e.uid),void 0===S.remoteStreams[e.uid]){var t=Oe({streamID:e.uid,local:!1,audio:e.audio,video:e.video});S.remoteStreams[e.uid]=t;var n=c({type:"stream-added",stream:t});S.dispatchEvent(n);var r=S.remoteMuteState[e.uid];r&&r.audio&&(n=l({type:"mute-audio",uid:e.uid}),S.dispatchEvent(n)),r&&r.video&&(n=l({type:"mute-video",uid:e.uid}),S.dispatchEvent(n))}else{var i=S.remoteStreams[e.uid];if(void 0!==i.stream){if((t=S.remoteStreams[e.uid]).video=!0,t.peerMuteVideo=!1,t.pc&&S._adjustPCMuteStatus(t),o.default.info("[".concat(S.clientId,"] Stream changed: enable video ").concat(e.uid)),t.isPlaying()){var a=t.player.elementID;t.stop(),t.play(a,t.playOptions)}}else i.p2pId?S.remoteStreams[e.uid].video=!0:(t=Oe({streamID:e.uid,local:!1,audio:!0,video:!0}),S.remoteStreams[e.uid]=t,o.default.info("[".concat(S.clientId,"] Stream changed: modify video ").concat(e.uid)))}})),S.socket.on("on_remove_stream",(function(e){S.remoteStreamsInChannel.has(e.uid)&&S.remoteStreamsInChannel.delete(e.uid);var t=S.remoteStreams[e.uid];if(t){delete S.remoteStreams[e.uid],delete S.remoteMuteState[e.uid];var n=c({type:"stream-removed",stream:t});S.dispatchEvent(n),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,S.p2ps.delete(t.p2pId))}else o.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)})),S.socket.on("on_publish_stream",(function(e){var t=S.localStreams[e.uid],n=c({type:"streamPublished",stream:t});S.dispatchEvent(n)})),S.socket.on("mute_audio",(function(e){o.default.info("[".concat(S.clientId,"] rcv peer mute audio: ").concat(e.uid)),S.remoteMuteState[e.uid]=S.remoteMuteState[e.uid]||{audio:!1,video:!1},S.remoteMuteState[e.uid].audio=!0;var t=l({type:"mute-audio",uid:e.uid}),n=S.remoteStreams[e.uid];n?(n.peerMuteAudio=!0,n.pc&&S._adjustPCMuteStatus(n),S.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)})),S.socket.on("unmute_audio",(function(e){o.default.info("[".concat(S.clientId,"] rcv peer unmute audio: ").concat(e.uid)),S.remoteMuteState[e.uid]=S.remoteMuteState[e.uid]||{audio:!1,video:!1},S.remoteMuteState[e.uid].audio=!1;var t=l({type:"unmute-audio",uid:e.uid}),n=S.remoteStreams[e.uid];n?(n.peerMuteAudio=!1,n.pc&&S._adjustPCMuteStatus(n),S.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)})),S.socket.on("mute_video",(function(e){o.default.info("[".concat(S.clientId,"] rcv peer mute video: ").concat(e.uid)),S.remoteMuteState[e.uid]=S.remoteMuteState[e.uid]||{audio:!1,video:!1},S.remoteMuteState[e.uid].video=!0;var t=l({type:"mute-video",uid:e.uid}),n=S.remoteStreams[e.uid];n?(n.peerMuteVideo=!0,n.pc&&S._adjustPCMuteStatus(n),S.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)})),S.socket.on("unmute_video",(function(e){o.default.info("[".concat(S.clientId,"] rcv peer unmute video: ").concat(e.uid)),S.remoteMuteState[e.uid]=S.remoteMuteState[e.uid]||{audio:!1,video:!1},S.remoteMuteState[e.uid].video=!1;var t=l({type:"unmute-video",uid:e.uid}),n=S.remoteStreams[e.uid];n?(n.peerMuteVideo=!1,n.pc&&S._adjustPCMuteStatus(n),S.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)})),S.socket.on("on_user_banned",(function(e){o.default.info("[".concat(S.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=l({type:"client-banned",uid:e.uid,attr:e.error_code});S.dispatchEvent(t),n=!0})),S.socket.on("on_stream_fallback_update",(function(e){o.default.info("[".concat(S.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=l({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});S.dispatchEvent(t)})),S.socket.on("stream_recover",(function(e){o.default.info("[".concat(S.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=l({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});S.dispatchEvent(t)})),S.socket.on("on_p2p_lost",(function(e){o.default.debug("[".concat(S.clientId,"] p2plost: "),e,"p2ps:",S.p2ps);var t,n="DTLS failed";(t=S.localStreams[e.uid]||S.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(n="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&a.b.publish(S.joinInfo.sid,{lts:t.publishLTS,succ:!1,audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:n}),"subscribe"===e.event&&a.b.subscribe(S.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:n})):o.default.warning("P2PLost Stream Not found",e),o.default.debug("[".concat(S.clientId,"] p2plost:"),e.p2pid),(t=S.p2ps.get(e.p2pid))&&(S.p2ps.delete(e.p2pid),t.local?S.dispatchEvent(l({type:"pubP2PLost",stream:t,attr:n})):S.remoteStreams[t.getId()]&&S.dispatchEvent(l({type:"subP2PLost",stream:t,attr:n})))})),S.socket.on("on_token_privilege_will_expire",(function(e){o.default.debug("[".concat(S.clientId,"] Received Message onTokenPrivilegeWillExpire")),S.dispatchEvent(l({type:"onTokenPrivilegeWillExpire"}))})),S.socket.on("on_token_privilege_did_expire",(function(){o.default.warning("[".concat(S.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),S.closeGateway(),S.dispatchEvent(l({type:"onTokenPrivilegeDidExpire"}))})),S._doWithAction=function(e,t,n){"tryNext"===e?function(e,t){o.default.debug("[".concat(S.clientId,"] Connect next gateway")),S.state=g,S.socket.close(),T(),S.reconnectMode="tryNext",A(e,t)}(t,n):"retry"===e?function(e,t){o.default.debug("[".concat(S.clientId,"] Reconnect gateway")),S.state=g,S.socket.close(),T(),S.reconnectMode="retry",A(e,t)}(t,n):"quit"===e?(o.default.debug("[".concat(S.clientId,"] quit gateway")),S.state=g,S.socket.close(),T()):"recover"===e&&O()},S.socket.on("on_notification",(function(e){if(o.default.debug("[".concat(S.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===E[e.code])return S.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?S._doWithAction(Qe[E[e.code]]):e.action&&S._doWithAction(e.action)})),S.socket.on("on_user_offline",(function(e){var t=l({type:"peer-leave",uid:e.uid});if(S.remoteStreamsInChannel.has(e.uid)&&S.remoteStreamsInChannel.delete(e.uid),S.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=S.remoteStreams[e.uid]),S.dispatchEvent(t),S.remoteStreams.hasOwnProperty(e.uid)){o.default.info("[".concat(S.clientId,"] closing stream on peer leave"),e.uid);var n=S.remoteStreams[e.uid];n.close(),delete S.remoteStreams[e.uid],void 0!==n.pc&&(n.pc.close(),n.pc=void 0,S.p2ps.delete(n.p2pId))}S.timers.hasOwnProperty(e.uid)&&(clearInterval(S.timers[e.uid]),clearInterval(S.timers[e.uid]+"_RelatedStats"),delete S.timers[e.uid]),null!=S.audioLevel[e.uid]&&delete S.audioLevel[e.uid],null!=S.timer_counter[e.uid]&&delete S.timer_counter[e.uid]})),S.socket.on("onUplinkStats",(function(e){})),S.socket.on("liveStreamingStarted",(function(e){var t=f({type:"liveStreamingStarted",url:e.url});S.dispatchEvent(t)})),S.socket.on("liveStreamingFailed",(function(e){var t=f({type:"liveStreamingFailed",url:e.url});S.dispatchEvent(t)})),S.socket.on("liveStreamingStopped",(function(e){var t=f({type:"liveStreamingStopped",url:e.url});S.dispatchEvent(t)})),S.socket.on("liveTranscodingUpdated",(function(e){var t=f({type:"liveTranscodingUpdated",reason:e.reason});S.dispatchEvent(t)})),S.socket.on("streamInjectedStatus",(function(e){var t=f({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});S.dispatchEvent(t)})),S.socket.on("on_user_online",(function(e){S.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),S.dispatchEvent({type:"peer-online",uid:e.uid})}));var u},k=function(e,t){if(void 0!==S.socket)try{S.socket.emitSimpleMessage(e,(function(e,n){t&&t(e,n)}))}catch(e){o.default.error("[".concat(S.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else o.default.error("[".concat(S.clientId,"] Error in sendSimpleSdp [socket not ready]"))},C=function(){for(var e in S.localStreams)if(void 0!==S.localStreams[e]){var t=S.localStreams[e];delete S.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},N=function(){for(var e in S.remoteStreamsInChannel.clear(),S.remoteStreams)if(S.remoteStreams.hasOwnProperty(e)){var t=S.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete S.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return S},ot={_gatewayClients:{},register:function(e,t){if(!t.uid){var n="NO_UID_PROVIDED";return o.default.error("[".concat(e.clientId,"] "),n,t),n}return t.cname?this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e?(n="UID_CONFLICT",o.default.error("[".concat(e.clientId,"] "),n,t),n):(o.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null):(n="NO_CHANNEL_PROVIDED",o.default.error("[".concat(e.clientId,"] "),n,t),n)},unregister:function(e){var t=e&&e.uid,n=e.joinInfo&&e.joinInfo.cname;if(!t||!n){var r="INVALID_GATEWAYCLIENT";return o.default.error("[".concat(e.clientId,"] "),r),r}if(this._gatewayClients[n]&&this._gatewayClients[n][t])return this._gatewayClients[n][t]!==e?(r="GATEWAYCLIENT_UID_CONFLICT",o.default.error("[".concat(e.clientId,"] "),r),r):(o.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[n][t],null);r="GATEWEAY_CLIENT_UNREGISTERED",o.default.error("[".concat(e.clientId,"] "),r)}};it.DISCONNECTED=0,it.CONNECTING=1,it.CONNECTED=2,it.DISCONNECTING=3,it.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"};var at=it,st=function(e){var t;switch(e){case"120p":case"120p_1":t=["120p_1","120p_1","120p_1"];break;case"120p_3":t=["120p_3","120p_3","120p_3"];break;case"180p":case"180p_1":t=["90p_1","90p_1","180p_1"];break;case"180p_3":t=["120p_3","120p_3","180p_3"];break;case"180p_4":t=["120p_1","120p_1","180p_4"];break;case"240p":case"240p_1":t=["120p_1","120p_1","240p_1"];break;case"240p_3":t=["120p_3","120p_3","240p_3"];break;case"240p_4":t=["120p_4","120p_4","240p_4"];break;case"360p":case"360p_1":case"360p_4":case"360p_9":case"360p_10":case"360p_11":t=["90p_1","90p_1","360p_1"];break;case"360p_3":case"360p_6":t=["120p_3","120p_3","360p_3"];break;case"360p_7":case"360p_8":t=["120p_1","120p_1","360p_7"];break;case"480p":case"480p_1":case"480p_2":case"480p_4":case"480p_10":t=["120p_1","120p_1","480p_1"];break;case"480p_3":case"480p_6":t=["120p_3","120p_3","480p_3"];break;case"480p_8":case"480p_9":t=["120p_4","120p_4","480p_8"];break;case"720p":case"720p_1":case"720p_2":case"720p_3":t=["90p_1","90p_1","720p_1"];break;case"720p_5":case"720p_6":t=["120p_1","120p_1","720p_5"];break;case"1080p":case"1080p_1":case"1080p_2":case"1080p_3":case"1080p_5":t=["90p_1","90p_1","1080p_1"];break;case"1440p":case"1440p_1":case"1440p_2":t=["90p_1","90p_1","1440p_1"];break;case"4k":case"4k_1":case"4k_3":t=["90p_1","90p_1","4k_1"];break;default:t=["120p_1","120p_1","360p_7"]}return Object(p.isOpera)()?[e,15,50]:Object(p.isFireFox)()?[t[1],15,100]:Object(p.isSafari)()?[t[2],15,50]:[t[0],15,50]},ut={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},ct={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},lt=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var n=parseInt(t.attributes.maxFrameRate),r=parseInt(e.googFrameRateInput);return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,n,r,i,o){r[e]||(r[e]={isPrevNormal:!0,record:[]});var a=r[e],s=t["check"+e](n,o);if(a.record.push(s),a.record.length>=5){a.isCurNormal=-1!==a.record.indexOf(!0);var u=ct[e];a.isPrevNormal&&!a.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:u,msg:ut[u],uid:i}),!a.isPrevNormal&&a.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:u+2e3,msg:ut[u+2e3],uid:i}),a.isPrevNormal=a.isCurNormal,a.record=[]}},t.setLocalStats=function(e){var n={};Object.keys(e).map((function(r){var i=e[r],o=t.gatewayClient.localStreams[parseInt(r)],a=t.localStreamStorage[r]||{};o&&o.hasVideo()&&(t.record("SendVideoBitrate",i.videoStats,a,r),t.record("FramerateInput",i.videoStats,a,r,o),t.record("FramerateSent",i.videoStats,a,r)),o&&o.hasAudio()&&(t.record("AudioIntputLevel",i.audioStats,a,r),t.record("SendAudioBitrate",i.audioStats,a,r)),n[r]=a})),t.localStreamStorage=n},t.setRemoteStats=function(n){var r={};Object.keys(n).map((function(i){var o=n[i],a=e.remoteStreams[i],s=t.remoteStreamStorage[i]||{};a&&a.hasVideo()&&a.isPlaying()&&t.record("VideoDecode",o.videoStats,s,i),a&&a.hasAudio()&&a.isPlaying()&&(t.record("AudioOutputLevel",o.audioStats,s,i),t.record("AudioDecode",o.audioStats,s,i)),r[i]=s})),t.remoteStreamStorage=r},t},dt=new function(){var e=s();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,n){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var r=e._getNetworkInfo();e.type=r&&r.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,n&&n("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),n=t&&t.type||"UNSUPPORTED",r=Date.now();if(n!==e.type){e.lastTypeChangedAt=r,"none"==n?e.lastDisconnectedAt=r:"none"==e.type&&(e.lastConnectedAt=r),e.type=n;var i={type:"networkTypeChanged",networkType:n};e.dispatchEvent(i)}},e.getStats=function(t,n){var r={},i=e._getNetworkInfo();i&&(r.NetworkType=i.type||"UNSUPPORTED"),setTimeout((function(){t(r)}),0)},e._init((function(){navigator.connection.addEventListener("change",(function(){e._reloadNetworkInfo()})),e.networkChangeTimer=setInterval((function(){e._reloadNetworkInfo()}),5e3)}),(function(e){})),e},ft="DISCONNECTING",pt="DISCONNECTED",ht="CONNECTED",vt="INIT",gt=[],mt=(setInterval((function(){Date.now(),gt.forEach((function(e){for(var t=e.requests.length-1;t>=0;t--){var n=e.requests[t];n.timeoutCnt++,n.timeoutCnt>=15&&(e.requests.splice(t,1),n.promises.reject({reason:"TIMEOUT",code:499}))}}))}),1e3),1),yt=1,bt=function(){var e=Fe()(je.a.mark((function e(t){var n,i,a,s,u,c;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.serviceName,a=t.sid,s=t.appId,u=t.cname,c=t.timeout,e.abrupt("return",new Promise((function(e,t){var l=!1,d=new XMLHttpRequest;d.open("POST",n,!0),d.setRequestHeader("Content-Type","application/json; charset=utf-8"),d.setRequestHeader("X-Packet-Service-Type","0"),d.setRequestHeader("X-Packet-URI","61"),d.onload=function(){if(!l){var n=null,r=null;try{n=JSON.parse(d.responseText)}catch(e){var i="Invalid text ".concat(d.responseText);return o.default.error(i),l=!0,t(i)}if(n.code){var a="AP_ERR_".concat(n.code);return o.default.error(a,n),l=!0,t(a)}try{r=JSON.parse(n.json_body||n.json)}catch(e){var s="Invalid json_body ".concat(d.responseText);return o.default.error(s),l=!0,t(s)}if(200!==r.code){var u="APPCENTER_CODE_".concat(r.code);return o.default.error(u,r),l=!0,t(u)}return r.servers&&r.servers.length>0?(l=!0,e(r)):(o.default.error("APPCENTER_EMPTY_SERVER",r),l=!0,t("APPCENTER_EMPTY_SERVER"))}},d.onerror=function(e){var r="AP_REUEST_".concat(e.type);o.default.error(r,n,e),l||(l=!0,t(r))},d.ontimeout=function(e){o.default.error("AP_REUEST_TIMEOUT",n,e),l||(l=!0,t("AP_REUEST_TIMEOUT"))},c&&(d.timeout=c),d.send(JSON.stringify({service_name:i,json_body:JSON.stringify({command:"allocateEdge",sid:a,appId:s,ts:Math.floor(Date.now()/1e3),seq:mt++,cname:u,version:r.VERSION,requestId:yt++})}))})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),_t=function(){var e=Fe()(je.a.mark((function e(t){var n,i,a,s,u,c,l,d,f,p,h;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.serviceName,i=t.sid,a=t.appId,s=t.cname,u=null,e.t0=je.a.keys(Object(r.getParameter)("UAP_AP"));case 3:if((e.t1=e.t0()).done){e.next=34;break}return c=e.t1.value,l="https://".concat(Object(r.getParameter)("UAP_AP")[c],"/api/v1?action=uap"),d=void 0,e.prev=7,e.next=10,bt({url:l,appId:a,sid:i,serviceName:n,cname:s,timeout:Object(r.getParameter)("HTTP_CONNECT_TIMEOUT")});case 10:d=e.sent,e.next=18;break;case 13:return e.prev=13,e.t2=e.catch(7),o.default.error(e.t2),u=e.t2,e.abrupt("continue",3);case 18:f=je.a.mark((function e(t){var r,i,a;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.servers[t],i="wss://".concat(r.address.replace(/\./g,"-"),".edge.").concat(t%2==0?"agora.io":"agoraio.cn",":").concat(r.wss,"?serviceName=").concat(encodeURIComponent(n)),r.wss){e.next=5;break}return o.default.error("Invalid server response",r),e.abrupt("return","continue");case 5:return e.prev=5,e.next=8,new Promise((function(e,t){var n=new WebSocket(i),r=!1;n.addEventListener("open",(function(){r||(r=!0,e(n))})),n.addEventListener("error",(function(e){r||(r=!0,t(e))}))}));case 8:return(a=e.sent).workerToken=d.workerToken,e.abrupt("return",{v:a});case 13:e.prev=13,e.t0=e.catch(5),o.default.error(e.t0),u=e.t0;case 17:case"end":return e.stop()}}),e,this,[[5,13]])})),p=0;case 20:if(!(p<d.servers.length)){e.next=32;break}return e.delegateYield(f(p),"t3",22);case 22:h=e.t3,e.t4=h,e.next="continue"===e.t4?26:27;break;case 26:return e.abrupt("continue",29);case 27:if("object"!==oe()(h)){e.next=29;break}return e.abrupt("return",h.v);case 29:p++,e.next=20;break;case 32:e.next=3;break;case 34:throw u;case 35:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),Et={},wt=function(e){return Et[e]?(Et[e]+=1,Et[e]):(Et[e]=1,Et[e])},St={},It=function(e){return St[e]?(St[e]+=1,St[e]):(St[e]=1,St[e])},Ot=function(e){var t=e.appId,n=e.cname,i=e.uid,a=e.sid,u=s();return u.status=vt,u.pingpongTimer=null,u.connection=null,u.requests=[],u.appId=t,u.cname=n,u.uid=i,u.sid=a,u.connection=null,u.connect=function(){var e=Fe()(je.a.mark((function e(t){var n;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wsClient,u.status===vt){e.next=4;break}return o.default.debug("Ignored UapConnection.connect: ".concat(u.status)),e.abrupt("return");case 4:u.connection=n,u.status=ht,u._flush(),u.startPingpong(),n.addEventListener("close",(function(e){if(console.log("Weboskcet closed",e),n===u.connection){var t={type:"close",evt:e};u.dispatchEvent(t)}})),n.addEventListener("message",(function(e){if(e.data){var t=null;try{t=JSON.parse(e.data)}catch(e){return void o.default.error("Invalid data from worker manager",t)}if(t.requestId)for(var n=u.requests.length-1;n>=0;n--){var r=u.requests[n];if(r.reqData.requestId===t.requestId){u.requests.splice(n,1),t.code<400&&t.code>=200?r.promises.resolve(t):r.promises.reject(t);break}}else t.type="notification",u.dispatchEvent(t)}}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.disconnect=Fe()(je.a.mark((function e(){var t;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t in u.status=ft,clearInterval(u.pingpongTimer),u.pingpongTimer=null,u.requests)u.requests[t].promises.reject("DISCONNECTED");return u.requests=[],u.connection&&(u.connection.close(),u.connection=null),u.status=pt,e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),u.request=function(){var e=Fe()(je.a.mark((function e(t){var n,i,a,s;return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m()({command:"request",sdkVersion:r.VERSION,seq:It(u.sid),appId:u.appId,cname:u.cname,uid:""+u.uid,sid:u.sid,requestId:wt(u.sid),ts:Math.floor(Date.now()/1e3)},t),"INIT"!==u.status){e.next=5;break}return e.abrupt("return",new Promise((function(e,t){var r={reqData:n,stalledTs:Date.now(),timeoutCnt:0,promises:{resolve:e,reject:t}};u.requests.push(r)})));case 5:if(u.connection){e.next=11;break}throw i="NO_WEBSOCKET_CONNECTION",o.default.error(i),new Error(i);case 11:if(u.status!==ft||t.clientRequest&&"DestroyWorker"===t.clientRequest.command){e.next=17;break}throw a="WEBSOCKET_DISCONNECTING",o.default.error(a),new Error(a);case 17:if("DISCONNECTED"!==u.status){e.next=23;break}throw s="WEBSOCKET_DISCONNECTED",o.default.error(s),new Error(s);case 23:return e.abrupt("return",new Promise((function(e,t){var r={reqData:n,stalledTs:Date.now(),timeoutCnt:0,promises:{resolve:e,reject:t}};u.requests.push(r),u._flush()})));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u._flush=function(){u.connection&&u.status===ht&&u.requests.forEach((function(e){e.sentTs||(e.sentTs=Date.now(),e.reqData.clientRequest&&(e.reqData.clientRequest.workerToken=u.connection.workerToken),u.connection.send(JSON.stringify(e.reqData)))}))},u.startPingpong=function(){clearInterval(u.pingpongTimer),u.pingpongTimer=setInterval(Fe()(je.a.mark((function e(){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.status!==ht||!u.connection||1!==u.connection.readyState){e.next=9;break}return e.prev=1,e.next=4,u.request({command:"ping"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("pingpong",e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),6e3)},u._flush(),u.startPingpong(),gt.push(u),u},Tt=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},At=function(e){var t=e;if(Object(r.getParameter)("LIVESTREAMING_ALIGN"))switch(e){case 200:t=I;break;case 451:t=O;break;case 453:t=T;break;case 470:t=P;break;case 499:t=A;break;default:t=R}return t},Rt=function(e){var t=e;if(Object(r.getParameter)("LIVESTREAMING_ALIGN"))switch(e){case 200:t=k;break;case 404:case 452:t=C;break;case 453:t=N;break;case 499:t=x;break;default:t=L}return t},kt=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null};return t.turnServer={mode:"auto",username:"test",credential:"111111",forceturn:Object(r.getParameter)("FORCE_TURN")},t.useProxyServer=!1,t.mode=e.mode,t.codec=e.codec,t.clientId=Object(te.b)().slice(0,5),t.uintUid=null,e=m()({},e),t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.getConnectionState=function(){var n=a.b.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),r=at.connetionStateMap[t.gatewayClient.state];return n(),r},t.setClientRole=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{callback:r,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(ae(n,"setClientRole",["host","audience"]),"rtc"===t.mode){var s="RTC mode can not use setClientRole";return o.default.warning("[".concat(t.clientId,"] ").concat(s)),i&&i(s)}t.gatewayClient&&t.gatewayClient.state===at.CONNECTED?("audience"===n&&(0===this.highStreamState?this._unpublish(this.highStream,(function(){i&&i(null,{role:n})}),(function(e){i&&i(e)})):t.gatewayClient.setClientRole("audience",i)),"host"===n&&t.gatewayClient.setClientRole("host",i)):(t.gatewayClient.role=n,i&&i(null,{role:n}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==at.CONNECTED){var n="Client is not in connected state";return o.default.error("[".concat(t.clientId,"] ").concat(n)),void e(n)}t.gatewayClient.getGatewayInfo((function(t){e(null,t)}),e)},t.renewToken=function(n,r,i){var s=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o.default.error("Failed to renew token ".concat(e),t),i&&i(e);r&&r(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!he(n))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=n,void t.gatewayClient.renewToken(n,(function(e){return s(null,e)}),s)):(o.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),s(M.INVALID_OPERATION)):(o.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),s(M.INVALID_OPERATION))},t.setLowStreamParameter=function(n){var r=a.b.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});se(n,"param");var i=n.width,s=n.height,u=n.framerate,c=n.bitrate;_e(i)||ce(i,"width"),_e(s)||ce(s,"height"),_e(u)||ce(u,"framerate"),_e(c)||ce(c,"bitrate",1,1e7),(!i&&s||i&&!s)&&o.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=n,r()},t.init=function(n,r,i){var s=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Client.init",options:arguments,tag:"tracer"});ue(n),Object(p.isChromeKernel)()&&Object(p.getChromeKernelVersion)()<=48?i?s(M.BAD_ENVIRONMENT):Object(te.e)():(o.default.info("[".concat(t.clientId,"] Initializing AgoraRTC client, appId: ").concat(n,".")),e.appId=n,e.sessionId=Object(te.b)(),s())},t.setTurnServer=function(n){var r=a.b.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==at.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");se(n,"turnServer");var i=n.turnServerURL,s=n.username,u=n.password,c=n.udpport,l=n.forceturn,d=n.tcpport;ue(i,"turnServerURL"),ue(s,"username"),ue(u,"password"),ue(c,"udpport"),_e(l)||le(l,"forceturn"),t.turnServer.mode="manual",t.turnServer.url=i,t.turnServer.udpport=c,t.turnServer.username=s,t.turnServer.credential=u,t.turnServer.forceturn=l||!1,_e(d)||(ue(d,"tcpport"),t.turnServer.tcpport=d,o.default.info("[".concat(t.clientId,"] Set turnserver tcpurl. ").concat(t.turnServer.url,":").concat(t.turnServer.tcpport))),o.default.info("[".concat(t.clientId,"] Set turnserver udpurl. ").concat(t.turnServer.url,":").concat(t.turnServer.udpport,",username: ").concat(t.turnServer.uername,",password: ").concat(t.turnServer.credential)),r()},t.setProxyServer=function(n){var r=a.b.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==at.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!n)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");ue(n,"proxyServer"),t.proxyServer=n,a.b.setProxyServer(n),o.default.setProxyServer(n),r()},t.startProxyServer=function(){var n=a.b.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==at.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer||t.turnServer.url)throw new Error("You have already set the proxy");t.useProxyServer=!0,n()},t.stopProxyServer=function(){var n=a.b.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==at.DISCONNECTED)throw new Error("Stop proxy server after leave channel");a.b.setProxyServer(),o.default.setProxyServer(),t.turnServer={},t.proxyServer=null,t.useProxyServer=!1,n()},t.setEncryptionSecret=function(n){var r=a.b.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});ue(n,"password"),t.aespassword=n,r()},t.setEncryptionMode=function(n){var r=a.b.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(ue(n,"encryptionMode"),-1===ke.indexOf(n))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb"');t.aesmode=n,r()},t.configPublisher=function(n){var r=a.b.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});se(n,"config");var i=n.width,o=n.height,s=n.framerate,u=n.bitrate,c=n.publisherUrl;ce(i,"width"),ce(o,"height"),ce(s,"framerate"),ce(u,"bitrate",1,1e7),c&&ue(c,"publisherUrl"),t.gatewayClient.configPublisher(n),r()},t.enableDualStream=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(p.getBrowserOS)()?(a.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),i(M.IOS_NOT_SUPPORT)):Object(p.isWeChatBrowser)()?(a.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),i(M.WECHAT_NOT_SUPPORT)):(a.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream((function(e){return i(null,e)}),(function(e){o.default.warning("[".concat(t.clientId,"]"),e),i(M.ENABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?i(M.STILL_ON_PUBLISHING):i(null)))},t.disableDualStream=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);n&&n(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});a.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream((function(){t.highStream.lowStream=null,i()}),(function(e){o.default.warning("[".concat(t.clientId,"]"),e),i(M.DISABLE_DUALSTREAM_FAILED)})):1===t.highStreamState?i(M.STILL_ON_PUBLISHING):i()},t._createLowStream=function(e,n){if(t.highStream&&t.highStream.stream){var i=m()({},t.highStream.params);if(i.streamID+=1,i.audio=!1,i.video){var a=t.highStream.stream.getVideoTracks()[0];a?re.getVideoCameraIdByLabel(a.label,(function(a){i.cameraId=a;var s=new Oe(i);if(s.streamId=t.highStream.getId()+1,t.lowStreamParameter){var u=m()({},t.lowStreamParameter);if(!u.width||!u.height){var c=st(t.highStream.profile),l=r.SUPPORT_RESOLUTION_LIST[c[0]];u.width=l[0],u.height=l[1]}u.framerate=u.framerate||5,u.bitrate=u.bitrate||50,(Object(p.isSafari)()||Object(p.isOpera)())&&(o.default.debug("[".concat(t.clientId,"] Shimming lowStreamParameter")),l=r.SUPPORT_RESOLUTION_LIST[t.highStream.profile],u.width=l[0],u.height=l[1]),s.setVideoProfileCustomPlus(u)}else s.setVideoProfileCustom(st(t.highStream.profile));s.init((function(){t.highStream.lowStream=s,t.highStream.userMuteVideo&&s.muteVideo(),e&&e(s)}),n)}),n):n&&n(M.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(M.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(M.HIGH_STREAM_NOT_VIDEO_TRACE)},t._getLowStream=function(e,n){t.lowStream?e(t.lowStream):t._createLowStream((function(n){t.lowStream=n,e(t.lowStream)}),n)},t._publishLowStream=function(e,n){return 2!==t.lowStreamState?n&&n(M.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?n&&n(M.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream((function(r){t.lowStreamState=1,t.gatewayClient.publish(r,{streamType:1},(function(){t.lowStreamState=0,e&&e()}),(function(e){1===t.lowStreamState&&(t.lowStreamState=2),o.default.debug("[".concat(t.clientId,"] publish low stream failed")),n&&n(e)}))}),n)},t._unpublishLowStream=function(e,n){if(0!==t.lowStreamState)return n&&n(M.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},(function(){}),(function(e){o.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),n&&n(e)})),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(n,r,i,s,u){var c,l=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return u&&u(e);s&&s(t)},name:"Client.join",options:arguments,tag:"tracer"});if(n&&!he(n))return o.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),l(M.INVALID_PARAMETER);if(!ye(c=r)||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(c))return o.default.error("Invalid Channel Name ".concat(r)),o.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),l(M.INVALID_PARAMETER);if("string"==typeof r&&""===r)return o.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),l(M.INVALID_PARAMETER);if(i&&!Object(te.c)(i)&&!de(i,1,255))return o.default.error("Invalid UID ".concat(i," ").concat(oe()(i))),o.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")),l(M.INVALID_PARAMETER);if("string"==typeof i&&0==i.length)return o.default.warning("[".concat(t.clientId,"] String uid should not be empty")),l(M.INVALID_PARAMETER);if("string"==typeof i&&i.length>256)return o.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),l(M.INVALID_PARAMETER);t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var d={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:r,uid:i,turnServer:t.turnServer,proxyServer:t.proxyServer,token:n||e.appId,useProxyServer:t.useProxyServer};if("string"==typeof i&&(d.stringUid=i,t.uintUid?(d.uid=t.uintUid,delete t.uintUid):d.uid=0),t.aespassword&&"none"!==t.aesmode&&m()(d,{aespassword:t.aespassword,aesmode:t.aesmode}),a.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:r,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,l(null,e)},t.onFailure=function(e){return l(e)},t.channel=r,t.gatewayClient.state!==at.DISCONNECTED)return o.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),l(M.INVALID_OPERATION),void a.b.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:M.INVALID_OPERATION,addr:null});t.gatewayClient.state=at.CONNECTING;var f=function(i,a){o.default.info("[".concat(t.clientId,"] Joining channel: ").concat(r)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:a,joinInfo:d}),t.key=n||e.appId,d.cid=i.cid,d.uid||(d.uid=i.uid),d.vid=i.vid,d.clientId=t.clientId,d.apResponse=i.res,i.uni_lbs_ip&&i.uni_lbs_ip[1]&&(d.uni_lbs_ip=i.uni_lbs_ip[1]),d.gatewayAddr=i.gateway_addr,t.joinInfo=d,t.gatewayClient.join(d,t.key,(function(e){o.default.info("[".concat(t.clientId,"] Join channel ").concat(r," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),l(null,e)}),(function(e){return l(e)}))};d.stringUid&&!d.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=$e(d,t.gatewayClient),t.userAccountReq.then((function(e){o.default.debug("getUserAccount Success ".concat(e.url," ").concat(d.stringUid," => ").concat(e.uid)),d.uid=e.uid,Je(d,f)})).catch((function(e){o.default.error("getUserAccount rejected",e),l(e)}))):Je(d,f)},t.renewChannelKey=function(n,r,i){var s=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);r&&r(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});ue(n,"key",1,2047),void 0===t.key?(o.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),s(M.INVALID_OPERATION)):(t.key=n,t.gatewayClient.joinInfo.token=n,t.gatewayClient.key=n,t.gatewayClient.recover(),s())},t.leave=function(n,i){t.gatewayClient.hasInvokeLeave=!0;var s=!1,u=a.b.reportApiInvoke(e.sessionId,{callback:function(e,r){if(e)return i&&i(e);var o;t.gatewayClient.reconnectingCS=!1,clearTimeout((o=t.clientId,He[o])),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),n&&n(r)},name:"Client.leave",options:arguments,tag:"tracer"});o.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===at.CONNECTING&&(t.gatewayClient.state=at.DISCONNECTED)),t.gatewayClient.leave((function(e){s=!0,u(null,e)}),u),setTimeout((function(){s||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=at.DISCONNECTED,u(null,"LEAVE_MSG_TIMEOUT"))}),Object(r.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var n=Object(te.b)();if(o.default.debug("renewSession ".concat(e.sessionId," => ").concat(n)),e.sessionId=n,t.joinInfo&&(t.joinInfo.sid=n),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=n),t.gatewayClient.localStreams))for(var r in t.gatewayClient.localStreams){var i=t.gatewayClient.localStreams[r];i&&(i.sid=n)}},t._publish=function(n,i,a){if(2!==t.highStreamState)return o.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(n.getId())),a&&a(M.STREAM_ALREADY_PUBLISHED);if("auto"===t.turnServer.mode&&Object(r.getParameter)("FORCE_TURN")&&!Object(r.getParameter)("TURN_ENABLE_TCP")&&!Object(r.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");o.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(n.getId())),t.highStream=n,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var s=function(n,r,i){t.gatewayClient.publish(n,{streamType:0},(function(){n.sid=e.sessionId,t.highStreamState=0,o.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(n.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream((function(){r&&r()}),(function(e){o.default.warning("[".concat(t.clientId,"] "),e),r&&r()})):r&&r()}),i)};"audience"===t.gatewayClient.role&&"live"===t.mode?t.gatewayClient.setClientRole("host",(function(e){if(e)return a&&a(e);s(n,i,a)})):s(n,i,a)},t._unpublish=function(e,n,r){if(0!==t.highStreamState)return o.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),r&&r(M.STREAM_NOT_YET_PUBLISHED);o.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var i=function(e,n,r){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,r),t.gatewayClient.unpublish(e,{streamType:0},(function(){t.highStreamState=2,o.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),n&&n()}),(function(n){o.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),r&&r(n)}))};"host"===t.gatewayClient.role&&"live"===t.mode?t.gatewayClient.setClientRole("audience",(function(t){if(t)return r&&r(t);i(e,n,r)})):i(e,n,r)},t.publish=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return 1===t.highStreamState&&(t.highStreamState=2),r&&r(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});2===t.highStreamState?t._publish(n,(function(e){return i(null,e)}),(function(e){return i(e)})):i(M.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(n,r,i){var o=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e);i&&i(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});0===t.highStreamState?t._unpublish(n,(function(e){return o(null,e)}),(function(e){return o(e)})):o(M.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(n,r,i){var s=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:r,onFailure:!!i}});"function"==typeof r&&(i=r,r=null),se(n,"stream"),_e(r)||(se(r,"options"),_e(r.video)||le(r.video,"options.video"),_e(r.audio)||le(r.audio,"options.audio"));var u={video:!0,audio:!0};if(!_e(r)){if(Object(p.isSafari)()&&(!r.video||!r.audio)){var c="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return o.default.error("[".concat(t.clientId,"] "),c),void s(c)}if(!_e(r.video)&&!pe(r.video)||!_e(r.audio)&&!pe(r.audio)||!1===r.audio&&!1===r.video)return c="INVALID_PARAMETER ".concat(JSON.stringify(r)),o.default.error("[".concat(t.clientId,"] "),c),void s(c)}n.subscribeOptions?(m()(n.subscribeOptions,u,r),t.gatewayClient.subscribeChange(n,(function(e){return s(null,e)}),s)):(n.subscribeOptions=m()({},u,r),t.gatewayClient.subscribe(n,(function(e){return s(null,e)}),s))},t.unsubscribe=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return r&&r(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!r}});o.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(n.getId())),t.gatewayClient.unsubscribe(n,(function(e){return i(null,e)}),i)},t.setRemoteVideoStreamType=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:r}});ae(r,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(n,r),i()},t.setStreamFallbackOption=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:r}});ae(r,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(n,r),i()},t.enableAudioVolumeIndicator=function(n,r){var i=a.b.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});n=n||2e3,ce(r=r||3,"smooth",1,100),ce(n,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=n,t.audioVolumeIndication.smooth=r,t.audioVolumeIndication={interval:n,smooth:r},o.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(n," smooth ").concat(r)),t.gatewayClient.enableAudioVolumeIndicator(n,r),i()},t.getNetworkStats=function(e,n){return o.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),dt.getStats(e,n)},t.getSystemStats=function(e,t){return v.getStats(e,t)},t.getRecordingDevices=function(e,t){return re.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return re.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return re.getCameras(e,t)},t.getRemoteAudioStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioStats(e,n)},t.getLocalAudioStats=function(e,n){return t.rtcStatsCollector.getLocalAudioStats(e,n)},t.getRemoteVideoStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoStats(e,n)},t.getLocalVideoStats=function(e,n){return t.rtcStatsCollector.getLocalVideoStats(e,n)},t._getRemoteVideoQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,n)},t._getRemoteAudioQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,n)},t.getTransportStats=function(e,n){return t.rtcStatsCollector.getTransportStats((function(t){return dt.getStats((function(n){var r=m()({},t,n);e&&e(r)}),n)}),n)},t.getSessionStats=function(e,n){return t.rtcStatsCollector.getSessionStats(e,n)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},e.clientId=t.clientId,t.gatewayClient=at(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,n){t.gatewayClient.on(e,n),t.listenerLoggerCache.push("".concat(e).concat(n.name?":"+n.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):o.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout((function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,o.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])}),0)},t.off=function(e,n){o.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,n)},t.rtcStatsCollector=function(e){var t=s();return t.gatewayClient=e,t.exceptionMonitor=new lt(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];ne(i,"End2EndDelay",o.peer_delay&&o.peer_delay.audio_delay),ne(i,"TransportDelay",o.peer_delay&&o.peer_delay.e2e_delay),ne(i,"PacketLossRate",o.peer_delay&&o.peer_delay.e2e_audio_lost_ratio_400ms),ne(i,"RecvLevel",o.audioStats&&o.audioStats.audioOutputLevel),ne(i,"RecvBitrate",o.audioRecvBitrate),ne(i,"CodecType",o.audioStats&&o.audioStats.googCodecName),ne(i,"MuteState",o.audioDisabled),ne(i,"TotalFreezeTime",o.audioStats&&o.audioStats.audioTotalFreezeTime),ne(i,"TotalPlayDuration",o.audioStats&&o.audioStats.audioTotalPlayDuration),n[r]=i}e&&e(n)},t.getLocalAudioStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];ne(i,"RecordingLevel",o.audioStats&&o.audioStats.audioInputLevel),ne(i,"SendLevel",o.audioStats&&o.audioStats.totalAudioEnergy),ne(i,"SamplingRate",o.audioStats&&o.audioStats.totalSamplesDuration),ne(i,"SendBitrate",o.audioSendBitrate),ne(i,"CodecType",o.audioStats&&o.audioStats.googCodecName),ne(i,"MuteState",o.audioDisabled);var a=t.gatewayClient.localStreams[r];a&&a.isPlaying()&&ne(i,"MuteState",a.userMuteAudio?"1":"0"),n[r]=i}e&&e(n)},t.getRemoteVideoStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];ne(i,"End2EndDelay",o.peer_delay&&o.peer_delay.video_delay),ne(i,"TransportDelay",o.peer_delay&&o.peer_delay.e2e_delay),ne(i,"PacketLossRate",o.peer_delay&&o.peer_delay.e2e_video_lost_ratio_400ms),ne(i,"RecvBitrate",o.videoRecvBitrate),ne(i,"RecvResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthReceived),ne(i,"RecvResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightReceived),ne(i,"RenderResolutionWidth",o.videoStats&&o.videoStats.renderRemoteWidth),ne(i,"RenderResolutionHeight",o.videoStats&&o.videoStats.renderRemoteHeight),ne(i,"RenderFrameRate",o.videoStats&&o.videoStats.googFrameRateOutput),ne(i,"MuteState",o.videoDisabled),ne(i,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),ne(i,"TotalPlayDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),n[r]=i}e&&e(n)},t.getLocalVideoStats=function(e){var n={};for(var r in t.localStats){var i={},o=t.localStats[r];ne(i,"TargetSendBitrate",o.videoTargetSendBitrate),ne(i,"SendFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),ne(i,"SendBitrate",o.videoSendBitrate),ne(i,"SendResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthSent),ne(i,"SendResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightSent),ne(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.googFrameWidthInput),ne(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.googFrameHeightInput),ne(i,"EncodeDelay",o.videoStats&&o.videoStats.googAvgEncodeMs),ne(i,"MuteState",o.videoDisabled),ne(i,"TotalFreezeTime",o.videoStats&&o.videoStats.videoTotalFreezeTime),ne(i,"TotalDuration",o.videoStats&&o.videoStats.videoTotalPlayDuration),ne(i,"CaptureFrameRate",o.videoStats&&o.videoStats.googFrameRateSent),o.videoStats&&!o.videoStats.googFrameWidthInput&&ne(i,"CaptureResolutionWidth",o.videoStats&&o.videoStats.renderLocalWidth),o.videoStats&&!o.videoStats.googFrameHeightInput&&ne(i,"CaptureResolutionHeight",o.videoStats&&o.videoStats.renderLocalHeight),n[r]=i,e&&e(n)}},t.getRemoteVideoQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];ne(i,"videoReceiveDelay",o.videoStats&&o.videoStats.googCurrentDelayMs),ne(i,"VideoFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),ne(i,"FirstFrameTime",o.firstFrameTime),n[r]=i}e&&e(n)},t.getRemoteAudioQualityStats=function(e){var n={};for(var r in t.remoteStats){var i={},o=t.remoteStats[r];ne(i,"audioReceiveDelay",o.audioStats&&o.audioStats.googCurrentDelayMs),ne(i,"AudioFreezeRate",o.videoStats&&o.videoStats.videoFreezeRate),n[r]=i}e&&e(n)},t.getTransportStats=function(e){var n={},r={},i=t.gatewayClient.traffic_stats,o=i.peer_delay;if(ne(n,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),ne(n,"RTT",i&&i.access_delay),o){var a=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var d=c.value;d.downlink_estimate_bandwidth&&(r[d.peer_uid]=d.downlink_estimate_bandwidth/1e3+"")}}catch(e){s=!0,u=e}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}}n.IncomingAvailableBandwidth=r,e&&e(n)},t.getSessionStats=function(e){var n={},r=t.gatewayClient.traffic_stats,i=t.gatewayClient.socket,o=0,a=0;for(var s in t.remoteStats)(u=t.remoteStats[s])&&u.videoStats&&u.videoStats.videoRecvBytesDelta&&(a+=parseInt(u.videoStats.videoRecvBytesDelta)),u&&u.audioStats&&u.audioStats.audioRecvBytesDelta&&(a+=parseInt(u.audioStats.audioRecvBytesDelta));for(var s in t.localStats){var u;(u=t.localStats[s])&&u.videoStats&&u.videoStats.videoSendBytesDelta&&(o+=parseInt(u.videoStats.videoSendBytesDelta)),u&&u.audioStats&&u.audioStats.audioSendBytesDelta&&(o+=parseInt(u.audioStats.audioSendBytesDelta))}var c=o+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,l=a+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,d=t.session.sendBytes+Object(Le.b)(),f=t.session.recvBytes+Object(Le.a)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(d+=i.getSendBytes(),f+=i.getRecvBytes());var p=1;r.peer_delay&&(p=r.peer_delay.length,p+=1),ne(n,"Duration",i.getDuration()),ne(n,"UserCount",p),ne(n,"SendBytes",d),ne(n,"RecvBytes",f),ne(n,"SendBitrate",8*c/1e3),ne(n,"RecvBitrate",8*l/1e3),e&&e(n)},t.isLocalVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(p.isChrome)()||Object(p.isOpera)())n=e.googFrameRateInput,r=e.googFrameRateSent;else if(Object(p.isSafari)())n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(p.isFireFox)())return!1;n=parseInt(e.framerateMean),r=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return n>5&&r<3},t.isRemoteVideoFreeze=function(e,t){var n=0,r=0;if(!e||!t)return!1;if(Object(p.isChrome)()||Object(p.isOpera)())n=e.googFrameRateReceived,r=e.googFrameRateDecoded;else if(Object(p.isSafari)())n=e.framerateMean,r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(p.isFireFox)())return!1;n=parseInt(e.framesReceived)-parseInt(t.framesReceived),r=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return n>5&&n<10&&r<3||n>10&&n<20&&r<4||n>20&&r<5},t.isAudioFreeze=function(e){if(Object(p.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(p.isSafari)()||Object(p.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(p.isChrome)()||Object(p.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval((function(){if(t.gatewayClient.state!==at.CONNECTED)t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0});else{var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}}),2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval((function(){var e=t.gatewayClient.traffic_stats,n=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var r={};Object.keys(t.gatewayClient.remoteStreams).forEach((function(i){var o=t.gatewayClient.remoteStreams[i],a=t.remoteStats[i],s={id:i,updatedAt:n};r[i]=s,s.firstFrameTime=o.firstFrameTime,a?(s.audioTotalPlayDuration=a.audioTotalPlayDuration+1,s.audioTotalFreezeTime=a.audioTotalFreezeTime,s.isAudioFreeze=!1,s.isAudioDecodeFailed=!1,s.videoTotalPlayDuration=a.videoTotalPlayDuration+1,s.videoTotalFreezeTime=a.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.audioTotalPlayDuration=1,s.audioTotalFreezeTime=0,s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0);var u=e&&e.peer_delay&&e.peer_delay.find((function(e){return e.peer_uid==i}));u&&(s.peer_delay=u),o&&(o.isPlaying()&&(s.audioDisabled=o.userMuteAudio||o.peerMuteAudio?"1":"0",s.videoDisabled=o.userMuteVideo||o.peerMuteVideo?"1":"0"),a&&a.peer_delay&&u&&a.peer_delay.stream_type!==u.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:i,streamType:u.stream_type}),o.pc&&"established"==o.pc.state&&o.pc.getStats((function(e){if(s.pcStats=e,s.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),s.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)})),a&&a.audioStats&&s.audioStats){var n=parseInt(s.audioStats.bytesReceived)-parseInt(a.audioStats.bytesReceived),r=parseInt(s.audioStats.googDecodingNormal)-parseInt(a.audioStats.googDecodingNormal);if(s.audioStats.audioRecvBytesDelta=n,s.audioStats.audioDecodingNormalDelta=r,t.session.recvBytes+=n,isFinite(n)&&s.audioStats.timestamp){var i=s.audioStats.timestamp.getTime()-a.audioStats.timestamp.getTime();s.audioRecvBitrate=Math.floor(8*n/i)}t.isAudioFreeze(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.audioTotalFreezeTime++,s.isAudioFreeze=!0),t.isAudioDecodeFailed(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.isAudioDecodeFailed=!0),s.audioStats.audioTotalFreezeTime=s.audioTotalFreezeTime,s.audioStats.audioTotalPlayDuration=s.audioTotalPlayDuration,s.audioStats.audioFreezeRate=Math.ceil(100*s.audioTotalFreezeTime/s.audioTotalPlayDuration)}if(a&&a.videoStats&&s.videoStats){var u=parseInt(s.videoStats.bytesReceived)-parseInt(a.videoStats.bytesReceived);s.videoStats.videoRecvBytesDelta=u,t.session.recvBytes+=u,isFinite(u)&&s.videoStats.timestamp&&(i=s.videoStats.timestamp.getTime()-a.videoStats.timestamp.getTime(),s.videoRecvBitrate=Math.floor(8*u/i)),t.isRemoteVideoFreeze(s.videoStats,a.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),o.player&&o.player.video&&o.player.video.videoWidth&&o.player.video.videoHeight?(s.videoStats.renderRemoteWidth=o.player.video.videoWidth,s.videoStats.renderRemoteHeight=o.player.video.videoHeight):(s.videoStats.renderRemoteWidth=o.videoWidth||s.videoStats.googFrameWidthReceived,s.videoStats.renderRemoteHeight=o.videoHeight||s.videoStats.googFrameHeightReceived)}})))})),t.remoteStats=r;var i={};if(Object.keys(t.gatewayClient.localStreams).forEach((function(e){var r=t.gatewayClient.localStreams[e],o=t.localStats[e],a={id:e,updatedAt:n};i[e]=a,o?(a.videoTotalPlayDuration=o.videoTotalPlayDuration+1,a.videoTotalFreezeTime=o.videoTotalFreezeTime,a.isVideoFreeze=!1):(a.videoTotalPlayDuration=1,a.videoTotalFreezeTime=0),r&&(r.isPlaying()&&(a.audioDisabled=r.userMuteAudio?"1":"0",a.videoDisabled=r.userMuteVideo?"1":"0"),r.video&&r.attributes.maxVideoBW?a.videoTargetSendBitrate=r.attributes.maxVideoBW:r.video&&r.screenAttributes&&(a.videoTargetSendBitrate=r.screenAttributes.maxVideoBW),r.pc&&"established"==r.pc.state&&r.pc.getStats((function(e){if(a.pcStats=e.reverse(),a.audioStats=e.find((function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),a.videoStats=e.find((function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)})),a.audioStats&&o&&o.audioStats){var n=parseInt(a.audioStats.bytesSent)-parseInt(o.audioStats.bytesSent);if(a.audioStats.audioSendBytesDelta=n,t.session.sendBytes+=n,isFinite(n)&&a.audioStats.timestamp){var i=a.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();a.audioSendBitrate=Math.floor(8*n/i)}}if(a.videoStats&&o&&o.videoStats){var s=parseInt(a.videoStats.bytesSent)-parseInt(o.videoStats.bytesSent);a.videoStats.videoSendBytesDelta=s,t.session.sendBytes+=s,isFinite(s)&&a.videoStats.timestamp&&(i=a.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),a.videoSendBitrate=Math.floor(8*s/i)),t.isLocalVideoFreeze(a.videoStats,o.videoStats)&&(a.videoTotalFreezeTime++,a.isVideoFreeze=!0),a.videoStats.videoTotalFreezeTime=a.videoTotalFreezeTime,a.videoStats.videoTotalPlayDuration=a.videoTotalPlayDuration,a.videoStats.videoFreezeRate=Math.ceil(100*a.videoTotalFreezeTime/a.videoTotalPlayDuration),a.videoStats.renderLocalWidth=r.videoWidth||a.videoStats.googFrameWidthSent,a.videoStats.renderLocalHeight=r.videoHeight||a.videoStats.googFrameHeightSent}})))})),t.localStats=i,t.session.HTTPSendBytesDelta=Object(Le.b)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(Le.b)(),t.session.HTTPRecvBytesDelta=Object(Le.a)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(Le.a)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var o=t.gatewayClient.socket;t.session.WSSendBytesDelta=o.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=o.getSendBytes(),t.session.WSRecvBytesDelta=o.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=o.getRecvBytes()}}),1e3),t.gatewayClient.on("join",(function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}})),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",(function(n){var i=n.joinInfo,s=n.config;if(s){_e(s.uploadLog)||(Object(r.setParameter)("UPLOAD_LOG",s.uploadLog),a.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:s.uploadLog}})()),_e(s.dualStream)||(e.isDualStream=s.dualStream,a.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"dualStream",value:s.dualStream}})()),_e(s.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",(function(e){var n=e.stream;n?(t.client.gatewayClient.setStreamFallbackOption(n,s.streamFallbackOption),a.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:s.streamFallbackOption,streamId:n.getId()}})()):a.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:s.streamFallbackOption,streamId:n.getId(),err:"invalid stream"}})()}));try{o.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(s))),Object.keys(s).map((function(e){return Object(r.setParameter)(e,s[e])}))}catch(t){o.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(s)))}}})),t}(t),function(e,t){var n,r,i,u,c,l,d,f,p,h=arguments;e.liveStreaming=s(),e.liveStreaming.connections={inject_streaming:null,mix_streaming:null,raw_streaming:null},e.liveStreaming.connectionTypes={inject_streaming:"pull",mix_streaming:"push",raw_streaming:"push"},e.liveStreaming.pushStates={},e.liveStreaming.pullStates={},e.gatewayClient.addEventListener("join",(function(t){e.liveStreaming.resumeStates("pull")})),e.gatewayClient.addEventListener("stream-unpublished",(function(t){if(t.options&&0===t.options.streamType)for(var n in e.liveStreaming.pushStates){var r=e.liveStreaming.pushStates[n];r.url&&e._stopLiveStreaming(r.url,r.transcodingEnabled,!0)}})),e.gatewayClient.addEventListener("stream-published",(function(t){e.liveStreaming.resumeStates("push")})),e.liveStreaming.connect=(p=Fe()(je.a.mark((function n(r){var i,o;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.joinInfo&&e.joinInfo.uid&&parseInt(e.joinInfo.vid,10)){n.next=3;break}throw new Error("CLIENT_NOT_JOINED");case 3:return i=new Ot({appId:t.appId,cname:e.channel,sid:t.sessionId,uid:e.joinInfo.uid}),e.liveStreaming.connections[r]=i,n.next=7,_t({appId:t.appId,cname:e.channel,serviceName:r,sid:t.sessionId});case 7:return o=n.sent,n.next=10,i.connect({wsClient:o});case 10:return i.on("notification",(function(t){if(t.serviceName=r,e.liveStreaming.dispatchEvent(t),503===t.code);else switch(t.serviceName){case"inject_streaming":var n={reason:t&&t.reason,status:At(t&&t.code),type:"streamInjectedStatus",uid:t&&t.serverStatus&&t.serverStatus.inject_uid,url:t&&t.serverStatus&&t.serverStatus.url};e.gatewayClient.dispatchEvent(n);break;case"raw_streaming":case"mix_streaming":var i={reason:t&&t.reason,status:t&&t.code,type:t&&200===t.code?"liveStreamingStarted":"liveStreamingFailed",uid:t&&t.serverStatus&&t.uid,url:t&&t.serverStatus&&t.serverStatus.url};e.gatewayClient.dispatchEvent(i)}})),n.abrupt("return",i);case 12:case"end":return n.stop()}}),n,this)}))),function(e){return p.apply(this,arguments)}),e.liveStreaming.disconnect=(f=Fe()(je.a.mark((function t(n){var r,i;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=je.a.keys(e.liveStreaming.connections);case 1:if((t.t1=t.t0()).done){t.next=13;break}if(r=t.t1.value,!e.liveStreaming.connections.hasOwnProperty(r)){t.next=11;break}if(!(i=e.liveStreaming.connections[r])||n&&n!==r){t.next=11;break}return o.default.info("Disconnecting liveStreaming ".concat(r)),t.next=9,i.disconnect();case 9:t.sent,e.liveStreaming.connections[r]=null;case 11:t.next=1;break;case 13:case"end":return t.stop()}}),t,this)}))),function(e){return f.apply(this,arguments)}),e.liveStreaming.resumeStates=(d=Fe()(je.a.mark((function t(n){var r,i,a,s,u,c,l,d;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=je.a.keys(e.liveStreaming.connections);case 1:if((t.t1=t.t0()).done){t.next=8;break}if(r=t.t1.value,!n||e.liveStreaming.connectionTypes[r]===n){t.next=5;break}return t.abrupt("continue",1);case 5:e.liveStreaming.connections.hasOwnProperty(r)&&(i=e.liveStreaming.connections[r])&&(o.default.info("LiveStreaming closing connection ".concat(r)),i.disconnect(),e.liveStreaming.connections[r]=null),t.next=1;break;case 8:t.t2=je.a.keys(e.liveStreaming.pushStates);case 9:if((t.t3=t.t2()).done){t.next=37;break}if(a=t.t3.value,!n||"push"===n){t.next=13;break}return t.abrupt("continue",9);case 13:if(!e.liveStreaming.pushStates.hasOwnProperty(a)){t.next=35;break}if(s=e.liveStreaming.pushStates[a],"audience"!==e.gatewayClient.role){t.next=19;break}o.default.warning("Cannot resume LiveStreaming in audience mode. ".concat(s.url),s),t.next=35;break;case 19:if(!s){t.next=35;break}return o.default.debug("Resuming LiveStreaming ".concat(s.url),s),t.prev=21,t.next=24,e._startLiveStreaming(s.url,s.transcodingEnabled);case 24:u=t.sent,o.default.debug("Resumed LiveStreaming ".concat(s.url,": ").concat(u.reason)),t.next=35;break;case 28:if(t.prev=28,t.t4=t.catch(21),454!==t.t4.code){t.next=34;break}o.default.debug("Resumed LiveStreaming ".concat(s.url,": ").concat(t.t4.reason)),t.next=35;break;case 34:throw t.t4;case 35:t.next=9;break;case 37:t.t5=je.a.keys(e.liveStreaming.pullStates);case 38:if((t.t6=t.t5()).done){t.next=62;break}if(c=t.t6.value,!n||"pull"===n){t.next=42;break}return t.abrupt("continue",38);case 42:if(!e.liveStreaming.pullStates.hasOwnProperty(c)){t.next=60;break}if(l=e.liveStreaming.pullStates[c],"audience"!==e.gatewayClient.role){t.next=48;break}o.default.warning("Cannot resume addInjectStreamUrl in audience mode. ".concat(l.url),l),t.next=60;break;case 48:if(!l){t.next=60;break}return o.default.debug("Resuming LiveStreaming pullStream ".concat(l.url),l),t.prev=50,t.next=53,e._addInjectStreamUrl(l.url,l.transcodingConfig);case 53:d=t.sent,o.default.debug("Resumed LiveStreaming pullStream ".concat(l.url,": ").concat(d.reason)),t.next=60;break;case 57:t.prev=57,t.t7=t.catch(50),451===t.t7.code&&o.default.debug("Resumed LiveStreaming pullStream ".concat(l.url,": ").concat(t.t7.reason));case 60:t.next=38;break;case 62:case"end":return t.stop()}}),t,this,[[21,28],[50,57]])}))),function(e){return d.apply(this,arguments)}),e.liveStreaming.startOptions={autoDestroyTime:30},e.liveStreaming.transcodingConfig={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,images:[],lowLatency:!1,metadata:"",userConfigExtraInfo:"",userConfigs:[],videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640},e.startLiveStreaming=function(n,r){_e(r)||le(r,"transcodingEnabled"),ue(n,"url");var i=a.b.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw i(o),o}var s=e._startLiveStreaming(n,r);return s.then((function(e){i(null,e)})).catch((function(e){i(e)})),s},e._startLiveStreaming=(l=Fe()(je.a.mark((function n(r,i){var a,s,u,c;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=m()({allocate:!0,clientRequest:{command:"PublishStream"},command:"request"}),o.default.debug("startLiveStreaming ".concat(r,", ").concat(i)),m()(a.clientRequest,e.liveStreaming.startOptions,{ts:Date.now(),url:r,vid:parseInt(e.joinInfo.vid,10)}),s=null,i?(e.liveStreaming.connections.mix_streaming||e.liveStreaming.connect("mix_streaming"),a.clientRequest.transcodingConfig=JSON.parse(JSON.stringify(e.liveStreaming.transcodingConfig)),s=e.liveStreaming.connections.mix_streaming):("vp8"===t.codec&&o.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&o.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer"),e.liveStreaming.connections.raw_streaming||e.liveStreaming.connect("raw_streaming"),s=e.liveStreaming.connections.raw_streaming),u=null,c={},n.prev=7,n.next=10,s.request(a);case 10:u=n.sent,c.type="liveStreamingStarted",c.reason=u&&u.reason,c.status=u&&u.code,c.url=u&&u.serverResponse&&u.serverResponse.url,e.gatewayClient.dispatchEvent(c),n.next=26;break;case 18:throw n.prev=18,n.t0=n.catch(7),c.type="liveStreamingFailed",c.reason=n.t0&&n.t0.reason,c.status=n.t0&&n.t0.code,c.url=n.t0&&n.t0.serverResponse&&n.t0.serverResponse.url,e.gatewayClient.dispatchEvent(c),n.t0;case 26:return e.liveStreaming.pushStates[r]={transcodingEnabled:i,url:r},n.abrupt("return",u);case 28:case"end":return n.stop()}}),n,this,[[7,18]])}))),function(e,t){return l.apply(this,arguments)}),e.setLiveTranscoding=function(n,r){se(n,"transcoding");var i=n,o=i.width,s=i.height,u=i.videoBitrate,c=i.videoFramerate,l=i.lowLatency,d=i.audioSampleRate,f=i.audioBitrate,p=i.audioChannels,h=i.videoGop,v=i.videoCodecProfile,g=i.userCount,m=i.backgroundColor,y=i.transcodingUsers;if(y||(y=n.userConfigs),_e(o)||ce(o,"width"),_e(s)||ce(s,"height"),_e(u)||ce(u,"videoBitrate",1,1e6),_e(c)||ce(c,"videoFramerate"),_e(l)||le(l,"lowLatency"),_e(d)||ae(d,"audioSampleRate",[32e3,44100,48e3]),_e(f)||ce(f,"audioBitrate",1,128),_e(p)||ae(p,"audioChannels",[1,2,3,4,5]),_e(h)||ce(h,"videoGop"),_e(v)||ae(v,"videoCodecProfile",[66,77,100]),_e(g)||ce(g,"userCount",0,17),_e(m)||ce(m,"backgroundColor",0,16777215),!_e(y)){if(!be(y))throw new Error("[transcodingUsers]: transcodingUsers should be Array");if(y.length>17)throw new Error("The length of transcodingUsers cannot greater than 17");y.map((function(e,t){if(!_e(e.uid)&&!Tt(e.uid)&&!isValidString(e.uid,1,255))throw new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");if(_e(e.x)||ce(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),_e(e.y)||ce(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),_e(e.width)||ce(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),_e(e.height)||ce(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),_e(e.zOrder)||ce(e.zOrder,"transcodingUser[".concat(t,"].zOrder"),0,100),!(_e(e.alpha)||me(e.alpha)&&e.alpha<=1&&e.alpha>=0))throw new Error("transcodingUser[${index}].alpha: The value range is [0, 1]")}))}var b=a.b.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"});if((n=JSON.parse(JSON.stringify(n))).transcodingUsers&&(n.userConfigs=n.transcodingUsers,delete n.transcodingUsers),e.joinInfo.stringUid&&n.userConfigs&&n.userConfigs.length){var _=[];n.userConfigs.forEach((function(t){_.push($e(e.joinInfo,e.gatewayClient,t.uid).then((function(e){t.uid=e.uid})))}));var E=Promise.all(_).then((function(){return e._setLiveTranscoding(n,r)}));return E.then((function(e){b(null,e)})).catch((function(e){b(e)})),E}var w=e._setLiveTranscoding(n,r);return w.then((function(e){b(null,e)})).catch((function(e){b(e)})),w},e._setLiveTranscoding=(c=Fe()(je.a.mark((function t(n,r){var i,o,a;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.liveStreaming.transcodingConfig=m()(e.liveStreaming.transcodingConfig,n),"boolean"!=typeof r&&(r=!!e.liveStreaming.connections.mix_streaming),i=JSON.parse(JSON.stringify({allocate:!1,clientRequest:{command:"UpdateTranscoding",transcodingConfig:e.liveStreaming.transcodingConfig},command:"request"})),o={},!r){t.next=16;break}return e.liveStreaming.connections.mix_streaming||e.liveStreaming.connect("mix_streaming"),t.next=8,e.liveStreaming.connections.mix_streaming.request(i);case 8:return a=t.sent,o.type="liveTranscodingUpdated",o.reason=a.reason,o.status=a.code,e.gatewayClient.dispatchEvent(o),t.abrupt("return",a);case 16:return t.abrupt("return",{code:200,reason:"success"});case 17:case"end":return t.stop()}}),t,this)}))),function(e,t){return c.apply(this,arguments)}),e.stopLiveStreaming=function(n,r){ue(n,"url");var i=a.b.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),o=e._stopLiveStreaming(n,r);return o.then((function(e){i(null,e)})).catch((function(e){i(e)})),o},e._stopLiveStreaming=(u=Fe()(je.a.mark((function t(n,r,i){var o,a,s,u,c,l;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null,a=e.liveStreaming.pushStates[n],o=a?a.transcodingEnabled?"mix_streaming":"raw_streaming":r?"mix_streaming":"raw_streaming",s={allocate:!1,clientRequest:{command:"UnpublishStream",url:n},command:"request"},e.liveStreaming.connections[o]||e.liveStreaming.connect(o),u=null,t.prev=6,t.next=9,e.liveStreaming.connections[o].request(s);case 9:u=t.sent,(c={}).type="liveStreamingStopped",c.reason=u&&u.reason,c.status=u&&u.code,c.url=u&&u.serverResponse&&u.serverResponse.url,e.gatewayClient.dispatchEvent(c),t.next=27;break;case 18:throw t.prev=18,t.t0=t.catch(6),(l={}).type="liveStreamingStopped",l.reason=t.t0&&t.t0.reason,l.status=t.t0&&t.t0.code,l.url=t.t0&&t.t0.serverResponse&&t.t0.serverResponse.url,e.gatewayClient.dispatchEvent(l),t.t0;case 27:return i||delete e.liveStreaming.pushStates[n],t.abrupt("return",u);case 29:case"end":return t.stop()}}),t,this,[[6,18]])}))),function(e,t,n){return u.apply(this,arguments)}),e.liveStreaming.injectStreamTranscodingConfig={autoDestroyTime:30,audioBitrate:48,audioChannels:1,audioSampleRate:44100,height:0,videoBitrate:400,videoFramerate:15,videoGop:30,width:0},e.addInjectStreamUrl=function(n,r){ue(n,"url",1,255),se(r,"config"),!_e(r&&r.width)&&ce(r.width,"config.width",0,1e4),!_e(r&&r.height)&&ce(r.height,"config.height",0,1e4),!_e(r&&r.videoGop)&&ce(r.videoGop,"config.videoGop",1,1e4),!_e(r&&r.videoFramerate)&&ce(r.videoFramerate,"config.videoFramerate",1,1e4),!_e(r&&r.videoBitrate)&&ce(r.videoBitrate,"config.videoBitrate",1,1e4),!_e(r&&r.audioSampleRate)&&ae(r.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),!_e(r&&r.audioBitrate)&&ce(r.audioBitrate,"config.audioBitrate",1,1e4),!_e(r&&r.audioChannels)&&ce(r.audioChannels,"config.audioChannels",1,2);var i=a.b.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:h,tag:"tracer"});if("audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw i(o),o}var s=e._addInjectStreamUrl(n,r);return s.then((function(e){i(null,e)})).catch((function(e){i(e)})),s},e._addInjectStreamUrl=(i=Fe()(je.a.mark((function n(r,i){var o,a,s,u,c;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=m()({},e.liveStreaming.injectStreamTranscodingConfig,i),a={allocate:!0,clientRequest:{cname:e.channel,command:"InjectStream",sid:t.sessionId,transcodingConfig:o,ts:Date.now(),url:r,vid:parseInt(e.joinInfo.vid,10)},command:"request"},e.liveStreaming.connections.inject_streaming||e.liveStreaming.connect("inject_streaming"),s=null,n.prev=4,n.next=7,e.liveStreaming.connections.inject_streaming.request(a);case 7:s=n.sent,u={reason:s&&s.reason,status:At(s&&s.code),type:"streamInjectedStatus",uid:s&&s.serverResponse&&s.serverResponse.inject_uid,url:s&&s.serverResponse&&s.serverResponse.url},e.gatewayClient.dispatchEvent(u),n.next=17;break;case 12:throw n.prev=12,n.t0=n.catch(4),c={reason:n.t0&&n.t0.reason,status:At(n.t0&&n.t0.code),type:"streamInjectedStatus",uid:n.t0&&n.t0.serverResponse&&n.t0.serverResponse.inject_uid,url:n.t0&&n.t0.serverResponse&&n.t0.serverResponse.url},e.gatewayClient.dispatchEvent(c),n.t0;case 17:return e.liveStreaming.pullStates[r]={transcodingConfig:o,url:r},n.abrupt("return",s);case 19:case"end":return n.stop()}}),n,this,[[4,12]])}))),function(e,t){return i.apply(this,arguments)}),e.removeInjectStreamUrl=(r=Fe()(je.a.mark((function n(r){var i,o,s=arguments;return je.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return ue(r,"url",1,255),i=a.b.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:s,tag:"tracer"}),(o=e._removeInjectStreamUrl(r)).then((function(e){i(null,e)})).catch((function(e){i(e)})),n.abrupt("return",o);case 5:case"end":return n.stop()}}),n,this)}))),function(e){return r.apply(this,arguments)}),e._removeInjectStreamUrl=(n=Fe()(je.a.mark((function t(n){var r,i,o,a;return je.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={allocate:!1,clientRequest:{command:"UninjectStream",url:n},command:"request"},e.liveStreaming.connections.inject_streaming||e.liveStreaming.connect("inject_streaming"),i=null,t.prev=3,t.next=6,e.liveStreaming.connections.inject_streaming.request(r);case 6:i=t.sent,o={reason:i&&i.reason,status:Rt(i&&i.code),type:"streamInjectedStatus",uid:i&&i.serverResponse&&i.serverResponse.inject_uid,url:i&&i.serverResponse&&i.serverResponse.url},e.gatewayClient.dispatchEvent(o),t.next=16;break;case 11:throw t.prev=11,t.t0=t.catch(3),a={reason:t.t0&&t.t0.reason,status:Rt(t.t0&&t.t0.code),type:"streamInjectedStatus",uid:t.t0&&t.t0.serverResponse&&t.t0.serverResponse.inject_uid,url:t.t0&&t.t0.serverResponse&&t.t0.serverResponse.url},e.gatewayClient.dispatchEvent(a),t.t0;case 16:return delete e.liveStreaming.pullStates[n],t.abrupt("return",i);case 18:case"end":return t.stop()}}),t,this,[[3,11]])}))),function(e){return n.apply(this,arguments)})}(t,e),_e(e.turnServer)||t.setTurnServer(e.turnServer),_e(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role="host"),t.gatewayClient.on("onMultiIP",(function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=at.CONNECTING;var n=function(e){o.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,(function(e){o.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(e)}),t.onFailure):(t.gatewayClient.joinInfo=m()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=$e(joinInfo,t.gatewayClient),t.userAccountReq.then((function(e){o.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,Je(t.joinInfo,n,t.onFailure)})).catch((function(e){o.default.error("getUserAccount rejected",e),t.onFailure(e)}))):Je(t.joinInfo,n,t.onFailure)})),t.gatewayClient.on("rejoin-start",(function(){t._renewSession(),a.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("recover",(function(){t._renewSession(),console.log("recover",e.sessionId),a.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})})),t.gatewayClient.on("rejoin",(function(){var e=t.highStreamState;if(o.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n()}!t.highStream||0!==e&&1!==e||(o.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,(function(e){e&&o.default.info("[".concat(t.clientId,"] "),e)})))})),t.gatewayClient.on("streamPublished",(function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent(c({type:"stream-published",stream:e.stream})))})),t.gatewayClient.on("pubP2PLost",(function(e){o.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,(function(){t._publish(t.highStream,(function(){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})}),(function(e){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}))}),(function(e){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})}))})),t.gatewayClient.on("subP2PLost",(function(e){o.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var n=e.stream.subscribeOptions;console.log("Re-subscribe stream",n,e.stream),t.gatewayClient.unsubscribe(e.stream,(function(){e.stream.subscribeOptions=n,t.gatewayClient.subscribe(e.stream,(function(){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:""})}),(function(n){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))}),(function(n){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})}))})),dt.on("networkTypeChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=m()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(n)})),re.on("recordingDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=m()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(n)})),re.on("playoutDeviceChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=m()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(n)})),re.on("cameraChanged",(function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=m()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(n)})),t.gatewayClient.on("streamTypeChange",(function(n){var r=m()({},n,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(r),a.b.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(n))})),t},Ct={width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},Nt=re.getDevices,xt=Y,Lt=JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));t.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:Ct,createClient:function(e){var t=a.b.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=m()({},e||{})).codec||(e.codec=function(e){switch(e){case"h264_interop":return"h264";default:return"vp8"}}(e.mode));var n=function(e){return-1===Ae.indexOf(e.mode)?M.INVALID_CLIENT_MODE:-1===Re.indexOf(e.codec)?M.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&M.CLIENT_MODE_CODEC_MISMATCH}(e);if(n)throw o.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(n)),t(n),new Error(n);return o.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}}(e),t(null,e),kt(e)},createStream:function(e){var t=a.b.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer"});se(e,"StreamSpec");var n=e.streamID,r=e.audio,i=e.video,s=e.screen,u=(e.audioSource,e.videoSource,e.cameraId),c=e.facingMode,l=e.microphoneId,d=e.mirror,f=e.extensionId,p=e.mediaSource,h=e.audioProcessing;if(!_e(n)&&!Object(te.c)(n)&&!de(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(le(r,"audio"),le(i,"video"),_e(s)||le(s,"screen"),_e(u)||ue(u,"cameraId",0,255,!1),_e(c)||ae(c,"facingMode",["user","environment","left","right"]),_e(l)||ue(l,"microphoneId",0,255,!1),_e(f)||ue(f,"extensionId"),_e(p)||ae(p,"mediaSource",["screen","application","window"]),_e(d)||le(d,"mirror"),!_e(h)){var v=h.AGC,g=h.AEC,m=h.ANS;_e(v)||le(v,"AGC"),_e(g)||le(g,"AEC"),_e(m)||le(m,"ANS")}o.default.debug("Create stream");var y=Oe(e);return t(),y},Logger:o.default,report:a.b,getDevices:Nt,getScreenSources:xt,getParameter:r.getParameter,setParameter:r.setParameter,checkSystemRequirements:function(){var e=a.b.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket,i=!!t&&!!n&&!!r,s=!1;o.default.debug(p.getBrowserInfo(),"isAPISupport:"+i),p.isChrome()&&p.getBrowserVersion()>=58&&"iOS"!==p.getBrowserOS()&&(s=!0),p.isFireFox()&&p.getBrowserVersion()>=56&&(s=!0),p.isOpera()&&p.getBrowserVersion()>=45&&(s=!0),p.isSafari()&&p.getBrowserVersion()>=11&&(s=!0),p.isEdge()&&(s=!0),(p.isWeChatBrowser()||p.isQQBrowser())&&"iOS"!==p.getBrowserOS()&&(s=!0),p.isSupportedPC()||p.isSupportedMobile()||(s=!1);var u=i&&s;return e(null,u),u},getSupportedCodec:Te.getSupportedCodec,VERSION:r.VERSION,BUILD:r.BUILD,PROFILE_TABLE:Lt,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2}}]).default},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r={prefix:"far",iconName:"comment-dots",icon:[512,512,[],"f4ad","M144 208c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm112 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zm112 0c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32zM256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"]},i={prefix:"far",iconName:"window-restore",icon:[512,512,[],"f2d2","M464 0H144c-26.5 0-48 21.5-48 48v48H48c-26.5 0-48 21.5-48 48v320c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h48c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-96 464H48V256h320v208zm96-96h-48V144c0-26.5-21.5-48-48-48H144V48h320v320z"]}},function(e,t,n){"use strict";var r=n(1),i=n.n(r);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e,t){void 0===t&&(t={});var a,s=t,u=s.volume,c=void 0===u?1:u,l=s.playbackRate,d=void 0===l?1:l,f=s.soundEnabled,p=void 0===f||f,h=s.interrupt,v=void 0!==h&&h,g=s.onload,m=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(s,["volume","playbackRate","soundEnabled","interrupt","onload"]),y=i.a.useRef(null),b=i.a.useRef(!1),_=i.a.useState(!1),E=_[0],w=_[1],S=i.a.useState(null),I=S[0],O=S[1],T=i.a.useState(null),A=T[0],R=T[1],k=function(){"function"===typeof g&&g.call(this),b.current&&O(1e3*this.duration())};a=function(){return n.e(3).then(n.t.bind(null,65,7)).then((function(t){if(!b.current){y.current=t.Howl,b.current=!0;var n=new y.current(o({src:[e],volume:c,rate:d,onload:k},m));R(n)}})),function(){b.current=!1}},Object(r.useEffect)(a,[]),i.a.useEffect((function(){y.current&&A&&R(new y.current(o({src:[e],volume:c,onload:k},m)))}),[e]),i.a.useEffect((function(){A&&(A.volume(c),A.rate(d))}),[c,d]);var C=i.a.useCallback((function(e){"undefined"===typeof e&&(e={}),A&&(p||e.forceSoundEnabled)&&(v&&A.stop(),e.playbackRate&&A.rate(e.playbackRate),A.play(e.id),b.current&&A.once("end",(function(){A.playing()||w(!1)})),b.current&&w(!0))}),[A,p,v]),N=i.a.useCallback((function(e){A&&(A.stop(e),b.current&&w(!1))}),[A]),x=i.a.useCallback((function(e){A&&(A.pause(e),b.current&&w(!1))}),[A]);return[C,{sound:A,stop:N,pause:x,isPlaying:E,duration:I}]}},function(e,t,n){"use strict";(function(e){var r=n(1),i=n.n(r),o=n(14),a=n(2),s=n.n(a),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:{};function l(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var d=i.a.createContext||function(e,t){var n,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return c[e]=(c[e]||0)+1}()+"__",d=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=l(t.props.value),t}Object(o.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof t?t(r,i):u,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);d.childContextTypes=((n={})[a]=s.a.object.isRequired,n);var f=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(o.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return f.contextTypes=((i={})[a]=s.a.object,i),{Provider:d,Consumer:f}};t.a=d}).call(this,n(20))},function(e,t,n){var r=n(62);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var d=n[0],f=n[1],p=n.index;if(s+=e.slice(a,p),a=p+d.length,f)s+=f[1];else{var h=e[a],v=n[2],g=n[3],m=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var E=null!=v&&null!=h&&h!==v,w="+"===b||"*"===b,S="?"===b||"*"===b,I=n[2]||l,O=m||y;r.push({name:g||o++,prefix:v||"",delimiter:I,optional:S,repeat:w,partial:E,asterisk:!!_,pattern:O?c(O):_?".*":"[^"+u(I)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",d(t)));return function(t,i){for(var o="",s=t||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var d,f=s[l.name];if(null==f){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(d=u(f[p]),!n[c].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===p?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');o+=l.prefix+d}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=u(c);else{var f=u(c.prefix),p="(?:"+c.pattern+")";t.push(c),c.repeat&&(p+="(?:"+f+p+")*"),a+=p=c.optional?c.partial?f+"("+p+")?":"(?:"+f+"("+p+"))?":f+"("+p+")"}}var h=u(n.delimiter||"/"),v=a.slice(-h.length)===h;return i||(a=(v?a.slice(0,-h.length):a)+"(?:"+h+"(?=$))?"),a+=o?"$":i&&v?"":"(?="+h+"|$)",l(new RegExp("^"+a,d(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return o}))},,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,d=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";e.exports=n(63)},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(err){console.error(err)}}(),e.exports=n(47)},,function(e,t,n){(function(e,r){var i;(function(){var o,a="Expected a function",s="__lodash_hash_undefined__",u="__lodash_placeholder__",c=16,l=32,d=64,f=128,p=256,h=1/0,v=9007199254740991,g=NaN,m=4294967295,y=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",d],["rearg",p]],b="[object Arguments]",_="[object Array]",E="[object Boolean]",w="[object Date]",S="[object Error]",I="[object Function]",O="[object GeneratorFunction]",T="[object Map]",A="[object Number]",R="[object Object]",k="[object Promise]",C="[object RegExp]",N="[object Set]",x="[object String]",L="[object Symbol]",P="[object WeakMap]",D="[object ArrayBuffer]",M="[object DataView]",j="[object Float32Array]",U="[object Float64Array]",F="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",V="[object Uint8Array]",G="[object Uint8ClampedArray]",z="[object Uint16Array]",H="[object Uint32Array]",W=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Y=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,Q=RegExp(Y.source),X=RegExp($.source),Z=/<%-([\s\S]+?)%>/g,ee=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),se=/^\s+/,ue=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,he=/\\(\\)?/g,ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,be=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,Ee=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,Oe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Re="A-Z\\xc0-\\xd6\\xd8-\\xde",ke="\\ufe0e\\ufe0f",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ne="['\u2019]",xe="[\\ud800-\\udfff]",Le="["+Ce+"]",Pe="["+Oe+"]",De="\\d+",Me="[\\u2700-\\u27bf]",je="["+Ae+"]",Ue="[^\\ud800-\\udfff"+Ce+De+Te+Ae+Re+"]",Fe="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",qe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+Re+"]",ze="(?:"+je+"|"+Ue+")",He="(?:"+Ge+"|"+Ue+")",We="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Ke="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Je="(?:"+Pe+"|"+Fe+")"+"?",Ye="[\\ufe0e\\ufe0f]?",$e=Ye+Je+("(?:\\u200d(?:"+[Be,qe,Ve].join("|")+")"+Ye+Je+")*"),Qe="(?:"+[Me,qe,Ve].join("|")+")"+$e,Xe="(?:"+[Be+Pe+"?",Pe,qe,Ve,xe].join("|")+")",Ze=RegExp(Ne,"g"),et=RegExp(Pe,"g"),tt=RegExp(Fe+"(?="+Fe+")|"+Xe+$e,"g"),nt=RegExp([Ge+"?"+je+"+"+We+"(?="+[Le,Ge,"$"].join("|")+")",He+"+"+Ke+"(?="+[Le,Ge+ze,"$"].join("|")+")",Ge+"?"+ze+"+"+We,Ge+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Qe].join("|"),"g"),rt=RegExp("[\\u200d\\ud800-\\udfff"+Oe+ke+"]"),it=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,st={};st[j]=st[U]=st[F]=st[B]=st[q]=st[V]=st[G]=st[z]=st[H]=!0,st[b]=st[_]=st[D]=st[E]=st[M]=st[w]=st[S]=st[I]=st[T]=st[A]=st[R]=st[C]=st[N]=st[x]=st[P]=!1;var ut={};ut[b]=ut[_]=ut[D]=ut[M]=ut[E]=ut[w]=ut[j]=ut[U]=ut[F]=ut[B]=ut[q]=ut[T]=ut[A]=ut[R]=ut[C]=ut[N]=ut[x]=ut[L]=ut[V]=ut[G]=ut[z]=ut[H]=!0,ut[S]=ut[I]=ut[P]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,dt=parseInt,ft="object"==typeof e&&e&&e.Object===Object&&e,pt="object"==typeof self&&self&&self.Object===Object&&self,ht=ft||pt||Function("return this")(),vt=t&&!t.nodeType&&t,gt=vt&&"object"==typeof r&&r&&!r.nodeType&&r,mt=gt&&gt.exports===vt,yt=mt&&ft.process,bt=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),_t=bt&&bt.isArrayBuffer,Et=bt&&bt.isDate,wt=bt&&bt.isMap,St=bt&&bt.isRegExp,It=bt&&bt.isSet,Ot=bt&&bt.isTypedArray;function Tt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function At(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function kt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function xt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Lt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Pt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ut(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Wt("length");function Bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function qt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Vt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):qt(e,zt,n)}function Gt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!==e}function Ht(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:g}function Wt(e){return function(t){return null==t?o:t[e]}}function Kt(e){return function(t){return null==e?o:e[t]}}function Jt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Yt(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function $t(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Qt(e){return e?e.slice(0,gn(e)+1).replace(se,""):e}function Xt(e){return function(t){return e(t)}}function Zt(e,t){return Pt(t,(function(t){return e[t]}))}function en(e,t){return e.has(t)}function tn(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var on=Kt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),an=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ct[e]}function un(e){return rt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==u||(e[n]=u,o[i++]=n)}return o}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function hn(e){return un(e)?function(e){var t=tt.lastIndex=0;for(;tt.test(e);)++t;return t}(e):Ft(e)}function vn(e){return un(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}function gn(e){for(var t=e.length;t--&&ue.test(e.charAt(t)););return t}var mn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?ht:yn.defaults(ht.Object(),t,yn.pick(ht,ot))).Array,r=t.Date,i=t.Error,ue=t.Function,Oe=t.Math,Te=t.Object,Ae=t.RegExp,Re=t.String,ke=t.TypeError,Ce=n.prototype,Ne=ue.prototype,xe=Te.prototype,Le=t["__core-js_shared__"],Pe=Ne.toString,De=xe.hasOwnProperty,Me=0,je=function(){var e=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ue=xe.toString,Fe=Pe.call(Te),Be=ht._,qe=Ae("^"+Pe.call(De).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=mt?t.Buffer:o,Ge=t.Symbol,ze=t.Uint8Array,He=Ve?Ve.allocUnsafe:o,We=ln(Te.getPrototypeOf,Te),Ke=Te.create,Je=xe.propertyIsEnumerable,Ye=Ce.splice,$e=Ge?Ge.isConcatSpreadable:o,Qe=Ge?Ge.iterator:o,Xe=Ge?Ge.toStringTag:o,tt=function(){try{var e=po(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),rt=t.clearTimeout!==ht.clearTimeout&&t.clearTimeout,ct=r&&r.now!==ht.Date.now&&r.now,ft=t.setTimeout!==ht.setTimeout&&t.setTimeout,pt=Oe.ceil,vt=Oe.floor,gt=Te.getOwnPropertySymbols,yt=Ve?Ve.isBuffer:o,bt=t.isFinite,Ft=Ce.join,Kt=ln(Te.keys,Te),bn=Oe.max,_n=Oe.min,En=r.now,wn=t.parseInt,Sn=Oe.random,In=Ce.reverse,On=po(t,"DataView"),Tn=po(t,"Map"),An=po(t,"Promise"),Rn=po(t,"Set"),kn=po(t,"WeakMap"),Cn=po(Te,"create"),Nn=kn&&new kn,xn={},Ln=Bo(On),Pn=Bo(Tn),Dn=Bo(An),Mn=Bo(Rn),jn=Bo(kn),Un=Ge?Ge.prototype:o,Fn=Un?Un.valueOf:o,Bn=Un?Un.toString:o;function qn(e){if(rs(e)&&!Wa(e)&&!(e instanceof Hn)){if(e instanceof zn)return e;if(De.call(e,"__wrapped__"))return qo(e)}return new zn(e)}var Vn=function(){function e(){}return function(t){if(!ns(t))return{};if(Ke)return Ke(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function Gn(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Jn;++t<n;)this.add(e[t])}function $n(e){var t=this.__data__=new Kn(e);this.size=t.size}function Qn(e,t){var n=Wa(e),r=!n&&Ha(e),i=!n&&!r&&$a(e),o=!n&&!r&&!i&&ds(e),a=n||r||i||o,s=a?$t(e.length,Re):[],u=s.length;for(var c in e)!t&&!De.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_o(c,u))||s.push(c);return s}function Xn(e){var t=e.length;return t?e[Yr(0,t-1)]:o}function Zn(e,t){return jo(Ci(e),ur(t,0,e.length))}function er(e){return jo(Ci(e))}function tr(e,t,n){(n!==o&&!Va(e[t],n)||n===o&&!(t in e))&&ar(e,t,n)}function nr(e,t,n){var r=e[t];De.call(e,t)&&Va(r,n)&&(n!==o||t in e)||ar(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Va(e[n][0],t))return n;return-1}function ir(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ni(t,Ls(t),e)}function ar(e,t,n){"__proto__"==t&&tt?tt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var r=-1,i=t.length,a=n(i),s=null==e;++r<i;)a[r]=s?o:Rs(e,t[r]);return a}function ur(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function cr(e,t,n,r,i,a){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=i?n(e,r,i,a):n(e)),s!==o)return s;if(!ns(e))return e;var d=Wa(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!u)return Ci(e,s)}else{var f=go(e),p=f==I||f==O;if($a(e))return Ii(e,u);if(f==R||f==b||p&&!i){if(s=c||p?{}:yo(e),!u)return c?function(e,t){return Ni(e,vo(e),t)}(e,function(e,t){return e&&Ni(t,Ps(t),e)}(s,e)):function(e,t){return Ni(e,ho(e),t)}(e,or(s,e))}else{if(!ut[f])return i?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case D:return Oi(e);case E:case w:return new r(+e);case M:return function(e,t){var n=t?Oi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case j:case U:case F:case B:case q:case V:case G:case z:case H:return Ti(e,n);case T:return new r;case A:case x:return new r(e);case C:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case N:return new r;case L:return i=e,Fn?Te(Fn.call(i)):{}}var i}(e,f,u)}}a||(a=new $n);var h=a.get(e);if(h)return h;a.set(e,s),us(e)?e.forEach((function(r){s.add(cr(r,t,n,r,e,a))})):is(e)&&e.forEach((function(r,i){s.set(i,cr(r,t,n,i,e,a))}));var v=d?o:(l?c?oo:io:c?Ps:Ls)(e);return Rt(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,cr(r,t,n,i,e,a))})),s}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Te(e);r--;){var i=n[r],a=t[i],s=e[i];if(s===o&&!(i in e)||!a(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new ke(a);return Lo((function(){e.apply(o,n)}),t)}function fr(e,t,n,r){var i=-1,o=xt,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=Pt(t,Xt(n))),r?(o=Lt,a=!1):t.length>=200&&(o=en,a=!1,t=new Yn(t));e:for(;++i<s;){var l=e[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d===d){for(var f=c;f--;)if(t[f]===d)continue e;u.push(l)}else o(t,d,r)||u.push(l)}return u}qn.templateSettings={escape:Z,evaluate:ee,interpolate:te,variable:"",imports:{_:qn}},qn.prototype=Gn.prototype,qn.prototype.constructor=qn,zn.prototype=Vn(Gn.prototype),zn.prototype.constructor=zn,Hn.prototype=Vn(Gn.prototype),Hn.prototype.constructor=Hn,Wn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Wn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return n===s?o:n}return De.call(t,e)?t[e]:o},Wn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==o:De.call(t,e)},Wn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===o?s:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Kn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?o:t[n][1]},Kn.prototype.has=function(e){return rr(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Tn||Kn),string:new Wn}},Jn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Jn.prototype.get=function(e){return lo(this,e).get(e)},Jn.prototype.has=function(e){return lo(this,e).has(e)},Jn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(e){return this.__data__.set(e,s),this},Yn.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.clear=function(){this.__data__=new Kn,this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},$n.prototype.get=function(e){return this.__data__.get(e)},$n.prototype.has=function(e){return this.__data__.has(e)},$n.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Jn(r)}return n.set(e,t),this.size=n.size,this};var pr=Pi(Er),hr=Pi(wr,!0);function vr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],s=t(a);if(null!=s&&(u===o?s===s&&!ls(s):n(s,u)))var u=s,c=a}return c}function mr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Dt(i,s):r||(i[i.length]=s)}return i}var br=Di(),_r=Di(!0);function Er(e,t){return e&&br(e,t,Ls)}function wr(e,t){return e&&_r(e,t,Ls)}function Sr(e,t){return Nt(t,(function(t){return Za(e[t])}))}function Ir(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Fo(t[n++])];return n&&n==r?e:o}function Or(e,t,n){var r=t(e);return Wa(e)?r:Dt(r,n(e))}function Tr(e){return null==e?e===o?"[object Undefined]":"[object Null]":Xe&&Xe in Te(e)?function(e){var t=De.call(e,Xe),n=e[Xe];try{e[Xe]=o;var r=!0}catch(a){}var i=Ue.call(e);r&&(t?e[Xe]=n:delete e[Xe]);return i}(e):function(e){return Ue.call(e)}(e)}function Ar(e,t){return e>t}function Rr(e,t){return null!=e&&De.call(e,t)}function kr(e,t){return null!=e&&t in Te(e)}function Cr(e,t,r){for(var i=r?Lt:xt,a=e[0].length,s=e.length,u=s,c=n(s),l=1/0,d=[];u--;){var f=e[u];u&&t&&(f=Pt(f,Xt(t))),l=_n(f.length,l),c[u]=!r&&(t||a>=120&&f.length>=120)?new Yn(u&&f):o}f=e[0];var p=-1,h=c[0];e:for(;++p<a&&d.length<l;){var v=f[p],g=t?t(v):v;if(v=r||0!==v?v:0,!(h?en(h,g):i(d,g,r))){for(u=s;--u;){var m=c[u];if(!(m?en(m,g):i(e[u],g,r)))continue e}h&&h.push(g),d.push(v)}}return d}function Nr(e,t,n){var r=null==(e=ko(e,t=_i(t,e)))?e:e[Fo(Xo(t))];return null==r?o:Tt(r,e,n)}function xr(e){return rs(e)&&Tr(e)==b}function Lr(e,t,n,r,i){return e===t||(null==e||null==t||!rs(e)&&!rs(t)?e!==e&&t!==t:function(e,t,n,r,i,a){var s=Wa(e),u=Wa(t),c=s?_:go(e),l=u?_:go(t),d=(c=c==b?R:c)==R,f=(l=l==b?R:l)==R,p=c==l;if(p&&$a(e)){if(!$a(t))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new $n),s||ds(e)?no(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(n){case M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case E:case w:case A:return Va(+e,+t);case S:return e.name==t.name&&e.message==t.message;case C:case x:return e==t+"";case T:var s=cn;case N:var u=1&r;if(s||(s=fn),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var l=no(s(e),s(t),r,i,o,a);return a.delete(e),l;case L:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,c,n,r,i,a);if(!(1&n)){var h=d&&De.call(e,"__wrapped__"),v=f&&De.call(t,"__wrapped__");if(h||v){var g=h?e.value():e,m=v?t.value():t;return a||(a=new $n),i(g,m,n,r,a)}}if(!p)return!1;return a||(a=new $n),function(e,t,n,r,i,a){var s=1&n,u=io(e),c=u.length,l=io(t).length;if(c!=l&&!s)return!1;var d=c;for(;d--;){var f=u[d];if(!(s?f in t:De.call(t,f)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var v=!0;a.set(e,t),a.set(t,e);var g=s;for(;++d<c;){var m=e[f=u[d]],y=t[f];if(r)var b=s?r(y,m,f,t,e,a):r(m,y,f,e,t,a);if(!(b===o?m===y||i(m,y,n,r,a):b)){v=!1;break}g||(g="constructor"==f)}if(v&&!g){var _=e.constructor,E=t.constructor;_==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,n,r,i,a)}(e,t,n,r,Lr,i))}function Pr(e,t,n,r){var i=n.length,a=i,s=!r;if(null==e)return!a;for(e=Te(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var c=(u=n[i])[0],l=e[c],d=u[1];if(s&&u[2]){if(l===o&&!(c in e))return!1}else{var f=new $n;if(r)var p=r(l,d,c,e,t,f);if(!(p===o?Lr(d,l,3,r,f):p))return!1}}return!0}function Dr(e){return!(!ns(e)||(t=e,je&&je in t))&&(Za(e)?qe:be).test(Bo(e));var t}function Mr(e){return"function"==typeof e?e:null==e?ou:"object"==typeof e?Wa(e)?Vr(e[0],e[1]):qr(e):hu(e)}function jr(e){if(!Oo(e))return Kt(e);var t=[];for(var n in Te(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!ns(e))return function(e){var t=[];if(null!=e)for(var n in Te(e))t.push(n);return t}(e);var t=Oo(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Br(e,t){var r=-1,i=Ja(e)?n(e.length):[];return pr(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function qr(e){var t=fo(e);return 1==t.length&&t[0][2]?Ao(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Vr(e,t){return wo(e)&&To(t)?Ao(Fo(e),t):function(n){var r=Rs(n,e);return r===o&&r===t?ks(n,e):Lr(t,r,3)}}function Gr(e,t,n,r,i){e!==t&&br(t,(function(a,s){if(i||(i=new $n),ns(a))!function(e,t,n,r,i,a,s){var u=No(e,n),c=No(t,n),l=s.get(c);if(l)return void tr(e,n,l);var d=a?a(u,c,n+"",e,t,s):o,f=d===o;if(f){var p=Wa(c),h=!p&&$a(c),v=!p&&!h&&ds(c);d=c,p||h||v?Wa(u)?d=u:Ya(u)?d=Ci(u):h?(f=!1,d=Ii(c,!0)):v?(f=!1,d=Ti(c,!0)):d=[]:as(c)||Ha(c)?(d=u,Ha(u)?d=bs(u):ns(u)&&!Za(u)||(d=yo(c))):f=!1}f&&(s.set(c,d),i(d,c,r,a,s),s.delete(c));tr(e,n,d)}(e,t,s,n,Gr,r,i);else{var u=r?r(No(e,s),a,s+"",e,t,i):o;u===o&&(u=a),tr(e,s,u)}}),Ps)}function zr(e,t){var n=e.length;if(n)return _o(t+=t<0?n:0,n)?e[t]:o}function Hr(e,t,n){t=t.length?Pt(t,(function(e){return Wa(e)?function(t){return Ir(t,1===e.length?e[0]:e)}:e})):[ou];var r=-1;return t=Pt(t,Xt(co())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Br(e,(function(e,n,i){return{criteria:Pt(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Ai(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Wr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Ir(e,a);n(s,a)&&ei(o,_i(a,e),s)}return o}function Kr(e,t,n,r){var i=r?Gt:Vt,o=-1,a=t.length,s=e;for(e===t&&(t=Ci(t)),n&&(s=Pt(e,Xt(n)));++o<a;)for(var u=0,c=t[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==e&&Ye.call(s,u,1),Ye.call(e,u,1);return e}function Jr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;_o(i)?Ye.call(e,i,1):fi(e,i)}}return e}function Yr(e,t){return e+vt(Sn()*(t-e+1))}function $r(e,t){var n="";if(!e||t<1||t>v)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Qr(e,t){return Po(Ro(e,t,ou),e+"")}function Xr(e){return Xn(Vs(e))}function Zr(e,t){var n=Vs(e);return jo(n,ur(t,0,n.length))}function ei(e,t,n,r){if(!ns(e))return e;for(var i=-1,a=(t=_i(t,e)).length,s=a-1,u=e;null!=u&&++i<a;){var c=Fo(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var d=u[c];(l=r?r(d,c,u):o)===o&&(l=ns(d)?d:_o(t[i+1])?[]:{})}nr(u,c,l),u=u[c]}return e}var ti=Nn?function(e,t){return Nn.set(e,t),e}:ou,ni=tt?function(e,t){return tt(e,"toString",{configurable:!0,enumerable:!1,value:nu(t),writable:!0})}:ou;function ri(e){return jo(Vs(e))}function ii(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=n(o);++i<o;)a[i]=e[i+t];return a}function oi(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ls(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,ou,n)}function si(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!==t,u=null===t,c=ls(t),l=t===o;i<a;){var d=vt((i+a)/2),f=n(e[d]),p=f!==o,h=null===f,v=f===f,g=ls(f);if(s)var m=r||v;else m=l?v&&(r||p):u?v&&p&&(r||!h):c?v&&p&&!h&&(r||!g):!h&&!g&&(r?f<=t:f<t);m?i=d+1:a=d}return _n(a,4294967294)}function ui(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Va(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function ci(e){return"number"==typeof e?e:ls(e)?g:+e}function li(e){if("string"==typeof e)return e;if(Wa(e))return Pt(e,li)+"";if(ls(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=xt,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Lt;else if(o>=200){var c=t?null:$i(e);if(c)return fn(c);a=!1,i=en,u=new Yn}else u=t?[]:s;e:for(;++r<o;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,a&&d===d){for(var f=u.length;f--;)if(u[f]===d)continue e;t&&u.push(d),s.push(l)}else i(u,d,n)||(u!==s&&u.push(d),s.push(l))}return s}function fi(e,t){return null==(e=ko(e,t=_i(t,e)))||delete e[Fo(Xo(t))]}function pi(e,t,n,r){return ei(e,t,n(Ir(e,t)),r)}function hi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function vi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Mt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?di(e[0]):[];for(var o=-1,a=n(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=fr(a[o]||s,e[u],t,r));return di(yr(a,1),t,r)}function mi(e,t,n){for(var r=-1,i=e.length,a=t.length,s={};++r<i;){var u=r<a?t[r]:o;n(s,e[r],u)}return s}function yi(e){return Ya(e)?e:[]}function bi(e){return"function"==typeof e?e:ou}function _i(e,t){return Wa(e)?e:wo(e,t)?[e]:Uo(_s(e))}var Ei=Qr;function wi(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:ii(e,t,n)}var Si=rt||function(e){return ht.clearTimeout(e)};function Ii(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Oi(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Ti(e,t){var n=t?Oi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ai(e,t){if(e!==t){var n=e!==o,r=null===e,i=e===e,a=ls(e),s=t!==o,u=null===t,c=t===t,l=ls(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!l&&e<t||l&&n&&i&&!r&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function Ri(e,t,r,i){for(var o=-1,a=e.length,s=r.length,u=-1,c=t.length,l=bn(a-s,0),d=n(c+l),f=!i;++u<c;)d[u]=t[u];for(;++o<s;)(f||o<a)&&(d[r[o]]=e[o]);for(;l--;)d[u++]=e[o++];return d}function ki(e,t,r,i){for(var o=-1,a=e.length,s=-1,u=r.length,c=-1,l=t.length,d=bn(a-u,0),f=n(d+l),p=!i;++o<d;)f[o]=e[o];for(var h=o;++c<l;)f[h+c]=t[c];for(;++s<u;)(p||o<a)&&(f[h+r[s]]=e[o++]);return f}function Ci(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ni(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=r?r(n[u],e[u],u,n,e):o;c===o&&(c=e[u]),i?ar(n,u,c):nr(n,u,c)}return n}function xi(e,t){return function(n,r){var i=Wa(n)?At:ir,o=t?t():{};return i(n,e,co(r,2),o)}}function Li(e){return Qr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,s=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,s&&Eo(n[0],n[1],s)&&(a=i<3?o:a,i=1),t=Te(t);++r<i;){var u=n[r];u&&e(t,u,r,a)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Ja(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Te(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Di(e){return function(t,n,r){for(var i=-1,o=Te(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Mi(e){return function(t){var n=un(t=_s(t))?vn(t):o,r=n?n[0]:t.charAt(0),i=n?wi(n,1).join(""):t.slice(1);return r[e]()+i}}function ji(e){return function(t){return Mt(Zs(Hs(t).replace(Ze,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ns(r)?r:n}}function Fi(e){return function(t,n,r){var i=Te(t);if(!Ja(t)){var a=co(n,3);t=Ls(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,r);return s>-1?i[a?t[s]:s]:o}}function Bi(e){return ro((function(t){var n=t.length,r=n,i=zn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new ke(a);if(i&&!u&&"wrapper"==so(s))var u=new zn([],!0)}for(r=u?r:n;++r<n;){var c=so(s=t[r]),l="wrapper"==c?ao(s):o;u=l&&So(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[so(l[0])].apply(u,l[3]):1==s.length&&So(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Wa(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function qi(e,t,r,i,a,s,u,c,l,d){var p=t&f,h=1&t,v=2&t,g=24&t,m=512&t,y=v?o:Ui(e);return function o(){for(var f=arguments.length,b=n(f),_=f;_--;)b[_]=arguments[_];if(g)var E=uo(o),w=rn(b,E);if(i&&(b=Ri(b,i,a,g)),s&&(b=ki(b,s,u,g)),f-=w,g&&f<d){var S=dn(b,E);return Ji(e,t,qi,o.placeholder,r,b,S,c,l,d-f)}var I=h?r:this,O=v?I[e]:e;return f=b.length,c?b=Co(b,c):m&&f>1&&b.reverse(),p&&l<f&&(b.length=l),this&&this!==ht&&this instanceof o&&(O=y||Ui(O)),O.apply(I,b)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return Er(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Gi(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ci(n),r=ci(r)),i=e(n,r)}return i}}function zi(e){return ro((function(t){return t=Pt(t,Xt(co())),Qr((function(n){var r=this;return e(t,(function(e){return Tt(e,r,n)}))}))}))}function Hi(e,t){var n=(t=t===o?" ":li(t)).length;if(n<2)return n?$r(t,e):t;var r=$r(t,pt(e/hn(t)));return un(t)?wi(vn(r),0,e).join(""):r.slice(0,e)}function Wi(e){return function(t,r,i){return i&&"number"!=typeof i&&Eo(t,r,i)&&(r=i=o),t=vs(t),r===o?(r=t,t=0):r=vs(r),function(e,t,r,i){for(var o=-1,a=bn(pt((t-e)/(r||1)),0),s=n(a);a--;)s[i?a:++o]=e,e+=r;return s}(t,r,i=i===o?t<r?1:-1:vs(i),e)}}function Ki(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Ji(e,t,n,r,i,a,s,u,c,f){var p=8&t;t|=p?l:d,4&(t&=~(p?d:l))||(t&=-4);var h=[e,t,i,p?a:o,p?s:o,p?o:a,p?o:s,u,c,f],v=n.apply(o,h);return So(e)&&xo(v,h),v.placeholder=r,Do(v,e,t)}function Yi(e){var t=Oe[e];return function(e,n){if(e=ys(e),(n=null==n?0:_n(gs(n),292))&&bt(e)){var r=(_s(e)+"e").split("e");return+((r=(_s(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var $i=Rn&&1/fn(new Rn([,-0]))[1]==h?function(e){return new Rn(e)}:lu;function Qi(e){return function(t){var n=go(t);return n==T?cn(t):n==N?pn(t):function(e,t){return Pt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,r,i,s,h,v,g){var m=2&t;if(!m&&"function"!=typeof e)throw new ke(a);var y=i?i.length:0;if(y||(t&=-97,i=s=o),v=v===o?v:bn(gs(v),0),g=g===o?g:gs(g),y-=s?s.length:0,t&d){var b=i,_=s;i=s=o}var E=m?o:ao(e),w=[e,t,r,i,s,b,_,h,v,g];if(E&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==f&&8==n||r==f&&n==p&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var c=e[3];e[3]=c?Ri(c,s,t[4]):s,e[4]=c?dn(e[3],u):t[4]}(s=t[5])&&(c=e[5],e[5]=c?ki(c,s,t[6]):s,e[6]=c?dn(e[5],u):t[6]);(s=t[7])&&(e[7]=s);r&f&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,E),e=w[0],t=w[1],r=w[2],i=w[3],s=w[4],!(g=w[9]=w[9]===o?m?0:e.length:bn(w[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==c?function(e,t,r){var i=Ui(e);return function a(){for(var s=arguments.length,u=n(s),c=s,l=uo(a);c--;)u[c]=arguments[c];var d=s<3&&u[0]!==l&&u[s-1]!==l?[]:dn(u,l);return(s-=d.length)<r?Ji(e,t,qi,a.placeholder,o,u,d,o,o,r-s):Tt(this&&this!==ht&&this instanceof a?i:e,this,u)}}(e,t,g):t!=l&&33!=t||s.length?qi.apply(o,w):function(e,t,r,i){var o=1&t,a=Ui(e);return function t(){for(var s=-1,u=arguments.length,c=-1,l=i.length,d=n(l+u),f=this&&this!==ht&&this instanceof t?a:e;++c<l;)d[c]=i[c];for(;u--;)d[c++]=arguments[++s];return Tt(f,o?r:this,d)}}(e,t,r,i);else var S=function(e,t,n){var r=1&t,i=Ui(e);return function t(){return(this&&this!==ht&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Do((E?ti:xo)(S,w),e,t)}function Zi(e,t,n,r){return e===o||Va(e,xe[n])&&!De.call(r,n)?t:e}function eo(e,t,n,r,i,a){return ns(e)&&ns(t)&&(a.set(t,e),Gr(e,t,o,eo,a),a.delete(t)),e}function to(e){return as(e)?o:e}function no(e,t,n,r,i,a){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),d=a.get(t);if(l&&d)return l==t&&d==e;var f=-1,p=!0,h=2&n?new Yn:o;for(a.set(e,t),a.set(t,e);++f<u;){var v=e[f],g=t[f];if(r)var m=s?r(g,v,f,t,e,a):r(v,g,f,e,t,a);if(m!==o){if(m)continue;p=!1;break}if(h){if(!Ut(t,(function(e,t){if(!en(h,t)&&(v===e||i(v,e,n,r,a)))return h.push(t)}))){p=!1;break}}else if(v!==g&&!i(v,g,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function ro(e){return Po(Ro(e,o,Ko),e+"")}function io(e){return Or(e,Ls,ho)}function oo(e){return Or(e,Ps,vo)}var ao=Nn?function(e){return Nn.get(e)}:lu;function so(e){for(var t=e.name+"",n=xn[t],r=De.call(xn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function uo(e){return(De.call(qn,"placeholder")?qn:e).placeholder}function co(){var e=qn.iteratee||au;return e=e===au?Mr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fo(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,To(i)]}return t}function po(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Dr(n)?n:o}var ho=gt?function(e){return null==e?[]:(e=Te(e),Nt(gt(e),(function(t){return Je.call(e,t)})))}:mu,vo=gt?function(e){for(var t=[];e;)Dt(t,ho(e)),e=We(e);return t}:mu,go=Tr;function mo(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,o=!1;++r<i;){var a=Fo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ts(i)&&_o(a,i)&&(Wa(e)||Ha(e))}function yo(e){return"function"!=typeof e.constructor||Oo(e)?{}:Vn(We(e))}function bo(e){return Wa(e)||Ha(e)||!!($e&&e&&e[$e])}function _o(e,t){var n=typeof e;return!!(t=null==t?v:t)&&("number"==n||"symbol"!=n&&Ee.test(e))&&e>-1&&e%1==0&&e<t}function Eo(e,t,n){if(!ns(n))return!1;var r=typeof t;return!!("number"==r?Ja(n)&&_o(t,n.length):"string"==r&&t in n)&&Va(n[t],e)}function wo(e,t){if(Wa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ls(e))||(re.test(e)||!ne.test(e)||null!=t&&e in Te(t))}function So(e){var t=so(e),n=qn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(On&&go(new On(new ArrayBuffer(1)))!=M||Tn&&go(new Tn)!=T||An&&go(An.resolve())!=k||Rn&&go(new Rn)!=N||kn&&go(new kn)!=P)&&(go=function(e){var t=Tr(e),n=t==R?e.constructor:o,r=n?Bo(n):"";if(r)switch(r){case Ln:return M;case Pn:return T;case Dn:return k;case Mn:return N;case jn:return P}return t});var Io=Le?Za:yu;function Oo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xe)}function To(e){return e===e&&!ns(e)}function Ao(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in Te(n)))}}function Ro(e,t,r){return t=bn(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=bn(i.length-t,0),s=n(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=n(t+1);++o<t;)u[o]=i[o];return u[t]=r(s),Tt(e,this,u)}}function ko(e,t){return t.length<2?e:Ir(e,ii(t,0,-1))}function Co(e,t){for(var n=e.length,r=_n(t.length,n),i=Ci(e);r--;){var a=t[r];e[r]=_o(a,n)?i[a]:o}return e}function No(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var xo=Mo(ti),Lo=ft||function(e,t){return ht.setTimeout(e,t)},Po=Mo(ni);function Do(e,t,n){var r=t+"";return Po(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Rt(y,(function(n){var r="_."+n[0];t&n[1]&&!xt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(de):[]}(r),n)))}function Mo(e){var t=0,n=0;return function(){var r=En(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function jo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=Yr(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Uo=function(e){var t=Ma(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,r,i){t.push(r?i.replace(he,"$1"):n||e)})),t}));function Fo(e){if("string"==typeof e||ls(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return Pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function qo(e){if(e instanceof Hn)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Vo=Qr((function(e,t){return Ya(e)?fr(e,yr(t,1,Ya,!0)):[]})),Go=Qr((function(e,t){var n=Xo(t);return Ya(n)&&(n=o),Ya(e)?fr(e,yr(t,1,Ya,!0),co(n,2)):[]})),zo=Qr((function(e,t){var n=Xo(t);return Ya(n)&&(n=o),Ya(e)?fr(e,yr(t,1,Ya,!0),o,n):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=bn(r+i,0)),qt(e,co(t,3),i)}function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gs(n),i=n<0?bn(r+i,0):_n(i,r-1)),qt(e,co(t,3),i,!0)}function Ko(e){return(null==e?0:e.length)?yr(e,1):[]}function Jo(e){return e&&e.length?e[0]:o}var Yo=Qr((function(e){var t=Pt(e,yi);return t.length&&t[0]===e[0]?Cr(t):[]})),$o=Qr((function(e){var t=Xo(e),n=Pt(e,yi);return t===Xo(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Cr(n,co(t,2)):[]})),Qo=Qr((function(e){var t=Xo(e),n=Pt(e,yi);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Cr(n,o,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:o}var Zo=Qr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var ta=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Jr(e,Pt(t,(function(e){return _o(e,n)?+e:e})).sort(Ai)),r}));function na(e){return null==e?e:In.call(e)}var ra=Qr((function(e){return di(yr(e,1,Ya,!0))})),ia=Qr((function(e){var t=Xo(e);return Ya(t)&&(t=o),di(yr(e,1,Ya,!0),co(t,2))})),oa=Qr((function(e){var t=Xo(e);return t="function"==typeof t?t:o,di(yr(e,1,Ya,!0),o,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Nt(e,(function(e){if(Ya(e))return t=bn(e.length,t),!0})),$t(t,(function(t){return Pt(e,Wt(t))}))}function sa(e,t){if(!e||!e.length)return[];var n=aa(e);return null==t?n:Pt(n,(function(e){return Tt(t,o,e)}))}var ua=Qr((function(e,t){return Ya(e)?fr(e,t):[]})),ca=Qr((function(e){return gi(Nt(e,Ya))})),la=Qr((function(e){var t=Xo(e);return Ya(t)&&(t=o),gi(Nt(e,Ya),co(t,2))})),da=Qr((function(e){var t=Xo(e);return t="function"==typeof t?t:o,gi(Nt(e,Ya),o,t)})),fa=Qr(aa);var pa=Qr((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,sa(e,n)}));function ha(e){var t=qn(e);return t.__chain__=!0,t}function va(e,t){return t(e)}var ga=ro((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&_o(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:va,args:[i],thisArg:o}),new zn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)}));var ma=xi((function(e,t,n){De.call(e,n)?++e[n]:ar(e,n,1)}));var ya=Fi(Ho),ba=Fi(Wo);function _a(e,t){return(Wa(e)?Rt:pr)(e,co(t,3))}function Ea(e,t){return(Wa(e)?kt:hr)(e,co(t,3))}var wa=xi((function(e,t,n){De.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Sa=Qr((function(e,t,r){var i=-1,o="function"==typeof t,a=Ja(e)?n(e.length):[];return pr(e,(function(e){a[++i]=o?Tt(t,e,r):Nr(e,t,r)})),a})),Ia=xi((function(e,t,n){ar(e,n,t)}));function Oa(e,t){return(Wa(e)?Pt:Br)(e,co(t,3))}var Ta=xi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Aa=Qr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Eo(e,t[0],t[1])?t=[]:n>2&&Eo(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),Ra=ct||function(){return ht.Date.now()};function ka(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,Xi(e,f,o,o,o,o,t)}function Ca(e,t){var n;if("function"!=typeof t)throw new ke(a);return e=gs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Na=Qr((function(e,t,n){var r=1;if(n.length){var i=dn(n,uo(Na));r|=l}return Xi(e,r,t,n,i)})),xa=Qr((function(e,t,n){var r=3;if(n.length){var i=dn(n,uo(xa));r|=l}return Xi(t,r,e,n,i)}));function La(e,t,n){var r,i,s,u,c,l,d=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new ke(a);function v(t){var n=r,a=i;return r=i=o,d=t,u=e.apply(a,n)}function g(e){return d=e,c=Lo(y,t),f?v(e):u}function m(e){var n=e-l;return l===o||n>=t||n<0||p&&e-d>=s}function y(){var e=Ra();if(m(e))return b(e);c=Lo(y,function(e){var n=t-(e-l);return p?_n(n,s-(e-d)):n}(e))}function b(e){return c=o,h&&r?v(e):(r=i=o,u)}function _(){var e=Ra(),n=m(e);if(r=arguments,i=this,l=e,n){if(c===o)return g(l);if(p)return Si(c),c=Lo(y,t),v(l)}return c===o&&(c=Lo(y,t)),u}return t=ys(t)||0,ns(n)&&(f=!!n.leading,s=(p="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),_.cancel=function(){c!==o&&Si(c),d=0,r=l=i=c=o},_.flush=function(){return c===o?u:b(Ra())},_}var Pa=Qr((function(e,t){return dr(e,1,t)})),Da=Qr((function(e,t,n){return dr(e,ys(t)||0,n)}));function Ma(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ke(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ma.Cache||Jn),n}function ja(e){if("function"!=typeof e)throw new ke(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ma.Cache=Jn;var Ua=Ei((function(e,t){var n=(t=1==t.length&&Wa(t[0])?Pt(t[0],Xt(co())):Pt(yr(t,1),Xt(co()))).length;return Qr((function(r){for(var i=-1,o=_n(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Tt(e,this,r)}))})),Fa=Qr((function(e,t){var n=dn(t,uo(Fa));return Xi(e,l,o,t,n)})),Ba=Qr((function(e,t){var n=dn(t,uo(Ba));return Xi(e,d,o,t,n)})),qa=ro((function(e,t){return Xi(e,p,o,o,o,t)}));function Va(e,t){return e===t||e!==e&&t!==t}var Ga=Ki(Ar),za=Ki((function(e,t){return e>=t})),Ha=xr(function(){return arguments}())?xr:function(e){return rs(e)&&De.call(e,"callee")&&!Je.call(e,"callee")},Wa=n.isArray,Ka=_t?Xt(_t):function(e){return rs(e)&&Tr(e)==D};function Ja(e){return null!=e&&ts(e.length)&&!Za(e)}function Ya(e){return rs(e)&&Ja(e)}var $a=yt||yu,Qa=Et?Xt(Et):function(e){return rs(e)&&Tr(e)==w};function Xa(e){if(!rs(e))return!1;var t=Tr(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!as(e)}function Za(e){if(!ns(e))return!1;var t=Tr(e);return t==I||t==O||"[object AsyncFunction]"==t||"[object Proxy]"==t}function es(e){return"number"==typeof e&&e==gs(e)}function ts(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=v}function ns(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function rs(e){return null!=e&&"object"==typeof e}var is=wt?Xt(wt):function(e){return rs(e)&&go(e)==T};function os(e){return"number"==typeof e||rs(e)&&Tr(e)==A}function as(e){if(!rs(e)||Tr(e)!=R)return!1;var t=We(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Pe.call(n)==Fe}var ss=St?Xt(St):function(e){return rs(e)&&Tr(e)==C};var us=It?Xt(It):function(e){return rs(e)&&go(e)==N};function cs(e){return"string"==typeof e||!Wa(e)&&rs(e)&&Tr(e)==x}function ls(e){return"symbol"==typeof e||rs(e)&&Tr(e)==L}var ds=Ot?Xt(Ot):function(e){return rs(e)&&ts(e.length)&&!!st[Tr(e)]};var fs=Ki(Fr),ps=Ki((function(e,t){return e<=t}));function hs(e){if(!e)return[];if(Ja(e))return cs(e)?vn(e):Ci(e);if(Qe&&e[Qe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Qe]());var t=go(e);return(t==T?cn:t==N?fn:Vs)(e)}function vs(e){return e?(e=ys(e))===h||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function gs(e){var t=vs(e),n=t%1;return t===t?n?t-n:t:0}function ms(e){return e?ur(gs(e),0,m):0}function ys(e){if("number"==typeof e)return e;if(ls(e))return g;if(ns(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ns(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qt(e);var n=ye.test(e);return n||_e.test(e)?dt(e.slice(2),n?2:8):me.test(e)?g:+e}function bs(e){return Ni(e,Ps(e))}function _s(e){return null==e?"":li(e)}var Es=Li((function(e,t){if(Oo(t)||Ja(t))Ni(t,Ls(t),e);else for(var n in t)De.call(t,n)&&nr(e,n,t[n])})),ws=Li((function(e,t){Ni(t,Ps(t),e)})),Ss=Li((function(e,t,n,r){Ni(t,Ps(t),e,r)})),Is=Li((function(e,t,n,r){Ni(t,Ls(t),e,r)})),Os=ro(sr);var Ts=Qr((function(e,t){e=Te(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&Eo(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],s=Ps(a),u=-1,c=s.length;++u<c;){var l=s[u],d=e[l];(d===o||Va(d,xe[l])&&!De.call(e,l))&&(e[l]=a[l])}return e})),As=Qr((function(e){return e.push(o,eo),Tt(Ms,o,e)}));function Rs(e,t,n){var r=null==e?o:Ir(e,t);return r===o?n:r}function ks(e,t){return null!=e&&mo(e,t,kr)}var Cs=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),nu(ou)),Ns=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),co),xs=Qr(Nr);function Ls(e){return Ja(e)?Qn(e):jr(e)}function Ps(e){return Ja(e)?Qn(e,!0):Ur(e)}var Ds=Li((function(e,t,n){Gr(e,t,n)})),Ms=Li((function(e,t,n,r){Gr(e,t,n,r)})),js=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Pt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Ni(e,oo(e),n),r&&(n=cr(n,7,to));for(var i=t.length;i--;)fi(n,t[i]);return n}));var Us=ro((function(e,t){return null==e?{}:function(e,t){return Wr(e,t,(function(t,n){return ks(e,n)}))}(e,t)}));function Fs(e,t){if(null==e)return{};var n=Pt(oo(e),(function(e){return[e]}));return t=co(t),Wr(e,n,(function(e,n){return t(e,n[0])}))}var Bs=Qi(Ls),qs=Qi(Ps);function Vs(e){return null==e?[]:Zt(e,Ls(e))}var Gs=ji((function(e,t,n){return t=t.toLowerCase(),e+(n?zs(t):t)}));function zs(e){return Xs(_s(e).toLowerCase())}function Hs(e){return(e=_s(e))&&e.replace(we,on).replace(et,"")}var Ws=ji((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ks=ji((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Js=Mi("toLowerCase");var Ys=ji((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var $s=ji((function(e,t,n){return e+(n?" ":"")+Xs(t)}));var Qs=ji((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xs=Mi("toUpperCase");function Zs(e,t,n){return e=_s(e),(t=n?o:t)===o?function(e){return it.test(e)}(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var eu=Qr((function(e,t){try{return Tt(e,o,t)}catch(n){return Xa(n)?n:new i(n)}})),tu=ro((function(e,t){return Rt(t,(function(t){t=Fo(t),ar(e,t,Na(e[t],e))})),e}));function nu(e){return function(){return e}}var ru=Bi(),iu=Bi(!0);function ou(e){return e}function au(e){return Mr("function"==typeof e?e:cr(e,1))}var su=Qr((function(e,t){return function(n){return Nr(n,e,t)}})),uu=Qr((function(e,t){return function(n){return Nr(e,n,t)}}));function cu(e,t,n){var r=Ls(t),i=Sr(t,r);null!=n||ns(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Ls(t)));var o=!(ns(n)&&"chain"in n)||!!n.chain,a=Za(e);return Rt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ci(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function lu(){}var du=zi(Pt),fu=zi(Ct),pu=zi(Ut);function hu(e){return wo(e)?Wt(Fo(e)):function(e){return function(t){return Ir(t,e)}}(e)}var vu=Wi(),gu=Wi(!0);function mu(){return[]}function yu(){return!1}var bu=Gi((function(e,t){return e+t}),0),_u=Yi("ceil"),Eu=Gi((function(e,t){return e/t}),1),wu=Yi("floor");var Su=Gi((function(e,t){return e*t}),1),Iu=Yi("round"),Ou=Gi((function(e,t){return e-t}),0);return qn.after=function(e,t){if("function"!=typeof t)throw new ke(a);return e=gs(e),function(){if(--e<1)return t.apply(this,arguments)}},qn.ary=ka,qn.assign=Es,qn.assignIn=ws,qn.assignInWith=Ss,qn.assignWith=Is,qn.at=Os,qn.before=Ca,qn.bind=Na,qn.bindAll=tu,qn.bindKey=xa,qn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wa(e)?e:[e]},qn.chain=ha,qn.chunk=function(e,t,r){t=(r?Eo(e,t,r):t===o)?1:bn(gs(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,u=n(pt(i/t));a<i;)u[s++]=ii(e,a,a+=t);return u},qn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},qn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Dt(Wa(r)?Ci(r):[r],yr(t,1))},qn.cond=function(e){var t=null==e?0:e.length,n=co();return e=t?Pt(e,(function(e){if("function"!=typeof e[1])throw new ke(a);return[n(e[0]),e[1]]})):[],Qr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Tt(i[0],this,n))return Tt(i[1],this,n)}}))},qn.conforms=function(e){return function(e){var t=Ls(e);return function(n){return lr(n,e,t)}}(cr(e,1))},qn.constant=nu,qn.countBy=ma,qn.create=function(e,t){var n=Vn(e);return null==t?n:or(n,t)},qn.curry=function e(t,n,r){var i=Xi(t,8,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},qn.curryRight=function e(t,n,r){var i=Xi(t,c,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},qn.debounce=La,qn.defaults=Ts,qn.defaultsDeep=As,qn.defer=Pa,qn.delay=Da,qn.difference=Vo,qn.differenceBy=Go,qn.differenceWith=zo,qn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===o?1:gs(t))<0?0:t,r):[]},qn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===o?1:gs(t)))<0?0:t):[]},qn.dropRightWhile=function(e,t){return e&&e.length?hi(e,co(t,3),!0,!0):[]},qn.dropWhile=function(e,t){return e&&e.length?hi(e,co(t,3),!0):[]},qn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Eo(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=gs(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gs(r))<0&&(r+=i),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},qn.filter=function(e,t){return(Wa(e)?Nt:mr)(e,co(t,3))},qn.flatMap=function(e,t){return yr(Oa(e,t),1)},qn.flatMapDeep=function(e,t){return yr(Oa(e,t),h)},qn.flatMapDepth=function(e,t,n){return n=n===o?1:gs(n),yr(Oa(e,t),n)},qn.flatten=Ko,qn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,h):[]},qn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===o?1:gs(t)):[]},qn.flip=function(e){return Xi(e,512)},qn.flow=ru,qn.flowRight=iu,qn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},qn.functions=function(e){return null==e?[]:Sr(e,Ls(e))},qn.functionsIn=function(e){return null==e?[]:Sr(e,Ps(e))},qn.groupBy=wa,qn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},qn.intersection=Yo,qn.intersectionBy=$o,qn.intersectionWith=Qo,qn.invert=Cs,qn.invertBy=Ns,qn.invokeMap=Sa,qn.iteratee=au,qn.keyBy=Ia,qn.keys=Ls,qn.keysIn=Ps,qn.map=Oa,qn.mapKeys=function(e,t){var n={};return t=co(t,3),Er(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},qn.mapValues=function(e,t){var n={};return t=co(t,3),Er(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},qn.matches=function(e){return qr(cr(e,1))},qn.matchesProperty=function(e,t){return Vr(e,cr(t,1))},qn.memoize=Ma,qn.merge=Ds,qn.mergeWith=Ms,qn.method=su,qn.methodOf=uu,qn.mixin=cu,qn.negate=ja,qn.nthArg=function(e){return e=gs(e),Qr((function(t){return zr(t,e)}))},qn.omit=js,qn.omitBy=function(e,t){return Fs(e,ja(co(t)))},qn.once=function(e){return Ca(2,e)},qn.orderBy=function(e,t,n,r){return null==e?[]:(Wa(t)||(t=null==t?[]:[t]),Wa(n=r?o:n)||(n=null==n?[]:[n]),Hr(e,t,n))},qn.over=du,qn.overArgs=Ua,qn.overEvery=fu,qn.overSome=pu,qn.partial=Fa,qn.partialRight=Ba,qn.partition=Ta,qn.pick=Us,qn.pickBy=Fs,qn.property=hu,qn.propertyOf=function(e){return function(t){return null==e?o:Ir(e,t)}},qn.pull=Zo,qn.pullAll=ea,qn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,co(n,2)):e},qn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,o,n):e},qn.pullAt=ta,qn.range=vu,qn.rangeRight=gu,qn.rearg=qa,qn.reject=function(e,t){return(Wa(e)?Nt:mr)(e,ja(co(t,3)))},qn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=co(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Jr(e,i),n},qn.rest=function(e,t){if("function"!=typeof e)throw new ke(a);return Qr(e,t=t===o?t:gs(t))},qn.reverse=na,qn.sampleSize=function(e,t,n){return t=(n?Eo(e,t,n):t===o)?1:gs(t),(Wa(e)?Zn:Zr)(e,t)},qn.set=function(e,t,n){return null==e?e:ei(e,t,n)},qn.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:ei(e,t,n,r)},qn.shuffle=function(e){return(Wa(e)?er:ri)(e)},qn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Eo(e,t,n)?(t=0,n=r):(t=null==t?0:gs(t),n=n===o?r:gs(n)),ii(e,t,n)):[]},qn.sortBy=Aa,qn.sortedUniq=function(e){return e&&e.length?ui(e):[]},qn.sortedUniqBy=function(e,t){return e&&e.length?ui(e,co(t,2)):[]},qn.split=function(e,t,n){return n&&"number"!=typeof n&&Eo(e,t,n)&&(t=n=o),(n=n===o?m:n>>>0)?(e=_s(e))&&("string"==typeof t||null!=t&&!ss(t))&&!(t=li(t))&&un(e)?wi(vn(e),0,n):e.split(t,n):[]},qn.spread=function(e,t){if("function"!=typeof e)throw new ke(a);return t=null==t?0:bn(gs(t),0),Qr((function(n){var r=n[t],i=wi(n,0,t);return r&&Dt(i,r),Tt(e,this,i)}))},qn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},qn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===o?1:gs(t))<0?0:t):[]},qn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===o?1:gs(t)))<0?0:t,r):[]},qn.takeRightWhile=function(e,t){return e&&e.length?hi(e,co(t,3),!1,!0):[]},qn.takeWhile=function(e,t){return e&&e.length?hi(e,co(t,3)):[]},qn.tap=function(e,t){return t(e),e},qn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ke(a);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),La(e,t,{leading:r,maxWait:t,trailing:i})},qn.thru=va,qn.toArray=hs,qn.toPairs=Bs,qn.toPairsIn=qs,qn.toPath=function(e){return Wa(e)?Pt(e,Fo):ls(e)?[e]:Ci(Uo(_s(e)))},qn.toPlainObject=bs,qn.transform=function(e,t,n){var r=Wa(e),i=r||$a(e)||ds(e);if(t=co(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ns(e)&&Za(o)?Vn(We(e)):{}}return(i?Rt:Er)(e,(function(e,r,i){return t(n,e,r,i)})),n},qn.unary=function(e){return ka(e,1)},qn.union=ra,qn.unionBy=ia,qn.unionWith=oa,qn.uniq=function(e){return e&&e.length?di(e):[]},qn.uniqBy=function(e,t){return e&&e.length?di(e,co(t,2)):[]},qn.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?di(e,o,t):[]},qn.unset=function(e,t){return null==e||fi(e,t)},qn.unzip=aa,qn.unzipWith=sa,qn.update=function(e,t,n){return null==e?e:pi(e,t,bi(n))},qn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:pi(e,t,bi(n),r)},qn.values=Vs,qn.valuesIn=function(e){return null==e?[]:Zt(e,Ps(e))},qn.without=ua,qn.words=Zs,qn.wrap=function(e,t){return Fa(bi(t),e)},qn.xor=ca,qn.xorBy=la,qn.xorWith=da,qn.zip=fa,qn.zipObject=function(e,t){return mi(e||[],t||[],nr)},qn.zipObjectDeep=function(e,t){return mi(e||[],t||[],ei)},qn.zipWith=pa,qn.entries=Bs,qn.entriesIn=qs,qn.extend=ws,qn.extendWith=Ss,cu(qn,qn),qn.add=bu,qn.attempt=eu,qn.camelCase=Gs,qn.capitalize=zs,qn.ceil=_u,qn.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=ys(n))===n?n:0),t!==o&&(t=(t=ys(t))===t?t:0),ur(ys(e),t,n)},qn.clone=function(e){return cr(e,4)},qn.cloneDeep=function(e){return cr(e,5)},qn.cloneDeepWith=function(e,t){return cr(e,5,t="function"==typeof t?t:o)},qn.cloneWith=function(e,t){return cr(e,4,t="function"==typeof t?t:o)},qn.conformsTo=function(e,t){return null==t||lr(e,t,Ls(t))},qn.deburr=Hs,qn.defaultTo=function(e,t){return null==e||e!==e?t:e},qn.divide=Eu,qn.endsWith=function(e,t,n){e=_s(e),t=li(t);var r=e.length,i=n=n===o?r:ur(gs(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},qn.eq=Va,qn.escape=function(e){return(e=_s(e))&&X.test(e)?e.replace($,an):e},qn.escapeRegExp=function(e){return(e=_s(e))&&ae.test(e)?e.replace(oe,"\\$&"):e},qn.every=function(e,t,n){var r=Wa(e)?Ct:vr;return n&&Eo(e,t,n)&&(t=o),r(e,co(t,3))},qn.find=ya,qn.findIndex=Ho,qn.findKey=function(e,t){return Bt(e,co(t,3),Er)},qn.findLast=ba,qn.findLastIndex=Wo,qn.findLastKey=function(e,t){return Bt(e,co(t,3),wr)},qn.floor=wu,qn.forEach=_a,qn.forEachRight=Ea,qn.forIn=function(e,t){return null==e?e:br(e,co(t,3),Ps)},qn.forInRight=function(e,t){return null==e?e:_r(e,co(t,3),Ps)},qn.forOwn=function(e,t){return e&&Er(e,co(t,3))},qn.forOwnRight=function(e,t){return e&&wr(e,co(t,3))},qn.get=Rs,qn.gt=Ga,qn.gte=za,qn.has=function(e,t){return null!=e&&mo(e,t,Rr)},qn.hasIn=ks,qn.head=Jo,qn.identity=ou,qn.includes=function(e,t,n,r){e=Ja(e)?e:Vs(e),n=n&&!r?gs(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),cs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},qn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gs(n);return i<0&&(i=bn(r+i,0)),Vt(e,t,i)},qn.inRange=function(e,t,n){return t=vs(t),n===o?(n=t,t=0):n=vs(n),function(e,t,n){return e>=_n(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},qn.invoke=xs,qn.isArguments=Ha,qn.isArray=Wa,qn.isArrayBuffer=Ka,qn.isArrayLike=Ja,qn.isArrayLikeObject=Ya,qn.isBoolean=function(e){return!0===e||!1===e||rs(e)&&Tr(e)==E},qn.isBuffer=$a,qn.isDate=Qa,qn.isElement=function(e){return rs(e)&&1===e.nodeType&&!as(e)},qn.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Wa(e)||"string"==typeof e||"function"==typeof e.splice||$a(e)||ds(e)||Ha(e)))return!e.length;var t=go(e);if(t==T||t==N)return!e.size;if(Oo(e))return!jr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},qn.isEqual=function(e,t){return Lr(e,t)},qn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?Lr(e,t,o,n):!!r},qn.isError=Xa,qn.isFinite=function(e){return"number"==typeof e&&bt(e)},qn.isFunction=Za,qn.isInteger=es,qn.isLength=ts,qn.isMap=is,qn.isMatch=function(e,t){return e===t||Pr(e,t,fo(t))},qn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Pr(e,t,fo(t),n)},qn.isNaN=function(e){return os(e)&&e!=+e},qn.isNative=function(e){if(Io(e))throw new i("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},qn.isNil=function(e){return null==e},qn.isNull=function(e){return null===e},qn.isNumber=os,qn.isObject=ns,qn.isObjectLike=rs,qn.isPlainObject=as,qn.isRegExp=ss,qn.isSafeInteger=function(e){return es(e)&&e>=-9007199254740991&&e<=v},qn.isSet=us,qn.isString=cs,qn.isSymbol=ls,qn.isTypedArray=ds,qn.isUndefined=function(e){return e===o},qn.isWeakMap=function(e){return rs(e)&&go(e)==P},qn.isWeakSet=function(e){return rs(e)&&"[object WeakSet]"==Tr(e)},qn.join=function(e,t){return null==e?"":Ft.call(e,t)},qn.kebabCase=Ws,qn.last=Xo,qn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gs(n))<0?bn(r+i,0):_n(i,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):qt(e,zt,i,!0)},qn.lowerCase=Ks,qn.lowerFirst=Js,qn.lt=fs,qn.lte=ps,qn.max=function(e){return e&&e.length?gr(e,ou,Ar):o},qn.maxBy=function(e,t){return e&&e.length?gr(e,co(t,2),Ar):o},qn.mean=function(e){return Ht(e,ou)},qn.meanBy=function(e,t){return Ht(e,co(t,2))},qn.min=function(e){return e&&e.length?gr(e,ou,Fr):o},qn.minBy=function(e,t){return e&&e.length?gr(e,co(t,2),Fr):o},qn.stubArray=mu,qn.stubFalse=yu,qn.stubObject=function(){return{}},qn.stubString=function(){return""},qn.stubTrue=function(){return!0},qn.multiply=Su,qn.nth=function(e,t){return e&&e.length?zr(e,gs(t)):o},qn.noConflict=function(){return ht._===this&&(ht._=Be),this},qn.noop=lu,qn.now=Ra,qn.pad=function(e,t,n){e=_s(e);var r=(t=gs(t))?hn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(vt(i),n)+e+Hi(pt(i),n)},qn.padEnd=function(e,t,n){e=_s(e);var r=(t=gs(t))?hn(e):0;return t&&r<t?e+Hi(t-r,n):e},qn.padStart=function(e,t,n){e=_s(e);var r=(t=gs(t))?hn(e):0;return t&&r<t?Hi(t-r,n)+e:e},qn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),wn(_s(e).replace(se,""),t||0)},qn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Eo(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=vs(e),t===o?(t=e,e=0):t=vs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Sn();return _n(e+i*(t-e+lt("1e-"+((i+"").length-1))),t)}return Yr(e,t)},qn.reduce=function(e,t,n){var r=Wa(e)?Mt:Jt,i=arguments.length<3;return r(e,co(t,4),n,i,pr)},qn.reduceRight=function(e,t,n){var r=Wa(e)?jt:Jt,i=arguments.length<3;return r(e,co(t,4),n,i,hr)},qn.repeat=function(e,t,n){return t=(n?Eo(e,t,n):t===o)?1:gs(t),$r(_s(e),t)},qn.replace=function(){var e=arguments,t=_s(e[0]);return e.length<3?t:t.replace(e[1],e[2])},qn.result=function(e,t,n){var r=-1,i=(t=_i(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[Fo(t[r])];a===o&&(r=i,a=n),e=Za(a)?a.call(e):a}return e},qn.round=Iu,qn.runInContext=e,qn.sample=function(e){return(Wa(e)?Xn:Xr)(e)},qn.size=function(e){if(null==e)return 0;if(Ja(e))return cs(e)?hn(e):e.length;var t=go(e);return t==T||t==N?e.size:jr(e).length},qn.snakeCase=Ys,qn.some=function(e,t,n){var r=Wa(e)?Ut:oi;return n&&Eo(e,t,n)&&(t=o),r(e,co(t,3))},qn.sortedIndex=function(e,t){return ai(e,t)},qn.sortedIndexBy=function(e,t,n){return si(e,t,co(n,2))},qn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Va(e[r],t))return r}return-1},qn.sortedLastIndex=function(e,t){return ai(e,t,!0)},qn.sortedLastIndexBy=function(e,t,n){return si(e,t,co(n,2),!0)},qn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(Va(e[n],t))return n}return-1},qn.startCase=$s,qn.startsWith=function(e,t,n){return e=_s(e),n=null==n?0:ur(gs(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},qn.subtract=Ou,qn.sum=function(e){return e&&e.length?Yt(e,ou):0},qn.sumBy=function(e,t){return e&&e.length?Yt(e,co(t,2)):0},qn.template=function(e,t,n){var r=qn.templateSettings;n&&Eo(e,t,n)&&(t=o),e=_s(e),t=Ss({},t,r,Zi);var a,s,u=Ss({},t.imports,r.imports,Zi),c=Ls(u),l=Zt(u,c),d=0,f=t.interpolate||Se,p="__p += '",h=Ae((t.escape||Se).source+"|"+f.source+"|"+(f===te?ve:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),v="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(h,(function(t,n,r,i,o,u){return r||(r=i),p+=e.slice(d,u).replace(Ie,sn),n&&(a=!0,p+="' +\n__e("+n+") +\n'"),o&&(s=!0,p+="';\n"+o+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),d=u+t.length,t})),p+="';\n";var g=De.call(t,"variable")&&t.variable;if(g){if(pe.test(g))throw new i("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(W,""):p).replace(K,"$1").replace(J,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=eu((function(){return ue(c,v+"return "+p).apply(o,l)}));if(m.source=p,Xa(m))throw m;return m},qn.times=function(e,t){if((e=gs(e))<1||e>v)return[];var n=m,r=_n(e,m);t=co(t),e-=m;for(var i=$t(r,t);++n<e;)t(n);return i},qn.toFinite=vs,qn.toInteger=gs,qn.toLength=ms,qn.toLower=function(e){return _s(e).toLowerCase()},qn.toNumber=ys,qn.toSafeInteger=function(e){return e?ur(gs(e),-9007199254740991,v):0===e?e:0},qn.toString=_s,qn.toUpper=function(e){return _s(e).toUpperCase()},qn.trim=function(e,t,n){if((e=_s(e))&&(n||t===o))return Qt(e);if(!e||!(t=li(t)))return e;var r=vn(e),i=vn(t);return wi(r,tn(r,i),nn(r,i)+1).join("")},qn.trimEnd=function(e,t,n){if((e=_s(e))&&(n||t===o))return e.slice(0,gn(e)+1);if(!e||!(t=li(t)))return e;var r=vn(e);return wi(r,0,nn(r,vn(t))+1).join("")},qn.trimStart=function(e,t,n){if((e=_s(e))&&(n||t===o))return e.replace(se,"");if(!e||!(t=li(t)))return e;var r=vn(e);return wi(r,tn(r,vn(t))).join("")},qn.truncate=function(e,t){var n=30,r="...";if(ns(t)){var i="separator"in t?t.separator:i;n="length"in t?gs(t.length):n,r="omission"in t?li(t.omission):r}var a=(e=_s(e)).length;if(un(e)){var s=vn(e);a=s.length}if(n>=a)return e;var u=n-hn(r);if(u<1)return r;var c=s?wi(s,0,u).join(""):e.slice(0,u);if(i===o)return c+r;if(s&&(u+=c.length-u),ss(i)){if(e.slice(u).search(i)){var l,d=c;for(i.global||(i=Ae(i.source,_s(ge.exec(i))+"g")),i.lastIndex=0;l=i.exec(d);)var f=l.index;c=c.slice(0,f===o?u:f)}}else if(e.indexOf(li(i),u)!=u){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+r},qn.unescape=function(e){return(e=_s(e))&&Q.test(e)?e.replace(Y,mn):e},qn.uniqueId=function(e){var t=++Me;return _s(e)+t},qn.upperCase=Qs,qn.upperFirst=Xs,qn.each=_a,qn.eachRight=Ea,qn.first=Jo,cu(qn,function(){var e={};return Er(qn,(function(t,n){De.call(qn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),qn.VERSION="4.17.21",Rt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){qn[e].placeholder=qn})),Rt(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===o?1:bn(gs(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Rt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:co(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Rt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),Rt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ou)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Qr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Nr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(ja(co(e)))},Hn.prototype.slice=function(e,t){e=gs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=gs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(m)},Er(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=qn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(qn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof Hn,c=s[0],l=u||Wa(t),d=function(e){var t=i.apply(qn,Dt([e],s));return r&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,h=a&&!f,v=u&&!p;if(!a&&l){t=v?t:new Hn(this);var g=e.apply(t,s);return g.__actions__.push({func:va,args:[d],thisArg:o}),new zn(g,f)}return h&&v?e.apply(this,s):(g=this.thru(d),h?r?g.value()[0]:g.value():g)})})),Rt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);qn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Wa(i)?i:[],e)}return this[n]((function(n){return t.apply(Wa(n)?n:[],e)}))}})),Er(Hn.prototype,(function(e,t){var n=qn[t];if(n){var r=n.name+"";De.call(xn,r)||(xn[r]=[]),xn[r].push({name:t,func:n})}})),xn[qi(o,2).name]=[{name:"wrapper",func:o}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wa(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=_n(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,p=_n(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return vi(e,this.__actions__);var h=[];e:for(;u--&&f<p;){for(var v=-1,g=e[c+=t];++v<d;){var m=l[v],y=m.iteratee,b=m.type,_=y(g);if(2==b)g=_;else if(!_){if(1==b)continue e;break e}}h[f++]=g}return h},qn.prototype.at=ga,qn.prototype.chain=function(){return ha(this)},qn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},qn.prototype.next=function(){this.__values__===o&&(this.__values__=hs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},qn.prototype.plant=function(e){for(var t,n=this;n instanceof Gn;){var r=qo(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},qn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:va,args:[na],thisArg:o}),new zn(t,this.__chain__)}return this.thru(na)},qn.prototype.toJSON=qn.prototype.valueOf=qn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},qn.prototype.first=qn.prototype.head,Qe&&(qn.prototype[Qe]=function(){return this}),qn}();ht._=yn,(i=function(){return yn}.call(t,n,t,r))===o||(r.exports=i)}).call(this)}).call(this,n(20),n(36)(e))},function(module,exports,__webpack_require__){"use strict";(function(global,process,module){var t;t=function(){function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pd(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){function o(e){Pd(s,r,i,o,a,"next",e)}function a(e){Pd(s,r,i,o,a,"throw",e)}var s=e.apply(t,n);o(void 0)}))}}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t&&al(e.prototype,t),n&&al(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ka(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}function kd(e){return(kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cl(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ch(e,t,n){return(Ch=cl()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),e=new(Function.bind.apply(e,r)),n&&Qe(e,n.prototype),e}).apply(null,arguments)}function Re(e){var t="function"==typeof Map?new Map:void 0;return(Re=function(e){function n(){return Ch(e,arguments,kd(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Qe(n,e)})(e)}function Se(e,t){if(null==e)return{};if(null==e)var n={};else{n={};var r,i=Object.keys(e);for(r=0;r<i.length;r++){var o=i[r];0<=t.indexOf(o)||(n[o]=e[o])}}if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)i=r[o],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i]);return n}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function la(e){var t=cl();return function(){var r=kd(e);if(t){var i=kd(this).constructor;r=Reflect.construct(r,arguments,i)}else r=r.apply(this,arguments);return!r||"object"!=typeof r&&"function"!=typeof r?n(this):r}}function Dh(e,t,n){return(Dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kd(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function pa(e,t){var n=Array.isArray(e)?e:void 0;if(!n)if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){n=[];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}else n=void 0;if(!(e=n||dl(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function I(e){var t=Array.isArray(e)?Eh(e):void 0;if(t||(t="undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0),!(e=t||dl(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function dl(e,t){if(e){if("string"==typeof e)return Eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eh(e,t)}}function Eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function da(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function Xa(e){var t={exports:{}};return e(t,t.exports),t.exports}function el(e,t){var n,r=3>arguments.length?e:arguments[2];return qa(e)===r?e[t]:(n=Db.f(e,t))?P(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):ea(n=Rb(e))?el(n,t,r):void 0}function Nr(e){var t=e.charCodeAt(0)<<24,n=0|Or(~t),r=0,i=0|e.length,o="";if(5>n&&i>=n){for(t=t<<n>>>24+n,r=1;r<n;r=r+1|0)t=t<<6|63&e.charCodeAt(r);65535>=t?o+=ld(t):1114111>=t?o+=ld(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):r=0}for(;r<i;r=r+1|0)o+="\ufffd";return o}function fl(){}function Pr(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t){var n=0|e.charCodeAt(1);if(!(n==n&&56320<=n&&57343>=n))return ld(239,191,189);if(65535<(t=(t-55296<<10)+n-56320+65536|0))return ld(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?e:2047>=t?ld(192|t>>>6,128|63&t):ld(224|t>>>12,128|t>>>6&63,128|63&t)}function gl(){}function aa(){aa.init.call(this)}function Zf(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+R(e))}function hl(e,t,n,r){Zf(n);var i=e._events;if(void 0===i)i=e._events=Object.create(null),e._eventsCount=0;else{void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events);var o=i[t]}return void 0===o?(i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=void 0===e._maxListeners?aa.defaultMaxListeners:e._maxListeners)&&o.length>n&&!o.warned&&(o.warned=!0,(n=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function Qr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function il(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=Qr.bind(e)).listener=n,e.wrapFn=t}function jl(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(t=e[t]))return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n)for(n=Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];else n=kl(t,t.length);return n}function ll(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function kl(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Rr(e){return e?I(e):Sr((function(){return[]}),(function(e,t){return e.push(t),e}))}function ml(e,t){var n,r,i,o;return w.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=nl(e)([Fh,Fh,function(e,t){return t}])[2],r=0;case 2:if(!(r<t.length)){a.next=17;break}if(i=t[r],!((o=n(Gh,i))instanceof $f)){a.next=11;break}if((o=Hh(o.deref()))===Gh){a.next=10;break}return a.next=10,o;case 10:return a.abrupt("return");case 11:if(o===Gh){a.next=14;break}return a.next=14,o;case 14:r++,a.next=2;break;case 17:case"end":return a.stop()}}),Tr)}function ag(e,t){return null!=t&&"function"==typeof t[Symbol.iterator]?ml(ag(e),t):function(t){var n=t[2];return Ur(t,(function(t,r){return n(t,e(r))}))}}function md(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function nd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Te(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new bg;++t<n;)this.add(e[t])}function Sd(e){this.size=(this.__data__=new cg(e)).size}function dg(e,t,n,r,i,o){var a,s=1&t,u=2&t,c=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!jb(e))return e;if(r=Ya(e)){if(a=Vr(e),!s)return Ih(e,a)}else{var l=Ue(e),d="[object Function]"==l||"[object GeneratorFunction]"==l;if(Ve(e))return ol(e,s);if("[object Object]"==l||"[object Arguments]"==l||d&&!i){if(a=u||d?{}:pl(e),!s)return u?Wr(e,Xr(a,e)):Yr(e,Zr(a,e))}else{if(!ra[l])return i?e:{};a=$r(e,l,s)}}if(o||(o=new Td),i=o.get(e))return i;o.set(e,a),as(e)?e.forEach((function(r){a.add(dg(r,t,n,r,e,o))})):bs(e)&&e.forEach((function(r,i){a.set(i,dg(r,t,n,i,e,o))})),u=c?u?ql:Jh:u?We:Rc;var f=r?void 0:u(e);return cs(f||e,(function(r,i){f&&(r=e[i=r]),rl(a,i,dg(r,t,n,i,e,o))})),a}function Kh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)};return n.cache=new(Kh.Cache||bg),n}function sl(e){if("string"==typeof e)return e;if(Ya(e))return Ud(e,sl)+"";if(Vd(e))return tl?tl.call(e):"";var t=e+"";return"0"==t&&1/e==-ds?"-0":t}function Lh(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=es),i||(i=[]);++o<a;){var s=e[o];0<t&&n(s)?1<t?Lh(s,t-1,n,r,i):Mh(i,s):r||(i[i.length]=s)}return i}function Wd(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!cc(e)&&!cc(t))t=e!=e&&t!=t;else e:{var o=Ya(e),a=Ya(t),s=o?"[object Array]":Ue(e),u=a?"[object Array]":Ue(t),c="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s);if(a="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),(u=s==u)&&Ve(e)){if(!Ve(t)){t=!1;break e}o=!0,c=!1}if(u&&!c)i||(i=new Td),t=o||Nh(e)?ul(e,t,n,r,Wd,i):fs(e,t,s,n,r,Wd,i);else{if(!(1&n)&&(o=c&&vl.call(e,"__wrapped__"),s=a&&vl.call(t,"__wrapped__"),o||s)){e=o?e.value():e,t=s?t.value():t,i||(i=new Td),t=Wd(e,t,n,r,i);break e}if(u)t:if(i||(i=new Td),o=1&n,s=Jh(e),a=s.length,u=Jh(t).length,a==u||o){for(u=a;u--;){var l=s[u];if(!(o?l in t:gs.call(t,l))){t=!1;break t}}if(c=i.get(e),l=i.get(t),c&&l)t=c==t&&l==e;else{c=!0,i.set(e,t),i.set(t,e);for(var d=o;++u<a;){var f=e[l=s[u]],p=t[l];if(r)var h=o?r(p,f,l,t,e,i):r(f,p,l,e,t,i);if(void 0===h?f!==p&&!Wd(f,p,n,r,i):!h){c=!1;break}d||(d="constructor"==l)}c&&!d&&(n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(c=!1),i.delete(e),i.delete(t),t=c}}else t=!1;else t=!1}}return t}function sa(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function kb(e){return!0===(e&&e.__isLong__)}function od(e,t){var n;if(t){if((t=0<=(e>>>=0)&&256>e)&&(n=wl[e]))return n;n=ta(e,0>(0|e)?-1:0,!0),t&&(wl[e]=n)}else{if((t=-128<=(e|=0)&&128>e)&&(n=xl[e]))return n;n=ta(e,0>e?-1:0,!1),t&&(xl[e]=n)}return n}function Eb(e,t){if(isNaN(e))return t?pd:Fb;if(t){if(0>e)return pd;if(e>=yl)return zl}else{if(e<=-Al)return lb;if(e+1>=Al)return Bl}return 0>e?Eb(-e,t).neg():ta(e%Xd|0,e/Xd|0,t)}function ta(e,t,n){return new sa(e,t,n)}function Oh(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Fb;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return Oh(e.substring(1),t,n).neg();r=Eb(eg(n,8));for(var i=Fb,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),s=parseInt(e.substring(o,o+a),n);8>a?(a=Eb(eg(n,a)),i=i.mul(a).add(Eb(s))):i=(i=i.mul(r)).add(Eb(s))}return i.unsigned=t,i}function Sb(e,t){return"number"==typeof e?Eb(e,t):"string"==typeof e?Oh(e,t):ta(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}function M(e,t){function n(){this.constructor=e}_Ph(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Yd(e){return"function"==typeof e}function Zd(e){setTimeout((function(){throw e}),0)}function Qh(e){return null!==e&&"object"===R(e)}function Cl(e){return e.reduce((function(e,t){return e.concat(t instanceof Xe?t.errors:t)}),[])}function Rh(e){for(;e;){var t=e.destination,n=e.isStopped;if(e.closed||n)return!1;e=t&&t instanceof fa?t:null}return!0}function Sc(e){return e}function Sh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dl(e)}function Dl(e){return 0===e.length?Sc:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}function El(e){if(e||(e=Gb.Promise||Promise),!e)throw Error("no Promise impl found");return e}function Fl(){return function(e){return e.lift(new hs(e))}}function Ye(e){return e?is(e):dc}function is(e){return new V((function(t){return e.schedule((function(){return t.complete()}))}))}function Tc(e){return e&&"function"==typeof e.schedule}function Th(e,t){return new V((function(n){var r=new Ka,i=0;return r.add(t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||r.add(this.schedule()))}))),r}))}function Ze(e,t){return t?Th(e,t):new V(Gl(e))}function mb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Tc(t=e[e.length-1])?(e.pop(),Th(e,t)):Ze(e)}function ba(e,t){return new V(t?function(n){return t.schedule(js,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function js(e){e.subscriber.error(e.error)}function ks(e,t){return void 0===t&&(t=0),function(n){return n.lift(new ls(e,t))}}function Hl(e){return e in Uh&&(delete Uh[e],!0)}function ec(){}function Z(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new ms(e,t))}}function Il(e,t,n){if(t){if(!Tc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Il(e,n).apply(void 0,r).pipe(Z((function(e){return Hb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,a={context:o,subject:i,callbackFunc:e,scheduler:n};return new V((function(r){if(n)return n.schedule(ns,0,{args:t,subscriber:r,params:a});if(!i){i=new $e;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(1>=e.length?e[0]:e),i.complete()}]))}catch(e){Rh(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function ns(e){var t=this,n=e.args,r=e.subscriber,i=e.params;e=i.callbackFunc;var o=i.context,a=i.scheduler,s=i.subject;if(!s){s=i.subject=new $e,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(a.schedule(os,0,{value:1>=e.length?e[0]:e,subject:s}))};try{e.apply(o,n.concat([i]))}catch(e){s.error(e)}}this.add(s.subscribe(r))}function os(e){var t=e.subject;t.next(e.value),t.complete()}function Jl(e,t,n){if(t){if(!Tc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Jl(e,n).apply(void 0,r).pipe(Z((function(e){return Hb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new V((function(r){var o=i.context,a=i.subject;if(n)return n.schedule(ps,0,{params:i,subscriber:r,context:o});if(!a){a=i.subject=new $e;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(t=e.shift())?a.error(t):(a.next(1>=e.length?e[0]:e),a.complete())}]))}catch(e){Rh(a)?a.error(e):console.warn(e)}}return a.subscribe(r)}))}}function ps(e){var t=this,n=e.params,r=e.subscriber;e=e.context;var i=n.callbackFunc,o=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new $e,n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(n=e.shift())?t.add(a.schedule(Kl,0,{err:n,subject:s})):t.add(a.schedule(qs,0,{value:1>=e.length?e[0]:e,subject:s}))};try{i.apply(e,o.concat([n]))}catch(e){this.add(a.schedule(Kl,0,{err:e,subject:s}))}}this.add(s.subscribe(r))}function qs(e){var t=e.subject;t.next(e.value),t.complete()}function Kl(e){e.subject.error(e.err)}function Ll(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function Vh(e,t,n,r,i){if(void 0===i&&(i=new rs(e,n,r)),!i.closed)return t instanceof V?t.subscribe(i):af(t)(i)}function ss(e,t){return new V((function(n){var r=new Ka;return r.add(t.schedule((function(){var i=e[$d]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}function ts(e,t){return new V((function(n){var r=new Ka;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}function us(e,t){if(!e)throw Error("Iterable cannot be null");return new V((function(n){var r,i=new Ka;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Uc](),i.add(t.schedule((function(){if(!n.closed){try{var e=r.next(),t=e.value,i=e.done}catch(e){return void n.error(e)}i?n.complete():(n.next(t),this.schedule())}})))}))),i}))}function Ml(e,t){if(null!=e){if(e&&"function"==typeof e[$d])return ss(e,t);if(Ll(e))return ts(e,t);if(Nl(e))return Th(e,t);if(e&&"function"==typeof e[Uc]||"string"==typeof e)return us(e,t)}throw new TypeError((null!==e&&R(e)||e)+" is not observable")}function Ib(e,t){return t?Ml(e,t):e instanceof V?e:new V(af(e))}function fc(e,t){if(!t.closed)return e instanceof V?e.subscribe(t):af(e)(t)}function eb(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(eb((function(n,r){return Ib(e(n,r)).pipe(Z((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new vs(e,n))})}function Wh(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),eb(Sc,e)}function Ol(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Wh(1)(mb.apply(void 0,e))}function qd(e){return new V((function(t){try{var n=e()}catch(e){return void t.error(e)}return(n?Ib(n):Ye()).subscribe(t)}))}function Pl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Hb(n))return fg(n,null);if(Qh(n)&&Object.getPrototypeOf(n)===Object.prototype)return fg((e=Object.keys(n)).map((function(e){return n[e]})),e)}if("function"==typeof e[e.length-1]){var r=e.pop();return fg(e=1===e.length&&Hb(e[0])?e[0]:e,null).pipe(Z((function(e){return r.apply(void 0,e)})))}return fg(e,null)}function fg(e,t){return new V((function(n){var r=e.length;if(0===r)n.complete();else for(var i=Array(r),o=0,a=0,s=function(s){var u=Ib(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,a++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&c||(a===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u)}))}function fb(e,t,n,r){return Yd(n)&&(r=n,n=void 0),r?fb(e,t,n).pipe(Z((function(e){return Hb(e)?r.apply(void 0,e):r(e)}))):new V((function(r){Ql(e,t,(function(e){1<arguments.length?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function Ql(e,t,n,r,i){if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){e.addEventListener(t,n,i);var o=function(){return e.removeEventListener(t,n,i)}}else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,n),o=function(){return e.off(t,n)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,n),o=function(){return e.removeListener(t,n)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var a=0,s=e.length;a<s;a++)Ql(e[a],t,n,r,i)}r.add(o)}function Rl(e,t,n){return n?Rl(e,t).pipe(Z((function(e){return Hb(e)?n.apply(void 0,e):n(e)}))):new V((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{var i=e(r)}catch(e){return void n.error(e)}if(Yd(t))return function(){return t(r,i)}}))}function ws(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}try{var i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function Xh(e){return!Hb(e)&&0<=e-parseFloat(e)+1}function Sl(e,t){return void 0===e&&(e=0),void 0===t&&(t=Vc),(!Xh(e)||0>e)&&(e=0),t&&"function"==typeof t.schedule||(t=Vc),new V((function(n){return n.add(t.schedule(xs,e,{subscriber:n,counter:0,period:e})),n}))}function xs(e){var t=e.subscriber,n=e.counter;e=e.period,t.next(n),this.schedule({subscriber:t,counter:n+1,period:e},e)}function Tb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];t=Number.POSITIVE_INFINITY;var n=null,r=e[e.length-1];return Tc(r)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof V?e[0]:Wh(t)(Ze(e,n))}function Yh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return dc;var n=e[0],r=e.slice(1);return 1===e.length&&Hb(n)?Yh.apply(void 0,n):new V((function(e){var t=function(){return e.add(Yh.apply(void 0,r).subscribe(e))};return Ib(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function ys(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription;if(e=e.obj,!r.closed)if(n<t.length){var o=t[n];r.next([o,e[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:e}))}else r.complete()}function zs(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function nb(e,t){return function(n){return n.lift(new As(e,t))}}function ya(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Hb(e[0]))return e[0];e=e[0]}return Ze(e,void 0).lift(new Bs)}function Cs(e){var t=e.start,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function uc(e,t,n){void 0===e&&(e=0);var r=-1;return Xh(t)?r=1>Number(t)?1:Number(t):Tc(t)&&(n=t),Tc(n)||(n=Vc),new V((function(t){var i=Xh(e)?e:+e-n.now();return n.schedule(Ds,i,{index:0,period:r,subscriber:t})}))}function Ds(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Zh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof(t=e[e.length-1])&&e.pop(),Ze(e,void 0).lift(new Es(t))}function Ga(e){return function(t){var n=new Fs(e);return t=t.lift(n),n.caught=t}}function $h(e,t){return eb(e,t,1)}function Tl(e){return void 0===e&&(e=null),function(t){return t.lift(new Gs(e))}}function Wc(e,t){void 0===t&&(t=Vc);var n=e instanceof Date&&!isNaN(+e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new Hs(n,t))}}function Ul(e,t){return function(n){return n.lift(new Is(e,t))}}function rd(e){return void 0===e&&(e=Js),function(t){return t.lift(new Ks(e))}}function Js(){return new gg}function Pa(e){return function(t){return 0===e?Ye():t.lift(new Ls(e))}}function Vl(e,t){return t?function(n){return n.pipe(Vl((function(n,r){return Ib(e(n,r)).pipe(Z((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Ms(e))}}function hg(e){return function(t){return t.lift(new Ns(e))}}function X(e,t){var n=2<=arguments.length;return function(r){return r.pipe(e?nb((function(t,n){return e(t,n,r)})):Sc,Pa(1),n?Tl(t):rd((function(){return new gg})))}}function Os(){return function(e){return e.lift(new Ps)}}function Wl(e){return function(t){return 0===e?Ye():t.lift(new Qs(e))}}function bf(e){return function(t){return t.lift(new Rs(e))}}function ig(e,t){var n=!1;return 2<=arguments.length&&(n=!0),function(r){return r.lift(new Ss(e,t,n))}}function Xl(e,t){return 2<=arguments.length?function(n){return Sh(ig(e,t),Wl(1),Tl(t))(n)}:function(t){return Sh(ig((function(t,n,r){return e(t,n,r+1)})),Wl(1))(t)}}function Ts(e,t){return function(n){var r="function"==typeof e?e:function(){return e};if("function"==typeof t)return n.lift(new Us(r,t));var i=Object.create(n,Vs);return i.source=n,i.subjectFactory=r,i}}function ae(e){return function(t){return t.lift(new Ws(e,t))}}function Xs(){return new La}function be(){return function(e){return Fl()(Ts(Xs)(e))}}function Yl(e,t,n){var r=e&&"object"===R(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n};return function(e){return e.lift(Ys(r))}}function Ys(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=void 0===(r=e.windowTime)?Number.POSITIVE_INFINITY:r,a=e.refCount,s=e.scheduler,u=0,c=!1,l=!1;return function(e){if(u++,!t||c){c=!1;var r=(t=new ce(i,o,s)).subscribe(this);n=e.subscribe({next:function(e){t.next(e)},error:function(e){c=!0,t.error(e)},complete:function(){l=!0,n=void 0,t.complete()}})}else r=t.subscribe(this);this.add((function(){u--,r.unsubscribe(),n&&!l&&a&&0===u&&(n.unsubscribe(),t=n=void 0)}))}}function vc(e,t){return"function"==typeof t?function(n){return n.pipe(vc((function(n,r){return Ib(e(n,r)).pipe(Z((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Zs(e))}}function ob(e){return function(t){return t.lift(new $s(e))}}function at(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new bt(e,t))}}function Y(e,t,n){return function(r){return r.lift(new ct(e,t,n))}}function dt(e,t,n){return void 0===t&&(t=Vc),void 0===n&&(n=et),function(r){return r.lift(new ft(e,t,n.leading,n.trailing))}}function gt(e){e.subscriber.clearThrottle()}function ht(e,t,n){return void 0===n&&(n=Vc),function(r){var i=e instanceof Date&&!isNaN(+e),o=i?+e-n.now():Math.abs(e);return r.lift(new it(o,i,t,n))}}function Za(e,t){return void 0===t&&(t=Vc),ht(e,ba(new pb),t)}function jt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new kt(e,n))}}function Zl(e,t,n,r,i){e!==t&&$l(t,(function(o,a){if(i||(i=new Td),jb(o)){o=i;var s=ai(e,a),u=ai(t,a),c=o.get(u);if(c)bi(e,a,c);else{var l=void 0===(c=r?r(s,u,a+"",e,t,o):void 0);if(l){var d=Ya(u),f=!d&&Ve(u),p=!d&&!f&&Nh(u);c=u,d||f||p?Ya(s)?c=s:cc(s)&&sd(s)?c=Ih(s):f?(l=!1,c=ol(u,!0)):p?(l=!1,c=am(u,!0)):c=[]:bm(u)||cf(u)?(c=s,cf(s)?c=de(s,We(s)):jb(s)&&!ci(s)||(c=pl(u))):l=!1}l&&(o.set(u,c),Zl(c,u,n,r,o),o.delete(u)),bi(e,a,c)}}else void 0===(s=r?r(ai(e,a),o,a+"",e,t,i):void 0)&&(s=o),bi(e,a,s)}),We)}function lt(e){var t=1,n=di;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:n=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],n=2>=arguments.length?void 0:arguments[2]);var r=t||1;return function(t){return t.pipe(ig((function(t,i){var o=n.now(),a=o-e;if((t=t.filter((function(e){return e.until>a}))).length>=r){var s=t[t.length-1],u=t[0].until+e*Math.floor(t.length/r);t.push({delay:s.until<o?u-o:u-s.until,until:u,value:i})}else t.push({delay:0,until:o,value:i});return t}),[]),Z((function(e){return e[e.length-1]})),$h((function(e){var t=mb(e.value);return e.delay?t.pipe(Wc(e.delay,n)):t})))}}function mt(e,t){var n=(t=void 0===t?{protocols:cm,makeWebSocket:dm}:t).protocols,r=void 0===n?cm:n,i=void 0===(t=t.makeWebSocket)?dm:t;return new V((function(t){var n,o=new La,a=i(e,r),s=!1,u=!1,c=function(e){if(n)throw s=!0,e=Error("Web socket message factory function called more than once"),t.error(e),e;return n=e.subscribe((function(e){a.send(e)})),o};return a.onopen=function(){u?(s=!0,a.close()):t.next(c)},a.onmessage=function(e){o.next(e.data)},a.onerror=function(e){s=!0,t.error(Error(e.message))},a.onclose=function(e){s||(s=!0,u?(t.complete(),o.complete()):t.error(Error(1e3===e.code?"Normal closure":e.reason)))},function(){u=!0,n&&n.unsubscribe(),s||(s=!0,a.close())}}))}function jg(){this._listeners={}}function em(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function n(e,t,n){o[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],o[0]}function i(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],o[0]}var o=new Float32Array([-0]),a=new Uint8Array(o.buffer),s=128===a[3];e.writeFloatLE=s?t:n,e.writeFloatBE=s?n:t,e.readFloatLE=s?r:i,e.readFloatBE=s?i:r}():function(){function t(e,t,n,r){var i=0>t?1:0;if(i&&(t=-t),0===t)e(0<1/t?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(34028234663852886e22<t)e((i<<31|2139095040)>>>0,n,r);else if(11754943508222875e-54>t)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){return n=e(t,n),e=2*(n>>31)+1,t=n>>>23&255,n&=8388607,255===t?n?NaN:1/0*e:0===t?1401298464324817e-60*e*n:e*Math.pow(2,t-150)*(n+8388608)}e.writeFloatLE=t.bind(null,fm),e.writeFloatBE=t.bind(null,gm),e.readFloatLE=n.bind(null,hm),e.readFloatBE=n.bind(null,im)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],t[n+4]=a[4],t[n+5]=a[5],t[n+6]=a[6],t[n+7]=a[7]}function n(e,t,n){o[0]=e,t[n]=a[7],t[n+1]=a[6],t[n+2]=a[5],t[n+3]=a[4],t[n+4]=a[3],t[n+5]=a[2],t[n+6]=a[1],t[n+7]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],o[0]}function i(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],o[0]}var o=new Float64Array([-0]),a=new Uint8Array(o.buffer),s=128===a[7];e.writeDoubleLE=s?t:n,e.writeDoubleBE=s?n:t,e.readDoubleLE=s?r:i,e.readDoubleBE=s?i:r}():function(){function t(e,t,n,r,i,o){var a=0>r?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(0<1/r?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(17976931348623157e292<r)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else if(22250738585072014e-324>r)e((r/=5e-324)>>>0,i,o+t),e((a<<31|r/4294967296)>>>0,i,o+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(r*=Math.pow(2,-s))>>>0,i,o+t),e((a<<31|s+1023<<20|1048576*r&1048575)>>>0,i,o+n)}}function n(e,t,n,r,i){return t=e(r,i+t),r=e(r,i+n),e=2*(r>>31)+1,t=4294967296*(1048575&r)+t,2047===(n=r>>>20&2047)?t?NaN:1/0*e:0===n?5e-324*e*t:e*Math.pow(2,n-1075)*(t+4503599627370496)}e.writeDoubleLE=t.bind(null,fm,0,4),e.writeDoubleBE=t.bind(null,gm,4,0),e.readDoubleLE=n.bind(null,hm,0,4),e.readDoubleBE=n.bind(null,im,4,0)}(),e}function fm(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function gm(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function hm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function im(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function Ra(e,t){this.lo=e>>>0,this.hi=t>>>0}function df(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function ei(){}function nt(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function ha(){this.len=0,this.tail=this.head=new df(ei,0,0),this.states=null}function fi(e,t,n){t[n]=255&e}function gi(e,t){this.len=e,this.next=void 0,this.val=t}function hi(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo>>>=7;t[n++]=e.lo}function ii(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function gc(){ji.call(this)}function ot(e,t,n){40>e.length?T.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}function Ub(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Ha(e){this.buf=e,this.pos=0,this.len=e.length}function ki(){var e=new jm(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw Ub(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw Ub(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function kg(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function km(){if(this.pos+8>this.len)throw Ub(this,8);return new jm(kg(this.buf,this.pos+=4),kg(this.buf,this.pos+=4))}function td(e){li.call(this,e)}function ef(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");T.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}function ua(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function pt(e){try{var t=e.split(".").map((function(e){return Number(e)}))}catch(e){return!1}if(4!==t.length||0===t[0])return!1;for(e=0;e<t.length;e++){var n=t[e];if(!Number.isInteger(n)||0>n||255<n)return!1}return!0}function lm(e,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some((function(e){return 0===e.length||32<e.length})))throw new L("arguments is not valid",Fa);if(!ua(e))throw new L("ID is invalid",Fa)}function ff(e){var t=e.attributes,n=e.attrSizeMap,r=e.maxAttrsCount,i=e.maxAttrValueSize;if(e=e.maxTotalSize,!md(t))throw new L("attributes must be an object",Fa);if(Object.keys(t).length>r)throw new gb("Exceed the limit of ".concat(r," attributes"),ee);if(0===Object.keys(t).length)throw new L("The attributes is an empty object",Fa);var o=0,a=0;for(t=Object.entries(t);a<t.length;a++){var s=pa(t[a],2),u=s[1];s=new Blob([s[0]]).size;var c=new Blob([u]).size;if(0===s||32<s)throw new L("Invalid attribute key",Fa);if(c>i)throw new gb("Invalid attribute value, over the limit of ".concat(i," bytes"),ee);if("string"!=typeof u||0===u.length)throw new L("Invalid attribute value",Fa);o+=s,o+=c}if(o>e)throw new gb("The attributes size overflow",ee);if(void 0!==n){if(Object.keys(n).length>r)throw new gb("Exceed the limit of ".concat(r," attributes"),ee);for(o=r=0,n=Object.entries(n);o<n.length;o++){if(a=(t=pa(n[o],2))[1],0===(t=new Blob([t[0]]).size))throw new L("Invalid attribute key",Fa);if(a>i)throw new gb("Invalid attribute value, over the limit of ".concat(i," bytes"),ee);r+=t,r+=a}if(r>e)throw new gb("The attributes size overflow",ee)}}function mi(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+e}function lg(){var e=mi(0,4294967295),t=mi(1,4294967295);return new U(e,t,!0)}function Sa(e){return e.toString().padEnd(32,"0")}function mm(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function nm(e,t){return e=e.split(".").map((function(e){return Number(e)})),t=t.split(".").map((function(e){return Number(e)})),Math.sqrt(1e3*Math.pow(e[0]-t[0],2)+100*Math.pow(e[1]-t[1],2)+10*Math.pow(e[2]-t[2],2)+1*Math.pow(e[3]-t[3],2))}function om(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}function pm(e,t){t="".concat(e).concat(t||"");var n=qm.get(t)||1;return qm.set(t,n+1),"".concat(e).concat(n)}function rm(e,t){var n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,n="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==t?", server Code ".concat(t):""),e="string"==typeof e&&e?mg(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?mg(sm.apply(void 0,[e[0]].concat(I(e.slice(1))))):"","".concat(""===n?"":"".concat(n," - ")).concat(e)}function tm(e){return ni.apply(this,arguments)}function ni(){return(ni=K(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function um(e){return e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e)}function ng(e){var t=255&e,n=e>>8&255,r=e>>16&255;return"".concat(e>>24&255,".").concat(r,".").concat(n,".").concat(t)}function gf(e,t,n){return oi.apply(this,arguments)}function oi(){return(oi=K(w.mark((function e(t,n,r){var i,o,a,s,u,c,l,d,f,p,h,v,g,m,y,b,_,E,S,I,O,T,A,R,k,C;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.body,o=n.headers,a=void 0===o?{}:o,s=n.timeout,u=void 0===s?1e4:s,c=n.signal,l=n.withCredentials,d=void 0!==l&&l,f=(r||{}).useBinaryResponse,p=void 0!==f&&f,(h=new XMLHttpRequest).open("POST",t,!0),h.responseType=p?"arraybuffer":"text",h.withCredentials=d,h.timeout=u,v=i instanceof FormData,g=i instanceof Uint8Array,!(1<(m=Object.keys(a).filter((function(e){return"content-type"===e.toLowerCase()}))).length)){e.next=14;break}throw new RangeError("multiple content-type");case 14:0===m.length&&(g?a["Content-Type"]="application/octet-stream":v||(a["Content-Type"]="application/json"));case 15:if("setRequestHeader"in h){e.next=46;break}return h.abort(),e.next=19,fetch(t,{body:v||g?i:JSON.stringify(i),cache:"no-cache",credentials:d?"include":"same-origin",headers:a,method:"POST",mode:"cors",referrer:"no-referrer",signal:c});case 19:if(y=e.sent,!(200<=(b=y.status)&&300>b||304===b)){e.next=31;break}if(!p){e.next=27;break}return e.next=25,y.arrayBuffer();case 25:return _=e.sent,e.abrupt("return",{status:b,responseData:_});case 27:return e.next=29,y.text();case 29:return E=e.sent,e.abrupt("return",{status:b,responseText:E});case 31:return S=new ca(["Post XHR failure, status %d",b]),e.prev=32,e.next=35,y.text();case 35:throw I=e.sent,S.statusCode=b,S.message=I||"Request failed, status ".concat(b),S;case 41:throw e.prev=41,e.t0=e.catch(32),S.statusCode=b,S.message="Request failed, status ".concat(b),S;case 46:if(0!==Object.keys(a).length)for(O=0,T=Object.entries(a);O<T.length;O++)A=pa(T[O],2),R=A[0],k=A[1],h.setRequestHeader(R,k);return void 0!==c&&(C=function e(){h.abort(),c.removeEventListener("abort",e)},c.addEventListener("abort",C)),v||g?h.send(i):h.send(JSON.stringify(i)),e.abrupt("return",new Promise((function(e,t){h.onload=function(){var n=h.status;if(200<=n&&300>n||304===n)e(p?{status:n,responseData:h.response}:{status:n,responseText:h.responseText});else{var r=new ca(["Post XHR failure, status %d",n]);r.statusCode=n,r.message=h.response||"Request failed, status ".concat(h.status),t(r)}},h.ontimeout=function(e){t(new bb(["XHR request timed out after %d ms",u],{originalError:e}))},h.onerror=function(){var e=new ca(["Post XHR failure, status %d",h.status]);e.statusCode=h.status,e.message=h.response||"Request failed, status ".concat(h.status),t(e)},h.onabort=function(){try{t(new DOMException("The request aborted.","AbortError"))}catch(n){var e=Error("The request aborted.");e.name="AbortError",t(e)}}})));case 50:case"end":return e.stop()}}),e,null,[[32,41]])})))).apply(this,arguments)}function wm(e){return ui.apply(this,arguments)}function ui(){return(ui=K(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Image).src=t,e.abrupt("return",new Promise((function(e,t){n.onload=function(){e({width:n.width,height:n.height})},n.onerror=t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t){return vi.apply(this,arguments)}function vi(){return(vi=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l,d,f;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.thumbnailHeight,i=void 0===r?0:r,o=t.thumbnailWidth,a=void 0===o?0:o,s=t.width,u=void 0===s?0:s,c=t.height,l=void 0===c?0:c,d=t.thumbnail,f=[],"number"==typeof i&&"number"==typeof a&&"number"==typeof u&&"number"==typeof l){e.next=5;break}throw new L("Invalid message params",jf);case 5:return 0>=u&&0>=l&&f.push(wm(xm(n)).then((function(e){u=e.width,l=e.height}))),0>=a&&0>=i&&void 0!==d&&f.push(wi(d).then(function(){var e=K(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wm(xm(t));case 2:n=e.sent,a=n.width,i=n.height;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=9,Promise.all(f).catch((function(){}));case 9:return e.abrupt("return",{width:u,height:l,thumbnailWidth:a,thumbnailHeight:i});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ym(e,t){if(!md(e))throw new L("message object is not a plain object",t);if(void 0===e.messageType)if(e.rawMessage instanceof Uint8Array){if(e.messageType="RAW",void 0!==e.text)throw new L("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof e.text)throw new L("messageType is undefined",t);if(e.messageType="TEXT",void 0!==e.rawMessage)throw new L("Text messages cannot have rawMessage property",t)}}function pg(e){return xi.apply(this,arguments)}function xi(){return(xi=K(w.mark((function e(t){var n,r,i,o,a,s,u,c,l,d,f,p,h,v,g,m,y,b,_,E,S;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.peerId,i=t.toPeer,o=t.session,a=t.errorCodes,s=t.diff,u=t.logger,c=t.options,void 0!==o){e.next=3;break}throw new H("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(l=!1,"TEXT"!==n.messageType||!n.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!i){e.next=11;break}if(d=n.text.split("_"),f=pa(d,3),p=f[0],h=f[1],void 0!==f[2]&&ua(h)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===p){e.next=10;break}throw new L("Message is not valid",ge);case 10:l=!0;case 11:if(v=Date.now(),g=o.messageSentTimes.length-1,!((m=o.messageSentTimes[g])&&m+3e3<v)){e.next=18;break}o.messageSentTimes=[v],e.next=29;break;case 18:y=g;case 19:if(!(0<=y)){e.next=28;break}if(!(o.messageSentTimes[y]+3e3<v)){e.next=23;break}return o.messageSentTimes=o.messageSentTimes.slice(y+1,g+1),e.abrupt("break",28);case 23:if(!(180<=g-y+1)){e.next=25;break}throw new gb("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 25:y--,e.next=19;break;case 28:o.messageSentTimes.push(v);case 29:e.t0=n.messageType,e.next="TEXT"===e.t0?32:"RAW"===e.t0?37:"FILE"===e.t0||"IMAGE"===e.t0?39:40;break;case 32:if(!l){e.next=36;break}return b=n.text.split("_"),_=pa(b,3),E=_[1],S=_[2],u.info("[rtm-API] EndCall message send api is called"),e.abrupt("return",o.sendInvitationMessage({peerId:r,type:"CallCancel",extra:S,channelId:E,callId:"0"}));case 36:return e.abrupt("return",o.sendTextMessage(n.text,r,i,c,1e4-s));case 37:return void 0===n.description&&(n.description=""),e.abrupt("return",o.sendRawMessage(n.rawMessage,n.description,r,i,c,1e4-s));case 39:return e.abrupt("return",o.sendMediaMessage(n.messageType,n,r,i,c,1e4-s));case 40:throw new L("Invalid message type",ge);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.replace(/(https?:\/\/)?(www.)?/i,"");return t||(n=n.split(".").slice(e.length-2).join(".")),-1!==n.indexOf("/")?n.split("/")[0]:n}function qg(e,t){function n(n){if(void 0===e)return e;if(!Array.isArray(n)&&!md(n))return n;if(Array.isArray(n))return qg(n,t);var r={},i=0;for(n=Object.entries(n);i<n.length;i++){var o=pa(n[i],2),a=o[1];r[o[0]]=null==a?a:qg(a,t)}return rg(r,t)}return 2<arguments.length&&(t=Array.prototype.slice.call(arguments).slice(1)),Array.isArray(e)?e.map(n):n(e)}function zm(e){return Object.getOwnPropertyNames(e).forEach((function(t){"object"==R(t=e[t])&&null!==t&&zm(t)})),Object.freeze(e)}function na(e){return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function sg(e){return(new TextEncoder).encode(e).length}function Am(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e+=n[t].length;for(e=new Uint8Array(e),r=t=0;r<n.length;r++){var i=n[r];e.set(i,t),t+=i.length}return e}function Bm(e,t,n){var r=e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(e=null==r?void 0:r[1],r=null==r?void 0:r[2]){var i;for(r=r.substr(1).split("&"),i=0;i<r.length;i++)if(r[i].split("=")[0]==t){r[i]=t+"="+encodeURIComponent(n);break}return i==r.length&&r.push(t+"="+encodeURIComponent(n)),e+"?"+r.join("&")}return e+"?"+t+"="+encodeURIComponent(n)}function wi(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e=r.result||new ArrayBuffer(0);t(e)},r.onerror=n,r.readAsArrayBuffer(e)}))}function ut(e,t){e=e=[e],"string"==typeof(t=t||{})&&(t={type:t});try{var n=new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder);for(var r=0;r<e.length;r+=1)n.append(e[r]);n=n.getBlob(t.type)}return n}function Cm(e){var t=[];return function e(n){if(null===n||"object"!==R(n))return n;if(-1!==t.indexOf(n))return"[Circular]";if(t.push(n),"function"==typeof n.toJSON)try{var r=e(n.toJSON());return t.pop(),r}catch(e){return"[Throws: "+(e?e.message:"?")+"]"}return Array.isArray(n)?(r=n.map(e),t.pop(),r):(r=Object.keys(n).reduce((function(t,r){e:{if(vt.call(n,r))try{var i=n[r];break e}catch(e){i="[Throws: "+(e?e.message:"?")+"]";break e}i=n[r]}return t[r]=e(i),t}),{}),t.pop(),r)}(e)}function wt(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function tg(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}function ia(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(i));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return K(w.mark((function n(){var r,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,r):"Object"!==Object.prototype.toString.call(r).slice(8,-1)||md(r)?e.resultTracker("%s result is %o",t,r):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function xt(e,t){var n="".concat(e,"Uri");if("number"!=typeof(n=yi[n])||0===n)throw new TypeError("Got Unknown URI Name");return t=new(e=Dm[e])(t),t=e.encode(t).finish(),new yt({uri:n,data:t})}function cb(e,t,n,r){return zi.apply(this,arguments)}function zi(){return(zi=K(w.mark((function e(t,n,r,i){var o,a;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return o=zt[t].encode(n).finish(),a=function(){var e=K(w.mark((function e(n){var r,i,s=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(r=1<s.length&&void 0!==s[1]?s[1]:0))){e.next=3;break}return e.abrupt("return");case 3:return i=Bm(i="https://".concat(n,":6443/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),i=Bm(i,"id",At[t].toString()),e.next=8,gf(i,{body:o,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch((function(e){return a(n,r+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,a(r||"webcollector-rtm.agora.io");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),e.next=13,a(i||"webcollector-rtm.agoraio.cn");case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function db(e){return void 0===e?U.fromNumber(0):U.fromNumber(Date.now()-e)}function Bt(e){return btoa(String.fromCharCode.apply({},e.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map((function(e){return parseInt(e,16)})))).replace(/={1,2}$/,"")}function ug(e,t){return U.fromValue(e).eq(t)}function vg(e,t){var n=void 0===t?e.val:t,r=e.isBoolean;t=e.isNumber;var i=e.oneof,o=e.len;if(2!==[r,t,i].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==n&&(e=!1,void 0!==i&&(i=null==i?[]:Em(i,Rc(i)),Ct(i,ug).length===i.length&&void 0!==Dt(i,(function(e){return ug(n,e)}))&&(e=!0)),r=void 0!==r&&(0===n||1===n)&&1===o,t=void 0!==t&&n.toString(2).length<=o,!(e||r||t)))throw Error("invalid field value")}function Fm(e){return function(){var t=e();if(!t)throw new H("Client is not logged in. Cannot do the operation");return t}}var Ta="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wg=function(e){return e&&e.Math==Math&&e},B=wg("object"==typeof globalThis&&globalThis)||wg("object"==typeof window&&window)||wg("object"==typeof self&&self)||wg("object"==typeof Ta&&Ta)||function(){return this}()||Function("return this")(),O=function(e){try{return!!e()}catch(e){return!0}},ja=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Gm={}.propertyIsEnumerable,Hm=Object.getOwnPropertyDescriptor,kf=Hm&&!Gm.call({1:2},1)?function(e){return!!(e=Hm(this,e))&&e.enumerable}:Gm,Xc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Et={}.toString,Vb=function(e){return Et.call(e).slice(8,-1)},Ft="".split,lf=O((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==Vb(e)?Ft.call(e,""):Object(e)}:Object,hb=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},rb=function(e){return lf(hb(e))},ea=function(e){return"object"==typeof e?null!==e:"function"==typeof e},hc=function(e,t){if(!ea(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ea(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!ea(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!ea(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Gt={}.hasOwnProperty,P=function(e,t){return Gt.call(e,t)},he=B.document,xg=ea(he)&&ea(he.createElement),Im=!ja&&!O((function(){return 7!=Object.defineProperty(xg?he.createElement("div"):{},"a",{get:function(){return 7}}).a})),Jm=Object.getOwnPropertyDescriptor,Db={f:ja?Jm:function(e,t){if(e=rb(e),t=hc(t,!0),Im)try{return Jm(e,t)}catch(e){}if(P(e,t))return Xc(!kf.call(e,t),e[t])}},qa=function(e){if(!ea(e))throw TypeError(String(e)+" is not an object");return e},Km=Object.defineProperty,Ma={f:ja?Km:function(e,t,n){if(qa(e),t=hc(t,!0),qa(n),Im)try{return Km(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ia=ja?function(e,t,n){return Ma.f(e,t,Xc(1,n))}:function(e,t,n){return e[t]=n,e},Ai=function(e,t){try{Ia(B,e,t)}catch(n){B[e]=t}return t},ud=B["__core-js_shared__"]||Ai("__core-js_shared__",{}),Ht=Function.toString;"function"!=typeof ud.inspectSource&&(ud.inspectSource=function(e){return Ht.call(e)});var Bi=ud.inspectSource,Lm=B.WeakMap,It="function"==typeof Lm&&/native code/.test(Bi(Lm)),vd=Xa((function(e){(e.exports=function(e,t){return ud[e]||(ud[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),Jt=0,Kt=Math.random(),ie=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Jt+Kt).toString(36)},Mm=vd("keys"),yg=function(e){return Mm[e]||(Mm[e]=ie(e))},je={},Lt=B.WeakMap;if(It)var ke=ud.state||(ud.state=new Lt),Mt=ke.get,Nt=ke.has,Ot=ke.set,Ci=function(e,t){return t.facade=e,Ot.call(ke,e,t),t},zg=function(e){return Mt.call(ke,e)||{}},Di=function(e){return Nt.call(ke,e)};else{var mf=yg("state");je[mf]=!0,Ci=function(e,t){return t.facade=e,Ia(e,mf,t),t},zg=function(e){return P(e,mf)?e[mf]:{}},Di=function(e){return P(e,mf)}}var Ua={set:Ci,get:zg,has:Di,enforce:function(e){return Di(e)?zg(e):Ci(e,{})},getterFor:function(e){return function(t){var n;if(!ea(t)||(n=zg(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Va=Xa((function(e){var t=Ua.get,n=Ua.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable;if(o=!!o&&!!o.noTargetGet,"function"==typeof i){"string"!=typeof t||P(i,"name")||Ia(i,"name",t);var u=n(i);u.source||(u.source=r.join("string"==typeof t?t:""))}e===B?s?e[t]=i:Ai(t,i):(a?!o&&e[t]&&(s=!0):delete e[t],s?e[t]=i:Ia(e,t,i))})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Bi(this)}))})),Nm=function(e){return"function"==typeof e?e:void 0},Wb=function(e,t){return 2>arguments.length?Nm(B[e])||Nm(B[e]):B[e]&&B[e][t]||B[e]&&B[e][t]},Pt=Math.ceil,Qt=Math.floor,ic=function(e){return isNaN(e=+e)?0:(0<e?Qt:Pt)(e)},Rt=Math.min,za=function(e){return 0<e?Rt(ic(e),9007199254740991):0},St=Math.max,Tt=Math.min,xb=function(e,t){return 0>(e=ic(e))?St(e+t,0):Tt(e,t)},Om=function(e){return function(t,n,r){t=rb(t);var i=za(t.length);if(r=xb(r,i),e&&n!=n){for(;i>r;)if((n=t[r++])!=n)return!0}else for(;i>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},Pm=Om(!0),Ei=Om(!1),Qm=function(e,t){e=rb(e);var n,r=0,i=[];for(n in e)!P(je,n)&&P(e,n)&&i.push(n);for(;t.length>r;)P(e,n=t[r++])&&(~Ei(i,n)||i.push(n));return i},Ag="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ut=Ag.concat("length","prototype"),wd={f:Object.getOwnPropertyNames||function(e){return Qm(e,Ut)}},nf={f:Object.getOwnPropertySymbols},Rm=Wb("Reflect","ownKeys")||function(e){var t=wd.f(qa(e)),n=nf.f;return n?t.concat(n(e)):t},Sm=function(e,t){for(var n=Rm(t),r=Ma.f,i=Db.f,o=0;o<n.length;o++){var a=n[o];P(e,a)||r(e,a,i(t,a))}},Vt=/#|\.prototype\./,jc=function(e,t){return(e=Wt[Xt(e)])==Yt||e!=Zt&&("function"==typeof t?O(t):!!t)},Xt=jc.normalize=function(e){return String(e).replace(Vt,".").toLowerCase()},Wt=jc.data={},Zt=jc.NATIVE="N",Yt=jc.POLYFILL="P",$t=Db.f,N=function(e,t){var n,r,i,o=e.target,a=e.global,s=e.stat;if(r=a?B:s?B[o]||Ai(o,{}):(B[o]||{}).prototype)for(i in t){var u=t[i],c=e.noTargetGet?(n=$t(r,i))&&n.value:r[i];if(!(n=jc(a?i:o+(s?".":"#")+i,e.forced))&&void 0!==c){if(typeof u==typeof c)continue;Sm(u,c)}(e.sham||c&&c.sham)&&Ia(u,"sham",!0);try{Va(r,i,u,e)}catch(e){}}},le=function(e,t){var n=[][e];return!!n&&O((function(){n.call(null,t||function(){throw 1},1)}))},au=[].join,bu=lf!=Object,cu=le("join",",");N({target:"Array",proto:!0,forced:bu||!cu},{join:function(e){return au.call(rb(this),void 0===e?",":e)}}),N({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),N({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),B.Number.isNaN;var wc=B.Promise,of=function(e,t,n){for(var r in t)Va(e,r,t[r],n);return e},xc=!!Object.getOwnPropertySymbols&&!O((function(){return!String(Symbol())})),Tm=xc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Bg=vd("wks"),pf=B.Symbol,du=Tm?pf:pf&&pf.withoutSetter||ie,oa=function(e){return P(Bg,e)||(xc&&P(pf,e)?Bg[e]=pf[e]:Bg[e]=du("Symbol."+e)),Bg[e]},eu=Ma.f,Um=oa("toStringTag"),yc=function(e,t,n){e&&!P(e=n?e:e.prototype,Um)&&eu(e,Um,{configurable:!0,value:t})},Vm=oa("species"),qf=function(e){e=Wb(e);var t=Ma.f;ja&&e&&!e[Vm]&&t(e,Vm,{configurable:!0,get:function(){return this}})},yb=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},zc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},me={},fu=oa("iterator"),gu=Array.prototype,Fi=function(e){return void 0!==e&&(me.Array===e||gu[fu]===e)},ne=function(e,t,n){if(yb(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},hu=oa("toStringTag"),Wm={};Wm[hu]="z";var Gi="[object z]"===String(Wm),iu=oa("toStringTag"),ju="Arguments"==Vb(function(){return arguments}()),rf=Gi?Vb:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var i=e=Object(e);try{r=i[iu];break e}catch(e){}r=void 0}r="string"==typeof(n=r)?n:ju?Vb(e):"Object"==(t=Vb(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},ku=oa("iterator"),Hi=function(e){if(null!=e)return e[ku]||e["@@iterator"]||me[rf(e)]},Ii=function(e){var t=e.return;if(void 0!==t)return qa(t.call(e)).value},sf=function(e,t){this.stopped=e,this.result=t},Cg=function(e,t,n){var r,i=!(!n||!n.AS_ENTRIES),o=!(!n||!n.IS_ITERATOR),a=!(!n||!n.INTERRUPTED),s=ne(t,n&&n.that,1+i+a),u=function(e){return c&&Ii(c),new sf(!0,e)};if(t=function(e){return i?(qa(e),a?s(e[0],e[1],u):s(e[0],e[1])):a?s(e,u):s(e)},o)var c=e;else{if("function"!=typeof(o=Hi(e)))throw TypeError("Target is not iterable");if(Fi(o)){for(o=0,n=za(e.length);n>o;o++)if((r=t(e[o]))&&r instanceof sf)return r;return new sf(!1)}c=o.call(e)}for(e=c.next;!(o=e.call(c)).done;){try{r=t(o.value)}catch(e){throw Ii(c),e}if("object"==typeof r&&r&&r instanceof sf)return r}return new sf(!1)},Xm=oa("iterator"),Ym=!1;try{var lu=0,Zm={next:function(){return{done:!!lu++}},return:function(){Ym=!0}};Zm[Xm]=function(){return this},Array.from(Zm,(function(){throw 2}))}catch(c){}var Dg=function(e,t){if(!t&&!Ym)return!1;var n=!1;try{(t={})[Xm]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e){}return n},mu=oa("species"),Yc=function(e,t){var n;return void 0===(e=qa(e).constructor)||null==(n=qa(e)[mu])?t:yb(n)},Ji=Wb("document","documentElement"),oe=Wb("navigator","userAgent")||"",$m=/(iphone|ipod|ipad).*applewebkit/i.test(oe),kc="process"==Vb(B.process),Eg=B.location,Ki=B.setImmediate,an=B.clearImmediate,nu=B.process,bn=B.MessageChannel,Li=B.Dispatch,Mi=0,tf={},Ni=function(e){if(tf.hasOwnProperty(e)){var t=tf[e];delete tf[e],t()}},Oi=function(e){return function(){Ni(e)}},cn=function(e){Ni(e.data)},dn=function(e){B.postMessage(e+"",Eg.protocol+"//"+Eg.host)};if(!Ki||!an)if(Ki=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return tf[++Mi]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},uf(Mi),Mi},an=function(e){delete tf[e]},kc)var uf=function(e){nu.nextTick(Oi(e))};else if(Li&&Li.now)uf=function(e){Li.now(Oi(e))};else if(bn&&!$m){var en=new bn,fn=en.port2;en.port1.onmessage=cn,uf=ne(fn.postMessage,fn,1)}else B.addEventListener&&"function"==typeof postMessage&&!B.importScripts&&Eg&&"file:"!==Eg.protocol&&!O(dn)?(uf=dn,B.addEventListener("message",cn,!1)):uf="onreadystatechange"in(xg?he.createElement("script"):{})?function(e){Ji.appendChild(xg?he.createElement("script"):{}).onreadystatechange=function(){Ji.removeChild(this),Ni(e)}}:function(e){setTimeout(Oi(e),0)};var Pi=Ki,ou=/web0s(?!.*chrome)/i.test(oe),pu=Db.f,gn=B.MutationObserver||B.WebKitMutationObserver,hn=B.document,jn=B.process,Qi=B.Promise,kn=pu(B,"queueMicrotask"),ln=kn&&kn.value,xd,vf;if(!ln){var Gg=function(){var e;for(kc&&(e=jn.domain)&&e.exit();xd;){var t=xd.fn;xd=xd.next;try{t()}catch(e){throw xd?Fg():vf=void 0,e}}vf=void 0,e&&e.enter()};if($m||kc||ou||!gn||!hn)if(Qi&&Qi.resolve)var mn=Qi.resolve(void 0),qu=mn.then,Fg=function(){qu.call(mn,Gg)};else Fg=kc?function(){jn.nextTick(Gg)}:function(){Pi.call(B,Gg)};else{var nn=!0,on=hn.createTextNode("");new gn(Gg).observe(on,{characterData:!0}),Fg=function(){on.data=nn=!nn}}}var pn=ln||function(e){e={fn:e,next:void 0},vf&&(vf.next=e),xd||(xd=e,Fg()),vf=e},ru=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=yb(t),this.reject=yb(n)},Ri={f:function(e){return new ru(e)}},Hg=function(e,t){return qa(e),ea(t)&&t.constructor===e?t:((0,(e=Ri.f(e)).resolve)(t),e.promise)},su=function(e,t){var n=B.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},Si=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},qn=B.process,rn=qn&&qn.versions,sn=rn&&rn.v8;if(sn)var yd=sn.split("."),Ti=yd[0]+yd[1];else oe&&(yd=oe.match(/Edge\/(\d+)/),(!yd||74<=yd[1])&&(yd=oe.match(/Chrome\/(\d+)/))&&(Ti=yd[1]));var pe=Ti&&+Ti,tu=oa("species"),tn=Ua.get,uu=Ua.set,vu=Ua.getterFor("Promise"),_sb=wc,un=B.TypeError,Ui=B.document,Vi=B.process,vn=Wb("fetch"),qe=Ri.f,wu=qe,xu=!!(Ui&&Ui.createEvent&&B.dispatchEvent),wn="function"==typeof PromiseRejectionEvent,wf=jc("Promise",(function(){if(Bi(_sb)===String(_sb)&&(66===pe||!kc&&!wn))return!0;if(51<=pe&&/native code/.test(_sb))return!1;var e=_sb.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[tu]=t,!(e.then((function(){}))instanceof t)})),yu=wf||!Dg((function(e){_sb.all(e).catch((function(){}))})),xn=function(e){var t;return!(!ea(e)||"function"!=typeof(t=e.then))&&t},Wi=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;pn((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s=n[o++],u=i?s.ok:s.fail,c=s.resolve,l=s.reject,d=s.domain;try{if(u){if(i||(2===e.rejection&&zu(e),e.rejection=1),!0===u)var f=r;else if(d&&d.enter(),f=u(r),d){d.exit();var p=!0}f===s.promise?l(un("Promise-chain cycle")):(a=xn(f))?a.call(f,c,l):c(f)}else l(r)}catch(e){d&&!p&&d.exit(),l(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Au(e)}))}},yn=function(e,t,n){var r;if(xu){var i=Ui.createEvent("Event");i.promise=t,i.reason=n,i.initEvent(e,!1,!0),B.dispatchEvent(i)}else i={promise:t,reason:n};!wn&&(r=B["on"+e])?r(i):"unhandledrejection"===e&&su("Unhandled promise rejection",n)},Au=function(e){Pi.call(B,(function(){var t=e.facade,n=e.value;if(1!==e.rejection&&!e.parent){var r=Si((function(){kc?Vi.emit("unhandledRejection",n,t):yn("unhandledrejection",t,n)}));if(e.rejection=kc||1!==e.rejection&&!e.parent?2:1,r.error)throw r.value}}))},zu=function(e){Pi.call(B,(function(){var t=e.facade;kc?Vi.emit("rejectionHandled",t):yn("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},se=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Wi(e,!0))},Xi=function e(t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===n)throw un("Promise can't be resolved itself");var i=xn(n);i?pn((function(){var r={done:!1};try{i.call(n,re(e,r,t),re(se,r,t))}catch(n){se(r,n,t)}})):(t.value=n,t.state=1,Wi(t,!1))}catch(n){se({done:!1},n,t)}}};if(wf){_sb=function(e){zc(this,_sb,"Promise"),yb(e),Yi.call(this);var t=tn(this);try{e(re(Xi,t),re(se,t))}catch(e){se(t,e)}};var Yi=function(e){uu(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};Yi.prototype=of(_sb.prototype,{then:function(e,t){var n=vu(this),r=qe(Yc(this,_sb));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=kc?Vi.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Wi(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}});var Bu=function(){var e=new Yi,t=tn(e);this.promise=e,this.resolve=re(Xi,t),this.reject=re(se,t)};if(Ri.f=qe=function(e){return e===_sb||e===Cu?new Bu(e):wu(e)},"function"==typeof wc){var Du=wc.prototype.then;Va(wc.prototype,"then",(function(e,t){var n=this;return new _sb((function(e,t){Du.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof vn&&N({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Hg(_sb,vn.apply(B,arguments))}})}}N({global:!0,wrap:!0,forced:wf},{Promise:_sb}),yc(_sb,"Promise",!1),qf("Promise");var Cu=Wb("Promise");N({target:"Promise",stat:!0,forced:wf},{reject:function(e){var t=qe(this);return t.reject.call(void 0,e),t.promise}}),N({target:"Promise",stat:!0,forced:wf},{resolve:function(e){return Hg(this,e)}}),N({target:"Promise",stat:!0,forced:yu},{all:function(e){var t=this,n=qe(t),r=n.resolve,i=n.reject,o=Si((function(){var n=yb(t.resolve),o=[],a=0,s=1;Cg(e,(function(e){var u=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=qe(t),r=n.reject,i=Si((function(){var i=yb(t.resolve);Cg(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Eu=Gi?{}.toString:function(){return"[object "+rf(this)+"]"};Gi||Va(Object.prototype,"toString",Eu,{unsafe:!0});var zn=[].indexOf,An=!!zn&&0>1/[1].indexOf(1,-0),Fu=le("indexOf");N({target:"Array",proto:!0,forced:An||!Fu},{indexOf:function(e){return An?zn.apply(this,arguments)||0:Ei(this,e,1<arguments.length?arguments[1]:void 0)}});var Zi=function(){var e=qa(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Ig=O((function(){var e=RegExp("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Gu=O((function(){var e=RegExp("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Jg=RegExp.prototype.exec,Hu=String.prototype.replace,Bn=Jg,$i=(c=/a/,a=/b*/g,Jg.call(c,"a"),Jg.call(a,"a"),0!==c.lastIndex||0!==a.lastIndex),Cn=Ig||Gu,aj=void 0!==/()??/.exec("")[1],c,a;($i||aj||Cn)&&(Bn=function(e){var t,n=Cn&&this.sticky,r=Zi.call(this),i=this.source,o=0,a=e;if(n){-1===(r=r.replace("y","")).indexOf("g")&&(r+="g"),a=String(e).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(i="(?: "+i+")",a=" "+a,o++);var s=new RegExp("^(?:"+i+")",r)}if(aj&&(s=new RegExp("^"+i+"$(?!\\s)",r)),$i)var u=this.lastIndex;var c=Jg.call(n?s:this,a);return n?c?(c.input=c.input.slice(o),c[0]=c[0].slice(o),c.index=this.lastIndex,this.lastIndex+=c[0].length):this.lastIndex=0:$i&&c&&(this.lastIndex=this.global?c.index+c[0].length:u),aj&&c&&1<c.length&&Hu.call(c[0],s,(function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(c[t]=void 0)})),c});var xf=Bn;N({target:"RegExp",proto:!0,forced:/./.exec!==xf},{exec:xf});var Iu=oa("species"),Ju=!O((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Dn="$0"==="a".replace(/./,"$0"),En=oa("replace"),Fn=!!/./[En]&&""===/./[En]("a","$0"),Ku=!O((function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]})),Kg=function(e,t,n,r){var i=oa(e),o=!O((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!O((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[Iu]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||"replace"===e&&(!Ju||!Dn||Fn)||"split"===e&&!Ku){var s=/./[i],u=(n=n(i,""[e],(function(e,t,n,r,i){return t.exec===xf?o&&!i?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Dn,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Fn}))[1];Va(String.prototype,e,n[0]),Va(RegExp.prototype,i,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}r&&Ia(RegExp.prototype[i],"sham",!0)},Gn=function(e){return function(t,n){t=String(hb(t)),n=ic(n);var r,i=t.length;if(0>n||n>=i)return e?"":void 0;var o=t.charCodeAt(n);return 55296>o||56319<o||n+1===i||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):o:e?t.slice(n,n+2):r-56320+(o-55296<<10)+65536}};Gn(!1);var Hn=Gn(!0),bj=function(e,t,n){return t+(n?Hn(e,t).length:1)},Wa=function(e){return Object(hb(e))},Lu=Math.floor,Mu="".replace,Nu=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ou=/\$([$&'`]|\d\d?)/g,Pu=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,u=Ou;return void 0!==i&&(i=Wa(i),u=Nu),Mu.call(o,u,(function(o,u){switch(u.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":o=i[u.slice(1,-1)];break;default:var c=+u;if(0===c)return o;if(c>s)return 0===(c=Lu(c/10))?o:c<=s?void 0===r[c-1]?u.charAt(1):r[c-1]+u.charAt(1):o;o=r[c-1]}return void 0===o?"":o}))},te=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(e=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==Vb(e))throw TypeError("RegExp#exec called on incompatible receiver");return xf.call(e,t)},Qu=Math.max,Ru=Math.min,Su=function(e){return void 0===e?e:String(e)};Kg("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=hb(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(t,e,this,r);if(s.done)return s.value}var u=qa(e);e=String(this),(s="function"==typeof r)||(r=String(r));var c=u.global;if(c){var l=u.unicode;u.lastIndex=0}for(var d=[];;){var f=te(u,e);if(null===f)break;if(d.push(f),!c)break;""===String(f[0])&&(u.lastIndex=bj(e,za(u.lastIndex),l))}for(l="",c=u=0;c<d.length;c++){f=d[c];for(var p=String(f[0]),h=Qu(Ru(ic(f.index),e.length),0),v=[],g=1;g<f.length;g++)v.push(Su(f[g]));f=f.groups,s?(v=[p].concat(v,h,e),void 0!==f&&v.push(f),f=String(r.apply(void 0,v))):f=Pu(p,e,h,v,f,r),h>=u&&(l+=e.slice(u,h)+f,u=h+p.length)}return l+e.slice(u)}]}));var zd=Array.isArray||function(e){return"Array"==Vb(e)},ue=function(e,t,n){(t=hc(t))in e?Ma.f(e,t,Xc(0,n)):e[t]=n},Tu=oa("species"),yf=function(e){return 51<=pe||!O((function(){var t=[];return(t.constructor={})[Tu]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Uu=yf("slice"),Vu=oa("species"),Wu=[].slice,Xu=Math.max;N({target:"Array",proto:!0,forced:!Uu},{slice:function(e,t){var n=rb(this),r=za(n.length);if(e=xb(e,r),t=xb(void 0===t?r:t,r),zd(n)){var i=n.constructor;if("function"!=typeof i||i!==Array&&!zd(i.prototype)?ea(i)&&null===(i=i[Vu])&&(i=void 0):i=void 0,i===Array||void 0===i)return Wu.call(n,e,t)}for(i=new(void 0===i?Array:i)(Xu(t-e,0)),r=0;e<t;e++,r++)e in n&&ue(i,r,n[e]);return i.length=r,i}});var In="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Jn=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Kn=yg("IE_PROTO"),Yu=Object.prototype,Rb=Jn?Object.getPrototypeOf:function(e){return e=Wa(e),P(e,Kn)?e[Kn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Yu:null},$a=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={};try{var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;n.call(t,[]),e=t instanceof Array}catch(e){}return function(t,r){if(qa(t),!ea(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return e?n.call(t,r):t.__proto__=r,t}}():void 0),Zu=Ma.f,zf=B.Int8Array,cj=zf&&zf.prototype,Ln=B.Uint8ClampedArray,Mn=Ln&&Ln.prototype,Ac=zf&&Rb(zf),Xb=cj&&Rb(cj),Nn=Object.prototype,On=Nn.isPrototypeOf,Pn=oa("toStringTag"),dj=ie("TYPED_ARRAY_TAG"),Bc=In&&!!$a&&"Opera"!==rf(B.opera),Qn=!1,zb,lc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$u={BigInt64Array:8,BigUint64Array:8},Lg=function(e){return!!ea(e)&&(e=rf(e),P(lc,e)||P($u,e))};for(zb in lc)B[zb]||(Bc=!1);if((!Bc||"function"!=typeof Ac||Ac===Function.prototype)&&(Ac=function(){throw TypeError("Incorrect invocation")},Bc))for(zb in lc)B[zb]&&$a(B[zb],Ac);if((!Bc||!Xb||Xb===Nn)&&(Xb=Ac.prototype,Bc))for(zb in lc)B[zb]&&$a(B[zb].prototype,Xb);if(Bc&&Rb(Mn)!==Xb&&$a(Mn,Xb),ja&&!P(Xb,Pn))for(zb in Qn=!0,Zu(Xb,Pn,{get:function(){return ea(this)?this[dj]:void 0}}),lc)B[zb]&&Ia(B[zb],dj,zb);var Af=Bc,Rn=Qn&&dj,Aa=function(e){if(Lg(e))return e;throw TypeError("Target is not a typed array")},ve=function(e){if($a){if(On.call(Ac,e))return e}else for(var t in lc)if(P(lc,zb)){var n=B[t];if(n&&(e===n||On.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},va=function(e,t,n){if(ja){if(n)for(var r in lc){var i=B[r];i&&P(i.prototype,e)&&delete i.prototype[e]}Xb[e]&&!n||Va(Xb,e,n?t:Bc&&cj[e]||t)}},Sn=function(e,t,n){var r,i;if(ja){if($a){if(n)for(r in lc)(i=B[r])&&P(i,e)&&delete i[e];if(Ac[e]&&!n)return;try{return Va(Ac,e,n?t:Bc&&zf[e]||t)}catch(e){}}for(r in lc)!(i=B[r])||i[e]&&!n||Va(i,e,t)}},Tn=Ac,Bf=Xb,av=B.ArrayBuffer,Ad=B.Int8Array,ej=!Af||!O((function(){Ad(1)}))||!O((function(){new Ad(-1)}))||!Dg((function(e){new Ad,new Ad(null),new Ad(1.5),new Ad(e)}),!0)||O((function(){return 1!==new Ad(new av(2),1,void 0).length})),we=function(e){if(void 0===e)return 0;e=ic(e);var t=za(e);if(e!==t)throw RangeError("Wrong length or index");return t},bv=Math.abs,Cc=Math.pow,cv=Math.floor,dv=Math.log,ev=Math.LN2,fj=function(e){var t=Wa(this),n=za(t.length),r=arguments.length,i=xb(1<r?arguments[1]:void 0,n);for(n=void 0===(r=2<r?arguments[2]:void 0)?n:xb(r,n);n>i;)t[i++]=e;return t},fv=wd.f,gv=Ma.f,xe=Ua.get,Un=Ua.set,Yb=B.ArrayBuffer,_Ab2=Yb,_Zb=B.DataView,Mg=_Zb&&_Zb.prototype,Vn=Object.prototype,Ng=B.RangeError,Wn=function(e,t,n){var r,i=Array(n),o=(1<<(n=8*n-t-1))-1,a=o>>1,s=23===t?Cc(2,-24)-Cc(2,-77):0,u=0>e||0===e&&0>1/e?1:0,c=0;if((e=bv(e))!=e||1/0===e){e=e!=e?1:0;var l=o}else l=cv(dv(e)/ev),1>e*(r=Cc(2,-l))&&(l--,r*=2),2<=(e=1<=l+a?e+s/r:e+s*Cc(2,1-a))*r&&(l++,r/=2),l+a>=o?(e=0,l=o):1<=l+a?(e=(e*r-1)*Cc(2,t),l+=a):(e=e*Cc(2,a-1)*Cc(2,t),l=0);for(;8<=t;i[c++]=255&e,e/=256,t-=8);for(l=l<<t|e,n+=t;0<n;i[c++]=255&l,l/=256,n-=8);return i[--c]|=128*u,i},Xn=function(e,t){var n=e.length,r=8*n-t-1,i=(1<<r)-1,o=i>>1;r-=7,--n;var a=e[n--],s=127&a;for(a>>=7;0<r;s=256*s+e[n],n--,r-=8);var u=s&(1<<-r)-1;for(s>>=-r,r+=t;0<r;u=256*u+e[n],n--,r-=8);if(0===s)s=1-o;else{if(s===i)return u?NaN:a?-1/0:1/0;u+=Cc(2,t),s-=o}return(a?-1:1)*u*Cc(2,s-t)},Yn=function(e){return[255&e]},Zn=function(e){return[255&e,e>>8&255]},$n=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},ao=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},hv=function(e){return Wn(e,23,4)},iv=function(e){return Wn(e,52,8)},Og=function(e,t){gv(e.prototype,t,{get:function(){return xe(this)[t]}})},Zc=function(e,t,n,r){n=we(n);var i=xe(e);if(n+t>i.byteLength)throw Ng("Wrong index");return e=xe(i.buffer).bytes,n+=i.byteOffset,t=e.slice(n,n+t),r?t:t.reverse()},$c=function(e,t,n,r,i,o){n=we(n);var a=xe(e);if(n+t>a.byteLength)throw Ng("Wrong index");for(e=xe(a.buffer).bytes,n+=a.byteOffset,r=r(+i),i=0;i<t;i++)e[n+i]=r[o?i:t-i-1]};if(In){if(!O((function(){Yb(1)}))||!O((function(){new Yb(-1)}))||O((function(){return new Yb,new Yb(1.5),new Yb(NaN),"ArrayBuffer"!=Yb.name}))){_Ab2=function(e){return zc(this,_Ab2),new Yb(we(e))};for(var jv=_Ab2.prototype=Yb.prototype,bo=fv(Yb),co=0,gj;bo.length>co;)(gj=bo[co++])in _Ab2||Ia(_Ab2,gj,Yb[gj]);jv.constructor=_Ab2}$a&&Rb(Mg)!==Vn&&$a(Mg,Vn);var Pg=new _Zb(new _Ab2(2)),eo=Mg.setInt8;Pg.setInt8(0,2147483648),Pg.setInt8(1,2147483649),!Pg.getInt8(0)&&Pg.getInt8(1)||of(Mg,{setInt8:function(e,t){eo.call(this,e,t<<24>>24)},setUint8:function(e,t){eo.call(this,e,t<<24>>24)}},{unsafe:!0})}else _Ab2=function(e){zc(this,_Ab2,"ArrayBuffer"),e=we(e),Un(this,{bytes:fj.call(Array(e),0),byteLength:e}),ja||(this.byteLength=e)},_Zb=function(e,t,n){zc(this,_Zb,"DataView"),zc(e,_Ab2,"DataView");var r=xe(e).byteLength;if(0>(t=ic(t))||t>r)throw Ng("Wrong offset");if(t+(n=void 0===n?r-t:za(n))>r)throw Ng("Wrong length");Un(this,{buffer:e,byteLength:n,byteOffset:t}),ja||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},ja&&(Og(_Ab2,"byteLength"),Og(_Zb,"buffer"),Og(_Zb,"byteLength"),Og(_Zb,"byteOffset")),of(_Zb.prototype,{getInt8:function(e){return Zc(this,1,e)[0]<<24>>24},getUint8:function(e){return Zc(this,1,e)[0]},getInt16:function(e){var t=Zc(this,2,e,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Zc(this,2,e,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return ao(Zc(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return ao(Zc(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return Xn(Zc(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return Xn(Zc(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){$c(this,1,e,Yn,t)},setUint8:function(e,t){$c(this,1,e,Yn,t)},setInt16:function(e,t){$c(this,2,e,Zn,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){$c(this,2,e,Zn,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){$c(this,4,e,$n,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){$c(this,4,e,$n,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){$c(this,4,e,hv,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){$c(this,8,e,iv,t,2<arguments.length?arguments[2]:void 0)}});yc(_Ab2,"ArrayBuffer"),yc(_Zb,"DataView");var Cf={ArrayBuffer:_Ab2,DataView:_Zb},Qg=function(e,t){if(0>(e=ic(e)))throw RangeError("The argument can't be less than 0");if(e%t)throw RangeError("Wrong offset");return e},Dc=Object.keys||function(e){return Qm(e,Ag)},kv=ja?Object.defineProperties:function(e,t){qa(e);for(var n,r=Dc(t),i=r.length,o=0;i>o;)Ma.f(e,n=r[o++],t[n]);return e},fo=yg("IE_PROTO"),hj=function(){},ij,_Rg=function(){try{ij=document.domain&&new ActiveXObject("htmlfile")}catch(e){}if(ij){var e=ij;e.write("<script><\/script>"),e.close(),e=e.parentWindow.Object}else(e=xg?he.createElement("iframe"):{}).style.display="none",Ji.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),e=e.F;for(_Rg=e,e=Ag.length;e--;)delete _Rg.prototype[Ag[e]];return _Rg()};je[fo]=!0;var $b=Object.create||function(e,t){if(null!==e){hj.prototype=qa(e);var n=new hj;hj.prototype=null,n[fo]=e}else n=_Rg();return void 0===t?n:kv(n,t)},jj=function(e){var t=Wa(e),n=arguments.length,r=1<n?arguments[1]:void 0,i=void 0!==r,o=Hi(t);if(null!=o&&!Fi(o)){var a=o.call(t),s=a.next;for(t=[];!(o=s.call(a)).done;)t.push(o.value)}for(i&&2<n&&(r=ne(r,arguments[2],2)),o=za(t.length),a=new(ve(this))(o),n=0;o>n;n++)a[n]=i?r(t[n],n):t[n];return a},lv=oa("species"),kj=function(e,t){if(zd(e)){var n=e.constructor;"function"!=typeof n||n!==Array&&!zd(n.prototype)?ea(n)&&null===(n=n[lv])&&(n=void 0):n=void 0}return new(void 0===n?Array:n)(0===t?0:t)},go=[].push,ad=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(u,c,l,d){var f=Wa(u),p=lf(f);c=ne(c,l,3),l=za(p.length);var h,v=0;for(d=d||kj,u=t?d(u,l):n||a?d(u,0):void 0;l>v;v++)if((s||v in p)&&(h=c(d=p[v],v,f),e))if(t)u[v]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:go.call(u,d)}else switch(e){case 4:return!1;case 7:go.call(u,d)}return o?-1:r||i?i:u}},Bd=ad(0),ho=ad(1),io=ad(2),mv=ad(3),nv=ad(4),ov=ad(5),jo=ad(6);ad(7);var Sg=function(e,t,n){var r,i;return $a&&"function"==typeof(r=t.constructor)&&r!==n&&ea(i=r.prototype)&&i!==n.prototype&&$a(e,i),e},Df=Xa((function(e){var t=wd.f,n=Ua.get,r=Ua.set,i=Ma.f,o=Db.f,a=Math.round,s=B.RangeError,u=Cf.ArrayBuffer,c=Cf.DataView,l=function(e,t){var n=0,r=t.length;for(e=new(ve(e))(r);r>n;)e[n]=t[n++];return e},d=function(e,t){i(e,t,{get:function(){return n(this)[t]}})},f=function(e){var t;return e instanceof u||"ArrayBuffer"==(t=rf(e))||"SharedArrayBuffer"==t},p=function(e,t){return Lg(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},h=function(e,t){return p(e,t=hc(t,!0))?Xc(2,e[t]):o(e,t)},v=function(e,t,n){return!(p(e,t=hc(t,!0))&&ea(n)&&P(n,"value"))||P(n,"get")||P(n,"set")||n.configurable||P(n,"writable")&&!n.writable||P(n,"enumerable")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};ja?(Af||(Db.f=h,Ma.f=v,d(Bf,"buffer"),d(Bf,"byteOffset"),d(Bf,"byteLength"),d(Bf,"length")),N({target:"Object",stat:!0,forced:!Af},{getOwnPropertyDescriptor:h,defineProperty:v}),e.exports=function(e,o,d){var p=e.match(/\d+$/)[0]/8,h=e+(d?"Clamped":"")+"Array",v="get"+e,g="set"+e,m=B[h],y=m;e=y&&y.prototype;var b={},_=function(e,t){i(e,t,{get:function(){var e=n(this);return e.view[v](t*p+e.byteOffset,!0)},set:function(e){var r=n(this);d&&(e=0>(e=a(e))?0:255<e?255:255&e),r.view[g](t*p+r.byteOffset,e,!0)},enumerable:!0})};Af?ej&&(y=o((function(e,t,n,r){return zc(e,y,h),Sg(ea(t)?f(t)?void 0!==r?new m(t,Qg(n,p),r):void 0!==n?new m(t,Qg(n,p)):new m(t):Lg(t)?l(y,t):jj.call(y,t):new m(we(t)),e,y)})),$a&&$a(y,Tn),Bd(t(m),(function(e){e in y||Ia(y,e,m[e])})),y.prototype=e):(y=o((function(e,t,n,i){zc(e,y,h);var o=0,a=0;if(ea(t)){if(!f(t))return Lg(t)?l(y,t):jj.call(y,t);var d=t;if(a=Qg(n,p),t=t.byteLength,void 0===i){if(t%p)throw s("Wrong length");if(0>(i=t-a))throw s("Wrong length")}else if((i=za(i)*p)+a>t)throw s("Wrong length");t=i/p}else t=we(t),d=new u(i=t*p);for(r(e,{buffer:d,byteOffset:a,byteLength:i,length:t,view:new c(d)});o<t;)_(e,o++)})),$a&&$a(y,Tn),e=y.prototype=$b(Bf)),e.constructor!==y&&Ia(e,"constructor",y),Rn&&Ia(e,Rn,h),b[h]=y,N({global:!0,forced:y!=m,sham:!Af},b),"BYTES_PER_ELEMENT"in y||Ia(y,"BYTES_PER_ELEMENT",p),"BYTES_PER_ELEMENT"in e||Ia(e,"BYTES_PER_ELEMENT",p),qf(h)}):e.exports=function(){}}));Df("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var pv=Math.min,qv=[].copyWithin||function(e,t){var n=Wa(this),r=za(n.length),i=xb(e,r),o=xb(t,r),a=2<arguments.length?arguments[2]:void 0;for(r=pv((void 0===a?r:xb(a,r))-o,r-i),a=1,o<i&&i<o+r&&(a=-1,o+=r-1,i+=r-1);0<r--;)o in n?n[i]=n[o]:delete n[i],i+=a,o+=a;return n};va("copyWithin",(function(e,t){return qv.call(Aa(this),e,t,2<arguments.length?arguments[2]:void 0)})),va("every",(function(e){return nv(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("fill",(function(e){return fj.apply(Aa(this),arguments)})),va("filter",(function(e){var t=io(Aa(this),e,1<arguments.length?arguments[1]:void 0),n=Yc(this,this.constructor),r=0,i=t.length;for(n=new(ve(n))(i);i>r;)n[r]=t[r++];return n})),va("find",(function(e){return ov(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("findIndex",(function(e){return jo(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("forEach",(function(e){Bd(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("includes",(function(e){return Pm(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("indexOf",(function(e){return Ei(Aa(this),e,1<arguments.length?arguments[1]:void 0)}));var lj=oa("unscopables"),mj=Array.prototype;null==mj[lj]&&Ma.f(mj,lj,{configurable:!0,value:$b(null)});var ye=function(e){mj[lj][e]=!0},nj=oa("iterator"),ko=!1,rv=function(){return this},Cd;if([].keys){var lo=[].keys();if("next"in lo){var mo=Rb(Rb(lo));mo!==Object.prototype&&(Cd=mo)}else ko=!0}(null==Cd||O((function(){var e={};return Cd[nj].call(e)!==e})))&&(Cd={}),P(Cd,nj)||Ia(Cd,nj,rv);var Tg=Cd,sv=function(){return this},tv=function(e,t,n){return t+=" Iterator",e.prototype=$b(Tg,{next:Xc(1,n)}),yc(e,t,!1),me[t]=sv,e},Ug=ko,Ef=oa("iterator"),uv=function(){return this},oj=function(e,t,n,r,i,o,a){tv(n,t,r),r=function(e){if(e===i&&f)return f;if(!Ug&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var s,u=t+" Iterator",c=!1,l=e.prototype,d=l[Ef]||l["@@iterator"]||i&&l[i],f=!Ug&&d||r(i),p="Array"==t&&l.entries||d;if(p&&(e=Rb(p.call(new e)),Tg!==Object.prototype&&e.next&&(Rb(e)!==Tg&&($a?$a(e,Tg):"function"!=typeof e[Ef]&&Ia(e,Ef,uv)),yc(e,u,!0))),"values"==i&&d&&"values"!==d.name&&(c=!0,f=function(){return d.call(this)}),l[Ef]!==f&&Ia(l,Ef,f),me[t]=f,i){var h={values:r("values"),keys:o?f:r("keys"),entries:r("entries")};if(a)for(s in h)!Ug&&!c&&s in l||Va(l,s,h[s]);else N({target:t,proto:!0,forced:Ug||c},h)}return h},vv=Ua.set,wv=Ua.getterFor("Array Iterator"),bd=oj(Array,"Array",(function(e,t){vv(this,{type:"Array Iterator",target:rb(e),index:0,kind:t})}),(function(){var e=wv(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");me.Arguments=me.Array,ye("keys"),ye("values"),ye("entries");var no=oa("iterator"),oo=B.Uint8Array,xv=bd.values,yv=bd.keys,zv=bd.entries,pj=oo&&oo.prototype[no],po=!!pj&&("values"==pj.name||null==pj.name),qo=function(){return xv.call(Aa(this))};va("entries",(function(){return zv.call(Aa(this))})),va("keys",(function(){return yv.call(Aa(this))})),va("values",qo,!po),va(no,qo,!po);var Av=[].join;va("join",(function(e){return Av.apply(Aa(this),arguments)}));var Bv=Math.min,qj=[].lastIndexOf,ro=!!qj&&0>1/[1].lastIndexOf(1,-0),Cv=le("lastIndexOf"),Dv=ro||!Cv?function(e){if(ro)return qj.apply(this,arguments)||0;var t=rb(this),n=za(t.length),r=n-1;for(1<arguments.length&&(r=Bv(r,ic(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:qj;va("lastIndexOf",(function(e){return Dv.apply(Aa(this),arguments)})),va("map",(function(e){return ho(Aa(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(ve(Yc(e,e.constructor)))(t)}))}));var so=function(e){return function(t,n,r,i){yb(n),t=Wa(t);var o=lf(t),a=za(t.length),s=e?a-1:0,u=e?-1:1;if(2>r)for(;;){if(s in o){i=o[s],s+=u;break}if(s+=u,e?0>s:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:a>s;s+=u)s in o&&(i=n(i,o[s],s,t));return i}},to=so(!1),Ev=so(!0);va("reduce",(function(e){return to(Aa(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})),va("reduceRight",(function(e){return Ev(Aa(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}));var Fv=Math.floor;va("reverse",(function(){for(var e,t=Aa(this).length,n=Fv(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var Gv=O((function(){new Int8Array(1).set({})}));va("set",(function(e){Aa(this);var t=Qg(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=Wa(e),i=za(r.length),o=0;if(i+t>n)throw RangeError("Wrong length");for(;o<i;)this[t+o]=r[o++]}),Gv);var Hv=[].slice,Iv=O((function(){new Int8Array(1).slice()}));va("slice",(function(e,t){e=Hv.call(Aa(this),e,t);var n=Yc(this,this.constructor);t=0;var r=e.length;for(n=new(ve(n))(r);r>t;)n[t]=e[t++];return n}),Iv),va("some",(function(e){return mv(Aa(this),e,1<arguments.length?arguments[1]:void 0)}));var Jv=[].sort;va("sort",(function(e){return Jv.call(Aa(this),e)})),va("subarray",(function(e,t){var n=Aa(this),r=n.length;return e=xb(e,r),new(Yc(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,za((void 0===t?r:xb(t,r))-e))}));var Vg=B.Int8Array,uo=[].toLocaleString,Kv=[].slice,Lv=!!Vg&&O((function(){uo.call(new Vg(1))})),Mv=O((function(){return[1,2].toLocaleString()!=new Vg([1,2]).toLocaleString()}))||!O((function(){Vg.prototype.toLocaleString.call([1,2])}));va("toLocaleString",(function(){return uo.apply(Lv?Kv.call(Aa(this)):Aa(this),arguments)}),Mv);var vo=B.Uint8Array,Nv=vo&&vo.prototype||{},Wg=[].toString,Ov=[].join;O((function(){Wg.call({})}))&&(Wg=function(){return Ov.call(this)}),va("toString",Wg,Nv.toString!=Wg);var rj=Cf.ArrayBuffer,wo=Cf.DataView,xo=rj.prototype.slice,Pv=O((function(){return!new rj(2).slice(1,void 0).byteLength}));N({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Pv},{slice:function(e,t){if(void 0!==xo&&void 0===t)return xo.call(qa(this),e);var n=qa(this).byteLength;e=xb(e,n),t=xb(void 0===t?n:t,n),n=new(Yc(this,rj))(za(t-e));for(var r=new wo(this),i=new wo(n),o=0;e<t;)i.setUint8(o++,r.getUint8(e++));return n}});var yo=Cf.ArrayBuffer;N({global:!0,forced:B.ArrayBuffer!==yo},{ArrayBuffer:yo}),qf("ArrayBuffer");var Qv=Ma.f,sj=Function.prototype,Rv=sj.toString,Sv=/^\s*function ([^ (]*)/;!ja||"name"in sj||Qv(sj,"name",{configurable:!0,get:function(){try{return Rv.call(this).match(Sv)[1]}catch(e){return""}}});var zo=RegExp.prototype,Ao=zo.toString,Tv=O((function(){return"/a/b"!=Ao.call({source:"a",flags:"b"})})),Uv="toString"!=Ao.name;(Tv||Uv)&&Va(RegExp.prototype,"toString",(function(){var e=qa(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in zo)?Zi.call(e):n)}),{unsafe:!0});var Vv=yf("splice"),Wv=Math.max,Xv=Math.min;N({target:"Array",proto:!0,forced:!Vv},{splice:function(e,t){var n,r,i=Wa(this),o=za(i.length),a=xb(e,o),s=arguments.length;if(0===s?s=n=0:1===s?(s=0,n=o-a):(s-=2,n=Xv(Wv(ic(t),0),o-a)),9007199254740991<o+s-n)throw TypeError("Maximum allowed length exceeded");var u=kj(i,n);for(r=0;r<n;r++){var c=a+r;c in i&&ue(u,r,i[c])}if(u.length=n,s<n){for(r=a;r<o-n;r++){var l=r+s;(c=r+n)in i?i[l]=i[c]:delete i[l]}for(r=o;r>o-n+s;r--)delete i[r-1]}else if(s>n)for(r=o-n;r>a;r--)l=r+s-1,(c=r+n-1)in i?i[l]=i[c]:delete i[l];for(r=0;r<s;r++)i[r+a]=arguments[r+2];return i.length=o-n+s,u}});var Yv=yf("filter");N({target:"Array",proto:!0,forced:!Yv},{filter:function(e){return io(this,e,1<arguments.length?arguments[1]:void 0)}});var Zv=Ua.set,$v=Ua.getterFor("String Iterator");oj(String,"String",(function(e){Zv(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e=$v(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=Hn(t,n),e.index+=t.length,{value:t,done:!1})}));var tj={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},uj=oa("iterator"),Bo=oa("toStringTag"),vj=bd.values,Xg;for(Xg in tj){var Co=B[Xg],Ec=Co&&Co.prototype;if(Ec){if(Ec[uj]!==vj)try{Ia(Ec,uj,vj)}catch(c){Ec[uj]=vj}if(Ec[Bo]||Ia(Ec,Bo,Xg),tj[Xg])for(var ze in bd)if(Ec[ze]!==bd[ze])try{Ia(Ec,ze,bd[ze])}catch(c){Ec[ze]=bd[ze]}}}var Do=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Kg("search",1,(function(e,t,n){return[function(t){var n=hb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;e=qa(e);var i=String(this);return r=e.lastIndex,Do(r,0)||(e.lastIndex=0),i=te(e,i),Do(e.lastIndex,r)||(e.lastIndex=r),null===i?-1:i.index}]})),Xa((function(e){!function(t,n){e.exports?e.exports=n(t):n(t)}("undefined"!=typeof self?self:Ta,(function(e){function t(e){return btoa(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function u(e){return e=s(e),_&&(e.extractable=e.ext,delete e.ext),r(unescape(encodeURIComponent(JSON.stringify(e)))).buffer}function c(e){var n=l(e),r=!1;switch(2<n.length&&(r=!0,n.shift()),e={ext:!0},n[0][0]){case"1.2.840.113549.1.1.1":var o="n e d p q dp dq qi".split(" ");for(n=l(n[1]),r&&n.shift(),r=0;r<n.length;r++)n[r][0]||(n[r]=n[r].subarray(1)),e[o[r]]=t(i(n[r]));e.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return e}function l(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),2>t.end-t.pos||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(128<=r){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");switch(n){case 2:n=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw Error("Unsupported bit string");r--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:n=null;break;case 6:if(!((e=btoa(i(e.subarray(t.pos,t.pos+=r))))in w))throw Error("Unsupported OBJECT ID "+e);n=w[e];break;case 48:for(n=[],r=t.pos+r;t.pos<r;)n.push(l(e,t));break;default:throw Error("Unsupported DER tag 0x"+n.toString(16))}return n}function d(e,t){t||(t=[]);var n=t.length+2;if(t.push(0,0),e instanceof Uint8Array)for(var i=2,o=e.length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof ArrayBuffer)for(i=4,o=e.byteLength,e=new Uint8Array(e),a=0;a<o;a++)t.push(e[a]);else if(null===e)i=5,o=0;else if("string"==typeof e&&e in S)for(i=6,o=(e=r(atob(S[e]))).length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof Array){for(a=0;a<e.length;a++)d(e[a],t);i=48,o=t.length-n}else{if(!("object"===R(e)&&3===e.tag&&e.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+e);for(i=3,o=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<o;a++)t.push(e[a]);o++}if(128<=o){for(a=o,o=4,t.splice(n,0,a>>24&255,a>>16&255,a>>8&255,255&a);1<o&&!(a>>24);)a<<=8,o--;4>o&&t.splice(n,4-o),o|=128}return t.splice(n-2,2,i,o),t}function f(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function p(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function h(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var v=e.crypto||e.msCrypto;if(v){var g=v.subtle||v.webkitSubtle;if(g){var m=e.Crypto||v.constructor||Object,y=e.SubtleCrypto||g.constructor||Object;e.CryptoKey||e.Key;var b=-1<e.navigator.userAgent.indexOf("Edge/"),_=!!e.msCrypto&&!b,E=!v.subtle&&!!v.webkitSubtle;if(_||E){var w={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},S={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var t=g[e];g[e]=function(i,l,d){var m=[].slice.call(arguments);switch(e){case"generateKey":var y=o(i),b=l,w=d;break;case"importKey":y=o(d),b=m[3],w=m[4],"jwk"===i&&((l=s(l)).alg||(l.alg=a(y)),l.key_ops||(l.key_ops="oct"!==l.kty?"d"in l?w.filter(h):w.filter(p):w.slice()),m[1]=u(l));break;case"unwrapKey":y=m[4],b=m[5],w=m[6],m[2]=d._key}if("generateKey"===e&&"HMAC"===y.name&&y.hash)return y.length=y.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[y.hash.name],g.importKey("raw",v.getRandomValues(new Uint8Array(y.length+7>>3)),y,b,w);if(E&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===y.name&&(!y.modulusLength||2048<=y.modulusLength))return(i=o(i)).name="RSAES-PKCS1-v1_5",delete i.hash,g.generateKey(i,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([g.exportKey("jwk",e.publicKey),g.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=a(y),e[0].key_ops=w.filter(p),e[1].key_ops=w.filter(h),Promise.all([g.importKey("jwk",e[0],y,!0,e[0].key_ops),g.importKey("jwk",e[1],y,b,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((E||_&&"SHA-1"===(y.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===y.name&&"oct"===l.kty)return g.importKey("raw",r(n(l.k)),d,m[3],m[4]);if(E&&"importKey"===e&&("spki"===i||"pkcs8"===i))return g.importKey("jwk",c(l),d,m[3],m[4]);if(_&&"unwrapKey"===e)return g.decrypt(m[3],d,l).then((function(e){return g.importKey(i,e,m[4],m[5],m[6])}));try{var S=t.apply(g,m)}catch(e){return Promise.reject(e)}return _&&(S=new Promise((function(e,t){S.onabort=S.onerror=function(e){t(e)},S.oncomplete=function(t){e(t.target.result)}}))),S=S.then((function(e){return"HMAC"!==y.name||y.length||(y.length=8*e.algorithm.length),0==y.name.search("RSA")&&(y.modulusLength||(y.modulusLength=(e.publicKey||e).algorithm.modulusLength),y.publicExponent||(y.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new f(e.publicKey,y,b,w.filter(p)),privateKey:new f(e.privateKey,y,b,w.filter(h))}:new f(e,y,b,w)}))}})),["exportKey","wrapKey"].forEach((function(e){var o=g[e];g[e]=function(u,c,l){var f=[].slice.call(arguments);switch(e){case"exportKey":f[1]=c._key;break;case"wrapKey":f[1]=c._key,f[2]=l._key}if((E||_&&"SHA-1"===(c.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===u&&"HMAC"===c.algorithm.name&&(f[0]="raw"),!E||"exportKey"!==e||"spki"!==u&&"pkcs8"!==u||(f[0]="jwk"),_&&"wrapKey"===e)return g.exportKey(u,c).then((function(e){return"jwk"===u&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),g.encrypt(f[3],l,e)}));try{var v=o.apply(g,f)}catch(e){return Promise.reject(e)}return _&&(v=new Promise((function(e,t){v.onabort=v.onerror=function(e){t(e)},v.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===u&&(v=v.then((function(e){return(E||_&&"SHA-1"===(c.algorithm.hash||{}).name)&&"HMAC"===c.algorithm.name?{kty:"oct",alg:a(c.algorithm),key_ops:c.usages.slice(),ext:!0,k:t(i(e))}:((e=s(e)).alg||(e.alg=a(c.algorithm)),e.key_ops||(e.key_ops="public"===c.type?c.usages.filter(p):"private"===c.type?c.usages.filter(h):c.usages.slice()),e)}))),!E||"exportKey"!==e||"spki"!==u&&"pkcs8"!==u||(v=v.then((function(e){var t=[["",null]],i=!1;switch((e=s(e)).kty){case"RSA":for(var o="n e d p q dp dq qi".split(" "),a=[],u=0;u<o.length&&o[u]in e;u++){var c=a[u]=r(n(e[o[u]]));128&c[0]&&(a[u]=new Uint8Array(c.length+1),a[u].set(c,1))}2<a.length&&(i=!0,a.unshift(new Uint8Array([0]))),t[0][0]="1.2.840.113549.1.1.1";break;default:throw new TypeError("Unsupported key type")}return t.push(new Uint8Array(d(a)).buffer),i?t.unshift(new Uint8Array([0])):t[1]={tag:3,value:t[1]},new Uint8Array(d(t)).buffer}))),v}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=g[e];g[e]=function(n,r,i,a){if(_&&(!i.byteLength||a&&!a.byteLength))throw Error("Empy input is not allowed");var s=[].slice.call(arguments),u=o(n);!_||"sign"!==e&&"verify"!==e||"RSASSA-PKCS1-v1_5"!==n&&"HMAC"!==n||(s[0]={name:n}),_&&r.algorithm.hash&&(s[0].hash=s[0].hash||r.algorithm.hash),_&&"decrypt"===e&&"AES-GCM"===u.name&&(u=n.tagLength>>3,s[2]=(i.buffer||i).slice(0,i.byteLength-u),n.tag=(i.buffer||i).slice(i.byteLength-u)),s[1]=r._key;try{var c=t.apply(g,s)}catch(e){return Promise.reject(e)}return _&&(c=new Promise((function(t,n){c.onabort=c.onerror=function(e){n(e)},c.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;(n=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}}))),c}})),_){var I=g.digest;g.digest=function(e,t){if(!t.byteLength)throw Error("Empy input is not allowed");try{var n=I.call(g,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(v,{getRandomValues:{value:function(e){return v.getRandomValues(e)}},subtle:{value:g}}),e.CryptoKey=f}E&&(v.subtle=g,e.Crypto=m,e.SubtleCrypto=y,e.CryptoKey=f)}}}}))}));var aw=oa("match"),wj=function(e){var t;return ea(e)&&(void 0!==(t=e[aw])?!!t:"RegExp"==Vb(e))},bw=[].push,cw=Math.min,Ae=!O((function(){return!RegExp(4294967295,"y")}));Kg("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(hb(this));if(0===(n=void 0===n?4294967295:n>>>0))return[];if(void 0===e)return[r];if(!wj(e))return t.call(r,e,n);var i,o,a,s=[],u=0;for(e=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=xf.call(e,r))&&!((o=e.lastIndex)>u&&(s.push(r.slice(u,i.index)),1<i.length&&i.index<r.length&&bw.apply(s,i.slice(1)),a=i[0].length,u=o,s.length>=n));)e.lastIndex===i.index&&e.lastIndex++;return u===r.length?(a||!e.test(""))&&s.push(""):s.push(r.slice(u)),s.length>n?s.slice(0,n):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var i=hb(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var a=qa(e);e=String(this);var s=Yc(a,RegExp);if(o=a.unicode,a=new s(Ae?a:"^(?:"+a.source+")",(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Ae?"y":"g")),0===(i=void 0===i?4294967295:i>>>0))return[];if(0===e.length)return null===te(a,e)?[e]:[];var u=0,c=0;for(s=[];c<e.length;){a.lastIndex=Ae?c:0;var l,d=te(a,Ae?e:e.slice(c));if(null===d||(l=cw(za(a.lastIndex+(Ae?0:c)),e.length))===u)c=bj(e,c,o);else{if(s.push(e.slice(u,c)),s.length===i)return s;for(u=1;u<=d.length-1;u++)if(s.push(d[u]),s.length===i)return s;c=u=l}}return s.push(e.slice(u)),s}]}),!Ae),function(e){e.console||(e.console={}),e=e.console;for(var t,n=function(){},r=["memory"],i="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=r.pop();)e[t]||(e[t]={});for(;t=i.pop();)e[t]||(e[t]=n)}("undefined"==typeof window?Ta:window),N({target:"Object",stat:!0},{setPrototypeOf:$a});var dw=O((function(){Rb(1)}));N({target:"Object",stat:!0,forced:dw,sham:!Jn},{getPrototypeOf:function(e){return Rb(Wa(e))}});var Eo=[].slice,xj={},ew=Function.bind||function(e){var t=yb(this),n=Eo.call(arguments,1),r=function r(){var i=n.concat(Eo.call(arguments));if(this instanceof r){var o=i.length;if(!(o in xj)){for(var a=[],s=0;s<o;s++)a[s]="a["+s+"]";xj[o]=Function("C,a","return new C("+a.join(",")+")")}i=xj[o](t,i)}else i=t.apply(e,i);return i};return ea(t.prototype)&&(r.prototype=t.prototype),r},yj=Wb("Reflect","construct"),Fo=O((function(){function e(){}return!(yj((function(){}),[],e)instanceof e)})),Go=!O((function(){yj((function(){}))})),Ho=Fo||Go;N({target:"Reflect",stat:!0,forced:Ho,sham:Ho},{construct:function(e,t){yb(e),qa(t);var n=3>arguments.length?e:yb(arguments[2]);if(Go&&!Fo)return yj(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}return(n=[null]).push.apply(n,t),new(ew.apply(e,n))}n=n.prototype,n=$b(ea(n)?n:Object.prototype);var r=Function.apply.call(e,n,t);return ea(r)?r:n}}),N({target:"Reflect",stat:!0},{get:el});var Io=Db.f,fw=O((function(){Io(1)}));N({target:"Object",stat:!0,forced:!ja||fw,sham:!ja},{getOwnPropertyDescriptor:function(e,t){return Io(rb(e),t)}});var Jo=wd.f,gw={}.toString,Ko="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],zj=function(e){if(Ko&&"[object Window]"==gw.call(e))try{var t=Jo(e)}catch(e){t=Ko.slice()}else t=Jo(rb(e));return t},Lo={f:oa},hw=Ma.f,Yg=function(e){var t=B.Symbol||(B.Symbol={});P(t,e)||hw(t,e,{value:Lo.f(e)})},tb=yg("hidden"),Mo=oa("toPrimitive"),iw=Ua.set,No=Ua.getterFor("Symbol"),Kb=Object.prototype,_ub=B.Symbol,Ff=Wb("JSON","stringify"),Oo=Db.f,cd=Ma.f,Po=zj,jw=kf,Fc=vd("symbols"),Gf=vd("op-symbols"),Aj=vd("string-to-symbol-registry"),Bj=vd("symbol-to-string-registry"),kw=vd("wks"),Cj=B.QObject,Dj=!Cj||!Cj.prototype||!Cj.prototype.findChild,Ej=ja&&O((function(){return 7!=$b(cd({},"a",{get:function(){return cd(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Oo(Kb,t);r&&delete Kb[t],cd(e,t,n),r&&e!==Kb&&cd(Kb,t,r)}:cd,Fj=function(e,t){var n=Fc[e]=$b(_ub.prototype);return iw(n,{type:"Symbol",tag:e,description:t}),ja||(n.description=t),n},Gj=Tm?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof _ub},Zg=function e(t,n,r){return t===Kb&&e(Gf,n,r),qa(t),n=hc(n,!0),qa(r),P(Fc,n)?(r.enumerable?(P(t,tb)&&t[tb][n]&&(t[tb][n]=!1),r=$b(r,{enumerable:Xc(0,!1)})):(P(t,tb)||cd(t,tb,Xc(1,{})),t[tb][n]=!0),Ej(t,n,r)):cd(t,n,r)},Qo=function(e,t){qa(e);var n=rb(t);return t=Dc(n).concat(Hj(n)),Bd(t,(function(t){ja&&!Ij.call(n,t)||Zg(e,t,n[t])})),e},Ij=function(e){e=hc(e,!0);var t=jw.call(this,e);return!(this===Kb&&P(Fc,e)&&!P(Gf,e))&&(!(t||!P(this,e)||!P(Fc,e)||P(this,tb)&&this[tb][e])||t)},Ro=function(e,t){if(e=rb(e),t=hc(t,!0),e!==Kb||!P(Fc,t)||P(Gf,t)){var n=Oo(e,t);return!n||!P(Fc,t)||P(e,tb)&&e[tb][t]||(n.enumerable=!0),n}},So=function(e){e=Po(rb(e));var t=[];return Bd(e,(function(e){P(Fc,e)||P(je,e)||t.push(e)})),t},Hj=function(e){var t=e===Kb;e=Po(t?Gf:rb(e));var n=[];return Bd(e,(function(e){!P(Fc,e)||t&&!P(Kb,e)||n.push(Fc[e])})),n};if(xc||(_ub=function(){if(this instanceof _ub)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=ie(e),n=function e(n){this===Kb&&e.call(Gf,n),P(this,tb)&&P(this[tb],t)&&(this[tb][t]=!1),Ej(this,t,Xc(1,n))};return ja&&Dj&&Ej(Kb,t,{configurable:!0,set:n}),Fj(t,e)},Va(_ub.prototype,"toString",(function(){return No(this).tag})),Va(_ub,"withoutSetter",(function(e){return Fj(ie(e),e)})),kf=Ij,Ma.f=Zg,Db.f=Ro,wd.f=zj=So,nf.f=Hj,Lo.f=function(e){return Fj(oa(e),e)},ja&&(cd(_ub.prototype,"description",{configurable:!0,get:function(){return No(this).description}}),Va(Kb,"propertyIsEnumerable",Ij,{unsafe:!0}))),N({global:!0,wrap:!0,forced:!xc,sham:!xc},{Symbol:_ub}),Bd(Dc(kw),(function(e){Yg(e)})),N({target:"Symbol",stat:!0,forced:!xc},{for:function(e){if(e=String(e),P(Aj,e))return Aj[e];var t=_ub(e);return Aj[e]=t,Bj[t]=e,t},keyFor:function(e){if(!Gj(e))throw TypeError(e+" is not a symbol");if(P(Bj,e))return Bj[e]},useSetter:function(){Dj=!0},useSimple:function(){Dj=!1}}),N({target:"Object",stat:!0,forced:!xc,sham:!ja},{create:function(e,t){return void 0===t?$b(e):Qo($b(e),t)},defineProperty:Zg,defineProperties:Qo,getOwnPropertyDescriptor:Ro}),N({target:"Object",stat:!0,forced:!xc},{getOwnPropertyNames:So,getOwnPropertySymbols:Hj}),N({target:"Object",stat:!0,forced:O((function(){nf.f(1)}))},{getOwnPropertySymbols:function(e){return nf.f(Wa(e))}}),Ff){var lw=!xc||O((function(){var e=_ub();return"[null]"!=Ff([e])||"{}"!=Ff({a:e})||"{}"!=Ff(Object(e))}));N({target:"JSON",stat:!0,forced:lw},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(ea(t)||void 0!==e)&&!Gj(e))return zd(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Gj(t))return t}),i[1]=t,Ff.apply(null,i)}})}_ub.prototype[Mo]||Ia(_ub.prototype,Mo,_ub.prototype.valueOf),yc(_ub,"Symbol"),je[tb]=!0;var mw=Ma.f,Gc=B.Symbol;if(ja&&"function"==typeof Gc&&(!("description"in Gc.prototype)||void 0!==Gc().description)){var To={},Hf=function e(){var t=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),n=this instanceof e?new Gc(t):void 0===t?Gc():Gc(t);return""===t&&(To[n]=!0),n};Sm(Hf,Gc);var Jj=Hf.prototype=Gc.prototype;Jj.constructor=Hf;var nw=Jj.toString,ow="Symbol(test)"==String(Gc("test")),pw=/^Symbol\((.*)\)[^)]+$/;mw(Jj,"description",{configurable:!0,get:function(){var e=ea(this)?this.valueOf():this,t=nw.call(e);return P(To,e)?"":""===(e=ow?t.slice(7,-1):t.replace(pw,"$1"))?void 0:e}}),N({global:!0,forced:!0},{Symbol:Hf})}Yg("toStringTag"),yc(Math,"Math",!0),yc(B.JSON,"JSON",!0),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}var u=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=0,r=(e=this.listeners[e]).length;n<r;n++)if(e[n].callback===t){e.splice(n,1);break}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var i=t[n];try{i.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}i.options&&i.options.once&&this.removeEventListener(e.type,i.callback)}return!e.defaultPrevented}}}]),t}(),c=function(t){function o(){e(this,o);var t=c.call(this);return t.listeners||u.call(a(t)),Object.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}r(o,t);var c=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n=i(e);if(t){var r=i(this).constructor;n=Reflect.construct(n,arguments,r)}else n=n.apply(this,arguments);return!n||"object"!==R(n)&&"function"!=typeof n?a(this):n}}(o);return n(o,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),s(i(o.prototype),"dispatchEvent",this).call(this,e)}}]),o}(u),l=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){try{var e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var t=!0}else t="function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController;t&&(e.AbortController=l,e.AbortSignal=c)}("undefined"!=typeof self?self:Ta)}();var qw=Math.floor,rw=Math.log,sw=Math.LOG2E;N({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-qw(rw(e+.5)*sw):32}});var tw=Math.log,uw=Math.LN2,Or=Math.clz32||function(e){return 31-tw(e>>>0)/uw|0},ld=String.fromCharCode,Uo={}.toString,Kj=window.Uint8Array,Lj=Kj||Array,vw=Uo.call((window.ArrayBuffer||Lj).prototype),Mj;fl.prototype.decode=function(e){if(e=e&&e.buffer||e,Uo.call(e)!==vw)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",n=0,r=0|(e=Kj?new Lj(e):e).length;n<r;n=n+32768|0)t+=ld.apply(0,e[Kj?"slice":"subarray"](n,n+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,Nr)},window.TextDecoder||(window.TextDecoder=fl),gl.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,Pr)).length,n=new Lj(t),r=0;r<t;r=r+1|0)n[r]=e.charCodeAt(r);return n},window.TextEncoder||(window.TextEncoder=gl),function(e){var t,n,r,i,o,a,s,u,c,l;!function(e){e.LOGIN="LOGIN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILURE="LOGIN_FAILURE",e.LOGIN_TIMEOUT="LOGIN_TIMEOUT",e.INTERRUPTED="INTERRUPTED",e.LOGOUT="LOGOUT",e.BANNED_BY_SERVER="BANNED_BY_SERVER",e.REMOTE_LOGIN="REMOTE_LOGIN"}(t||(t={})),e.ConnectionChangeReason=t,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(n||(n={})),e.ConnectionState=n,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(r||(r={})),e.LocalInvitationState=r,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i||(i={})),e.RemoteInvitationState=i,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(o||(o={})),e.LocalInvitationFailureReason=o,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(a||(a={})),e.RemoteInvitationFailureReason=a,function(e){e.ONLINE="ONLINE",e.UNREACHABLE="UNREACHABLE",e.OFFLINE="OFFLINE"}(s||(s={})),e.PeerOnlineState=s,(u||(u={})).ONLINE_STATUS="ONLINE_STATUS",e.PeerSubscriptionOption=u,function(e){e.TEXT="TEXT",e.RAW="RAW",e.IMAGE="IMAGE",e.FILE="FILE"}(c||(c={})),e.MessageType=c,function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOB="GLOB",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(l||(l={})),e.AreaCode=l}(Mj||(Mj={}));var S=Mj;N({target:"Array",proto:!0},{includes:function(e){return Pm(this,e,1<arguments.length?arguments[1]:void 0)}}),ye("includes");var Nj=function(e){if(wj(e))throw TypeError("The method doesn't accept regular expressions");return e},ww=oa("match"),Oj=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[ww]=!1,"/./"[e](t)}catch(e){}}return!1};N({target:"String",proto:!0,forced:!Oj("includes")},{includes:function(e){return!!~String(hb(this)).indexOf(Nj(e),1<arguments.length?arguments[1]:void 0)}});var xw=O((function(){Dc(1)}));N({target:"Object",stat:!0,forced:xw},{keys:function(e){return Dc(Wa(e))}});var dd={RECONNECTING_AP_INTERVAL:2e3,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0};Yg("iterator"),Yg("asyncIterator");var Pj=le("forEach")?[].forEach:function(e){return Bd(this,e,1<arguments.length?arguments[1]:void 0)},Vo;for(Vo in tj){var Wo=B[Vo],$g=Wo&&Wo.prototype;if($g&&$g.forEach!==Pj)try{Ia($g,"forEach",Pj)}catch(c){$g.forEach=Pj}}var yw=[].reverse,Xo=[1,2];N({target:"Array",proto:!0,forced:String(Xo)===String(Xo.reverse())},{reverse:function(){return zd(this)&&(this.length=this.length),yw.call(this)}});var w=Xa((function(e){e=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,o){return t=Object.create((t&&t.prototype instanceof i?t:i).prototype),o=new f(o||[]),t._invoke=function(e,t,n){var i=w;return function(o,a){if(i===I)throw Error("Generator is already running");if(i===O){if("throw"===o)throw a;return h()}for(n.method=o,n.arg=a;;){if((o=n.delegate)&&(o=c(o,n))){if(o===T)continue;return o}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===w)throw i=O,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(i=I,"normal"===(o=r(e,t,n)).type){if(i=n.done?O:S,o.arg===T)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(i=O,n.method="throw",n.arg=o.arg)}}}(e,n,o),t}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach((function(n){t(e,n,(function(e){return this._invoke(n,e)}))}))}function u(e,t){function n(i,o,a,s){if("throw"!==(i=r(e[i],e,o)).type){var u=i.arg;return(i=u.value)&&"object"===R(i)&&m.call(i,"__await")?t.resolve(i.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(i).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(i.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function c(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method))return T;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}return"throw"===(n=r(n,e.iterator,t.arg)).type?(t.method="throw",t.arg=n.arg,t.delegate=null,T):(n=n.arg)?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,T):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function p(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t}).next=t}}return{next:h}}function h(){return{value:v,done:!0}}var v,g=Object.prototype,m=g.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",_=y.asyncIterator||"@@asyncIterator",E=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var w="suspendedStart",S="suspendedYield",I="executing",O="completed",T={};(y={})[b]=function(){return this};var A=Object.getPrototypeOf;(A=A&&A(A(p([]))))&&A!==g&&m.call(A,b)&&(y=A);var k=a.prototype=i.prototype=Object.create(y);return o.prototype=k.constructor=a,a.constructor=o,o.displayName=t(a,E,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,E,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[_]=function(){return this},e.AsyncIterator=u,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new u(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},s(k),t(k,E,"Generator"),k[b]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=p,f.prototype={constructor:f,reset:function(e){if(this.next=this.prev=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}return i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null),(n=i?i.completion:{}).type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),T}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;d(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),T}},e}(e.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),Yo=!O((function(){return Object.isExtensible(Object.preventExtensions({}))})),Qj=Xa((function(e){var t=Ma.f,n=ie("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ea(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!P(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!P(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Yo&&a.REQUIRED&&i(e)&&!P(e,n)&&o(e),e}};je[n]=!0})),Zo=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=B[e],s=a&&a.prototype,u=a,c={},l=function(e){var t=s[e];Va(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ea(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!ea(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ea(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(jc(e,"function"!=typeof a||!(i||s.forEach&&!O((function(){(new a).entries().next()})))))u=n.getConstructor(t,e,r,o),Qj.REQUIRED=!0;else if(jc(e,!0)){var d=new u,f=d[o](i?{}:-0,1)!=d,p=O((function(){d.has(1)})),h=Dg((function(e){new a(e)})),v=!i&&O((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));h||((u=t((function(t,n){return zc(t,u,e),t=Sg(new a,t,u),null!=n&&Cg(n,t[o],{that:t,AS_ENTRIES:r}),t}))).prototype=s,s.constructor=u),(p||v)&&(l("delete"),l("has"),r&&l("get")),(v||f)&&l(o),i&&s.clear&&delete s.clear}return c[e]=u,N({global:!0,forced:u!=a},c),yc(u,e),i||n.setStrong(u,e,r),u},zw=Ma.f,$o=Qj.fastKey,ap=Ua.set,Rj=Ua.getterFor,bp={getConstructor:function(e,t,n,r){var i=e((function(e,o){zc(e,i,t),ap(e,{type:t,index:$b(null),first:void 0,last:void 0,size:0}),ja||(e.size=0),null!=o&&Cg(o,e[r],{that:e,AS_ENTRIES:n})})),o=Rj(t),a=function(e,t,n){var r,i=o(e),a=s(e,t);return a?a.value=n:(i.last=a={index:r=$o(t,!0),key:t,value:n,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=a),t&&(t.next=a),ja?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e},s=function(e,t){e=o(e);var n=$o(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return of(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ja?e.size=0:this.size=0},delete:function(e){var t=o(this);if(e=s(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),ja?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=o(this),r=ne(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),of(i.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),ja&&zw(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Rj(t),o=Rj(r);oj(e,t,(function(e,t){ap(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),qf(t)}};Zo("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bp);var Aw=yf("map");N({target:"Array",proto:!0,forced:!Aw},{map:function(e){return ho(this,e,1<arguments.length?arguments[1]:void 0)}});var Bw=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,Cw=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Sj=function(e){return function(t){return t=String(hb(t)),1&e&&(t=t.replace(Bw,"")),2&e&&(t=t.replace(Cw,"")),t}};Sj(1),Sj(2);var Tj=Sj(3),ah=B.parseInt,Dw=/^[+-]?0[Xx]/,cp=8!==ah("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff08")||22!==ah("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff0x16")?function(e,t){return e=Tj(String(e)),ah(e,t>>>0||(Dw.test(e)?16:10))}:ah;N({global:!0,forced:parseInt!=cp},{parseInt:cp});var Ew=Math.floor,dp=function(e){return!ea(e)&&isFinite(e)&&Ew(e)===e},Fw=Math.abs;N({target:"Number",stat:!0},{isSafeInteger:function(e){return dp(e)&&9007199254740991>=Fw(e)}});var Gw=wd.f,Hw=Db.f,Iw=Ma.f,ed=B.Number,bh=ed.prototype,Jw="Number"==Vb($b(bh)),ep=function(e){var t,n=hc(e,!1);if("string"==typeof n&&2<n.length)if(43===(e=(n=Tj(n)).charCodeAt(0))||45===e){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===e){switch(n.charCodeAt(1)){case 66:case 98:e=2;var r=49;break;case 79:case 111:e=8,r=55;break;default:return+n}var i=(n=n.slice(2)).length;for(t=0;t<i;t++){var o=n.charCodeAt(t);if(48>o||o>r)return NaN}return parseInt(n,e)}return+n};if(jc("Number",!ed(" 0o1")||!ed("0b1")||ed("+0x1"))){for(var Dd=function e(t){var n=1>arguments.length?0:t,r=this;return r instanceof e&&(Jw?O((function(){bh.valueOf.call(r)})):"Number"!=Vb(r))?Sg(new ed(ep(n)),r,e):ep(n)},fp=ja?Gw(ed):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),Uj=0,ch;fp.length>Uj;Uj++)P(ed,ch=fp[Uj])&&!P(Dd,ch)&&Iw(Dd,ch,Hw(ed,ch));Dd.prototype=bh,bh.constructor=Dd,Va(B,"Number",Dd)}var gp=oa("isConcatSpreadable"),Kw=51<=pe||!O((function(){var e=[];return e[gp]=!1,e.concat()[0]!==e})),Lw=yf("concat");N({target:"Array",proto:!0,forced:!Kw||!Lw},{concat:function(e){var t,n=Wa(this),r=kj(n,0),i=0,o=-1;for(t=arguments.length;o<t;o++){var a=-1===o?n:arguments[o],s=a;if(ea(s)){var u=s[gp];s=void 0!==u?!!u:zd(s)}else s=!1;if(s){if(9007199254740991<i+(u=za(a.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<u;s++,i++)s in a&&ue(r,i,a[s])}else{if(9007199254740991<=i)throw TypeError("Maximum allowed index exceeded");ue(r,i++,a)}}return r.length=i,r}});var Mw=!Dg((function(e){Array.from(e)}));N({target:"Array",stat:!0,forced:Mw},{from:function(e){var t,n=Wa(e),r="function"==typeof this?this:Array,i=arguments.length,o=1<i?arguments[1]:void 0,a=void 0!==o,s=Hi(n),u=0;if(a&&(o=ne(o,2<i?arguments[2]:void 0,2)),null==s||r==Array&&Fi(s)){var c=za(n.length);for(r=new r(c);c>u;u++)s=a?o(n[u],u):n[u],ue(r,u,s)}else for(i=(n=s.call(n)).next,r=new r;!(t=i.call(n)).done;u++){if(a){s=n;var l=o;t=[t.value,u];try{c=l(qa(t)[0],t[1])}catch(e){throw Ii(s),e}}else c=t.value;ue(r,u,s=c)}return r.length=u,r}});var Vj=Wb("Reflect","apply"),Nw=Function.apply,Ow=!O((function(){Vj((function(){}))}));N({target:"Reflect",stat:!0,forced:Ow},{apply:function(e,t,n){return yb(e),qa(n),Vj?Vj(e,t,n):Nw.call(e,t,n)}}),N({target:"Reflect",stat:!0},{ownKeys:Rm});var Pw=zj,Qw=O((function(){return!Object.getOwnPropertyNames(1)}));N({target:"Object",stat:!0,forced:Qw},{getOwnPropertyNames:Pw});var Be="object"===("undefined"==typeof Reflect?"undefined":R(Reflect))?Reflect:null,hp=Be&&"function"==typeof Be.apply?Be.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Rw=Be&&"function"==typeof Be.ownKeys?Be.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},ip=Number.isNaN||function(e){return e!=e};aa.EventEmitter=aa,aa.prototype._events=void 0,aa.prototype._eventsCount=0,aa.prototype._maxListeners=void 0;var jp=10;Object.defineProperty(aa,"defaultMaxListeners",{enumerable:!0,get:function(){return jp},set:function(e){if("number"!=typeof e||0>e||ip(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");jp=e}}),aa.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},aa.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||ip(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},aa.prototype.getMaxListeners=function(){return void 0===this._maxListeners?aa.defaultMaxListeners:this._maxListeners},aa.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);n="error"===e;var r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var i;if(0<t.length&&(i=t[0]),i instanceof Error)throw i;throw(t=Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,t}if(void 0===(n=r[e]))return!1;if("function"==typeof n)hp(n,this,t);else for(r=kl(n,i=n.length),n=0;n<i;++n)hp(r[n],this,t);return!0},aa.prototype.addListener=function(e,t){return hl(this,e,t,!1)},aa.prototype.on=aa.prototype.addListener,aa.prototype.prependListener=function(e,t){return hl(this,e,t,!0)},aa.prototype.once=function(e,t){return Zf(t),this.on(e,il(this,e,t)),this},aa.prototype.prependOnceListener=function(e,t){return Zf(t),this.prependListener(e,il(this,e,t)),this},aa.prototype.removeListener=function(e,t){var n;Zf(t);var r=this._events;if(void 0===r)return this;var i=r[e];if(void 0===i)return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){var o=-1;for(n=i.length-1;0<=n;n--)if(i[n]===t||i[n].listener===t){var a=i[n].listener;o=n;break}if(0>o)return this;if(0===o)i.shift();else{for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},aa.prototype.off=aa.prototype.removeListener,aa.prototype.removeAllListeners=function(e){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n=Object.keys(t);for(t=0;t<n.length;++t){var r=n[t];"removeListener"!==r&&this.removeAllListeners(r)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(t=n.length-1;0<=t;t--)this.removeListener(e,n[t]);return this},aa.prototype.listeners=function(e){return jl(this,e,!0)},aa.prototype.rawListeners=function(e){return jl(this,e,!1)},aa.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ll.call(e,t)},aa.prototype.listenerCount=ll,aa.prototype.eventNames=function(){return 0<this._eventsCount?Rw(this._events):[]},aa.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}if("error"!==t){var o=function(n){e.removeListener(t,i),r(n)};e.once("error",o)}e.once(t,i)}))};var Ce=Object.assign,kp=Object.defineProperty,lp=!Ce||O((function(){if(ja&&1!==Ce({b:1},Ce(kp({},"a",{enumerable:!0,get:function(){kp(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Ce({},e)[n]||"abcdefghijklmnopqrst"!=Dc(Ce({},t)).join("")}))?function(e,t){for(var n=Wa(e),r=arguments.length,i=1,o=nf.f,a=kf;r>i;)for(var s,u=lf(arguments[i++]),c=o?Dc(u).concat(o(u)):Dc(u),l=c.length,d=0;l>d;)s=c[d++],(!ja||a.call(u,s))&&(n[s]=u[s]);return n}:Ce;N({target:"Object",stat:!0,forced:Object.assign!==lp},{assign:lp}),Zo("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bp);var Sw=Math.log,Tw=Math.LN2;N({target:"Math",stat:!0},{log2:function(e){return Sw(e)/Tw}}),Df("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Df("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Df("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Df("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Gh=Symbol(),Fh=function(){};e:{try{var mp="1"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).UMBRELLA_ASSERTS;break e}catch(c){}mp=!1}var Uw=mp?function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"assertion failed";if("function"==typeof e&&!e()||!e)throw Error("function"==typeof t?t():t)}:Fh,Vw=Qj.onFreeze,Wj=Object.freeze,Ww=O((function(){Wj(1)}));N({target:"Object",stat:!0,forced:Ww,sham:!Yo},{freeze:function(e){return Wj&&ea(e)?Wj(Vw(e)):e}});var Xw=Ma.f,Yw=wd.f,Zw=Ua.set,$w=oa("match"),mc=B.RegExp,Xj=mc.prototype,If=/a/g,Yj=/a/g,Zj=new mc(If)!==If;if(ja&&jc("RegExp",!Zj||Ig||O((function(){return Yj[$w]=!1,mc(If)!=If||mc(Yj)==Yj||"/a/i"!=mc(If,"i")})))){for(var Hc=function e(t,n){var r,i=this instanceof e,o=wj(t),a=void 0===n;return!i&&o&&t.constructor===e&&a||(Zj?o&&!a&&(t=t.source):t instanceof e&&(a&&(n=Zi.call(t)),t=t.source),Ig&&(r=!!n&&-1<n.indexOf("y"))&&(n=n.replace(/y/g,"")),t=Sg(Zj?new mc(t,n):mc(t,n),i?this:Xj,e),Ig&&r&&Zw(t,{sticky:r})),t},ax=function(e){e in Hc||Xw(Hc,e,{configurable:!0,get:function(){return mc[e]},set:function(t){mc[e]=t}})},np=Yw(mc),op=0;np.length>op;)ax(np[op++]);Xj.constructor=Hc,Hc.prototype=Xj,Va(B,"RegExp",Hc)}qf("RegExp");var ak=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},bk=[],pp=bk.sort,bx=O((function(){bk.sort(void 0)})),cx=O((function(){bk.sort(null)})),dx=le("sort");N({target:"Array",proto:!0,forced:bx||!cx||!dx},{sort:function(e){return void 0===e?pp.call(Wa(this)):pp.call(Wa(this),yb(e))}});var qp=Object.getPrototypeOf({}),Jf=function(e,t){var n;return e===t||(null==e?e==t:"function"===R(e.equiv)?e.equiv(t):null==t?e==t:"function"===R(t.equiv)?t.equiv(e):"string"!==R(e)&&"string"!==R(t)&&(null!=(n=Object.getPrototypeOf(e))&&n!==qp||null!=(n=Object.getPrototypeOf(t))&&n!==qp?"function"!==R(e)&&void 0!==e.length&&"function"!==R(t)&&void 0!==t.length?fx(e,t):e instanceof Set&&t instanceof Set?gx(e,t):e instanceof Map&&t instanceof Map?hx(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:ex(e,t)))},fx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf,r=e.length;if(r===t.length)for(;0<=--r&&n(e[r],t[r]););return 0>r},gx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf;return e.size===t.size&&n(I(e.keys()).sort(),I(t.keys()).sort())},hx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf;return e.size===t.size&&n(I(e).sort(),I(t).sort())},ex=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!t.hasOwnProperty(r)||!n(e[r],t[r]))return!1;return!0},ix=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(n){function r(n){return W(this,r),i.call(this,e(n)+t(n))}ka(r,n);var i=la(r);return r}(Re(Error))}((function(){return"illegal argument(s)"})),dh=function(e){throw new ix(e)},rp=1/4294967295,jx=function(){function e(){W(this,e)}return Ea(e,[{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*rp*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*rp-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),ck=Math.random,kx=new(function(e){function t(){return W(this,t),n.apply(this,arguments)}ka(t,e);var n=la(t);return Ea(t,[{key:"int",value:function(){return 4294967296*ck()>>>0}},{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return ck()*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(ck()-.5)*e}}]),t}(jx)),lx=le("reduce"),mx=!kc&&79<pe&&83>pe;N({target:"Array",proto:!0,forced:!lx||mx},{reduce:function(e){return to(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var nl=function(e){return null!=e&&"function"==typeof e.xform?e.xform():e},$f=function(){function e(t){W(this,e),this.value=t}return Ea(e,[{key:"deref",value:function(){return this.value}}]),e}(),Hh=function(e){return e instanceof $f?e.deref():e},Sr=function(e,t){return[e,function(e){return e},t]},nx=w.mark((function(e,t){var n,r,i,o,a,s;return w.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:n=nl(e)(Rr()),r=n[1],i=n[2],o=0;case 4:if(!(o<t.length)){u.next=15;break}if(a=t[o],!((s=i([],a))instanceof $f)){u.next=10;break}return u.delegateYield(Hh(r(s.deref())),"t0",9);case 9:return u.abrupt("return");case 10:if(!s.length){u.next=12;break}return u.delegateYield(s,"t1",12);case 12:o++,u.next=4;break;case 15:return u.delegateYield(Hh(r([])),"t2",16);case 16:case"end":return u.stop()}}),nx)})),Tr=w.mark(ml),Ur=function(e,t){return[e[0],e[1],t]},sp=!0;"findIndex"in[]&&Array(1).findIndex((function(){sp=!1})),N({target:"Array",proto:!0,forced:sp},{findIndex:function(e){return jo(this,e,1<arguments.length?arguments[1]:void 0)}}),ye("findIndex"),N({target:"Array",proto:!0},{fill:fj}),ye("fill");var ox=function(){function e(t){W(this,e),this._length=0,t&&this.into(t)}return Ea(e,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;t=this.head,e=e.head;for(var n=0;t&&0==n;)n=ak(t.value,e.value),t=t.next,e=e.next;return n}},{key:"equiv",value:function(t){if(!(t instanceof e||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var n=this.head,r=0;r<t.length;r++){if(!Jf(n.value,t[r]))return!1;n=n.next}return!0}},{key:Symbol.iterator,value:w.mark((function e(){var t;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||0>e)){e=this.nthCell(e);var n=this.nthCell(t-1);return t=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}},e?t(e):void 0}}},{key:"cycle",value:w.mark((function e(){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var n=this.head;n&&!(t instanceof $f);)t=e(t,n.value),n=n.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,t){return e||dh("cell is undefined"),t={value:t,next:e,prev:e.prev},e.prev?e.prev.next=t:this.head=t,e.prev=t,this._length++,this}},{key:"insertAfter",value:function(e,t){return e||dh("cell is undefined"),t={value:t,next:e.next,prev:e},e.next?e.next.prev=t:this.tail=t,e.next=t,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){return 0>e&&(e+=this._length),0>=e?this.cons(t):(this.ensureIndex(e),this.insertBefore(this.nthCellUnsafe(e),t))}},{key:"insertAfterNth",value:function(e,t){return 0>e&&(e+=this._length),e>=this._length-1?this.push(t):(this.ensureIndex(e),this.insertAfter(this.nthCellUnsafe(e),t))}},{key:"insertSorted",value:function(e,t){t=t||ak;for(var n=this.head;n;){if(0>=t(e,n.value))return this.insertBefore(n,e);n=n.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e.into(n[t]);return e}},{key:"into",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;t=0>t?t+this._length:t,n=0>n?n+this._length:n,(0>t||0>n)&&dh("invalid indices: ${from} / ${to}");for(var r=new e,i=this.nthCell(t);i&&++t<=n;)r.push(i.value),i=i.next;return r}},{key:"splice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){0>t&&(t+=this._length),this.ensureIndex(t);var i=this.nthCellUnsafe(t)}else i=t;var o=new e;if(0<n)for(;i&&0<n--;)this.remove(i),o.push(i.value),i=i.next;else i&&(i=i.next);if(r)if(i)for(n=0;n<r.length;n++)this.insertBefore(i,r[n]);else for(i=0;i<r.length;i++)this.push(r[i]);return o}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var n=e.value;e.value=t.value,t.value=n}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var n=this.nthCell(e);return!n&&dh("index out of bounds: ".concat(e)),n.value=t,this}},{key:"nth",value:function(e,t){return(e=this.nthCell(e))?e.value:t}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var n=new e,r=this.head;r;)n.push(t(r.value)),r=r.next;return n}},{key:"filter",value:function(t){for(var n=new e,r=this.head;r;)t(r.value)&&n.push(r.value),r=r.next;return n}},{key:"reduce",value:function(e,t){for(var n=this.head;n;)t=e(t,n.value),n=n.next;return t}},{key:"shuffle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:kx;if(2>this._length)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var n=this.head;n;){var r=n.next;.5>t.float()?this.asHead(n):this.asTail(n),n=r}return this}},{key:"sort",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ak;if(!this._length)return this;for(var t=1;;){var n=this.head;this.tail=this.head=void 0;for(var r=0;n;){r++;for(var i=n,o=0,a=0;a<t&&(o++,i=i.next);a++);for(a=t;0<o||0<a&&i;){if(0===o){var s=i;i=i.next,a--}else i&&0!==a?0>=e(n.value,i.value)?(s=n,n=n.next,o--):(s=i,i=i.next,a--):(s=n,n=n.next,o--);this.tail?this.tail.next=s:this.head=s,s.prev=this.tail,this.tail=s}n=i}if(this.tail.next=void 0,1>=r)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,n=(this._length>>>1)+(1&this._length);e&&t&&0<n;){var r=e.value;e.value=t.value,t.value=r,e=e.next,t=t.prev,n--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(String(t.value)),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return I(this)}},{key:"ensureIndex",value:function(e){Uw(0<=e&&e<this._length,"index out of range: ".concat(e))}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var t=this.head,n="next";else t=this.tail,n="prev",e=this._length-e-1;for(;0<e--&&t;)t=t[n];return t}}]),e}(),nc=function(){function e(t,n){W(this,e),n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},n),this.map=n.map(),this.items=new ox,this._size=0,this.opts=n,t&&this.into(t)}return Ea(e,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return ag((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return ag((function(e){return e.k}),this.items)}},{key:"values",value:function(){return ag((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){return(e=this.map.get(e))?this.resetEntry(e):t}},{key:"set",value:function(e,t){var n=this.opts.ksize(e)+this.opts.vsize(t),r=this.map.get(e);return this._size+=Math.max(0,n-(r?r.value.s:0)),this.ensureSize()&&this.doSetEntry(r,e,t,n),t}},{key:"into",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}return this}},{key:"getSet",value:function(e,t){var n=this,r=this.map.get(e);return r?Promise.resolve(this.resetEntry(r)):t().then((function(t){return n.set(e,t)}))}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,n=this.opts.maxlen;this._size>t||this.length>=n;){var r=this.items.drop();if(!r)return!1;this.map.delete(r.k),e&&e(r.k,r.v),this._size-=r.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,n,r){e?(e.value.v=n,e.value.s=r,this.items.asTail(e)):(this.items.push({k:t,v:n,s:r}),this.map.set(t,this.items.tail))}}]),e}(),px=function(e){function t(e,r){return W(this,t),r=Object.assign({ttl:36e5},r),n.call(this,e,r)}ka(t,e);var n=la(t);return Ea(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){if(e=this.map.get(e)){if(e.value.t>=Date.now())return this.resetEntry(e);this.removeEntry(e)}return t}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,r=this.opts.ksize(e)+this.opts.vsize(t),i=this.map.get(e);return this._size+=Math.max(0,r-(i?i.value.s:0)),this.ensureSize()&&(n=Date.now()+n,i?(i.value.v=t,i.value.s=r,i.value.t=n,this.items.asTail(i)):(this.items.push({k:e,v:t,s:r,t:n}),this.map.set(e,this.items.tail))),t}},{key:"getSet",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.get(e);return i?Promise.resolve(i):t().then((function(t){return n.set(e,t,r)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,n=this.opts.maxlen,r=Date.now(),i=this.items.head;i&&(this._size>e||this.length>=n);)i.value.t<r&&this.removeEntry(i),i=i.next;return Dh(kd(t.prototype),"ensureSize",this).call(this)}}]),t}(nc),tp="object"==R(Ta)&&Ta&&Ta.Object===Object&&Ta,qx="object"==("undefined"==typeof self?"undefined":R(self))&&self&&self.Object===Object&&self,Bb=tp||qx||Function("return this")(),Lb=Bb.Symbol,up=Object.prototype,rx=up.hasOwnProperty,sx=up.toString,Kf=Lb?Lb.toStringTag:void 0,tx=Object.prototype.toString,vp=Lb?Lb.toStringTag:void 0,Ed=function(e){if(null==e)e=void 0===e?"[object Undefined]":"[object Null]";else if(vp&&vp in Object(e)){var t=rx.call(e,Kf),n=e[Kf];try{e[Kf]=void 0;var r=!0}catch(e){}var i=sx.call(e);r&&(t?e[Kf]=n:delete e[Kf]),e=i}else e=tx.call(e);return e},jb=function(e){var t=R(e);return null!=e&&("object"==t||"function"==t)},ci=function(e){return!!jb(e)&&("[object Function]"==(e=Ed(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},dk=Bb["__core-js_shared__"],wp=function(){var e=/[^.]+$/.exec(dk&&dk.keys&&dk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ux=Function.prototype.toString,Fd=function(e){if(null!=e){try{return ux.call(e)}catch(e){}return e+""}return""},vx=/^\[object .+?Constructor\]$/,wx=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gd=function(e,t){return e=null==e?void 0:e[t],!jb(e)||wp&&wp in e||!(ci(e)?wx:vx).test(Fd(e))?void 0:e},Lf=Gd(Object,"create"),xx=Object.prototype.hasOwnProperty,yx=Object.prototype.hasOwnProperty;nd.prototype.clear=function(){this.__data__=Lf?Lf(null):{},this.size=0},nd.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},nd.prototype.get=function(e){var t=this.__data__;return Lf?"__lodash_hash_undefined__"===(e=t[e])?void 0:e:xx.call(t,e)?t[e]:void 0},nd.prototype.has=function(e){var t=this.__data__;return Lf?void 0!==t[e]:yx.call(t,e)},nd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lf&&void 0===t?"__lodash_hash_undefined__":t,this};var Mf=function(e,t){return e===t||e!=e&&t!=t},eh=function(e,t){for(var n=e.length;n--;)if(Mf(e[n][0],t))return n;return-1},zx=Array.prototype.splice;Qd.prototype.clear=function(){this.__data__=[],this.size=0},Qd.prototype.delete=function(e){var t=this.__data__;return!(0>(e=eh(t,e)))&&(e==t.length-1?t.pop():zx.call(t,e,1),--this.size,!0)},Qd.prototype.get=function(e){var t=this.__data__;return 0>(e=eh(t,e))?void 0:t[e][1]},Qd.prototype.has=function(e){return-1<eh(this.__data__,e)},Qd.prototype.set=function(e,t){var n=this.__data__,r=eh(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var cg=Qd,Nf=Gd(Bb,"Map"),fh=function(e,t){e=e.__data__;var n=R(t);return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?e["string"==typeof t?"string":"hash"]:e.map};Rd.prototype.clear=function(){this.size=0,this.__data__={hash:new nd,map:new(Nf||cg),string:new nd}},Rd.prototype.delete=function(e){return e=fh(this,e).delete(e),this.size-=e?1:0,e},Rd.prototype.get=function(e){return fh(this,e).get(e)},Rd.prototype.has=function(e){return fh(this,e).has(e)},Rd.prototype.set=function(e,t){var n=fh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var bg=Rd;Te.prototype.add=Te.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Te.prototype.has=function(e){return this.__data__.has(e)};var xp=function(e,t,n,r){var i=e.length;for(n+=r?1:-1;r?n--:++n<i;)if(t(e[n],n,e))return n;return-1},Ax=function(e){return e!=e},Bx=function(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=xp(e,Ax,0);n=-1<e}return n},Cx=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},Dx=function(e,t){return e.has(t)},De=Gd(Bb,"Set"),Ex=function(){},ek=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Fx=1/0,Gx=De&&1/ek(new De([,-0]))[1]==Fx?function(e){return new De(e)}:Ex,fk=function(e,t,n){var r=-1,i=Bx,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Cx;else if(200<=o){if(i=t?null:Gx(e))return ek(i);a=!1,i=Dx,u=new Te}else u=t?[]:s;e:for(;++r<o;){var c=e[r],l=t?t(c):c;if(c=n||0!==c?c:0,a&&l==l){for(var d=u.length;d--;)if(u[d]===l)continue e;t&&u.push(l),s.push(c)}else i(u,l,n)||(u!==s&&u.push(l),s.push(c))}return s},yp=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Ud=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};Sd.prototype.clear=function(){this.__data__=new cg,this.size=0},Sd.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Sd.prototype.get=function(e){return this.__data__.get(e)},Sd.prototype.has=function(e){return this.__data__.has(e)},Sd.prototype.set=function(e,t){var n=this.__data__;if(n instanceof cg){var r=n.__data__;if(!Nf||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bg(r)}return n.set(e,t),this.size=n.size,this};var Td=Sd,cs=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},gh=function(){try{var e=Gd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Of=function(e,t,n){"__proto__"==t&&gh?gh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Hx=Object.prototype.hasOwnProperty,rl=function(e,t,n){var r=e[t];Hx.call(e,t)&&Mf(r,n)&&(void 0!==n||t in e)||Of(e,t,n)},de=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Of(n,s,u):rl(n,s,u)}return n},cc=function(e){return null!=e&&"object"==R(e)},zp=function(e){return cc(e)&&"[object Arguments]"==Ed(e)},Ap=Object.prototype,Ix=Ap.hasOwnProperty,Jx=Ap.propertyIsEnumerable,cf=zp(function(){return arguments}())?zp:function(e){return cc(e)&&Ix.call(e,"callee")&&!Jx.call(e,"callee")},Ya=Array.isArray,Kx=function(){return!1},Ve=Xa((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e;t=n&&n.exports===t?Bb.Buffer:void 0,e.exports=(t?t.isBuffer:void 0)||Kx})),Lx=/^(?:0|[1-9]\d*)$/,gk=function(e,t){var n=R(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Lx.test(e))&&-1<e&&0==e%1&&e<t},hk=function(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e},Ba={};Ba["[object Float32Array]"]=Ba["[object Float64Array]"]=Ba["[object Int8Array]"]=Ba["[object Int16Array]"]=Ba["[object Int32Array]"]=Ba["[object Uint8Array]"]=Ba["[object Uint8ClampedArray]"]=Ba["[object Uint16Array]"]=Ba["[object Uint32Array]"]=!0,Ba["[object Arguments]"]=Ba["[object Array]"]=Ba["[object ArrayBuffer]"]=Ba["[object Boolean]"]=Ba["[object DataView]"]=Ba["[object Date]"]=Ba["[object Error]"]=Ba["[object Function]"]=Ba["[object Map]"]=Ba["[object Number]"]=Ba["[object Object]"]=Ba["[object RegExp]"]=Ba["[object Set]"]=Ba["[object String]"]=Ba["[object WeakMap]"]=!1;var Mx=function(e){return cc(e)&&hk(e.length)&&!!Ba[Ed(e)]},hh=function(e){return function(t){return e(t)}},Ee=Xa((function(e,t){var n=t&&!t.nodeType&&t;n=(t=n&&e&&!e.nodeType&&e)&&t.exports===n&&tp.process;e:{try{var r=t&&t.require&&t.require("util").types;if(r){var i=r;break e}i=n&&n.binding&&n.binding("util");break e}catch(e){}i=void 0}e.exports=i})),Bp=Ee&&Ee.isTypedArray,Nh=Bp?hh(Bp):Mx,Nx=Object.prototype.hasOwnProperty,Cp=function(e,t){var n=Ya(e),r=!n&&cf(e),i=!n&&!r&&Ve(e),o=!n&&!r&&!i&&Nh(e);if(n=n||r||i||o){r=e.length;for(var a=String,s=-1,u=Array(r);++s<r;)u[s]=a(s);r=u}else r=[];for(var c in a=r.length,e)!t&&!Nx.call(e,c)||n&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gk(c,a))||r.push(c);return r},Ox=Object.prototype,ik=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ox)},Dp=function(e,t){return function(n){return e(t(n))}},Px=Dp(Object.keys,Object),Qx=Object.prototype.hasOwnProperty,sd=function(e){return null!=e&&hk(e.length)&&!ci(e)},Rc=function(e){if(sd(e))e=Cp(e);else if(ik(e)){var t,n=[];for(t in Object(e))Qx.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=Px(e);return e},Zr=function(e,t){return e&&de(t,Rc(t),e)},Rx=Object.prototype.hasOwnProperty,We=function(e){if(sd(e))e=Cp(e,!0);else if(jb(e)){var t=ik(e),n=[];for(r in e)("constructor"!=r||!t&&Rx.call(e,r))&&n.push(r);e=n}else{var r=[];if(null!=e)for(t in Object(e))r.push(t);e=r}return e},Xr=function(e,t){return e&&de(t,We(t),e)},ol=Xa((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=(t=n&&n.exports===t?Bb.Buffer:void 0)?t.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),Ih=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Sx=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},Ep=function(){return[]},Tx=Object.prototype.propertyIsEnumerable,Fp=Object.getOwnPropertySymbols,jk=Fp?function(e){return null==e?[]:(e=Object(e),Sx(Fp(e),(function(t){return Tx.call(e,t)})))}:Ep,Yr=function(e,t){return de(e,jk(e),t)},Mh=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},kk=Dp(Object.getPrototypeOf,Object),Gp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Mh(t,jk(e)),e=kk(e);return t}:Ep,Wr=function(e,t){return de(e,Gp(e),t)},Hp=function(e,t,n){return t=t(e),Ya(e)?t:Mh(t,n(e))},Jh=function(e){return Hp(e,Rc,jk)},ql=function(e){return Hp(e,We,Gp)},lk=Gd(Bb,"DataView"),mk=Gd(Bb,"Promise"),nk=Gd(Bb,"WeakMap"),Ux=Fd(lk),Vx=Fd(Nf),Wx=Fd(mk),Xx=Fd(De),Yx=Fd(nk),Hd=Ed;(lk&&"[object DataView]"!=Hd(new lk(new ArrayBuffer(1)))||Nf&&"[object Map]"!=Hd(new Nf)||mk&&"[object Promise]"!=Hd(mk.resolve())||De&&"[object Set]"!=Hd(new De)||nk&&"[object WeakMap]"!=Hd(new nk))&&(Hd=function(e){var t=Ed(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?Fd(e):"")switch(e){case Ux:return"[object DataView]";case Vx:return"[object Map]";case Wx:return"[object Promise]";case Xx:return"[object Set]";case Yx:return"[object WeakMap]"}return t});var Ue=Hd,Zx=Object.prototype.hasOwnProperty,Vr=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Zx.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ih=Bb.Uint8Array,ok=function(e){var t=new e.constructor(e.byteLength);return new ih(t).set(new ih(e)),t},$x=/\w*$/,Ip=Lb?Lb.prototype:void 0,Jp=Ip?Ip.valueOf:void 0,am=function(e,t){return t=t?ok(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},$r=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return ok(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?ok(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return am(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,$x.exec(e))).lastIndex=e.lastIndex,t;case"[object Set]":return new r;case"[object Symbol]":return Jp?Object(Jp.call(e)):{}}},Kp=Object.create,ay=function(){function e(){}return function(t){return jb(t)?Kp?Kp(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),pl=function(e){return"function"!=typeof e.constructor||ik(e)?{}:ay(kk(e))},by=function(e){return cc(e)&&"[object Map]"==Ue(e)},Lp=Ee&&Ee.isMap,bs=Lp?hh(Lp):by,cy=function(e){return cc(e)&&"[object Set]"==Ue(e)},Mp=Ee&&Ee.isSet,as=Mp?hh(Mp):cy,ra={};ra["[object Arguments]"]=ra["[object Array]"]=ra["[object ArrayBuffer]"]=ra["[object DataView]"]=ra["[object Boolean]"]=ra["[object Date]"]=ra["[object Float32Array]"]=ra["[object Float64Array]"]=ra["[object Int8Array]"]=ra["[object Int16Array]"]=ra["[object Int32Array]"]=ra["[object Map]"]=ra["[object Number]"]=ra["[object Object]"]=ra["[object RegExp]"]=ra["[object Set]"]=ra["[object String]"]=ra["[object Symbol]"]=ra["[object Uint8Array]"]=ra["[object Uint8ClampedArray]"]=ra["[object Uint16Array]"]=ra["[object Uint32Array]"]=!0,ra["[object Error]"]=ra["[object Function]"]=ra["[object WeakMap]"]=!1;var Vd=function(e){return"symbol"==R(e)||cc(e)&&"[object Symbol]"==Ed(e)},dy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ey=/^\w*$/,pk=function(e,t){if(Ya(e))return!1;var n=R(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Vd(e))||ey.test(e)||!dy.test(e)||null!=t&&e in Object(t)};Kh.Cache=bg;var fy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gy=/\\(\\)?/g,hy=function(e){var t=(e=Kh(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(fy,(function(e,n,r,i){t.push(r?i.replace(gy,"$1"):n||e)})),t})),ds=1/0,Np=Lb?Lb.prototype:void 0,tl=Np?Np.toString:void 0,jh=function(e,t){return Ya(e)?e:pk(e,t)?[e]:hy(null==e?"":sl(e))},iy=1/0,Pf=function(e){if("string"==typeof e||Vd(e))return e;var t=e+"";return"0"==t&&1/e==-iy?"-0":t},kh=function(e,t){for(var n=0,r=(t=jh(t,e)).length;null!=e&&n<r;)e=e[Pf(t[n++])];return n&&n==r?e:void 0},jy=function(e,t){if(!(2>(t=jh(t,e)).length)){var n=t,r=0,i=-1,o=-1,a=n.length;for(0>r&&(r=-r>a?0:a+r),0>(i=i>a?a:i)&&(i+=a),a=r>i?0:i-r>>>0,r>>>=0,i=Array(a);++o<a;)i[o]=n[o+r];e=kh(e,i)}return(n=null==e)||(n=null==t?0:t.length,n=delete e[Pf(n?t[n-1]:void 0)]),n},Op=Function.prototype.toString,ky=Object.prototype.hasOwnProperty,ly=Op.call(Object),bm=function(e){return!(!cc(e)||"[object Object]"!=Ed(e))&&(null===(e=kk(e))||"function"==typeof(e=ky.call(e,"constructor")&&e.constructor)&&e instanceof e&&Op.call(e)==ly)},my=function(e){return bm(e)?void 0:e},Pp=Lb?Lb.isConcatSpreadable:void 0,es=function(e){return Ya(e)||cf(e)||!!(Pp&&e&&e[Pp])},ny=function(e){return null!=e&&e.length?Lh(e,1):[]},oy=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Qp=Math.max,Rp=function(e,t,n){return t=Qp(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Qp(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];for(i=-1,o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),oy(e,this,o)}},py=function(e){return function(){return e}},lh=function(e){return e},qy=Date.now,Sp=function(e){var t=0,n=0;return function(){var r=qy(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(gh?function(e,t){return gh(e,"toString",{configurable:!0,enumerable:!1,value:py(t),writable:!0})}:lh),rg=(e=function(e,t){var n={};if(null==e)return n;var r=!1;t=Ud(t,(function(t){return t=jh(t,e),r||(r=1<t.length),t})),de(e,ql(e),n),r&&(n=dg(n,7,my));for(var i=t.length;i--;)jy(n,t[i]);return n},Sp(Rp(e,void 0,ny),e+"")),ry=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},$l=function(e,t,n){for(var r=-1,i=Object(e),o=(n=n(e)).length;o--;){var a=n[++r];if(!1===t(i[a],a,i))break}return e},Tp=function(e,t){return e&&$l(e,t,Rc)},qk=function(e,t){return function(t,n){if(null==t)return t;if(!sd(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(Tp),sy=function(e,t,n,r){return qk(e,(function(e,i,o){t(r,e,n(e),o)})),r},Up=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},ul=function(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;u=o.get(e);var c=o.get(t);if(u&&c)return u==t&&c==e;u=-1,c=!0;var l=2&n?new Te:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var d=e[u],f=t[u];if(r)var p=a?r(f,d,u,t,e,o):r(d,f,u,e,t,o);if(void 0!==p){if(p)continue;c=!1;break}if(l){if(!Up(t,(function(e,t){if(!l.has(t)&&(d===e||i(d,e,n,r,o)))return l.push(t)}))){c=!1;break}}else if(d!==f&&!i(d,f,n,r,o)){c=!1;break}}return o.delete(e),o.delete(t),c},ty=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Vp=Lb?Lb.prototype:void 0,rk=Vp?Vp.valueOf:void 0,fs=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new ih(e),new ih(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Mf(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=ty;case"[object Set]":if(s||(s=ek),e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=ul(s(e),s(t),r,i,o,a),a.delete(e),t);case"[object Symbol]":if(rk)return rk.call(e)==rk.call(t)}return!1},gs=Object.prototype.hasOwnProperty,vl=Object.prototype.hasOwnProperty,uy=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{if(s=new Td,r)var d=r(c,l,u,e,t,s);if(void 0===d?!Wd(l,c,3,r,s):!d)return!1}}return!0},vy=function(e){for(var t=Rc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!jb(i)]}return t},Wp=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},wy=function(e){var t=vy(e);return 1==t.length&&t[0][2]?Wp(t[0][0],t[0][1]):function(n){return n===e||uy(n,e,t)}},xy=function(e,t){return pk(e)&&t==t&&!jb(t)?Wp(Pf(e),t):function(n){var r=null==n?void 0:kh(n,e);if(void 0===(r=void 0===r?void 0:r)&&r===t){if(r=null!=n){for(var i=-1,o=(r=jh(r=e,n)).length,a=!1;++i<o;){var s=Pf(r[i]);if(!(a=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}r=a||++i!=o?a:!!(o=null==n?0:n.length)&&hk(o)&&gk(s,o)&&(Ya(n)||cf(n))}s=r}else s=Wd(t,r,3);return s}},yy=function(e){return function(t){return null==t?void 0:t[e]}},zy=function(e){return function(t){return kh(t,e)}},Fe=function(e){return"function"==typeof e?e:null==e?lh:"object"==R(e)?Ya(e)?xy(e[0],e[1]):wy(e):pk(e)?yy(Pf(e)):zy(e)},sk=function(e,t){return function(t,n){return(Ya(t)?ry:sy)(t,e,Fe(n),{})}}((function(e,t,n){Of(e,n,t)})),oc=function(e,t){var n={};return t=Fe(t),Tp(e,(function(e,r,i){Of(n,r,t(e,r,i))})),n},e;N({target:"String",proto:!0,forced:O((function(){var e="".sub('"');return e!==e.toLowerCase()||3<e.split('"').length}))},{sub:function(){return"<sub>"+String(hb(this))+"</sub>"}});var U=sa,Mb=null;try{Mb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c){}sa.prototype.__isLong__,Object.defineProperty(sa.prototype,"__isLong__",{value:!0}),sa.isLong=kb;var xl={},wl={};sa.fromInt=od,sa.fromNumber=Eb,sa.fromBits=ta;var eg=Math.pow;sa.fromString=Oh,sa.fromValue=Sb;var Xd=4294967296,yl=Xd*Xd,Al=yl/2,Xp=od(16777216),Fb=od(0);sa.ZERO=Fb;var pd=od(0,!0);sa.UZERO=pd;var Ge=od(1);sa.ONE=Ge;var Yp=od(1,!0);sa.UONE=Yp;var tk=od(-1);sa.NEG_ONE=tk;var Bl=ta(-1,2147483647,!1);sa.MAX_VALUE=Bl;var zl=ta(-1,-1,!0);sa.MAX_UNSIGNED_VALUE=zl;var lb=ta(0,-2147483648,!1);sa.MIN_VALUE=lb;var E=sa.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*Xd+(this.low>>>0):this.high*Xd+(this.low>>>0)},E.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(lb)){var t=Eb(e),n=this.div(t);return t=n.mul(t).sub(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}n=Eb(eg(e,6),this.unsigned),t=this;for(var r="";;){var i=t.div(n),o=(t.sub(i.mul(n)).toInt()>>>0).toString(e);if((t=i).isZero())return o+r;for(;6>o.length;)o="0"+o;r=""+o+r}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(lb)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&0>this.high},E.isPositive=function(){return this.unsigned||0<=this.high},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return kb(e)||(e=Sb(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&this.high===e.high&&this.low===e.low},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return 0>this.comp(e)},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return 0>=this.comp(e)},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return 0<this.comp(e)},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return 0<=this.comp(e)},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(kb(e)||(e=Sb(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(lb)?lb:this.not().add(Ge)},E.neg=E.negate,E.add=function(e){kb(e)||(e=Sb(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=e.high>>>16,o=65535&e.high,a=e.low>>>16;return r=(a=((e=(65535&this.low)+(65535&e.low))>>>16)+(r+a))>>>16,ta((65535&a)<<16|65535&e,(t=((r+=n+o)>>>16)+(t+i)&65535)<<16|65535&r,this.unsigned)},E.subtract=function(e){return kb(e)||(e=Sb(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return Fb;if(kb(e)||(e=Sb(e)),Mb){var t=Mb.mul(this.low,this.high,e.low,e.high);return ta(t,Mb.get_high(),this.unsigned)}if(e.isZero())return Fb;if(this.eq(lb))return e.isOdd()?lb:Fb;if(e.eq(lb))return this.isOdd()?lb:Fb;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Xp)&&e.lt(Xp))return Eb(this.toNumber()*e.toNumber(),this.unsigned);t=this.high>>>16;var n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=i*(e=65535&e.low),c=(u>>>16)+r*e,l=c>>>16;l+=(c=(65535&c)+i*s)>>>16;var d=(l+=n*e)>>>16;return ta((65535&c)<<16|65535&u,(d=(d+=(l=(65535&l)+r*s)>>>16)+((l=(65535&l)+i*a)>>>16)+(t*e+n*s+r*a+i*o)&65535)<<16|65535&l,this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(kb(e)||(e=Sb(e)),e.isZero())throw Error("division by zero");if(Mb)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?ta(e=(this.unsigned?Mb.div_u:Mb.div_s)(this.low,this.high,e.low,e.high),Mb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?pd:Fb;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return pd;if(e.gt(this.shru(1)))return Yp;var t=pd}else{if(this.eq(lb)){if(e.eq(Ge)||e.eq(tk))return lb;if(e.eq(lb))return Ge;var n=this.shr(1).div(e).shl(1);if(n.eq(Fb))return e.isNegative()?Ge:tk;var r=this.sub(e.mul(n));return n.add(r.div(e))}if(e.eq(lb))return this.unsigned?pd:Fb;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();t=Fb}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var i=Math.ceil(Math.log(n)/Math.LN2);i=48>=i?1:eg(2,i-48);for(var o=Eb(n),a=o.mul(e);a.isNegative()||a.gt(r);)a=(o=Eb(n-=i,this.unsigned)).mul(e);o.isZero()&&(o=Ge),t=t.add(o),r=r.sub(a)}return t},E.div=E.divide,E.modulo=function(e){return kb(e)||(e=Sb(e)),Mb?ta(e=(this.unsigned?Mb.rem_u:Mb.rem_s)(this.low,this.high,e.low,e.high),Mb.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return ta(~this.low,~this.high,this.unsigned)},E.and=function(e){return kb(e)||(e=Sb(e)),ta(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return kb(e)||(e=Sb(e)),ta(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return kb(e)||(e=Sb(e)),ta(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return kb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ta(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ta(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return kb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ta(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ta(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(kb(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return 32>e?ta(this.low>>>e|t<<32-e,t>>>e,this.unsigned):ta(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?ta(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:ta(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},sa.fromBytes=function(e,t,n){return n?sa.fromBytesLE(e,t):sa.fromBytesBE(e,t)},sa.fromBytesLE=function(e,t){return new sa(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},sa.fromBytesBE=function(e,t){return new sa(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var _Ph=function(e,t){return(_Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},uk=!1,Gb={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):uk&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),uk=e},get useDeprecatedSynchronousErrorHandling(){return uk}},mh={closed:!0,next:function(e){},error:function(e){if(Gb.useDeprecatedSynchronousErrorHandling)throw e;Zd(e)},complete:function(){}},Hb=Array.isArray||function(e){return e&&"number"==typeof e.length},Xe=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Ka=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(Yd(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){var a=e instanceof Xe?Cl(e.errors):[e]}}if(Hb(i))for(o=-1,t=i.length;++o<t;)if(Qh(n=i[o]))try{n.unsubscribe()}catch(e){a=a||[],e instanceof Xe?a=a.concat(Cl(e.errors)):a.push(e)}if(a)throw new Xe(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(R(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),nh="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),fa=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=mh;break;case 1:if(!n){o.destination=mh;break}if("object"===R(n)){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Zp(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Zp(o,n,r,i)}return o}return M(t,e),t.prototype[nh]=function(){return this},t.create=function(e,n,r){return(e=new t(e,n,r)).syncErrorThrowable=!1,e},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=e,this},t}(Ka),Zp=function(e){function t(t,n,r,i){var o=e.call(this)||this;if(o._parentSubscriber=t,t=o,Yd(n))var a=n;else n&&(a=n.next,r=n.error,i=n.complete,n!==mh&&(Yd((t=Object.create(n)).unsubscribe)&&o.add(t.unsubscribe.bind(t)),t.unsubscribe=o.unsubscribe.bind(o)));return o._context=t,o._next=a,o._error=r,o._complete=i,o}return M(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Gb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Gb.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Zd(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Zd(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Gb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Gb.useDeprecatedSynchronousErrorHandling)throw e;Zd(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Gb.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{t.call(this._context,n)}catch(t){return Gb.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):Zd(t),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._parentSubscriber=this._context=null,e.unsubscribe()},t}(fa),$d="function"==typeof Symbol&&Symbol.observable||"@@observable",V=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator;e:{if(e){if(e instanceof fa)break e;if(e[nh]){e=e[nh]();break e}}e=e||t||n?new fa(e,t,n):new fa(mh)}if(r?e.add(r.call(e,this.source)):e.add(this.source||Gb.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),Gb.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Gb.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Rh(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=El(t))((function(t,r){var i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[$d]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Dl(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=El(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),fd=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),$p=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return M(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1)}},t}(Ka),aq=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return M(t,e),t}(fa),La=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return M(t,e),t.prototype[nh]=function(){return new aq(this)},t.prototype.lift=function(e){var t=new bq(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new fd;if(!this.isStopped){var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].next(e)}},t.prototype.error=function(e){if(this.closed)throw new fd;this.hasError=!0,this.thrownError=e,this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new fd;this.isStopped=!0;var e=this.observers,t=e.length;e=e.slice();for(var n=0;n<t;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new fd;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new fd;return this.hasError?(e.error(this.thrownError),Ka.EMPTY):this.isStopped?(e.complete(),Ka.EMPTY):(this.observers.push(e),new $p(this,e))},t.prototype.asObservable=function(){var e=new V;return e.source=this,e},t.create=function(e,t){return new bq(e,t)},t}(V),bq=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return M(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Ka.EMPTY},t}(La),hs=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;return n._refCount++,e=new Ay(e,n),t=t.subscribe(e),e.closed||(e.connection=n.connect()),t},e}(),Ay=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return M(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null},t}(fa),cq=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return M(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Ka).add(this.source.subscribe(new By(this.getSubject(),this))),e.closed&&(this._connection=null,e=Ka.EMPTY)),e},t.prototype.refCount=function(){return Fl()(this)},t}(V),Vs=function(){var e=cq.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),By=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return M(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(aq);!function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}M(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null}}(fa),function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).keySelector=n,t.elementSelector=r,t.durationSelector=i,t.subjectSelector=o,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}M(t,e),t.prototype._next=function(e){try{var t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r=n.get(t);if(this.elementSelector)try{var i=this.elementSelector(e)}catch(e){this.error(e)}else i=e;if(!r&&(r=this.subjectSelector?this.subjectSelector():new La,n.set(t,r),e=new vk(t,r,this),this.destination.next(e),this.durationSelector)){e=void 0;try{e=this.durationSelector(new vk(t,r))}catch(e){return void this.error(e)}this.add(e.subscribe(new Cy(t,r,this)))}r.closed||r.next(i)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))}}(fa);var Cy=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return M(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(fa),vk=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return M(t,e),t.prototype._subscribe=function(e){var t=new Ka,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new Dy(n)),t.add(r.subscribe(e)),t},t}(V),Dy=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return M(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Ka),Ey=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return M(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fd;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(La),Qf=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return M(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(e){t=!0,n=!!e&&e||Error(e)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return M(t,e),t.prototype.schedule=function(e,t){return this},t}(Ka)),Fy=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return M(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),0<n?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Qf),wk=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Rf=function(e){function t(n,r){void 0===r&&(r=wk.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return M(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(wk),oh=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t}(Rf))(Fy),dc=new V((function(e){return e.complete()})),Gl=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},xk;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(xk||(xk={}));var He=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return mb(this.value);case"E":return ba(this.error);case"C":return Ye()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),ls=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new dq(e,this.scheduler,this.delay))},e}(),dq=function(e){function t(t,n,r){return void 0===r&&(r=0),(t=e.call(this,t)||this).scheduler=n,t.delay=r,t}return M(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new Gy(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(He.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(He.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(He.createComplete()),this.unsubscribe()},t}(fa),Gy=function(e,t){this.notification=e,this.destination=t},ce=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=1>t?1:t,i._windowTime=1>n?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return M(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new Hy(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;if(this.closed)throw new fd;if(this.isStopped||this.hasError)var o=Ka.EMPTY;else this.observers.push(e),o=new $p(this,e);if(r&&e.add(e=new dq(e,r)),t)for(t=0;t<i&&!e.closed;t++)e.next(n[t]);else for(t=0;t<i&&!e.closed;t++)e.next(n[t].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o},t.prototype._getNow=function(){return(this.scheduler||oh).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},t}(La),Hy=function(e,t){this.time=e,this.value=t},$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return M(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Ka.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Ka.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(La),Iy=1,Jy=Promise.resolve(),Uh={},eq={setImmediate:function(e){var t=Iy++;return Uh[t]=!0,Jy.then((function(){return Hl(t)&&e()})),t},clearImmediate:function(e){Hl(e)}},Ky=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return M(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=eq.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(eq.clearImmediate(n),t.scheduled=void 0)},t}(Qf),di=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Rf))(Ky),Ly=di,yk=new Rf(Qf),Vc=yk,My=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return M(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(Qf),fq=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Rf))(My),Ny=function(e){function t(t,n){void 0===t&&(t=gq),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return M(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Rf),gq=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return M(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),this.delay=e.frame+r,(e=e.actions).push(this),e.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Qf),zk=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),gg=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),pb=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),ms=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Oy(e,this.project,this.thisArg))},e}(),Oy=function(e){function t(t,n,r){return(t=e.call(this,t)||this).project=n,t.count=0,t.thisArg=r||t,t}return M(t,e),t.prototype._next=function(e){try{var t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(fa),Ak=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(fa),rs=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return M(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(fa),Py=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Zd),t}},Uc="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Qy=function(e){return function(t){for(var n=e[Uc]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},Ry=function(e){return function(t){var n=e[$d]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Nl=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},af=function(e){if(e&&"function"==typeof e[$d])return Ry(e);if(Nl(e))return Gl(e);if(Ll(e))return Py(e);if(e&&"function"==typeof e[Uc])return Qy(e);throw e=Qh(e)?"an invalid object":"'"+e+"'",new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},hq={},Ty=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Sy(e,this.resultSelector))},e}(),Sy=function(e){function t(t,n){return(t=e.call(this,t)||this).resultSelector=n,t.active=0,t.values=[],t.observables=[],t}return M(t,e),t.prototype._next=function(e){this.values.push(hq),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.toRespond=this.active=t;for(var n=0;n<t;n++)this.add(Vh(this,e[n],void 0,n))}},t.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=(e=this.values)[n];r=this.toRespond?r===hq?--this.toRespond:this.toRespond:0,e[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(e):this.destination.next(e.slice()))},t.prototype._tryResultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ak),pc=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return M(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(fa);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i}M(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(fa);var qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(fa);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}M(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()}}(fa);var vs=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Uy(e,this.project,this.concurrent))},e}(),Uy=function(e){function t(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),(t=e.call(this,t)||this).project=n,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}return M(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new pc(this),n=this.destination;n.add(t),(e=fc(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(qc),Bk=B.parseFloat,iq=-1/0!=1/Bk("\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff-0")?function(e){e=Tj(String(e));var t=Bk(e);return 0===t&&"-"==e.charAt(0)?-0:t}:Bk;N({global:!0,forced:parseFloat!=iq},{parseFloat:iq});var Ck=new V(ec),As=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Vy(e,this.predicate,this.thisArg))},e}(),Vy=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.thisArg=r,t.count=0,t}return M(t,e),t.prototype._next=function(e){try{var t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(fa),Bs=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Wy(e))},e}(),Wy=function(e){function t(t){return(t=e.call(this,t)||this).hasFirst=!1,t.observables=[],t.subscriptions=[],t}return M(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=Vh(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){for(this.hasFirst=!0,e=0;e<this.subscriptions.length;e++)if(e!==n){var r=this.subscriptions[e];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(Ak),Es=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Xy(e,this.resultSelector))},e}(),Xy=function(e){function t(t,n,r){return(t=e.call(this,t)||this).resultSelector=n,t.iterators=[],t.active=0,t.resultSelector="function"==typeof n?n:void 0,t}return M(t,e),t.prototype._next=function(e){var t=this.iterators;Hb(e)?t.push(new Yy(e)):"function"==typeof e[Uc]?t.push(new Zy(e[Uc]())):t.push(new $y(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)this.destination.complete();else{this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}var o=!1,a=[];for(r=0;r<t;r++){var s=(i=e[r]).next();if(i.hasCompleted()&&(o=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},t.prototype._tryresultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(fa),Zy=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},e}(),Yy=function(){function e(e){this.array=e,this.length=this.index=0,this.length=e.length}return e.prototype[Uc]=function(){return this},e.prototype.next=function(e){e=this.index++;var t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),$y=function(e){function t(t,n,r){return(t=e.call(this,t)||this).parent=n,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return M(t,e),t.prototype[Uc]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return fc(this.observable,new pc(this))},t}(qc),az=Object.freeze({__proto__:null,Observable:V,ConnectableObservable:cq,GroupedObservable:vk,observable:$d,Subject:La,BehaviorSubject:Ey,ReplaySubject:ce,AsyncSubject:$e,asap:Ly,asapScheduler:di,async:Vc,asyncScheduler:yk,queue:oh,queueScheduler:oh,animationFrame:fq,animationFrameScheduler:fq,VirtualTimeScheduler:Ny,VirtualAction:gq,Scheduler:wk,Subscription:Ka,Subscriber:fa,Notification:He,get NotificationKind(){return xk},pipe:Sh,noop:ec,identity:Sc,isObservable:function(e){return!!e&&(e instanceof V||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:zk,EmptyError:gg,ObjectUnsubscribedError:fd,UnsubscriptionError:Xe,TimeoutError:pb,bindCallback:Il,bindNodeCallback:Jl,combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=t=void 0;return Tc(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Hb(e[0])&&(e=e[0]),Ze(e,n).lift(new Ty(t))},concat:Ol,defer:qd,empty:Ye,forkJoin:Pl,from:Ib,fromEvent:fb,fromEventPattern:Rl,generate:function(e,t,n,r,i){if(1==arguments.length){var o=e.initialState;t=e.condition,n=e.iterate;var a=e.resultSelector||Sc;i=e.scheduler}else void 0===r||Tc(r)?(o=e,a=Sc,i=r):(o=e,a=r);return new V((function(e){var r=o;if(i)return i.schedule(ws,0,{subscriber:e,iterate:n,condition:t,resultSelector:a,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){e.error(t);break}if(!s){e.complete();break}}s=void 0;try{s=a(r)}catch(t){e.error(t);break}if(e.next(s),e.closed)break;try{r=n(r)}catch(t){e.error(t);break}}}))},iif:function(e,t,n){return void 0===t&&(t=dc),void 0===n&&(n=dc),qd((function(){return e()?t:n}))},interval:Sl,merge:Tb,never:function(){return Ck},of:mb,onErrorResumeNext:Yh,pairs:function(e,t){return new V(t?function(n){var r=Object.keys(e),i=new Ka;return i.add(t.schedule(ys,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})},partition:function(e,t,n){return[nb(t,n)(new V(af(e))),nb(zs(t,n))(new V(af(e)))]},race:ya,range:function(e,t,n){return void 0===e&&(e=0),new V((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(Cs,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))},throwError:ba,timer:uc,using:function(e,t){return new V((function(n){try{var r=e()}catch(e){return void n.error(e)}try{var i=t(r)}catch(e){return void n.error(e)}var o=(i?Ib(i):dc).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))},zip:Zh,scheduled:Ml,EMPTY:dc,NEVER:Ck,config:Gb}),Fs=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new bz(e,this.selector,this.caught))},e}(),bz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).selector=n,t.caught=r,t}return M(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),t=new pc(this),this.add(t),(n=fc(n,t))!==t&&this.add(n)}},t}(qc),Gs=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new cz(e,this.defaultValue))},e}(),cz=function(e){function t(t,n){return(t=e.call(this,t)||this).defaultValue=n,t.isEmpty=!0,t}return M(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(fa),Hs=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new dz(e,this.delay,this.scheduler))},e}(),dz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).delay=n,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}return M(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(i);0<n.length?(t=Math.max(0,n[0].time-r.now()),this.schedule(e,t)):(this.unsubscribe(),t.active=!1)},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler;e=new ez(t.now()+this.delay,e),this.queue.push(e),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(He.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(He.createComplete()),this.unsubscribe()},t}(fa),ez=function(e,t){this.time=e,this.notification=t},Is=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new fz(e,this.keySelector,this.flushes))},e}(),fz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).keySelector=n,t.values=new Set,r&&t.add(fc(r,new pc(t))),t}return M(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination;try{var n=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(qc),Ks=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new gz(e,this.errorFactory))},e}(),gz=function(e){function t(t,n){return(t=e.call(this,t)||this).errorFactory=n,t.hasValue=!1,t}return M(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(fa),Ls=function(){function e(e){if(this.total=e,0>this.total)throw new zk}return e.prototype.call=function(e,t){return t.subscribe(new hz(e,this.total))},e}(),hz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.count=0,t}return M(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(fa),Ms=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new iz(e,this.project))},e}(),iz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.hasSubscription=!1,t.hasCompleted=!1,t.index=0,t}return M(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new pc(this),n=this.destination;n.add(t),(e=fc(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(qc),Ns=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new jz(e,this.callback))},e}(),jz=function(e){function t(t,n){return(t=e.call(this,t)||this).add(new Ka(n)),t}return M(t,e),t}(fa),Ps=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new kz(e))},e}(),kz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype._next=function(e){},t}(fa),Qs=function(){function e(e){if(this.total=e,0>this.total)throw new zk}return e.prototype.call=function(e,t){return t.subscribe(new lz(e,this.total))},e}(),lz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.ring=[],t.count=0,t}return M(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(fa),Rs=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new mz(e,this.value))},e}(),mz=function(e){function t(t,n){return(t=e.call(this,t)||this).value=n,t}return M(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(fa),Ss=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new nz(e,this.accumulator,this.seed,this.hasSeed))},e}(),nz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this).accumulator=n,t._seed=r,t.hasSeed=i,t.index=0,t}return M(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=n,this.destination.next(n)},t}(fa),Us=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory();return(e=n(r).subscribe(e)).add(t.subscribe(r)),e},e}(),Ws=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new oz(e,this.notifier,this.source))},e}(),oz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).notifier=n,t.source=r,t}return M(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.retriesSubscription=this.errors=void 0;else{n=new La;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=fc(r,new pc(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(qc),Zs=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new pz(e,this.project))},e}(),pz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.index=0,t}return M(t,e),t.prototype._next=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(n)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),t=new pc(this);var n=this.destination;n.add(t),this.innerSubscription=fc(e,t),this.innerSubscription!==t&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(qc),$s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){e=new qz(e);var n=fc(this.notifier,new pc(e));return n&&!e.seenValue?(e.add(n),t.subscribe(e)):e},e}(),qz=function(e){function t(t){return(t=e.call(this,t)||this).seenValue=!1,t}return M(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(qc),bt=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new rz(e,this.predicate,this.inclusive))},e}(),rz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.inclusive=r,t.index=0,t}return M(t,e),t.prototype._next=function(e){var t=this.destination;try{var n=this.predicate(e,this.index++)}catch(e){return void t.error(e)}this.nextOrComplete(e,n)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;t?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(fa),ct=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new sz(e,this.nextOrObserver,this.error,this.complete))},e}(),sz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this)._tapNext=ec,t._tapError=ec,t._tapComplete=ec,t._tapError=r||ec,t._tapComplete=i||ec,Yd(n)?(t._context=t,t._tapNext=n):n&&(t._context=n,t._tapNext=n.next||ec,t._tapError=n.error||ec,t._tapComplete=n.complete||ec),t}return M(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(fa),et={leading:!0,trailing:!1};!function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}M(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){(e=this.tryDurationSelector(e))&&this.add(this._throttled=fc(e,new pc(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(qc);for(var ft=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new tz(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),tz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).duration=n,t.scheduler=r,t.leading=i,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}return M(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(gt,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(fa),it=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new uz(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),uz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).absoluteTimeout=n,t.waitFor=r,t.withObservable=i,t.scheduler=o,t.scheduleTimeout(),t}return M(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(fc(t,new pc(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(qc),kt=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new vz(e,this.observables,this.project))},e}(),vz=function(e){function t(t,n,r){(t=e.call(this,t)||this).observables=n,t.project=r,t.toRespond=[],r=n.length,t.values=Array(r);for(var i=0;i<r;i++)t.toRespond.push(i);for(i=0;i<r;i++)t.add(Vh(t,n[i],void 0,i));return t}return M(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t,0<(e=this.toRespond).length&&-1!==(n=e.indexOf(n))&&e.splice(n,1)},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){0===this.toRespond.length&&(e=[e].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(e){try{var t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ak),jq=Xa((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),ab=[],ph=0;256>ph;++ph)ab[ph]=(ph+256).toString(16).substr(1);var kq=function(e,t){return t=t||0,[ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]]].join("")},Id=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||jq)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||kq(e)},Sf=Id(),Ic,gd,Dk,Ek,hd,Jd,ac,Ie,Nb,Fk,Jc,Kd,Kc,Lc,Mc,Je,Nc,Oc;!function(e){e[e.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(Ic||(Ic={})),function(e){e[e.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",e[e.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(gd||(gd={})),function(e){e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Dk||(Dk={})),function(e){e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Ek||(Ek={})),function(e){e[e.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",e[e.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",e[e.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",e[e.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(hd||(hd={})),function(e){e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",e[e.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",e[e.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",e[e.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(Jd||(Jd={})),function(e){e[e.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",e[e.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",e[e.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",e[e.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(ac||(ac={})),function(e){e[e.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",e[e.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(Ie||(Ie={})),function(e){e[e.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",e[e.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",e[e.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",e[e.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",e[e.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",e[e.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",e[e.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",e[e.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",e[e.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",e[e.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",e[e.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Nb||(Nb={})),function(e){e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Fk||(Fk={})),function(e){e[e.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",e[e.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",e[e.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",e[e.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Jc||(Jc={})),function(e){e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(Kd||(Kd={})),function(e){e[e.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",e[e.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",e[e.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",e[e.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Kc||(Kc={})),function(e){e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Lc||(Lc={})),function(e){e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Mc||(Mc={})),function(e){e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(Je||(Je={})),function(e){e[e.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",e[e.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",e[e.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",e[e.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",e[e.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Nc||(Nc={})),function(e){e[e.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",e[e.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",e[e.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",e[e.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",e[e.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Oc||(Oc={}));var Ob=Ic.ATTRIBUTE_OPERATION_ERR_FAILURE,Fa=Ic.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,ee=Ic.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Ic.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var lq=Ic.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Pb=Ic.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Qb=Ic.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,Tf=gd.CHANNEL_MESSAGE_ERR_FAILURE,Gk=gd.CHANNEL_MESSAGE_ERR_TIMEOUT,mq=gd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,qh=gd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;gd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;var Uf=gd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,wz=Dk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,xz=Ek.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Lc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var nq=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Lc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var oq=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,yz=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Lc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var zz=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,Az=hd.GET_MEMBERS_ERR_FAILURE,Bz=hd.GET_MEMBERS_ERR_REJECTED;hd.GET_MEMBERS_ERR_TIMEOUT,hd.GET_MEMBERS_ERR_TOO_OFTEN;var Cz=hd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,Dz=hd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,rc=Jd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,Ez=Jd.INVITATION_API_CALL_ERR_NOT_STARTED,rh=Jd.INVITATION_API_CALL_ERR_ALREADY_END,pq=Jd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,Fz=Jd.INVITATION_API_CALL_ERR_ALREADY_SENT,qq=ac.JOIN_CHANNEL_ERR_FAILURE;ac.JOIN_CHANNEL_ERR_REJECTED;var Gz=ac.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,rq=ac.JOIN_CHANNEL_TIMEOUT,sq=ac.JOIN_CHANNEL_ERR_EXCEED_LIMIT,tq=ac.JOIN_CHANNEL_ERR_ALREADY_JOINED;ac.JOIN_CHANNEL_ERR_TOO_OFTEN;var uq=ac.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,vq=ac.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,wq=Ie.LEAVE_CHANNEL_ERR_FAILURE,xq=Ie.LEAVE_CHANNEL_ERR_REJECTED,Hz=Ie.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,Iz=Ie.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,yq=Nb.LOGIN_ERR_UNKNOWN,sh=Nb.LOGIN_ERR_REJECTED,th=Nb.LOGIN_ERR_INVALID_ARGUMENT,zq=Nb.LOGIN_ERR_INVALID_APP_ID,Aq=Nb.LOGIN_ERR_INVALID_TOKEN,uh=Nb.LOGIN_ERR_TOKEN_EXPIRED;Nb.LOGIN_ERR_NOT_AUTHORIZED;var Jz=Nb.LOGIN_ERR_ALREADY_LOGIN,Kz=Nb.LOGIN_ERR_TIMEOUT,Lz=Nb.LOGIN_ERR_TOO_OFTEN,Bq=Fk.LOGOUT_ERR_USER_NOT_LOGGED_IN,Cq=Jc.PEER_MESSAGE_ERR_FAILURE,Hk=Jc.PEER_MESSAGE_ERR_TIMEOUT,Dq=Jc.PEER_MESSAGE_ERR_TOO_OFTEN,Ik=Jc.PEER_MESSAGE_ERR_INVALID_USERID,ge=Jc.PEER_MESSAGE_ERR_INVALID_MESSAGE,Jk=Jc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,Mz=Jc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,Eq=Kd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;Kd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var Nz=Kd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;Kd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var Oz=Kd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,Pz=Kc.RENEW_TOKEN_ERR_FAILURE,Qz=Kc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Kc.RENEW_TOKEN_ERR_REJECTED,Kc.RENEW_TOKEN_ERR_TOO_OFTEN;var Rz=Kc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,Sz=Kc.RENEW_TOKEN_ERR_INVALID_TOKEN,Tz=Kc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,Fq=Mc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,Vf=Mc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Mc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var Uz=Mc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Mc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var Gq=Mc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,Kk=Mc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var Wf=Nc.UPLOAD_MEDIA_ERR_FAILURE,jf=Nc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,vh=Nc.UPLOAD_MEDIA_ERR_TIMEOUT,Vz=Nc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,Wz=Nc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,Hq=Nc.UPLOAD_MEDIA_ERR_INTERRUPTED,Xz=Nc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,Xf=Oc.DOWNLOAD_MEDIA_ERR_FAILURE,Lk=Oc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,Yz=Oc.DOWNLOAD_MEDIA_ERR_TIMEOUT,Zz=Oc.DOWNLOAD_MEDIA_ERR_NOT_EXIST,$z=Oc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,Iq=Oc.DOWNLOAD_MEDIA_ERR_INTERRUPTED,aA=Oc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,bA=function(e,t){var n;return qk(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n},wh=function(e,t,n){if(!jb(n))return!1;var r=R(t);return!!("number"==r?sd(n)&&gk(t,n.length):"string"==r&&t in n)&&Mf(n[t],e)},Mk=function(e,t,n){var r=Ya(e)?Up:bA;return n&&wh(e,t,n)&&(t=void 0),r(e,Fe(t))},cA=function(e,t){var n=-1,r=sd(e)?Array(e.length):[];return qk(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},dA=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},eA=function(e,t,n){t=t.length?Ud(t,(function(e){return Ya(e)?function(t){return kh(t,1===e.length?e[0]:e)}:e})):[lh];var r=-1;return t=Ud(t,hh(Fe)),e=cA(e,(function(e,n,i){return{criteria:Ud(t,(function(t){return t(e)})),index:++r,value:e}})),dA(e,(function(e,t){e:{for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){t:{var u=i[r],c=o[r];if(u!==c){var l=void 0!==u,d=null===u,f=u==u,p=Vd(u),h=void 0!==c,v=null===c,g=c==c,m=Vd(c);if(!v&&!m&&!p&&u>c||p&&h&&g&&!v&&!m||d&&h&&g||!l&&g||!f){u=1;break t}if(!d&&!p&&!m&&u<c||m&&l&&f&&!d&&!p||v&&l&&f||!h&&f||!g){u=-1;break t}}u=0}if(u){e=r>=s?u:u*("desc"==n[r]?-1:1);break e}}e=e.index-t.index}return e}))},Jq=function(e,t){return Sp(Rp(e,t,lh),e+"")},Kq=Jq((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&wh(e,t[0],t[1])?t=[]:2<n&&wh(t[0],t[1],t[2])&&(t=[t[0]]),eA(e,Lh(t,1),[])})),Lq=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}(az),Mq=Xa((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=[],r=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,i){var o=(i=void 0===i?{protocols:n,makeWebSocket:r}:i).protocols,a=void 0===o?n:o,s=void 0===(i=i.makeWebSocket)?r:i;return new Lq.Observable((function(n){var r,i=new Lq.Subject,o=s(e,a),u=!1,c=!1,l=function(e){if(r)throw u=!0,e=Error("Web socket message factory function called more than once"),n.error(e),e;return r=e.subscribe((function(e){o.send(e)})),i};return o.onopen=function(){c?(u=!0,o.close()):n.next(l)},o.onmessage=function(e){i.next(e.data)},o.onerror=function(e){u=!0,n.error(Error(e.message))},o.onclose=function(e){u||(u=!0,c?(n.complete(),i.complete()):n.error(Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){c=!0,r&&r.unsubscribe(),u||(u=!0,o.close())}}))}}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(Mq);var bi=function(e,t,n){(void 0===n||Mf(e[t],n))&&(void 0!==n||t in e)||Of(e,t,n)},ai=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},fA=function(e){return Jq((function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,a=2<i?n[2]:void 0;for(o=3<e.length&&"function"==typeof o?(i--,o):void 0,a&&wh(n[0],n[1],a)&&(o=3>i?void 0:o,i=1),t=Object(t);++r<i;)(a=n[r])&&e(t,a,r,o);return t}))}((function(e,t,n,r){Zl(e,t,n,r)})),cm=[],dm=function(e,t){return new WebSocket(e,t)};N({target:"Number",stat:!0},{isInteger:dp}),Sn("from",jj,ej);var gA=function(e,t){for(var n=Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))},hA=Xa((function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};var n=Array(64),r=Array(123);for(e=0;64>e;)r[n[e]=26>e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:a[s++]=n[c>>2],i=(3&c)<<4,u=1;break;case 1:a[s++]=n[i|c>>4],i=(15&c)<<2,u=2;break;case 2:a[s++]=n[i|c>>6],a[s++]=n[63&c],u=0}8191<s&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=n[i],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},t.decode=function(e,t,n){for(var i,o=n,a=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&1<a)break;if(void 0===(u=r[u]))throw Error("invalid encoding");switch(a){case 0:i=u,a=1;break;case 1:t[n++]=i<<2|(48&u)>>4,i=u,a=2;break;case 2:t[n++]=(15&i)<<4|(60&u)>>2,i=u,a=3;break;case 3:t[n++]=(3&i)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}));jg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},jg.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else{e=this._listeners[e];for(var n=0;n<e.length;)e[n].fn===t?e.splice(n,1):++n}return this},jg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var iA=em(em),jA=function jA(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(e){}return null},kA=Xa((function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)128>(t=e.charCodeAt(r))?n+=1:2048>t?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(1>n-t)return"";for(var r,i=null,o=[],a=0;t<n;)128>(r=e[t++])?o[a++]=r:191<r&&224>r?o[a++]=(31&r)<<6|63&e[t++]:239<r&&365>r?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)128>(r=e.charCodeAt(a))?t[n++]=r:(2048>r?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-o}})),lA=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){return 1>n||n>i?e(n):(a+n>r&&(o=e(r),a=0),n=t.call(o,a,a+=n),7&a&&(a=1+(7|a)),n)}},Ld=Ra.zero=new Ra(0,0);Ld.toNumber=function(){return 0},Ld.zzEncode=Ld.zzDecode=function(){return this},Ld.length=function(){return 1};var mA=Ra.zeroHash="\0\0\0\0\0\0\0\0";Ra.fromNumber=function(e){if(0===e)return Ld;var t=0>e;t&&(e=-e);var n=e>>>0;return e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new Ra(n,e)},Ra.from=function(e){if("number"==typeof e)return Ra.fromNumber(e);if(T.isString(e)){if(!T.Long)return Ra.fromNumber(parseInt(e,10));e=T.Long.fromString(e)}return e.low||e.high?new Ra(e.low>>>0,e.high>>>0):Ld},Ra.prototype.toNumber=function(e){if(!e&&this.hi>>>31){e=1+~this.lo>>>0;var t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},Ra.prototype.toLong=function(e){return T.Long?new T.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var id=String.prototype.charCodeAt;Ra.fromHash=function(e){return e===mA?Ld:new Ra((id.call(e,0)|id.call(e,1)<<8|id.call(e,2)<<16|id.call(e,3)<<24)>>>0,(id.call(e,4)|id.call(e,5)<<8|id.call(e,6)<<16|id.call(e,7)<<24)>>>0)},Ra.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Ra.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},Ra.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},Ra.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>n?9:10};var T=Xa((function(e,t){function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=gA,t.base64=hA,t.EventEmitter=jg,t.float=iA,t.inquire=jA,t.utf8=kA,t.pool=lA,t.LongBits=Ra,t.isNode=!!(void 0!==Ta&&Ta&&Ta.process&&Ta.process.versions&&Ta.process.versions.node),t.global=t.isNode&&Ta||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ta,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===R(e)},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==R(n)||0<(Array.isArray(n)?n.length:Object.keys(n).length))},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){return e=t.LongBits.fromHash(e),t.Long?t.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),ji=ha,Nk,xh=T.LongBits,Nq=T.base64,Oq=T.utf8,Pq=function(){return T.Buffer?function(){return(ha.create=function(){return new Nk})()}:function(){return new ha}};ha.create=Pq(),ha.alloc=function(e){return new T.Array(e)},T.Array!==Array&&(ha.alloc=T.pool(ha.alloc,T.Array.prototype.subarray)),ha.prototype._push=function(e,t,n){return this.tail=this.tail.next=new df(e,t,n),this.len+=t,this},gi.prototype=Object.create(df.prototype),gi.prototype.fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},ha.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new gi(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},ha.prototype.int32=function(e){return 0>e?this._push(hi,10,xh.fromNumber(e)):this.uint32(e)},ha.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},ha.prototype.uint64=function(e){return e=xh.from(e),this._push(hi,e.length(),e)},ha.prototype.int64=ha.prototype.uint64,ha.prototype.sint64=function(e){return e=xh.from(e).zzEncode(),this._push(hi,e.length(),e)},ha.prototype.bool=function(e){return this._push(fi,1,e?1:0)},ha.prototype.fixed32=function(e){return this._push(ii,4,e>>>0)},ha.prototype.sfixed32=ha.prototype.fixed32,ha.prototype.fixed64=function(e){return e=xh.from(e),this._push(ii,4,e.lo)._push(ii,4,e.hi)},ha.prototype.sfixed64=ha.prototype.fixed64,ha.prototype.float=function(e){return this._push(T.float.writeFloatLE,4,e)},ha.prototype.double=function(e){return this._push(T.float.writeDoubleLE,8,e)};var nA=T.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};ha.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(fi,1,0);if(T.isString(e)){var n=ha.alloc(t=Nq.length(e));Nq.decode(e,n,0),e=n}return this.uint32(t)._push(nA,t,e)},ha.prototype.string=function(e){var t=Oq.length(e);return t?this.uint32(t)._push(Oq.write,t,e):this._push(fi,1,0)},ha.prototype.fork=function(){return this.states=new nt(this),this.head=this.tail=new df(ei,0,0),this.len=0,this},ha.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new df(ei,0,0),this.len=0),this},ha.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},ha.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},ha._configure=function(e){Nk=e,ha.create=Pq(),Nk._configure()},(gc.prototype=Object.create(ji.prototype)).constructor=gc,gc._configure=function(){gc.alloc=T._Buffer_allocUnsafe,gc.writeBytesBuffer=T.Buffer&&T.Buffer.prototype instanceof Uint8Array&&"set"===T.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},gc.prototype.bytes=function(e){T.isString(e)&&(e=T._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(gc.writeBytesBuffer,t,e),this},gc.prototype.string=function(e){var t=T.Buffer.byteLength(e);return this.uint32(t),t&&this._push(ot,t,e),this},gc._configure();var li=Ha,Ok,jm=T.LongBits,oA=T.utf8,Qq="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ha(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ha(e);throw Error("illegal buffer")},Rq=function(){return T.Buffer?function(e){return(Ha.create=function(e){return T.Buffer.isBuffer(e)?new Ok(e):Qq(e)})(e)}:Qq};Ha.create=Rq(),Ha.prototype._slice=T.Array.prototype.subarray||T.Array.prototype.slice,Ha.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Ub(this,10);return e}}(),Ha.prototype.int32=function(){return 0|this.uint32()},Ha.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Ha.prototype.bool=function(){return 0!==this.uint32()},Ha.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ub(this,4);return kg(this.buf,this.pos+=4)},Ha.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ub(this,4);return 0|kg(this.buf,this.pos+=4)},Ha.prototype.float=function(){if(this.pos+4>this.len)throw Ub(this,4);var e=T.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Ha.prototype.double=function(){if(this.pos+8>this.len)throw Ub(this,4);var e=T.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Ha.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Ub(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Ha.prototype.string=function(){var e=this.bytes();return oA.read(e,0,e.length)},Ha.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw Ub(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Ub(this)}while(128&this.buf[this.pos++]);return this},Ha.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Ha._configure=function(e){Ok=e,Ha.create=Rq(),Ok._configure();var t=T.Long?"toLong":"toNumber";T.merge(Ha.prototype,{int64:function(){return ki.call(this)[t](!1)},uint64:function(){return ki.call(this)[t](!0)},sint64:function(){return ki.call(this).zzDecode()[t](!1)},fixed64:function(){return km.call(this)[t](!0)},sfixed64:function(){return km.call(this)[t](!1)}})},(td.prototype=Object.create(li.prototype)).constructor=td,td._configure=function(){T.Buffer&&(td.prototype._slice=T.Buffer.prototype.slice)},td.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},td._configure(),(ef.prototype=Object.create(T.EventEmitter.prototype)).constructor=ef,ef.prototype.rpcCall=function e(t,n,r,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return T.asPromise(e,a,t,n,r,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",n,t),o(null,n)}a.end(!0)}))}catch(e){a.emit("error",e,t),setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},ef.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var pA=Xa((function(e,t){t.Service=ef})),qA={},bc=Xa((function(e,t){function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}var r=t;r.build="minimal",r.Writer=ji,r.BufferWriter=gc,r.Reader=li,r.BufferReader=td,r.util=T,r.rpc=pA,r.roots=qA,r.configure=n,n()}));bc.util.Long=U,bc.configure();var y=bc.Reader,J=bc.Writer,q=bc.util,t=bc.roots.default||(bc.roots.default={}),rA=t.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[39]="GroupCountNoticeUri"]=39,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t[e[115]="FileUploadIndexGetUri"]=115,t[e[116]="FileUploadIndexRetUri"]=116,t[e[117]="FileUploadIndexSetUri"]=117,t[e[118]="FileUploadIndexFinUri"]=118,t[e[119]="FileUploadIndexErrUri"]=119,t[e[125]="FileDownloadIndexGetUri"]=125,t[e[126]="FileDownloadIndexRetUri"]=126,t[e[127]="FileDownloadIndexErrUri"]=127,t[e[201]="UserJoinNoticeUri"]=201,t[e[202]="UserQuitNoticeUri"]=202,t[e[203]="UserWaitNoticeUri"]=203,t[e[301]="UserAttributeGetUri"]=301,t[e[302]="UserAttributeRetUri"]=302,t[e[303]="UserAttributeSetUri"]=303,t[e[304]="UserAttributeModUri"]=304,t[e[305]="UserAttributeDelUri"]=305,t[e[307]="UserAttributeRspUri"]=307,t[e[308]="UserAttributeErrUri"]=308,t[e[311]="UserAttributeKeysGetUri"]=311,t[e[312]="UserAttributeKeysRetUri"]=312,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[401]="SubscribeUserStatusUri"]=401,t[e[402]="UnsubscribeUserStatusUri"]=402,t[e[499]="SubscribeResponseUri"]=499,t}(),yh=t.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri=0,e.prototype.data=q.newBuffer([]),e.encode=function(e,t){return t||(t=J.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Wrapper;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.uri=e.int32();break;case 2:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},e}(),sA=t.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ping;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),tA=t.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Pong;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),uA=t.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.opt=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.opt=e.uint64();break;case 3:r.instance=e.uint64();break;case 4:r.account=e.string();break;case 5:r.ticket=e.string();break;default:e.skipType(7&i)}}return r},e}(),vA=t.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserResp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),wA=t.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=J.create()),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuit;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e}(),xA=t.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserDrop;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),yA=t.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnter;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),zA=t.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeave;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),AA=t.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupReply;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),Sq=t.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeaveNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),Tq=t.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnterNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),Uq=t.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.options=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=q.newBuffer([]),e.prototype.MiscMap=q.emptyObject,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var n=Object.keys(e.MiscMap),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).bytes(e.MiscMap[n[r]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r,i,o=new t.Message;e.pos<n;)switch((r=e.uint32())>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:o.MiscMap===q.emptyObject&&(o.MiscMap={});var a=e.uint32()+e.pos;for(r="",i=[];e.pos<a;){var s=e.uint32();switch(s>>>3){case 1:r=e.string();break;case 2:i=e.bytes();break;default:e.skipType(7&s)}}o.MiscMap[r]=i;break;case 9:o.ms=e.uint64();break;default:e.skipType(7&r)}return o},e}(),Vq=t.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ack;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.dialogue=e.uint64();break;case 3:r.sequence=e.uint64();break;case 4:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),BA=t.FileUploadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(24).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),CA=t.FileUploadIndexRet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(26).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),DA=t.FileUploadIndexSet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.unit=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),EA=t.FileUploadIndexFin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexFin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),FA=t.FileUploadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),GA=t.FileDownloadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(40).uint32(e.unit),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.hash=e.bytes();break;case 4:r.size=e.uint32();break;case 5:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),HA=t.FileDownloadIndexRet=function(){function e(e){if(this.servers=[],this.backups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.zone=0,e.prototype.servers=q.emptyArray,e.prototype.backups=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(24).uint32(e.zone),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}if(null!=e.backups&&e.backups.length){for(t.uint32(42).fork(),n=0;n<e.backups.length;++n)t.uint32(e.backups[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:r.zone=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;case 5:if(r.backups&&r.backups.length||(r.backups=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.backups.push(e.uint32());else r.backups.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),IA=t.FileDownloadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),JA=t.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.pageSize=e.uint32();break;case 4:r.pageNumber=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),KA=t.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&n.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&n.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&n.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var r=0;r<e.memberInfos.length;++r)t.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[r],n.uint32(50).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.totalSize=e.uint32();break;case 4:r.pageSize=e.uint32();break;case 5:r.pageNumber=e.uint32();break;case 6:r.memberInfos&&r.memberInfos.length||(r.memberInfos=[]),r.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult.MemberInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),LA=t.UserStatusList=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),MA=t.UserStatusResult=function(){function e(e){if(this.userInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.userInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.userInfos&&e.userInfos.length)for(var r=0;r<e.userInfos.length;++r)t.UserStatusResult.UserStatusInfo.encode(e.userInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.userInfos&&r.userInfos.length||(r.userInfos=[]),r.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.UserStatusInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult.UserStatusInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),NA=t.UserAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),OA=t.UserAttributeRet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),PA=t.UserAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),QA=t.UserAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),RA=t.UserAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),SA=t.UserAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),TA=t.UserAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),UA=t.UserAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),VA=t.UserAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRsp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),WA=t.GroupStatusList=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groups=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)t.uint32(18).string(e.groups[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),XA=t.GroupStatusResult=function(){function e(e){if(this.groupInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groupInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.groupInfos&&e.groupInfos.length)for(var r=0;r<e.groupInfos.length;++r)t.GroupStatusResult.GroupInfo.encode(e.groupInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groupInfos&&r.groupInfos.length||(r.groupInfos=[]),r.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.GroupInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.memberCount&&Object.hasOwnProperty.call(e,"memberCount")&&t.uint32(16).uint32(e.memberCount),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult.GroupInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.group=e.string();break;case 2:r.memberCount=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),YA=t.GroupCountNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupCountNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.group=e.string();break;case 4:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),ZA=t.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),$A=t.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),aB=t.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),bB=t.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),cB=t.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(34).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),dB=t.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&n.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.instance=e.uint64();break;case 4:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),eB=t.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRsp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),fB=t.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),gB=t.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;default:e.skipType(7&i)}}return r},e}(),hB=t.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),iB=t.SubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),jB=t.UnsubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UnsubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),kB=t.UserJoinNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoinNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),lB=t.UserQuitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),mB=t.UserWaitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserWaitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),nB=t.SubscribeResponse=function(){function e(e){if(this.errors=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.errors=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.errors&&e.errors.length)for(var r=0;r<e.errors.length;++r)t.SubscribeResponse.SubscribeErrorsType.encode(e.errors[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.errors&&r.errors.length||(r.errors=[]),r.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.SubscribeErrorsType=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse.SubscribeErrorsType;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),oB=Object.freeze({__proto__:null,URI:rA,Wrapper:yh,Ping:sA,Pong:tA,UserJoin:uA,UserResp:vA,UserQuit:wA,UserDrop:xA,GroupEnter:yA,GroupLeave:zA,GroupReply:AA,GroupLeaveNotice:Sq,GroupEnterNotice:Tq,Message:Uq,Ack:Vq,FileUploadIndexGet:BA,FileUploadIndexRet:CA,FileUploadIndexSet:DA,FileUploadIndexFin:EA,FileUploadIndexErr:FA,FileDownloadIndexGet:GA,FileDownloadIndexRet:HA,FileDownloadIndexErr:IA,GroupAllUsersList:JA,GroupAllUsersResult:KA,UserStatusList:LA,UserStatusResult:MA,UserAttributeGet:NA,UserAttributeRet:OA,UserAttributeSet:PA,UserAttributeMod:QA,UserAttributeDel:RA,UserAttributeErr:SA,UserAttributeKeysGet:TA,UserAttributeKeysRet:UA,UserAttributeRsp:VA,GroupStatusList:WA,GroupStatusResult:XA,GroupCountNotice:YA,GroupAttributeGet:ZA,GroupAttributeRet:$A,GroupAttributeSet:aB,GroupAttributeMod:bB,GroupAttributeDel:cB,GroupAttributeAlt:dB,GroupAttributeRsp:eB,GroupAttributeErr:fB,GroupAttributeKeysGet:gB,GroupAttributeKeysRet:hB,SubscribeUserStatus:iB,UnsubscribeUserStatus:jB,UserJoinNotice:kB,UserQuitNotice:lB,UserWaitNotice:mB,SubscribeResponse:nB,default:t}),pB="".repeat||function(e){var t=String(hb(this)),n="";if(0>(e=ic(e))||1/0==e)throw RangeError("Wrong number of repetitions");for(;0<e;(e>>>=1)&&(t+=t))1&e&&(n+=t);return n},qB=Math.ceil,Wq=function(e){return function(t,n,r){var i=(t=String(hb(t))).length;return r=void 0===r?" ":String(r),(n=za(n))<=i||""==r?t:(n-=i,(i=pB.call(r,qB(n/r.length))).length>n&&(i=i.slice(0,n)),e?t+i:i+t)}},rB=Wq(!1),sB=Wq(!0),Xq=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(oe);N({target:"String",proto:!0,forced:Xq},{padEnd:function(e){return sB(this,e,1<arguments.length?arguments[1]:void 0)}}),N({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var tB=kf,Yq=function(e){return function(t){t=rb(t);for(var n,r=Dc(t),i=r.length,o=0,a=[];i>o;)n=r[o++],ja&&!tB.call(t,n)||a.push(e?[n,t[n]]:t[n]);return a}},uB=[Yq(!0),Yq(!1)][0];N({target:"Object",stat:!0},{entries:function(e){return uB(e)}});var vB=Db.f,Zq="".endsWith,wB=Math.min,$q=Oj("endsWith"),xB=!$q&&!!function(){var e=vB(String.prototype,"endsWith");return e&&!e.writable}();N({target:"String",proto:!0,forced:!xB&&!$q},{endsWith:function(e){var t=String(hb(this));Nj(e);var n=1<arguments.length?arguments[1]:void 0,r=za(t.length);return n=void 0===n?r:wB(za(n),r),r=String(e),Zq?Zq.call(t,r,n):t.slice(n-r.length,n)===r}}),Kg("match",1,(function(e,t,n){return[function(t){var n=hb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;if(e=qa(e),r=String(this),!e.global)return te(e,r);var i=e.unicode;e.lastIndex=0;for(var o,a=[],s=0;null!==(o=te(e,r));)o=String(o[0]),a[s]=o,""===o&&(e.lastIndex=bj(r,za(e.lastIndex),i)),s++;return 0===s?null:a}]}));var yB=Db.f,ar="".startsWith,zB=Math.min,br=Oj("startsWith"),AB=!br&&!!function(){var e=yB(String.prototype,"startsWith");return e&&!e.writable}();N({target:"String",proto:!0,forced:!AB&&!br},{startsWith:function(e){var t=String(hb(this));Nj(e);var n=za(zB(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return ar?ar.call(t,r,n):t.slice(n,n+r.length)===r}});var sm=function(e){var t=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(e=e.replace(t,(function(e,t,r,i){switch(r=n.shift(),i){case"s":r=""+r;break;case"d":r=Number(r);break;case"j":r=JSON.stringify(r)}return t?(n.unshift(r),e):r}))),n.length&&(e+=" "+n.join(" ")),""+e.replace(/%{2,2}/g,"%")},BB=/\s/,CB=function(e){for(var t=e.length;t--&&BB.test(e.charAt(t)););return t},DB=/^\s+/,cr=NaN,EB=/^[-+]0x[0-9a-f]+$/i,FB=/^0b[01]+$/i,GB=/^0o[0-7]+$/i,HB=parseInt,Pk=function(e){if("number"==typeof e)return e;if(Vd(e))return cr;if(jb(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=jb(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e?e.slice(0,CB(e)+1).replace(DB,""):e;var t=FB.test(e);return t||GB.test(e)?HB(e.slice(2),t?2:8):EB.test(e)?cr:+e},IB=Math.max,JB=Math.min,KB=function(e,t,n){function r(t){var n=u,r=c;return u=c=void 0,p=t,l=e.apply(r,n)}function i(e){var n=e-f;return e-=p,void 0===f||n>=t||0>n||v&&e>=m}function o(){var e=Bb.Date.now();if(i(e))return a(e);var n=setTimeout,r=e-p;e=t-(e-f),r=v?JB(e,m-r):e,d=n(o,r)}function a(e){return d=void 0,g&&u?r(e):(u=c=void 0,l)}function s(){var e=Bb.Date.now(),n=i(e);if(u=arguments,c=this,f=e,n){if(void 0===d)return p=e=f,d=setTimeout(o,t),h?r(e):l;if(v)return clearTimeout(d),d=setTimeout(o,t),r(f)}return void 0===d&&(d=setTimeout(o,t)),l}var u,c,l,d,f,p=0,h=!1,v=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=Pk(t)||0,jb(n)){h=!!n.leading;var m=(v="maxWait"in n)?IB(Pk(n.maxWait)||0,t):m;g="trailing"in n?!!n.trailing:g}return s.cancel=function(){void 0!==d&&clearTimeout(d),p=0,u=f=c=d=void 0},s.flush=function(){return void 0===d?l:a(Bb.Date.now())},s},sc=function(e){function t(e,i){return W(this,t),m(n(e=r.call(this,rm(e,i))),"originalError",void 0),m(n(e),"code",void 0),m(n(e),"serverCode",void 0),"number"==typeof i?e.code=i:"string"==typeof i?e.name=i:void 0!==i&&(i.originalError&&(e.originalError=i.originalError),void 0!==i.code&&(e.code=i.code),void 0!==i.serverCode&&(e.serverCode=i.serverCode)),e}ka(t,e);var r=la(t);return t}(Re(Error)),Da=function(e){function t(e,i){return W(this,t),m(n(e=r.call(this,rm(e,i))),"name","RtmInternalError"),m(n(e),"code",void 0),e.code=i,e}ka(t,e);var r=la(t);return t}(Re(Error)),zh=function(){return function(e){function t(e){W(this,t);var r=Object.keys(e);return n.call(this,e[r[0]],r[0])}ka(t,e);var n=la(t);return t}(Da)},Ca=zh(),bb=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmTimeoutError"),e}ka(t,e);var r=la(t);return t}(sc),L=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidArgumentError"),e}ka(t,e);var r=la(t);return t}(sc),H=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidStatusError"),e}ka(t,e);var r=la(t);return t}(sc),Qk=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInterruptedError"),e}ka(t,e);var r=la(t);return t}(sc),gb=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmLimitExceededError"),e}ka(t,e);var r=la(t);return t}(sc),LB=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvokeTooOftenError"),e}ka(t,e);var r=la(t);return t}(sc),ca=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnavailableError"),m(n(e),"serverCode",void 0),m(n(e),"statusCode",void 0),e}ka(t,e);var r=la(t);return t}(sc),Ke=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnauthenticatedError"),m(n(e),"serverCode",void 0),e}ka(t,e);var r=la(t);return t}(sc),Pc=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnknownError"),e}ka(t,e);var r=la(t);return t}(sc),Na=function(e){return e instanceof bb||e instanceof pb},wa=function(e){return e instanceof sc},Md=function(e,t,n){return['Executing "%s.%s" timed out after %ds',e,t,n/1e3]},qm=new Map,MB=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},Rk=Object.keys,dr=Object.entries.bind(Object),mg=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e},xm=function(e){for(var t="",n=(e=new Uint8Array(e)).byteLength,r=-1;++r<n;)t+=String.fromCharCode(e[r]);return t=btoa(t),"data:;base64,".concat(t)},NB=O((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));N({target:"Date",proto:!0,forced:NB},{toJSON:function(e){e=Wa(this);var t=hc(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}}),N({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var vt=Object.prototype.hasOwnProperty,er=function(e,t,n){return JSON.stringify(Cm(e),t,n)};er.ensureProperties=Cm;var OB=function(e,t){t=t||{};var n=R(e);if("string"===n&&0<e.length)return wt(e);if("number"===n&&isFinite(e))return e=t.long?864e5<=(t=Math.abs(e))?tg(e,t,864e5,"day"):36e5<=t?tg(e,t,36e5,"hour"):6e4<=t?tg(e,t,6e4,"minute"):1e3<=t?tg(e,t,1e3,"second"):e+" ms":864e5<=(t=Math.abs(e))?Math.round(e/864e5)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},PB=function(e){function t(e){function r(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(r.enabled){e=Number(new Date),r.diff=e-(i||e),r.prev=i,i=r.curr=e,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var a=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,i){return"%%"===e?"%":(a++,"function"==typeof(i=t.formatters[i])&&(e=i.call(r,n[a]),n.splice(a,1),a--),e)})),t.formatArgs.call(r,n),(r.log||t.log).apply(r,n)}}var i,o=null;return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=n,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?t.enabled(e):o},set:function(e){o=e}}),"function"==typeof t.init&&t.init(r),r}function n(e,n){return(e=t(this.namespace+(void 0===n?":":n)+e)).log=this.log,e}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(I(t.names.map(r)),I(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r=0;for(n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=OB,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},fr=Xa((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){try{var e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var n=localStorage;break e}catch(e){}n=void 0}t.storage=n,t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},e.exports=PB(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),gr=fr("RTM:DEBUG"),Le;gr.enabled=!1,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(Le||(Le={}));var QB=function(){function e(t){W(this,e),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.uploadRequest=t.uploadRequest,this.uploadState=Le.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ea(e,[{key:"upload",value:function(e,t){this.LogCache.push(e),this.uploadState===Le.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost,t))}},{key:"postLog",value:function(e,t){var n=this;this.uploadState=Le.Uploading,setTimeout(K(w.mark((function r(){var i,o;return w.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={sdk_version:n.sdkVersion,process_id:n.processId,payload:JSON.stringify(e)},r.prev=1,r.next=4,n.uploadRequest(i,t);case 4:r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(1),o=2>n.uploadResendCount++?2e3:1e4,setTimeout((function(){return n.postLog(n.LogsToPost,t)}),o),r.abrupt("return");case 11:if(gr('The logs uploaded for "process-'.concat(Sf,'"')),0!==n.LogCache.length){r.next=15;break}return n.uploadState=Le.Free,r.abrupt("return");case 15:n.uploadResendCount=0,n.LogsToPost=40>n.LogCache.length?n.LogCache.splice(0,n.LogCache.length):n.LogCache.splice(0,40),n.postLog(n.LogsToPost,t);case 18:case"end":return r.stop()}}),r,null,[[1,6]])}))),Nd.getParameter("LOG_UPLOAD_INTERVAL"))}}]),e}(),hr=function(){var e=K(w.mark((function e(t,n){var r,i,o,a=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(r=2<a.length&&void 0!==a[2]?a[2]:0))){e.next=3;break}return e.abrupt("return");case 3:return i={withCredentials:!0,body:t,timeout:2e4},o="https://".concat(0<r?(null==n?void 0:n.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agoraio.cn":(null==n?void 0:n.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io","/upload/v1"),e.next=7,gf(o,i).catch((function(e){return hr(t,n,r+1)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RB=new QB({processId:"process-".concat(Sf),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.2-0-gcddbca54"),uploadRequest:hr}),ir="text payload rawMessage thumbnail token detail ticket attributeInfos".split(" "),jr=function(e){return"object"===R(e)?md(e)?qg(e,ir):e.constructor&&e.constructor.name:e},kr=function(e,t){return e instanceof Error?e.message:"string"!=typeof e?JSON.stringify(qg(e,ir)):(t=t.map((function(e){return e instanceof Error?e.message:"object"===R(e)?er(Array.isArray(e)?e.map(jr):jr(e)):e})),sm.apply(void 0,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(I(t))))},SB=1,lr=function(e,t,n){var r=fr(e);return r.enabled=!0,r.log=n,r.useColors=!1,function(n){for(var i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(t.enableLogUpload){i=mg(n);var s=kr(i,o);RB.upload({log_item_id:"".concat(SB++),log_level:e,payload_str:"[".concat(MB(),"] ").concat(e," - ").concat(256<s.length?s.slice(0,256):s)},t._areaConfig)}switch(i=function(e){var t=s||kr(mg(n),o),i=dd.LOG_HANDLER;"function"==typeof i&&i({level:e,message:t}),r(t)},e){case"RTM:INFO":t.logFilter.info&&i("log");break;case"RTM:WARN":t.logFilter.warn&&i("warning");break;case"RTM:ERROR":t.logFilter.error&&i("error");break;case"RTM:TRACK":t.logFilter.track&&i("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":t.logFilter.debug&&i("debug");break;case"RTM:DEBUG":t.logFilter.debug&&i("debug")}}},Sk,mr=function(e){return function(t){var n=1===Sk||void 0===e?"":"Ins#".concat(e," ");return"".concat(n).concat(t)}},Tk=function(e,t,n){var r=mr(Sk);return lr("RTM:".concat(t),n,(function(t){return e(r(t))}))},vb=function(){return function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,t);var a=r.call(this);if(m(n(a),"logError",void 0),m(n(a),"invokeTracker",void 0),m(n(a),"resultTracker",void 0),m(n(a),"errorTracker",void 0),m(n(a),"eventTracker",void 0),m(n(a),"info",void 0),m(n(a),"warn",void 0),m(n(a),"log",void 0),m(n(a),"genLogger",void 0),m(n(a),"loggerId",void 0),m(n(a),"logger",void 0),m(n(a),"name",void 0),a.logger=e,a.name=i,a.loggerId=e.loggerId,a.info=e.info,a.warn=e.warn,a.logError=e.logError,a.genLogger=e.genLogger,a.log=e.genLogger("RTM:DEBUG","<".concat(i,"> ")),a.invokeTracker=e.genTracker("Invoke"),a.eventTracker=e.genTracker("Event"),a.resultTracker=e.genTracker("Result"),a.errorTracker=e.genTracker("Error"),o){var s=a.emit.bind(n(a));a.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e=t[0],n=t.slice(1),a.eventTracker.apply(a,["%s: ".concat(0<n.length?"%s emitted with args: ".concat(n.map((function(){return"%o"}))):"%s emitted"),i,e].concat(I(n)));try{s.apply(void 0,t)}catch(t){a.logError("Caught in the callback function of the event %s",e,t)}}}return a}ka(t,e);var r=la(t);return t}(aa)},TB=function(e){return Tk(console.log.bind(console),"INFO",e)},UB=function(e){return Tk(console.warn.bind(console),"WARN",e)},VB=function(e){return Tk(console.error.bind(console),"ERROR",e)},nr=function(e,t){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=mr(e),o=console.debug.bind(console),a=lr(n,t,(function(e){return o(i(e))}));return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return a.apply(void 0,[r+e].concat(n))}}},WB=function(e,t){return function(n){return nr(e,t)("RTM:TRACK","[".concat(n,"] "))}},yi=t.URI,yt=yh,XB=Se(oB,["Wrapper"]),Dm=rg(XB,"URI"),YB=Math.floor,ZB=Math.random,or=function(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){r=n;var o=i;o=e[r+=YB(ZB()*(o-r+1))],e[r]=e[n],e[n]=o}return e.length=t,e},$B=function(e){return or(Ih(e))},Em=function(e,t){return Ud(t,(function(t){return e[t]}))},aC=function(e){return or(null==e?[]:Em(e,Rc(e)))},Ah=function(e){return(Ya(e)?$B:aC)(e)},Me={0:9591,1:9593},Ne=function(e){return"https://".concat(e,"/api/v1")},bC=mb.apply(void 0,I(Ah(["ap-web-1.agoraio.cn","ap-web-2.agoraio.cn"].map(Ne)))),cC=mb.apply(void 0,I(Ah(["ap-web-1.agora.io","ap-web-2.agora.io"].map(Ne)))),dC=mb.apply(void 0,I(Ah(["ap-web-3.agoraio.cn","ap-web-4.agoraio.cn"].map(Ne)))),eC=mb.apply(void 0,I(Ah(["ap-web-3.agora.io","ap-web-4.agora.io"].map(Ne)))),Uk=zh(),Vk=function(e){function t(e,i,o,a,s,u){W(this,t);var c=r.call(this,s,pm("Socket-",s.loggerId));if(m(n(c),"isActiveClose",!1),m(n(c),"loggedIn",!1),m(n(c),"useCnDomain",void 0),m(n(c),"receivedPacket",new La),m(n(c),"open$",void 0),m(n(c),"input$",new La),m(n(c),"userJoin$",new La),m(n(c),"attemptsSinceLastError",0),m(n(c),"message$",new La),m(n(c),"socket$",void 0),m(n(c),"toClose",new La),m(n(c),"toReconnect",new La),m(n(c),"sendLogger",void 0),m(n(c),"receiveLogger",void 0),m(n(c),"ip",void 0),m(n(c),"env",void 0),m(n(c),"ticket",void 0),m(n(c),"context",void 0),m(n(c),"getDomain",(function(){var e=c.useCnDomain?"agoraio.cn":"agora.io";return"".concat(c.ip.split(".").join("-"),".edge.").concat(e)})),m(n(c),"socketReconnector",(function(e){var t=function(e){return c.attemptsSinceLastError+=1,c.warn("The %s of Env %d reconnecting %s",c.name,c.env,e.message),uc(1500)};return e.pipe(Ga((function(e){return c.log("socket connection closed"),c.loggedIn=!1,2<=c.attemptsSinceLastError?(c.warn("socket connection failure"),c.emit("connectionFailure"),c.close(),ba(e)):c.isActiveClose?dc:(c.emit("reconnect"),c.useCnDomain=!c.useCnDomain,ba(e))})),ae((function(e){return e.pipe(vc(t))})))})),c.ip=e,c.env=i,c.ticket=o,c.context=a,c.useCnDomain="CN"===c.context.area,c.sendLogger=c.genLogger("RTM:MSG:SEND"),c.receiveLogger=c.genLogger("RTM:MSG:RECV"),0!==i&&1!==i)throw new Uk({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!pt(e))throw new Uk({IP_NOT_VALID:"The ip from ap is not valid"});void 0!==u&&(c.useCnDomain=u);var l=Me[i];c.log("Opening websocket address %s for the Env %d",c.ip,c.env);var d=Tb(c.input$,c.userJoin$.pipe(lt(2)),c.message$).pipe(Z((function(e){return yh.encode(e).finish()})));return e=Tb(mt("",{protocols:[],makeWebSocket:function(){var e=new WebSocket("wss://".concat(c.getDomain(),":").concat(l));return e.binaryType="arraybuffer",e}}),c.toReconnect),c.socket$=ya(e,Ck.pipe(Za(5e3),Ga((function(e){return Na(e)&&c.warn("socket open timed out"),ba(e)})))).pipe(Z((function(e){if(e instanceof Error)throw c.warn("Env_%d: Force reconnect the socket",c.env),e;return e(d).pipe(Z((function(e){return yh.decode(new Uint8Array(e))})))})),c.socketReconnector),c.open$=c.socket$.pipe(Y((function(e){c.log("Websocket opened",c.name),e.subscribe((function(e){var t=e.data;e=yi[e.uri].slice(0,-3),t=Dm[e].decode(t);var n=fA({},rg(t,"toJSON"),(function(e,t){return t instanceof U?om(t):t})),r=!1;if((t instanceof Tq||t instanceof Sq)&&t.instance.lessThanOrEqual(4294967295)&&(r=!0),t instanceof Uq||t instanceof Vq){var i=t.instance,o=t.sequence;(t.dialogue.lessThanOrEqual(4294967295)||i.lessThanOrEqual(4294967295)||o.lessThan(1))&&(r=!0)}r?c.warn("Env_%d: Illegal %s, abandoned %o",c.env,e,n):("Pong"!==e&&c.receiveLogger("Env_%d: %s %o",c.env,e,n),c.receivedPacket.next([e,t]))}),(function(){}))})),bf(void 0),ob(c.toClose),be()),c}ka(t,e);var r=la(t);return Ea(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat(Me[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var n=oc(t,(function(e){return e instanceof U?om(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,n)}t=xt(e,t),"UserJoin"===e?this.userJoin$.next(t):"Message"===e?this.message$.next(t):this.input$.next(t)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){var t=this;return this.receivedPacket.pipe(Y((function(e){var n=pa(e,2);e=n[0],n=n[1],"UserResp"===e&&(t.attemptsSinceLastError=0,t.loggedIn=!0),"UserDrop"===e&&t.emit("socketUserDrop",n)})),nb((function(t){return pa(t,1)[0]===e})),Z((function(e){return pa(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Uk({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(vb()),Oa;N({target:"String",proto:!0,forced:Xq},{padStart:function(e){return rB(this,e,1<arguments.length?arguments[1]:void 0)}}),function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOBAL="GLOBAL",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(Oa||(Oa={}));var Yf=Ja({AS:{CODE:Oa.AS,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]},NA:{CODE:Oa.NA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]},EU:{CODE:Oa.EU,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]},JP:{CODE:Oa.JP,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]},IN:{CODE:Oa.IN,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]},OVS:{CODE:Oa.OVS,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]},GLOB:{CODE:Oa.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"]},OC:{CODE:Oa.OC,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]},SA:{CODE:Oa.SA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]},AF:{CODE:Oa.AF,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}},{CN:{CODE:Oa.CN,AP_DOMAINS:["ap-web-1.agoraio.cn","ap-web-2.agoraio.cn"],AP_BACKUP_DOMAINS:["ap-web-3.agoraio.cn","ap-web-4.agoraio.cn"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agoraio.cn"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-4.agoraio.cn"],LOG_UPLOAD_SERVER:["logservice-rtm.agoraio.cn"]}});Yf=zm(Yf);var fC=function(e){var t=new Set;if(0===(e=e.map((function(e){var n=Yf[e];if(void 0===n)throw new Da("invalid area key");return e=n.CODE,n=Se(n,["CODE"]),t.add(e),n}))).length)throw new Da("areas cannot be empty");return Ja({CODES:t},e.reduce((function(e,t){for(var n=0,r=dr(e);n<r.length;n++){var i=pa(r[n],2),o=i[0];i=i[1],e[o]=Array.from(new Set([].concat(I(t[o]),I(i))))}return e})))},gC={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},pr={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},hC=[100,101,102],qr=function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,t);var a=r.call(this,i,"AccessPoint");m(n(a),"getApEdgeInfo$",void 0),m(n(a),"getApEdgeInfoEndFirst$",void 0),m(n(a),"apFinish$",new La),m(n(a),"usedUrl",[]),m(n(a),"failedAreas",new Set),m(n(a),"cnDomainUsed",!1),m(n(a),"backupCnDomainUsed",!1),m(n(a),"genUrl",(function(){return void 0===a.context.areaConfig?Zh(bC,cC).pipe($h((function(e){return mb.apply(void 0,I(e))}))):mb.apply(void 0,I(a.context.areaConfig.AP_DOMAINS.map(Ne)))})),m(n(a),"genBackupUrl",(function(){return void 0===a.context.areaConfig?Zh(dC,eC).pipe($h((function(e){return mb.apply(void 0,I(e))}))):mb.apply(void 0,I(a.context.areaConfig.AP_BACKUP_DOMAINS.map(Ne)))})),m(n(a),"getUrl$",(function(e){return a.genUrl().pipe(nb((function(e){return(!a.cnDomainUsed||!e.includes("agoraio.cn"))&&(e.includes("agoraio.cn")&&(a.cnDomainUsed=!0),!Mk(a.usedUrl,(function(t){return e[15]===t})))})),Y((function(e){void 0===a.context.areaConfig&&a.usedUrl.push(e[15])})),Pa(e?dd.RECONNECTING_AP_NUM:2),rd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return a.cnDomainUsed=!1,e===t.runOutOfUrlSymbol?(a.usedUrl=[],n):ba(e)})))})),m(n(a),"getBackupUrl$",(function(e){return a.genBackupUrl().pipe(nb((function(e){return(!a.backupCnDomainUsed||!e.includes("agoraio.cn"))&&(e.includes("agoraio.cn")&&(a.backupCnDomainUsed=!0),!Mk(a.usedUrl,(function(t){return e[15]===t})))})),Y((function(e){void 0===a.context.areaConfig&&a.usedUrl.push(e[15])})),Pa(e?dd.RECONNECTING_AP_NUM:2),rd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return a.backupCnDomainUsed=!1,e===t.runOutOfUrlSymbol?(a.usedUrl=[],n):ba(e)})))})),m(n(a),"context",void 0),m(n(a),"fetchAp",(function(e,t){var n=pm("AP-",a.loggerId);a.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;return a.apFinish$.pipe(Pa(1)).subscribe((function(){return r.abort()})),qd(K(w.mark((function i(){var o;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=mi(0,Number.MAX_SAFE_INTEGER),a.log("The %s request uid param is %d",n,o),i.abrupt("return",gf(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:1,key:t||a.context.key,cname:a.context.uid,detail:Ja({},void 0===a.context.areaConfig?{11:"GLOBAL"}:{11:I(a.context.areaConfig.CODES).join(",")}),uid:o,sid:a.context.sid},signal:r.signal}));case 3:case"end":return i.stop()}}),i)})))).pipe(Ga((function(t){return"AbortError"!==t.name&&(a.logError(t),a.warn("The AP server %s request failure",e)),dc})),eb(function(){var t=K(w.mark((function t(r){var i,o,s,u,c,l,d,f,p,h,v,g,m,y,b,_,E,S,O,T,A,R,k;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,o=JSON.parse(i),a.log("The %s response is %o",n,o),u=(s=o).code,c=s.addresses,l=s.detail,0===u){t.next=51;break}if(d=u,!(4<u.toString().length)){t.next=16;break}if(f=u.toString().padStart(8,"0"),p=parseInt(f.slice(0,4),10),h=parseInt(f.slice(4,8),10),201!==p){t.next=14;break}d=h,t.next=16;break;case 14:if(101!==p||hC.includes(h)){t.next=16;break}return t.abrupt("return",ba(Error("service is currently unavailable")));case 16:if(v=d.toString(),Object.keys(pr).includes(v)){t.next=22;break}return(g=new ca(["Login is rejected by the server. The response code is %d",u],sh)).serverCode=d,t.abrupt("return",ba(g));case 22:m=pr[v],y=gC[m],t.t0=m,t.next="INVALID_APP_ID"===t.t0||"APP_ID_NO_ACTIVATED"===t.t0?27:"INVALID_USER_ID"===t.t0?30:"TOKEN_EXPIRED"===t.t0||"TOKEN_TIMEOUT"===t.t0?33:"NO_AUTHORIZED"===t.t0||"INVALID_TOKEN_UID"===t.t0||"DYNAMIC_KEY_NOT_ENABLED"===t.t0||"DYNAMIC_ENABLED_BUT_STATIC_KEY"===t.t0?36:"CANNOT_MEET_AREA_DEMAND"===t.t0?39:"FORBIDDEN_REGION"===t.t0?47:50;break;case 27:return(b=new Ke(y,zq)).serverCode=u,t.abrupt("return",ba(b));case 30:return(_=new Ke(y,th)).serverCode=u,t.abrupt("return",ba(_));case 33:return(E=new Ke(y,uh)).serverCode=u,t.abrupt("return",ba(E));case 36:return(S=new Ke(y,Aq)).serverCode=u,t.abrupt("return",ba(S));case 39:e:{var w=e,C=Rk(Yf);w=tt(w);for(var N=0;N<C.length;N++){var x=Yf[C[N]];if(null!=x&&x.AP_DOMAINS.includes(w)||null!=x&&x.AP_BACKUP_DOMAINS.includes(w)){O=x.CODE===Oa.OVS?"".concat(Oa.AS,",").concat(Oa.EU,",").concat(Oa.AF,",").concat(Oa.NA,",").concat(Oa.SA,",").concat(Oa.OC):x.CODE;break e}}O="GLOBAL,CN"}if(a.failedAreas.add(O),T=void 0===a.context.areaConfig?2:a.context.areaConfig.CODES.size,a.failedAreas.size!==T){t.next=46;break}return(A=new L(y,sh)).serverCode=u,t.abrupt("return",ba(A));case 46:return t.abrupt("break",51);case 47:return(R=new ca(y,sh)).serverCode=u,t.abrupt("return",ba(R));case 50:return t.abrupt("return",ba(mm("ApResErrType",m)));case 51:return k=c,a.context.area=null==l?void 0:l[9],t.abrupt("return",mb.apply(void 0,I(k).concat([oh])));case 56:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Wh(),nb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),a.context=e;var s=0;return a.getApEdgeInfoEndFirst$=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return uc(0,e||o?dd.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(1),Y((function(){s+=1})),eb((function(){return 2>=s?a.getUrl$(e||o):a.getBackupUrl$(e||o)})),eb((function(e){return a.fetchAp(e)})),Za(1e4),Ga((function(e){return e instanceof pb&&a.warn("AP request timeout"),ba(e)})),Ul((function(e){return e.ip})),hg((function(){s=0,a.failedAreas.clear()})),ob(a.apFinish$))},a.getApEdgeInfo$=function(e){return uc(0,e||o?dd.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(4),Y((function(){s+=1})),eb((function(){return 2>=s?a.getUrl$(e||o):a.getBackupUrl$(e||o)})),eb((function(e){return a.fetchAp(e)})),Za(1e4),Ga((function(e){return e instanceof pb&&a.warn("AP request timeout"),ba(e)})),Ul((function(e){return e.ip})),hg((function(){s=0,a.failedAreas.clear()})),ob(a.apFinish$))},a}ka(t,e);var r=la(t);return t}(vb());m(qr,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var rr=zh(),sr=function(e){function t(e,i,o){W(this,t);var a=r.call(this,i,"Connection");m(n(a),"apClient",void 0),m(n(a),"lastOpenSockets",[new ce(1),new ce(1)]),m(n(a),"curOpenSockets",[void 0,void 0]),m(n(a),"ipIterator",0),m(n(a),"firstEnv",.5<=Math.random()?1:0),m(n(a),"firstSocketOpener",void 0),m(n(a),"secondSocketOpener",void 0),m(n(a),"firstOpenKeeperSubject",new La),m(n(a),"secondOpenKeeperSubject",new La),m(n(a),"edgeInfoReplayed",void 0),m(n(a),"firstEnvOpenSocket",void 0),m(n(a),"firstOpenKeeperSub",void 0),m(n(a),"secondOpenKeeperSub",void 0),m(n(a),"context",void 0),m(n(a),"logger",void 0),a.context=e,a.logger=i,a.apClient=new qr(a.context,i),a.apClient.apFinish$.subscribe((function(){a.log("Ap client fetch finished")}));var s,u=[];return a.edgeInfoReplayed=a.apClient.getApEdgeInfo$(o).pipe(nb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})),rd((function(){return new rr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ae((function(e){return e.pipe(Y((function(e){if(wa(e))throw e})),Wc(o?Nd.getParameter("RECONNECTING_AP_INTERVAL"):750),ob(uc(7e3)))})),nb((function(e){return!Mk(u,e)})),Y((function(e){u.push(e),a.log("An edge info got %o",e)})),Y({error:function(e){a.emit("connectionInitFailure",e)}}),Yl()),a.firstEnvOpenSocket=a.edgeInfoReplayed.pipe(eb((function(e){if(void 0===e)return ba(Error("Invalid edge info"));var t=new Vk(e.ip,a.firstEnv,e.ticket,a.context,i,s);return a.firstEnv=1===a.firstEnv?0:1,t.on("connectionFailure",(function(){return a.onSocketConnectionFailure(t)})),s=!t.useCnDomain,t.open$.pipe(bf(t))})),Y((function(e){a.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,Me[e.env]),a.curOpenSockets[e.env]=e,a.lastOpenSockets[e.env].next(e),a.firstEnv=e.env,a.openSecondSocket(e.env,e.ip,e.useCnDomain)})),Pa(1),be()),a.firstSocketOpener=a.firstEnvOpenSocket.pipe(eb((function(e){return e.open$.pipe(Y((function(){a.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,Me[e.env]),a.curOpenSockets[e.env]=e,a.lastOpenSockets[e.env].next(e)})))}))),e=a.firstOpenKeeperSubject.pipe(vc(Sc)),a.firstOpenKeeperSub=e.subscribe({error:a.logError}),a}ka(t,e);var r=la(t);return Ea(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new Ca({INVALID_ENV:"The env argument is not 0 or 1"});var n=e===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var r=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,r&&(r.isActiveClose=!0,setTimeout((function(){r.close()}),t)),void 0!==n&&setTimeout((function(){null==n||n.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(Os(),Ga((function(e){return e.message===Mq.normalClosureMessage?dc:ba(e)})),Za(5e3),Ga((function(n){return n instanceof pb?(t.warn("Force closing the ENV_%d connection",e.env),dc):ba(n)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0];(t=this.curOpenSockets[t])&&t.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t,n){var r=this,i=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(Xl((function(e,t){return[].concat(I(e),[t])}),[]),Z((function(e){return Kq(e,(function(e){return nm(t,e.ip)})).slice(-1)[0]})),Pa(1),eb((function(e){if(void 0===e)return ba(Error("Invalid edge info"));var t=new Vk(e.ip,i,e.ticket,r.context,r.logger,n);return t.on("connectionFailure",(function(){return r.onSocketConnectionFailure(t)})),t.open$.pipe(Y((function(){r.lastOpenSockets[i].next(t),r.curOpenSockets[i]=t})))})),be()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(vc(Sc)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,n=[0,1].filter((function(t){return t!==e}))[0];if(void 0!==(n=this.curOpenSockets[n])){var r,i=n.ip;n=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(nb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})),rd((function(){return new rr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ae((function(e){return e.pipe(Y((function(e){if(e.code===uh)t.emit("tokenExpired"),t.apClient.apFinish$.next(void 0);else if(wa(e))throw e})),Wc(Nd.getParameter("RECONNECTING_AP_INTERVAL")),ob(uc(7e3)))})),Y((function(e){t.log("An edge info got %o",e)}))).pipe(Xl((function(e,t){return[].concat(I(e),[t])}),[]),Z((function(e){return(e=Kq(e,(function(e){return nm(i,e.ip)}))).length-1>=t.ipIterator?e.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,e.slice(-1)[0])})),rd(),eb((function(n){if(void 0===n)return ba(Error("Invalid edge info"));var i=new Vk(n.ip,e,n.ticket,t.context,t.logger,r);return i.on("connectionFailure",(function(){return t.onSocketConnectionFailure(i)})),r=!i.useCnDomain,i.open$.pipe(bf(i))})),Y((function(n){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",n.env,n.ip,Me[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})),eb((function(n){return n.open$.pipe(Y((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",n.env,n.ip,Me[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})))})),be()),e===this.firstEnv?this.firstOpenKeeperSubject.next(n):this.secondOpenKeeperSubject.next(n)}}}]),t}(vb()),Qc=bc.Writer,ma=bc.util,tc=bc.roots.default||(bc.roots.default={}),iC=tc.Session=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&tc.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=Qc.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),jC=tc.Link=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),kC=tc.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),lC=tc.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),mC=tc.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),nC=tc.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),oC=tc.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),pC=tc.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),zt=Object.freeze({__proto__:null,Session:iC,Link:jC,Logout:kC,KickedOff:lC,ChnJoin:mC,ChnJoinRes:nC,ChnLeave:oC,ConnectionStateChange:pC,default:tc}),At=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),qC=function(e){function t(e,i){return W(this,t),m(n(i=r.call(this,i,"Context")),"_token",void 0),m(n(i),"areaConfig",void 0),m(n(i),"_uid",void 0),m(n(i),"_sid",void 0),m(n(i),"_area",void 0),m(n(i),"appId",void 0),i.appId=e,i}ka(t,e);var r=la(t);return Ea(t,[{key:"token",set:function(e){this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Da("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",e),!ua(e))throw new Da;this._uid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Da("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Da("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new Da;this._sid=e}},{key:"area",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Da("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),"string"==typeof e&&e?this._area=e:this.warn("set area failed")}},{key:"setAreaConfig",value:function(e){if(0===e.CODES.size)throw new Da("Cannot set illegal areas");this.log("areas set to %s",I(e.CODES).join(", ")),this.areaConfig=e}}]),t}(vb()),rC=!!wc&&O((function(){wc.prototype.finally.call({then:function(){}},(function(){}))}));N({target:"Promise",proto:!0,real:!0,forced:rC},{finally:function(e){var t=Yc(this,Wb("Promise")),n="function"==typeof e;return this.then(n?function(n){return Hg(t,e()).then((function(){return n}))}:e,n?function(n){return Hg(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof wc||wc.prototype.finally||Va(wc.prototype,"finally",Wb("Promise").prototype.finally);var sC=function(){var e=K(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,crypto.subtle.digest("SHA-256",t);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tr=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")},tC=function(e){if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(0!=e.length%2)throw new RangeError("Expected string to be an even number of characters");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substring(n,n+2),16);return t},ur=function(e){return btoa(String.fromCharCode.apply(String,I(e))).replace(/={1,2}$/,"")},vr=function(){var e=K(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,crypto.subtle.digest("SHA-1",t);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n=sha1.arrayBuffer(t);case 9:return e.abrupt("return",ur(new Uint8Array(n)));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),wr=function(e,t,n,r){r[t]=!0,n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))},uC=function(e){switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},xr=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,o,"ChunkDownloadManager");if(m(n(s),"abortController",new AbortController),m(n(s),"downloadedSize",0),m(n(s),"successCount",0),m(n(s),"timer",void 0),m(n(s),"chunks",[]),m(n(s),"retUnit",void 0),m(n(s),"singleThread",!1),m(n(s),"initialized",!1),m(n(s),"ee",void 0),m(n(s),"chunkCount",void 0),m(n(s),"aborted",!1),m(n(s),"serverToIndices",new Map),m(n(s),"backupToIndices",new Map),m(n(s),"indexToBackupServers",[]),m(n(s),"busyBackupServers",new Map),m(n(s),"downloadingChunks",new Set),m(n(s),"metaInfo",void 0),m(n(s),"transHandler",void 0),s.metaInfo=e,s.transHandler=i,s.ee=void 0===a?new aa:a,o=e.size,e=e.unit,0===o)throw new Da("size cannot be 0");return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){s.abortController.abort()}),{once:!0}),s.abortController.signal.addEventListener("abort",(function(){s.aborted=!0}),{once:!0}),s.chunkCount=Math.ceil(o/(32768*e)),s}ka(t,e);var r=la(t);return Ea(t,[{key:"setInfoByResponse",value:function(e){var t=this,n=e.serverList,r=e.backupList;if(e=e.unit,n.length<this.chunkCount&&r.length<this.chunkCount)throw new Da("servers is not enough");this.updateProgress(0),this.initialized=!0;var i=Array(this.chunkCount).fill(!1);if(n.forEach((function(e,n){return e.forEach((function(e){return wr(e,n,t.serverToIndices,i)}))})),r.forEach((function(e,n){return e.forEach((function(e){return wr(e,n,t.backupToIndices,i)}))})),i.some((function(){return!1})))throw new ca("Not enough servers to download",Xf);this.indexToBackupServers=r.map((function(e){return new Set(e)})),this.retUnit=e}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):1===this.serverToIndices.size&&0===Array.from(this.serverToIndices.keys())[0]?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new ca("not enough servers to download",Xf))}},{key:"updateProgress",value:function(e){var t=this,n=this.downloadedSize+e;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new Pc("Invalid download size",Xf))):(this.downloadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&this.successCount!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),this.initialized&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var e=0,t=0,n=this.chunks;t<n.length;t++)e+=n[t].byteLength;if(e!==this.metaInfo.size)throw new Da("invalid chunks total size");e=new Uint8Array(e),n=t=0;for(var r=this.chunks;n<r.length;n++){var i=r[n];e.set(new Uint8Array(i),t),t+=i.byteLength}return t=Array.from(e.subarray(0,4)).map((function(e){return e.toString(16)})).join("").toUpperCase(),ut(e.buffer,uC(t))}},{key:"getDownloadUrl",value:function(e){var t=this.metaInfo.isAreaCN?"agoraio.cn":"agora.io";return"https://".concat(ng(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var e=K(w.mark((function e(t){var n,r=this,i=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<i.length&&void 0!==i[1]&&i[1],e.next=3,Promise.all(Array.from(t.entries()).map((function(e){return e=pa(e,2),r.postDownloadRequest(e[0],Array.from(e[1]),n).catch((function(e){404===e.statusCode?(r.ee.emit("notExist"),r.abortController.abort()):"AbortError"!==e.name&&(Na(e)?r.singleThread?(r.abortController.abort(),r.ee.emit("timedOut")):(r.warn("%d download timed out after %d, retrying use single thread",e.index,r.singleThread?6e4:3e4),r.abortController.abort(),r.singleThread=!0,r.ee.emit("multiTimeOut")):(r.ee.emit("error",e),r.abortController.abort()))}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var e=K(w.mark((function e(t,n,r){var i,o,a,s,u,c,l,d,f,p=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=function(){return(f=K(w.mark((function e(o){var a,f,p,h,v,g,m,y,b;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==o||0!==t){e.next=5;break}throw new Da("Invalid serverIp");case 5:a=void 0===o?l.getDownloadUrl(t):o;case 6:return l.downloadingChunks.add(i),e.next=9,c(a);case 9:return f=e.sent,p=f.responseData,l.downloadingChunks.delete(i),e.abrupt("return",p);case 15:if(e.prev=15,e.t0=e.catch(0),l.downloadingChunks.delete(i),n.unshift(i),l.metaInfo.isAreaCN=!1,"AbortError"!==e.t0.name){e.next=22;break}throw e.t0;case 22:if(!Na(e.t0)){e.next=25;break}throw e.t0.index=i,e.t0;case 25:if(h=s,s+=1,!(2>h)){e.next=30;break}return e.t0 instanceof Da||l.warn("%o, %d download failed, retrying",e.t0,i),e.abrupt("return",d());case 30:if(504!==e.t0.statusCode){e.next=34;break}throw(v=new bb("download server timed out",{originalError:e.t0,serverCode:504})).index=i,v;case 34:if(!r||2!==h||0===u[0]){e.next=45;break}return e.t0 instanceof Da||l.warn("%d download failed, using backup: %d, %o",i,u[0],e.t0),e.next=38,l.busyBackupServers.get(u[0]);case 38:return g=d(l.getDownloadUrl(u[0])),l.busyBackupServers.set(u[0],g),e.next=42,g;case 42:return m=e.sent,l.busyBackupServers.delete(u[0]),e.abrupt("return",m);case 45:if(!(r&&2<h&&void 0!==u[1]&&0!==u[1])){e.next=56;break}return l.warn("%d download failed, using backup 1: %d",i,u[1]),e.next=49,l.busyBackupServers.get(u[1]);case 49:return y=d(l.getDownloadUrl(u[1])),l.busyBackupServers.set(u[1],y),e.next=53,y;case 53:return b=e.sent,l.busyBackupServers.delete(u[1]),e.abrupt("return",b);case 56:throw e.t0.index=i,e.t0;case 58:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)},d=function(e){return f.apply(this,arguments)},!this.aborted){e.next=4;break}throw new Da("download already aborted");case 4:if(void 0!==(i=n.shift())){e.next=8;break}return this.log("%s download finished",t),e.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){e.next=10;break}return e.abrupt("return");case 10:if(!this.downloadingChunks.has(i)){e.next=13;break}return this.log("%s already downloading, return",i),e.abrupt("return");case 13:if(void 0===this.chunks[i]){e.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",i),e.next=18,this.postDownloadRequest(t,n,r);case 18:return e.abrupt("return");case 19:return o=new FormData,a={hash:Bt(this.metaInfo.hashHexStr),unit:void 0===this.retUnit?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:i},o.append("parameter",JSON.stringify(a)),s=0,u=Array.from(this.indexToBackupServers[i]),c=function(e){return gf(e,{body:o,signal:p.abortController.signal,timeout:p.singleThread?12e4:3e4},{useBinaryResponse:!0})},l=this,e.next=28,d().then((function(e){return void 0!==p.chunks[i]?p.log("chunk %d download duplicated",i):(p.chunks[i]=e,p.log("chunk %d downloaded",i),p.successCount+=1,p.updateProgress(p.chunks[i].byteLength)),p.successCount===p.chunkCount&&(p.log("chunks all download"),p.ee.emit("finished")),p.singleThread?(p.downloadChunks(),Promise.resolve()):p.postDownloadRequest(t,n,r)}));case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(vb()),yr=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,o,"ChunkUploadManager");if(m(n(s),"chunkCount",0),m(n(s),"chunks",[]),m(n(s),"uploadedChunks",[]),m(n(s),"totalFailures",0),m(n(s),"timer",void 0),m(n(s),"initState","uninitialized"),m(n(s),"ee",void 0),m(n(s),"unit",0),m(n(s),"uploadedSize",0),m(n(s),"singleThread",!1),m(n(s),"abortController",new AbortController),m(n(s),"servers",[]),m(n(s),"aborted",!1),m(n(s),"metaInfo",void 0),m(n(s),"transHandler",void 0),s.metaInfo=e,s.transHandler=i,s.ee=void 0===a?new aa:a,0===e.file.length)throw new L("file not found or is empty",jf);return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){s.abortController.abort()}),{once:!0}),s.abortController.signal.addEventListener("abort",(function(){s.aborted=!0}),{once:!0}),s}ka(t,e);var r=la(t);return Ea(t,[{key:"initChunks",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("initialized"!==this.initState&&"initializing"!==this.initState){e.next=2;break}throw new Da("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=t,n=this.sliceFile(t,this.metaInfo.file),this.chunkCount=n.length,r=[],i=function(e,t){var n=(e=pa(t[e],2))[0],i=e[1];e=vr(i).then((function(e){s.chunks[n]={payload:i,sha1:e,uploadedTo:void 0,index:n,processed:!1}})),r.push(e)},o=0,a=Array.from(n.entries());o<a.length;o++)i(o,a);return e.next=11,Promise.all(r);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var e=this;if(!this.aborted){for(var t=this.chunks.filter((function(e){return!e.processed})),n=function(n){var r=t[n],i=e.servers.filter((function(e){return!e.isUploading})).sort((function(e,t){return e.successCount-t.successCount})).sort((function(e,t){return e.failureCount-t.failureCount}))[0];if(void 0===i||1<i.failureCount)return e.log("Upload server not available, waiting"),e.ee.emit("serverUsedUp"),tm(1e3).then((function(){e.totalFailures>2*e.chunkCount&&e.ee.emit("error"),e.totalFailures+=1,void 0!==i&&(i.failureCount=0),e.uploadToServers()})).catch((function(){})),"break";r.processed=!0,i.isUploading=!0,e.log("uploading chunk %d to server %s",r.index,ng(i.ip));var o=e.getUploadUrl(i.ip);return K(w.mark((function t(){var n;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.postChunk(r.payload,o,r.index);case 3:n=e.chunks.findIndex((function(e){return e===r})),r.uploadedTo=i.ip,e.chunks.splice(n,1),e.uploadedChunks.push(r),i.successCount+=1,i.isUploading=!1,e.updateProgress(r.payload.byteLength),e.log("upload chunk %d successfully",r.index),t.next=31;break;case 13:if(t.prev=13,t.t0=t.catch(0),i.isUploading=!1,r.processed=!1,504!==t.t0.statusCode&&!Na(t.t0)){t.next=27;break}if(e.singleThread){t.next=24;break}return e.warn("%d upload timed out after %d, retrying use single thread",r.index,e.singleThread?12e4:3e4),e.abortController.abort(),e.singleThread=!0,e.ee.emit("multiTimeOut"),t.abrupt("return");case 24:return e.ee.emit("timedOut"),e.abortController.abort(),t.abrupt("return");case 27:return e.metaInfo.isAreaCN=!1,i.failureCount+=1,t.next=31,tm(1e3);case 31:e.uploadedChunks.length===e.chunkCount?(e.log("chunks uploaded"),e.ee.emit("finished")):(e.singleThread||1===e.chunks.filter((function(e){return!e.processed})).length)&&e.uploadToServers();case 32:case"end":return t.stop()}}),t,null,[[0,13]])})))(),e.singleThread?"break":void 0},r=0;r<t.length&&"break"!==n(r);r++);0===t.length&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var e=!0,t=[],n=this.uploadedChunks.sort((function(e,t){return e.index-t.index})),r=0;for(n=Array.from(n.values());r<n.length;r++){var i=n[r].uploadedTo;if(void 0===i){e=!1;break}t.push(i)}if(!e)throw new Da("some chunks not uploaded, cannot get upload server ips");return t}},{key:"addServers",value:function(e){var t=this;e.forEach((function(e){var n=t.servers.findIndex((function(t){return t.ip===e}));-1!==n?t.servers[n].failureCount=0:(t.log("server %s added",ng(e)),t.servers.push({successCount:0,isUploading:!1,ip:e,failureCount:0}))}))}},{key:"updateProgress",value:function(e){var t=this,n=void 0!==e?this.uploadedSize+e:this.metaInfo.file.length;n>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new Pc("Invalid upload size",Wf))):(this.uploadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&void 0!==e&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),"initialized"===this.initState&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(e,t){var n=0,r=[],i=t.length;for(e*=32768;n<i;)r.push(t.slice(n,n+e)),n+=e;return this.log("chunks split into %d",r.length),r}},{key:"postChunk",value:function(){var e=K(w.mark((function e(t,n,r){var i,o,a,s,u,c,l;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.aborted){e.next=2;break}throw new Da("upload already aborted");case 2:if(void 0!==this.unit){e.next=4;break}throw new Da("unit is undefined");case 4:return i=this.metaInfo,o=i.ticket,a=i.instance,s=i.loginOpt,u=i.hashStr,e.t0=r,e.t1=u,e.next=9,vr(t);case 9:return e.t2=e.sent,e.t3=this.unit,e.t4=o,e.t5=a,e.t6=s,c={index:e.t0,hash:e.t1,sha1:e.t2,unit:e.t3,ticket:e.t4,instance:e.t5,loginOpt:e.t6},(l=new FormData).append("parameter",JSON.stringify(c)),l.append("payload",new Blob([t])),e.next=20,gf(n,{headers:{Accept:"application/json"},body:l,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(201===e.sent.status){e.next=24;break}throw new ca("uploading chunk ".concat(r," failed"));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(e){var t=this.metaInfo.isAreaCN?"agoraio.cn":"agora.io";return"https://".concat(ng(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/upload")}}]),t}(vb()),zr=function(e){function t(e){W(this,t);var i=r.call(this,e,"MediaTaskManager");return m(n(i),"isProcessing",!1),m(n(i),"authInfo",void 0),m(n(i),"taskFinishers",{}),m(n(i),"mediaTasks",new Map),m(n(i),"ongoingTask",void 0),i.on("connectionStateChanged",(function(e){if(e===S.ConnectionState.ABORTED||e===S.ConnectionState.DISCONNECTED){void 0!==i.ongoingTask&&i.cancelTask(i.ongoingTask),e=0;for(var t=Array.from(i.mediaTasks.entries());e<t.length;e++){var n=pa(t[e],2)[1];i.cancelTask(n)}i.mediaTasks.clear(),i.taskFinishers={}}else e===S.ConnectionState.RECONNECTING?void 0!==i.ongoingTask&&i.ongoingTask.manager.abortController.abort():e===S.ConnectionState.CONNECTED&&void 0!==i.ongoingTask&&i.ongoingTask.manager.ee.emit("reconnected")})),i}ka(t,e);var r=la(t);return Ea(t,[{key:"setAuthInfo",value:function(e){this.authInfo=e}},{key:"waitMediaTask",value:function(e){var t=this;return new Promise((function(n,r){t.taskFinishers[e]={resolve:n,reject:r},t.isProcessing||t.processMediaTask()})).finally((function(){void 0!==t.ongoingTask&&void 0!==t.ongoingTask.manager.timer&&clearTimeout(t.ongoingTask.manager.timer),delete t.taskFinishers[e],0!==t.mediaTasks.size?t.processMediaTask():t.isProcessing=!1}))}},{key:"addUploadTask",value:function(e,n,r,i){var o=e.file;if(e=e.hash,void 0===this.authInfo)throw new Da("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new gb("Upload media failed, exceed max pending jobs",Wz);return i=new yr({hashStr:ur(e),file:o,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),isAreaCN:this.authInfo.isAreaCN},i,this.logger),o=Id(),this.mediaTasks.set(o,{type:"UPLOAD",manager:i,hash:e,setter:r,fetcher:n,taskId:o}),o}},{key:"addDownloadTask",value:function(e,n,r){var i=e.hashHexStr,o=e.size,a=e.unit;if(e=e.zone,void 0===this.authInfo)throw new Da("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new gb("Download media failed, exceed max pending jobs",$z);return r=new xr({hashHexStr:i,ticket:this.authInfo.ticket,isAreaCN:this.authInfo.isAreaCN,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:o,zone:e,unit:a},r,this.logger),i=Id(),this.mediaTasks.set(i,{type:"DOWNLOAD",manager:r,fetcher:n,taskId:i}),i}},{key:"doDownloadTaskImpl",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l,d=this,f=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<f.length&&void 0!==f[2]&&f[2],o=i=t.manager,r&&(i=new xr(o.metaInfo,o.transHandler,this.logger,o.ee)),a=t.fetcher,e.next=7,a();case 7:if(s=e.sent,u=s.serverList,c=s.backupList,l=s.unit,!r||l===o.retUnit){e.next=13;break}throw new ca("download unit is different, reject to continue",Xf);case 13:r&&(t.manager=i,i.downloadedSize=o.downloadedSize,i.successCount=o.successCount,i.timer=o.timer,i.chunks=o.chunks,i.initialized=o.initialized,i.singleThread=o.singleThread,i.updateProgress(0)),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),d.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),d.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("error",(function(e){i.ee.removeAllListeners(),n.reject(new ca(["download file file, index %d",e.index],{code:Xf,originalError:e}))})),i.ee.once("notExist",(function(){i.abortController.abort(),i.ee.removeAllListeners(),n.reject(new ca("download file not found",Zz))})),i.ee.once("timedOut",(function(){i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new bb("download timed out",Yz))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new Qk("Downloading canceled",Iq))}),{once:!0}),i.ee.once("finished",(function(){n.resolve({type:"DOWNLOAD",payload:i.getPayload()})})),i.setInfoByResponse({serverList:u,backupList:c,unit:l}),i.downloadChunks();case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doDownloadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"doUploadTaskImpl",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l,d=this,f=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<f.length&&void 0!==f[2]&&f[2],o=i=t.manager,r&&(i=new yr(o.metaInfo,o.transHandler,this.logger,o.ee)),a=t.fetcher,s=new La,c=new Promise((function(e,c){var l=a(),d=l.ret,f=l.err,p=l.timeout;l.fin.pipe(ob(s)).subscribe({next:function(e){n.resolve({type:"UPLOAD",retUnit:e.unit,zone:e.zone})},complete:function(){e({hasExist:!0}),s.next(),s.complete()}}),d.pipe(ob(s),eb(function(){var e=K(w.mark((function e(a){var s,c;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.servers,c=a.unit,r&&o.unit!==c?n.reject(new ca("upload unit is different, reject to continue",Wf)):r&&(t.manager=i,i.chunkCount=o.chunkCount,i.chunks=o.chunks,i.totalFailures=o.totalFailures,i.uploadedChunks=o.uploadedChunks,i.timer=o.timer,i.initState=o.initState,i.unit=o.unit,i.uploadedSize=o.uploadedSize,i.singleThread=o.singleThread,i.updateProgress(0)),i.addServers(s),"uninitialized"!==i.initState){e.next=7;break}return u=i.initChunks(c),e.next=7,u;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).subscribe({complete:function(){return e({hasExist:!1})},error:c}),l=function(t){"uninitialized"!==i.initState&&u?e(u.then((function(){return{hasExist:!1}}))):c(t)},f.pipe(ob(s)).subscribe({error:l}),p.pipe(ob(s)).subscribe({error:l})})),e.next=9,c;case 9:if(!e.sent.hasExist){e.next=15;break}return i.updateProgress(),this.log("file already exists, skipping upload"),e.abrupt("return");case 15:s.next(),s.complete(),this.log("chunks initialization promise resolved"),l=fb(i.ee,"serverUsedUp").pipe(at((function(){return i.chunkCount!==i.uploadedChunks.length})),dt(5e3,void 0,{leading:!1}),Vl((function(){return a().ret}))).subscribe((function(e){i.addServers(e.servers)})),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),d.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),d.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("timedOut",(function(){l.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new bb("upload timed out",vh))})),i.ee.once("error",(function(e){l.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(e||new ca("upload error",Wf))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new Qk("Uploading canceled",Hq))}),{once:!0}),i.ee.once("finished",K(w.mark((function e(){var r,o,a;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.unsubscribe(),e.next=3,t.setter(i.unit,i.getUploadServerIPs());case 3:r=e.sent,o=r.zone,a=r.unit,i.ee.removeAllListeners(),n.resolve({type:"UPLOAD",retUnit:a,zone:o});case 8:case"end":return e.stop()}}),e)})))),i.uploadToServers();case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doUploadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doUploadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"processMediaTask",value:function(){var e=K(w.mark((function e(){var t,n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.mediaTasks.size){e.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,t=this.mediaTasks.keys().next().value,void 0!==(n=this.taskFinishers[t])){e.next=7;break}throw Error("top task not found");case 7:if(void 0!==(r=this.mediaTasks.get(t))){e.next=10;break}throw new Da("task invalid");case 10:if("UPLOAD"!==r.type){e.next=15;break}return e.next=13,this.doUploadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 13:e.next=18;break;case 15:if("DOWNLOAD"!==r.type){e.next=18;break}return e.next=18,this.doDownloadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelTask",value:function(e){var t="DOWNLOAD"===e.type?Iq:Hq;e.manager.ee.removeAllListeners(),e.manager.abortController.abort(),void 0!==this.taskFinishers[e.taskId]&&this.taskFinishers[e.taskId].reject(new Qk("User logged out or kicked off, media task canceled",t))}}]),t}(vb());m(zr,"MAX_PENDING_TASK_COUNT",9),Sn("of",(function(){for(var e=0,t=arguments.length,n=new(ve(this))(t);t>e;)n[e]=arguments[e++];return n}),ej);var Ar=1/0,vC=Math.max,Dt=function(e,t,n){var r=Object(e);if(!sd(e)){var i=Fe(t);e=Rc(e),t=function(e){return i(r[e],e,r)}}return-1<(t=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;if(null==n)n=0;else{var i=(n=n?(n=Pk(n))===Ar||n===-Ar?17976931348623157e292*(0>n?-1:1):n==n?n:0:0===n?n:0)%1;n=n==n?i?n-i:n:0}return 0>n&&(n=vC(r+n,0)),xp(e,Fe(t),n)}(e,t,n))?r[i?e[t]:t]:void 0},Ct=function(e,t){return e&&e.length?fk(e,void 0,"function"==typeof t?t:void 0):[]},Br=function(){function e(){W(this,e),m(this,"size",0),m(this,"fields",new Map)}return Ea(e,[{key:"define",value:function(e,t,n){if(this.size+=n,64<this.size)throw new RangeError("the struct over 64 bits is not supported");vg(t={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:n}),this.fields.set(e,t)}},{key:"set",value:function(e,t){if(!(e=this.fields.get(e)))throw Error("field not found");var n=e.oneof;if(!U.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=t?1:0;else{if(void 0===n)throw Error("invalid field type");if(void 0===(t=n[t]))throw Error("field type not found")}vg(e,t),e.val=t}},{key:"toNumber",value:function(){for(var e=0,t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=pa(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e+=U.fromValue(i).shiftLeft(t).toNumber(),t+=o)}return e}},{key:"toLong",value:function(){for(var e=U.fromNumber(0,!0),t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=pa(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e=U.fromValue(i).shiftLeft(t).add(e),t+=o)}return e}},{key:"assert",value:function(e,t){function n(e){if(!U.isLong(e)&&"number"!=typeof e)if("boolean"==typeof e)e=e?1:0;else{if(void 0===i)throw Error("invalid field type");if(void 0===(e=i[e]))throw Error("field type not found")}return vg(r,e),ug(e,r.val)}var r=this.fields.get(e);if(!r)throw Error("field not found");var i=r.oneof;if(!Array.isArray(t))return n(t);if(1===t.length)return n(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==i)return t.some((function(e){return n(e)}));throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=U.fromValue(e);for(var t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=pa(r[n],2)[1],o=i.len,a=U.fromNumber(Math.pow(2,o)-1,!0).shiftLeft(t);vg(i,a=e.and(a).shiftRightUnsigned(t)),i.val=a,t+=o}}},{key:"typeOf",value:function(e){if(void 0!==(e=this.fields.get(e))){var t=e.oneof;if(e=e.val,void 0!==t){var n=0;for(t=Object.entries(t);n<t.length;n++){var r=pa(t[n],2),i=r[0];if(ug(e,r[1]))return i}}}throw new TypeError("can only get type of oneof type")}}]),e}(),Cr=function(e){function t(e){W(this,t);var r=n.call(this);return r.define("Rejoin","boolean",1),r.define("Unused","number",31),r.define("Platform","number",8),r.define("Version","number",12),r.define("Subversion","number",12),r.set("Platform",7),r.set("Version",5),r.set("Subversion",301),r.set("Rejoin",e),r}ka(t,e);var n=la(t);return t}(Br),wC=Ja(Ja(Ja(Ja({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),Dr={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},xC=Ja(Ja({},wC),Dr),yC={Uncompressed:0,Zlib:1},Od=function(e){function t(e){W(this,t);var r=n.call(this);if(r.define("MessageType",xC,8),r.define("BroadcastJumps","number",2),r.define("ToCache","boolean",1),r.define("FromCache","boolean",1),r.define("CompressionMethod",yC,2),r.define("IterationNumber","number",4),r.define("BufferedMessage","boolean",1),r.define("ToArchive","boolean",1),r.define("FromArchive","boolean",1),"number"==typeof e||U.isLong(e))r.from(e);else if(void 0!==e){var i=0;for(e=dr(e);i<e.length;i++){var o=pa(e[i],2);r.set(o[0],o[1])}}return r}ka(t,e);var n=la(t);return Ea(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):Rk(Dr).some((function(e){return t.assert("MessageType",e)}))}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(Br),zC=function(e){function t(e){return W(this,t),m(n(e=r.call(this,e,"ChatManager")),"dialogueLru",new px(void 0,{maxlen:1e4,ttl:1e4})),e}ka(t,e);var r=la(t);return Ea(t,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var n=t.dialogue,r={dialogue:n,sequence:t=t.sequence.add(1)};return this.dialogueLru.set(e,{dialogue:n,sequence:t}),r}return n={dialogue:lg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(e,n),n}}]),t}(vb()),u={};"object"==R(module)&&(module.exports=u),u.parse=function(e,t){var n,r=u.bin.readUshort,i=u.bin.readUint,o={};for(n=(e=new Uint8Array(e)).length-4;101010256!=i(e,n);)n--;var a=r(e,n=n+4+4);r(e,n+=2),i(e,n+=2),n=i(e,n+=4);for(var s=0;s<a;s++){i(e,n),n+=4,n+=4,n+=4,i(e,n+=4);var c=i(e,n+=4),l=i(e,n+=4),d=r(e,n+=4),f=r(e,n+2),p=r(e,n+4);n+=6;var h=i(e,n+=8);n+=4,n+=d+f+p,u._readLocal(e,h,o,c,l,t)}return o},u._readLocal=function(e,t,n,r,i,o){var a=u.bin.readUshort,s=u.bin.readUint;s(e,t),a(e,t+=4),a(e,t+=2);var c=a(e,t+=2);s(e,t+=2),s(e,t+=4),s=a(e,t=t+4+8);var l=a(e,t+=2);if(t+=2,a=u.bin.readUTF8(e,t,s),t=t+s+l,o)n[a]={size:i,csize:r};else if(e=new Uint8Array(e.buffer,t),0==c)n[a]=new Uint8Array(e.buffer.slice(t,t+r));else{if(8!=c)throw"unknown compression method: "+c;t=new Uint8Array(i),u.inflateRaw(e,t),n[a]=t}},u.inflateRaw=function(e,t){return u.F.inflate(e,t)},u.inflate=function(e,t){return e[0],e[1],u.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-2),t)},u.deflate=function(e,t){null==t&&(t={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*e.length));return r[n]=120,r[n+1]=156,n=u.F.deflateRaw(e,r,n+2,t.level),e=u.adler(e,0,e.length),r[n+0]=e>>>24&255,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e>>>0&255,new Uint8Array(r.buffer,0,n+4)},u.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),r=u.F.deflateRaw(e,n,r,t.level);return new Uint8Array(n.buffer,0,r)},u.encode=function(e,t){null==t&&(t=!1);var n,r=0,i=u.bin.writeUint,o=u.bin.writeUshort,a={};for(n in e){var s=!u._noNeed(n)&&!t,c=e[n],l=u.crc.crc(c,0,c.length);a[n]={cpr:s,usize:c.length,crc:l,file:s?u.deflateRaw(c):c}}for(n in a)r+=a[n].file.length+30+46+2*u.bin.sizeUTF8(n);for(n in e=new Uint8Array(r+22),t=0,c=[],a)l=a[n],c.push(t),t=u._writeHeader(e,t,n,l,0);for(n in r=0,s=t,a)l=a[n],c.push(t),t=u._writeHeader(e,t,n,l,1,c[r++]);return a=t-s,i(e,t,101010256),o(e,t=t+4+4,r),o(e,t+=2,r),i(e,t+=2,a),i(e,t+4,s),e.buffer},u._noNeed=function(e){return e=e.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(e)},u._writeHeader=function(e,t,n,r,i,o){var a=u.bin.writeUint,s=u.bin.writeUshort,c=r.file;return a(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,r.cpr?8:0),a(e,t+=2,0),a(e,t+=4,r.crc),a(e,t+=4,c.length),a(e,t+=4,r.usize),s(e,t+=4,u.bin.sizeUTF8(n)),s(e,t+=2,0),t+=2,1==i&&(a(e,t=t+2+2+6,o),t+=4),t+=n=u.bin.writeUTF8(e,t,n),0==i&&(e.set(c,t),t+=c.length),t},u.crc={table:function(){for(var e=new Uint32Array(256),t=0;256>t;t++){for(var n=t,r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=u.crc.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^u.crc.update(4294967295,e,t,n)}},u.adler=function(e,t,n){var r=1,i=0,o=t;for(t+=n;o<t;){for(n=Math.min(o+5552,t);o<n;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},u.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",o=0;o<n;o++)i+="%"+u.bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return u.bin.readASCII(e,t,n)}return r},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var a=n.charCodeAt(o);if(0==(4294967168&a))e[t+i]=a,i++;else if(0==(4294965248&a))e[t+i]=192|a>>6,e[t+i+1]=128|a>>0&63,i+=2;else if(0==(4294901760&a))e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|a>>0&63,i+=3;else{if(0!=(4292870144&a))throw"e";e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|a>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},u.F={},u.F.deflateRaw=function(e,t,n,r){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],o=u.F.U,a=u.F._goodIndex;u.F._hash;var s=u.F._putsE,c=0;n<<=3;var l=0,d=e.length;if(0==r){for(;c<d;){var f=Math.min(65535,d-c);s(t,n,c+f==d?1:0),n=u.F._copyExact(e,c,f,t,n+8),c+=f}return n>>>3}s=o.lits,r=o.strt;var p=o.prev,h=0,v=0,g=0,m=0,y=0;for(2<d&&(r[y=u.F._hash(e,0)]=0),c=0;c<d;c++){if(f=y,c+1<d-2){y=u.F._hash(e,c+1);var b=c+1&32767;p[b]=r[y],r[y]=b}if(l<=c){if((14e3<h||26697<v)&&100<d-c&&(l<c&&(s[h]=c-l,h+=2,l=c),n=u.F._writeBlock(c==d-1||l==d?1:0,s,h,m,e,g,c-g,t,n),h=v=m=0,g=c),b=0,c<d-2&&(b=u.F._bestMatch(e,c,p,f,Math.min(i[2],d-c),i[3])),0!=b){f=b>>>16,b&=65535;var _=a(f,o.of0);o.lhst[257+_]++;var E=a(b,o.df0);o.dhst[E]++,m+=o.exb[_]+o.dxb[E],s[h]=f<<23|c-l,s[h+1]=b<<16|_<<8|E,h+=2,l=c+f}else o.lhst[e[c]]++;v++}}for(g==c&&0!=e.length||(l<c&&(s[h]=c-l,h+=2),n=u.F._writeBlock(1,s,h,m,e,g,c-g,t,n));0!=(7&n);)n++;return n>>>3},u.F._bestMatch=function(e,t,n,r,i,o){var a=32767&t,s=n[a],c=a-s+32768&32767;if(s==a||r!=u.F._hash(e,t-c))return 0;for(var l=r=0,d=Math.min(32767,t);c<=d&&0!=--o&&s!=a;){if((0==r||e[t+r]==e[t+r-c])&&(a=u.F._howLong(e,t,c))>r){if(l=c,(r=a)>=i)break;c+2<a&&(a=c+2);for(var f=0,p=0;p<a-2;p++){var h=t-c+p+32768&32767,v=h-n[h]+32768&32767;v>f&&(f=v,s=h)}}c+=(a=s)-(s=n[a])+32768&32767}return r<<16|l},u.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},u.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},u.saved=0,u.F._writeBlock=function(e,t,n,r,i,o,a,s,c){var l=u.F.U,d=u.F._putsF,f=u.F._putsE;l.lhst[256]++;var p=u.F.getTrees(),h=p[0],v=p[1],g=p[2],m=p[3],y=p[4],b=p[5],_=p[6];p=p[7];var E=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),w=r+u.F.contSize(l.fltree,l.lhst)+u.F.contSize(l.fdtree,l.dhst);r=r+u.F.contSize(l.ltree,l.lhst)+u.F.contSize(l.dtree,l.dhst),r+=14+3*b+u.F.contSize(l.itree,l.ihst)+(2*l.ihst[16]+3*l.ihst[17]+7*l.ihst[18]);for(var S=0;286>S;S++)l.lhst[S]=0;for(S=0;30>S;S++)l.dhst[S]=0;for(S=0;19>S;S++)l.ihst[S]=0;if(E=E<w&&E<r?0:w<r?1:2,d(s,c,e),d(s,c+1,E),c+=3,0==E){for(;0!=(7&c);)c++;c=u.F._copyExact(i,o,a,s,c)}else{if(1==E)var I=l.fltree,O=l.fdtree;if(2==E){for(u.F.makeCodes(l.ltree,h),u.F.revCodes(l.ltree,h),u.F.makeCodes(l.dtree,v),u.F.revCodes(l.dtree,v),u.F.makeCodes(l.itree,g),u.F.revCodes(l.itree,g),I=l.ltree,O=l.dtree,f(s,c,m-257),f(s,c+=5,y-1),f(s,c+=5,b-4),c+=4,e=0;e<b;e++)f(s,c+3*e,l.itree[1+(l.ordr[e]<<1)]);c=u.F._codeTiny(_,l.itree,s,c+3*b),c=u.F._codeTiny(p,l.itree,s,c)}for(b=0;b<n;b+=2){for(_=(e=t[b])>>>23,e=o+(8388607&e);o<e;)c=u.F._writeLit(i[o++],I,s,c);0!=_&&(e=(h=t[b+1])>>16,a=h>>8&255,h&=255,f(s,c=u.F._writeLit(257+a,I,s,c),_-l.of0[a]),c+=l.exb[a],d(s,c=u.F._writeLit(h,O,s,c),e-l.df0[h]),c+=l.dxb[h],o+=_)}c=u.F._writeLit(256,I,s,c)}return c},u.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},u.F.getTrees=function(){for(var e=u.F.U,t=u.F._hufTree(e.lhst,e.ltree,15),n=u.F._hufTree(e.dhst,e.dtree,15),r=[],i=u.F._lenCodes(e.ltree,r),o=[],a=u.F._lenCodes(e.dtree,o),s=0;s<r.length;s+=2)e.ihst[r[s]]++;for(s=0;s<o.length;s+=2)e.ihst[o[s]]++;s=u.F._hufTree(e.ihst,e.itree,7);for(var c=19;4<c&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,n,s,i,a,c,r,o]},u.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},u.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},u.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},u.F._codeTiny=function(e,t,n,r){for(var i=0;i<e.length;i+=2){var o=e[i],a=e[i+1];r=u.F._writeLit(o,t,n,r);var s=16==o?2:17==o?3:7;15<o&&(u.F._putsE(n,r,a,s),r+=s)}return r},u.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,s=0==r?-1:e[r-1];if(0==i&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;11>(i=Math.min(o+1-r>>>1,138))?t.push(17,i-3):t.push(18,i-11),r+=2*i-2}else if(i==s&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;i=Math.min(o+1-r>>>1,6),t.push(16,i-3),r+=2*i-2}else t.push(i,0)}return n>>>1},u.F._hufTree=function(e,t,n){var r=[],i=e.length,o=t.length,a=0;for(a=0;a<o;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<i;a++)0!=e[a]&&r.push({lit:a,f:e[a]});if(e=r.length,i=r.slice(0),0==e)return 0;if(1==e)return t[1+((n=r[0].lit)<<1)]=1,t[1+((0==n?1:0)<<1)]=1;r.sort((function(e,t){return e.f-t.f})),a=r[0],o=r[1];var s=0,c=1,l=2;for(r[0]={lit:-1,f:a.f+o.f,l:a,r:o,d:0};c!=e-1;)a=s!=c&&(l==e||r[s].f<r[l].f)?r[s++]:r[l++],o=s!=c&&(l==e||r[s].f<r[l].f)?r[s++]:r[l++],r[c++]={lit:-1,f:a.f+o.f,l:a,r:o};for((r=u.F.setDepth(r[c-1],0))>n&&(u.F.restrictDepth(i,n,r),r=n),a=0;a<e;a++)t[1+(i[a].lit<<1)]=i[a].d;return r},u.F.setDepth=function(e,t){return-1!=e.lit?e.d=t:Math.max(u.F.setDepth(e.l,t+1),u.F.setDepth(e.r,t+1))},u.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var a=e[r].d;e[r].d=t,o+=i-(1<<n-a)}for(o>>>=n-t;0<o;)(a=e[r].d)<t?(e[r].d++,o-=1<<t-a-1):r++;for(;0<=r;r--)e[r].d==t&&0>o&&(e[r].d--,o++);0!=o&&console.log("debt left")},u.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},u.F._writeLit=function(e,t,n,r){return u.F._putsF(n,r,t[e<<1]),r+t[1+(e<<1)]},u.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=u.F,i=r._bitsF,o=r._bitsE,a=r._decodeTiny,s=r.makeCodes,c=r.codes2map,l=r._get17,d=r.U,f=null==t;f&&(t=new n(e.length>>>2<<3));for(var p,h,v,g,m=0,y=0,b=h=0,_=0;0==m;)if(m=i(e,_,1),p=i(e,_+1,2),_+=3,0==p)0!=(7&_)&&(_+=8-(7&_)),p=e[(_=4+(_>>>3))-4]|e[_-3]<<8,f&&(t=u.F._check(t,b+p)),t.set(new n(e.buffer,e.byteOffset+_,p),b),_=_+p<<3,b+=p;else{if(f&&(t=u.F._check(t,b+131072)),1==p&&(v=d.flmap,g=d.fdmap,y=511,h=31),2==p){for(h=o(e,_,5)+257,p=o(e,_+5,5)+1,v=o(e,_+10,4)+4,_+=14,g=0;38>g;g+=2)d.itree[g]=0,d.itree[g+1]=0;for(y=1,g=0;g<v;g++){var E=o(e,_+3*g,3);d.itree[1+(d.ordr[g]<<1)]=E,E>y&&(y=E)}_+=3*v,s(d.itree,y),c(d.itree,y,d.imap),v=d.lmap,g=d.dmap,_=a(d.imap,(1<<y)-1,h+p,e,_,d.ttree),y=(1<<(E=r._copyOut(d.ttree,0,h,d.ltree)))-1,h=(1<<(p=r._copyOut(d.ttree,h,p,d.dtree)))-1,s(d.ltree,E),c(d.ltree,E,v),s(d.dtree,p),c(d.dtree,p,g)}for(;;)if(_+=15&(p=v[l(e,_)&y]),0==(E=p>>>4)>>>8)t[b++]=E;else{if(256==E)break;p=b+E-254,264<E&&(p=b+((E=d.ldef[E-257])>>>3)+o(e,_,7&E),_+=7&E),_+=15&(E=g[l(e,_)&h]);var w=((E=d.ddef[E>>>4])>>>4)+i(e,_,15&E);for(_+=15&E,f&&(t=u.F._check(t,b+131072));b<p;)t[b]=t[b++-w],t[b]=t[b++-w],t[b]=t[b++-w],t[b]=t[b++-w];b=p}}return t.length==b?t:t.slice(0,b)},u.F._check=function(e,t){var n=e.length;return t<=n?e:((t=new Uint8Array(Math.max(n<<1,t))).set(e,0),t)},u.F._decodeTiny=function(e,t,n,r,i,o){for(var a=u.F._bitsE,s=u.F._get17,c=0;c<n;){var l=e[s(r,i)&t];i+=15&l;var d=l>>>4;if(15>=d)o[c]=d,c++;else{var f=l=0;for(16==d?(f=3+a(r,i,2),i+=2,l=o[c-1]):17==d?(f=3+a(r,i,3),i+=3):18==d&&(f=11+a(r,i,7),i+=7),d=c+f;c<d;)o[c]=l,c++}}return i},u.F._copyOut=function(e,t,n,r){for(var i=0,o=0,a=r.length>>>1;o<n;){var s=e[o+t];r[o<<1]=0,r[1+(o<<1)]=s,s>i&&(i=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},u.F.makeCodes=function(e,t){var n,r,i=u.F.U,o=e.length,a=i.bl_count;for(n=0;n<=t;n++)a[n]=0;for(n=1;n<o;n+=2)a[e[n]]++;for(i=i.next_code,n=0,a[0]=0,r=1;r<=t;r++)n=n+a[r-1]<<1,i[r]=n;for(t=0;t<o;t+=2)0!=(a=e[t+1])&&(e[t]=i[a],i[a]++)},u.F.codes2map=function(e,t,n){for(var r=e.length,i=u.F.U.rev15,o=0;o<r;o+=2)if(0!=e[o+1]){var a=e[o+1],s=o>>1<<4|a,c=t-a;for(c=(a=e[o]<<c)+(1<<c);a!=c;)n[i[a]>>>15-t]=s,a++}},u.F.revCodes=function(e,t){for(var n=u.F.U.rev15,r=15-t,i=0;i<e.length;i+=2)e[i]=n[e[i]<<t-e[i+1]]>>>r},u.F._putsE=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8},u.F._putsF=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8,e[t+2]|=n>>>16},u.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},u.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},u.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},u.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},u.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){function e(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=u.F.U,n=0;32768>n;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[n]=(r>>>16|r<<16)>>>17}for(n=0;32>n;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];e(t.fltree,144,8),e(t.fltree,112,9),e(t.fltree,24,7),e(t.fltree,8,8),u.F.makeCodes(t.fltree,9),u.F.codes2map(t.fltree,9,t.flmap),u.F.revCodes(t.fltree,9),e(t.fdtree,32,5),u.F.makeCodes(t.fdtree,5),u.F.codes2map(t.fdtree,5,t.fdmap),u.F.revCodes(t.fdtree,5),e(t.itree,19,0),e(t.ltree,286,0),e(t.dtree,30,0),e(t.ttree,320,0)}();var Wk=u.inflate,Er=u.deflate,Fr=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,a,"Session");return m(n(s),"chatManager",void 0),m(n(s),"joinedChannels",new Set),m(n(s),"msgDedupLru",new nc(void 0,{maxlen:200})),m(n(s),"startTime",Date.now()),m(n(s),"seq",U.fromNumber(1,!0)),m(n(s),"userJoinOptions",new Cr(!1)),m(n(s),"seqSentStatuses",[!1,!1]),m(n(s),"dialogueSequenceLru",new nc(void 0,{maxlen:1e4})),m(n(s),"loggedOut",!1),m(n(s),"messageSentTimes",[]),m(n(s),"curLoginSockets",[void 0,void 0]),m(n(s),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(s),"lastLoginSockets",[new ce(1),new ce(1)]),m(n(s),"dialPendingMsgSubjectMaps",[new Map,new Map]),m(n(s),"context",void 0),m(n(s),"connection",void 0),m(n(s),"instanceId",void 0),m(n(s),"registerSocketsFailureListener",(function(){s.connection.once("socketsFailure",(function(){s.log("socketsFailure, creating a new connection"),qd((function(){return s.connection.removeAllListeners(),s.connection=new sr(s.context,s.logger,!0),s.loginHandler(6e3,!0)})).pipe(ae((function(e){return e.pipe(Wc(Nd.getParameter("RECONNECTING_AP_INTERVAL")))})),ob(s.connection.apClient.apFinish$)).subscribe((function(){s.log("new connection connected")}))})),0===s.connection.listenerCount("tokenExpired")&&s.connection.on("tokenExpired",(function(){s.emit("tokenExpired")}))})),s.context=e,s.connection=i,s.instanceId=o,s.chatManager=new zC(a),s.log("The instanceId is %s",s.instanceId.toString()),s}ka(t,e);var r=la(t);return Ea(t,[{key:"fetchFileUploadIndexGet",value:function(e){var n=e.hash,r=e.size;if(0===(e=this.getLoginSockets()).length)throw new H("Client is not logged in");var i=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexGet",{seq:i,hash:n,size:r})})),{ret:ya.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexRet").pipe(X((function(e){return i.eq(e.seq)})))})))),fin:ya.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(X((function(e){return i.eq(e.seq)})))})))),err:Tb.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The media message upload failure, code %d",e.code],Wf)})))})))),timeout:t.genTimeoutError(vh)}}},{key:"requestFileUploadIndexSet",value:function(e){var n=e.hash,r=e.unit,i=e.servers;if(0===(e=this.getLoginSockets()).length)throw new H("Client is not logged in");var o=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexSet",{seq:o,servers:i,hash:n,unit:r})})),ya.apply(void 0,[t.genTimeoutError(vh)].concat(I(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["FileUploadIndexSet failure, code %d",e.code],Wf)})))}))),I(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestFileDownloadIndexGet",value:function(e){var n=e.size,r=e.zone,i=e.unit,o=e.hash,a=this.getLoginSockets();if(0===a.length)throw new H("Client is not logged in");var s=this.incGetSeq();return a.forEach((function(e){e.sendPacket("FileDownloadIndexGet",{seq:s,size:n,zone:r,unit:i,hash:o})})),e=ya.apply(void 0,I(a.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(X((function(e){return s.eq(e.seq)})))})))).pipe(Z((function(e){var t=e.backups,n=e.servers;return e=Se(e,["backups","servers"]),Ja({backupList:t.map((function(e){return[e]})),serverList:n.map((function(e){return[e]}))},e)})),Wc(500)),a=Pl(a.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(X((function(e){return s.eq(e.seq)})))}))),ya(e,a.pipe(Z((function(e){return e.reduce((function(e,t){var n=e.backupList,r=e.serverList;e=t.backups;var i=t.servers;return t=Se(t,["backups","servers"]),Ja({backupList:e.map((function(e,t){return[e].concat(I(void 0!==n&&Array.isArray(n[t])?n[t]:[]))})),serverList:i.map((function(e,t){return[e].concat(I(void 0!==n&&Array.isArray(r[t])?r[t]:[]))}))},t)}),{})}))),t.genTimeoutError(vh))}},{key:"loginHandler",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e4,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&n)throw new H("Already logged out, request ignored");n&&this.registerSocketsFailureListener(),this.connection.initConnection();var r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),i=Date.now();return r.forEach((function(t,r){var o=e.loginSocketSubs[r].login;void 0!==o&&o.unsubscribe(),e.loginSocketSubs[r].login=t.pipe(Y((function(t){var o,a;e.curLoginSockets[r]=t;var s=Date.now();cb("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:db(e.startTime),lts:U.fromNumber(s),responseTime:i-s,sid:Sa(e.instanceId),userId:e.context.uid},null===(o=e.context.areaConfig)||void 0===o?void 0:o.EVENT_REPORT_DOMAIN[0],null===(a=e.context.areaConfig)||void 0===a?void 0:a.EVENT_REPORT_BACKUP_DOMAIN[0]),e.emit("userJoined",t.env),n&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[r])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Tb.apply(void 0,I(r).concat([fb(this.connection,"connectionInitFailure").pipe(Y((function(e){if(wa(e)||Na(e))throw e;throw new ca("Login failure",{code:yq,originalError:e})})))])).pipe(Pa(1),Za(t),Ga((function(t){return t instanceof pb&&e.warn("Client login timeout"),t&&t.code===uh&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,n),ba(t)})),Y((function(){n||e.registerSocketsFailureListener()})),hg((function(){n||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:function(){var e=K(w.mark((function e(){var t,n,r,i=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),t=this.getLoginSockets(),n=t.map((function(e){return e.sendPacket("UserQuit",{}),i.connection.waitClosing(e)})),this.clearSockets(5e3),r=t.map((function(e){return e.env})),[0,1].filter((function(e){return!r.includes(e)})).forEach((function(e){i.connection.closeSocket(e,0)})),e.abrupt("return",Tb.apply(void 0,I(n)).toPromise());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new H("Client is not logged in. Cannot join the channel",uq);case 2:return r=fb(this,"channelLeft").pipe(nb((function(e){return e===t})),Pa(1)),i=this.incGetSeq(),(o=this.lastLoginSockets.map((function(e){return e.pipe(vc((function(e,t){0!==t&&a.incSeqIfNeeded(e.env);var r=0===t?i:a.seq;return e.sendPacket("GroupEnter",{account:n,seq:r}),e.fromReceived("GroupReply").pipe(X((function(e){return r.eq(e.seq)})),Y((function(e){if(0!==(e=e.code))throw new ca(["Channel join failure. The response code is %d",e],qq)})))})),ob(r),be())}))).forEach((function(e,n){var r=function(){return a.loginSocketSubs[n].channels.delete(t.channelId)};a.loginSocketSubs[n].channels.set(t.channelId,e.subscribe({error:r,complete:r}))})),e.next=8,Tb.apply(void 0,I(o)).pipe(Pa(1),Za(1e4),Ga((function(e){return e instanceof pb&&a.warn("Channel join timeout"),ba(e)}))).toPromise();case 8:this.joinedChannels.add(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e,t){this.emit("channelLeft",e),this.joinedChannels.delete(e),this.getLoginSockets().forEach((function(e){e.sendPacket("GroupLeave",{account:t})}))}},{key:"requestChannelMemberList",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in. Cannot get the channel members",Bz);var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),ya.apply(void 0,[t.genTimeoutError(oq)].concat(I(n.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(X((function(t){var n=t.seq;return t.group===e&&r.eq(n)})))})))))}},{key:"requestPeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserStatusList",{users:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(Nz)].concat(I(n.map((function(e){return e.fromReceived("UserStatusResult").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSetLocalUserAttributes",value:function(e,n){var r=this,i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t,i){void 0!==n&&i!==n||t.sendPacket("UserAttributeSet",{account:r.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes set failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestSetChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The group attributes set failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeMod",{account:n.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:i})})),ya.apply(void 0,I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes add or update failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The group attributes add or update failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeDel",{account:n.context.uid,attributes:e,seq:i})})),ya.apply(void 0,I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes delete failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:n,seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The channel attributes delete failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestClearLocalUserAttributes",value:function(){var e=this,n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeSet",{account:e.context.uid,seq:r,attributeInfos:[]})})),ya.apply(void 0,I(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return r.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes clear failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(n.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeSet",{group:e,seq:i,attributeInfos:[],broadcast:n})})),ya.apply(void 0,I(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The channel attributes clear failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeGet",{account:e,seq:i,attributes:n})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){if(10008===(e=e.code))throw new ca("The user requested is not online",lq);throw new Pc(["User attribute operation unknown error code: %d",e],Ob)})))}))),I(r.map((function(e){return e.fromReceived("UserAttributeRet").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeGet",{group:e,seq:i,attributes:n})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The channel attributes get failure, code %d",e.code],Ob)})))}))),I(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributeKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeKeysGet",{account:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return r.eq(e.seq)})),Z((function(e){if(10008===(e=e.code))throw new ca("The user requested is not online",lq);throw new Pc(["User attribute operation unknown error code: %d",e],Ob)})))}))),I(n.map((function(e){return e.fromReceived("UserAttributeKeysRet").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return r.eq(e.seq)})),Z((function(e){throw new Pc(["Channel attribute operation unknown error code: %d",e.code],Ob)})))}))),I(n.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelMemberCount",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupStatusList",{groups:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(oq)].concat(I(n.map((function(e){return e.fromReceived("GroupStatusResult").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSubscribePeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("SubscribeUserStatus",{seq:r,users:e})})),ya.apply(void 0,[t.genTimeoutError(Uz)].concat(I(n.map((function(e){return e.fromReceived("SubscribeResponse").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new H("Client is not logged in");var n=this.incGetSeq();t.forEach((function(t){t.sendPacket("UnsubscribeUserStatus",{seq:n,users:e})}))}},{key:"sendInvitationMessage",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u,c,l,d,f,p,h=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,r=t.callId,i=t.extra,o=t.isAcceptAck,a=t.channelId,s=t.type,u={callId:r},void 0===o){e.next=6;break}if("CallAccept"===s){e.next=5;break}throw Error("invalid invitation type");case 5:u.type=o?"ack":"request";case 6:return u.channel=a,("CallInvite"===s||"CallCancel"===s||"CallReject"===s||"CallAccept"===s&&!1===o)&&void 0!==i&&(u.extra=i),c=lg(),this.log("The sent invitation body is %o",u),l=function(e){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:c,instance:h.instanceId,dst:n,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,MessageType:s}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(u)),src:h.context.uid}},e.next=14,Ib(this.sendMessageToRetry(l,!0)).pipe(Za(1e4),Ga((function(e){return e instanceof pb&&h.warn("Send invitation timeout"),ba(e)}))).toPromise();case 14:return d=e.sent,f=d.code,p=d.retryTimes,e.abrupt("return",{hasPeerReceived:0===f,hasReSent:0!==p});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var e=K(w.mark((function e(t,n,r,i,o,a){var s,u,c,l,d,f,p,h,v,g,y,b,_,E,S,I,O,T,A,R,k,C,N,x,P,D,M,j,F,B=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n.width,c=void 0===u?0:u,l=n.height,d=void 0===l?0:l,f=n.fileName,p=void 0===f?"":f,h=n.description,v=void 0===h?"":h,g=n.thumbnail,y=void 0===g?new Blob:g,b=n.thumbnailHeight,_=void 0===b?0:b,E=n.thumbnailWidth,S=void 0===E?0:E,I=n.size,O=void 0===I?0:I,T=n.mediaId,A=o.enableOfflineMessaging,R=o.enableHistoricalMessaging,ua(r)){e.next=4;break}throw new L("The send message arguments are not valid",i?Ik:Tf);case 4:if(!(32768<new Blob([p,y,v]).size)){e.next=6;break}throw new L("The size of message overflowed ",i?ge:qh);case 6:return k=this.chatManager.getChatInfo(r),C=k.dialogue,N=k.sequence,x=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(x,"-").concat(C,"#").concat(N,'"'),i?" peer":" channel",r),m(s={},"media_description",v),m(s,"media_width",c),m(s,"media_height",d),m(s,"media_thumbnailwidth",S),m(s,"media_thumbnailheight",_),m(s,"media_size",O),m(s,"media_id",T),m(s,"media_filename",p),P=oc(s,(function(e){return(new TextEncoder).encode(e.toString())})),e.t0=Uint8Array,e.next=14,wi(y);case 14:return e.t1=e.sent,P.media_thumbnail=new e.t0(e.t1),D=i&&"IMAGE"===t?"PeerImageMessage":i&&"FILE"===t?"PeerFileMessage":i||"IMAGE"!==t?"ChannelFileMessage":"ChannelImageMessage",M=function(e){return{MiscMap:P,sequence:N,dialogue:C,instance:x,dst:r,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,CompressionMethod:"Uncompressed",MessageType:D,ToCache:A,ToArchive:R}).toLong(),payload:new Uint8Array,src:B.context.uid}},e.next=20,Ib(this.sendMessageToRetry(M,!0)).pipe(Za(void 0===a?1e4:a),Ga((function(e){return e instanceof pb&&B.warn("Send message timeout"),ba(e)}))).toPromise();case 20:if(j=e.sent,2!==(F=j.code)){e.next=24;break}throw new ca("The peer does not support this type of message",Mz);case 24:return e.abrupt("return",{hasPeerReceived:0===F});case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var e=K(w.mark((function e(t,n,r,i,o,a){var s,u,c,l,d,f,p,h,v,g,m=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=o.enableOfflineMessaging,u=o.enableHistoricalMessaging,ua(r)&&t instanceof Uint8Array&&"string"==typeof n){e.next=3;break}throw new L("The send message arguments are not valid",i?Ik:Tf);case 3:if(!(32768<t.byteLength+new Blob([n]).size)){e.next=5;break}throw new gb("The message size is over the 32KB limit",i?ge:qh);case 5:return c=!Nd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=t.byteLength,l=this.chatManager.getChatInfo(r),d=l.dialogue,f=l.sequence,p=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(p,"-").concat(d,"#").concat(f,'"'),c?" compressed":"",i?"peer":"channel",r),h=function(e){return{MiscMap:{description:(new TextEncoder).encode(n)},sequence:f,dialogue:d,instance:p,dst:r,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,CompressionMethod:c?"Zlib":"Uncompressed",MessageType:i?"PeerRawMessage":"ChannelRawMessage",ToCache:s,ToArchive:u}).toLong(),payload:c?Er(t):t,src:m.context.uid}},e.next=12,Ib(this.sendMessageToRetry(h,!0)).pipe(Za(void 0===a?1e4:a),Ga((function(e){return e instanceof pb&&m.warn("Send message timeout"),ba(e)}))).toPromise();case 12:return v=e.sent,g=v.code,e.abrupt("return",{hasPeerReceived:0===g});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,a){return e.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var e=K(w.mark((function e(t,n,r,i,o){var a,s,u,c,l,d,f,p,h,v,g,m=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.enableOfflineMessaging,s=i.enableHistoricalMessaging,ua(n)){e.next=3;break}throw new L("The send message arguments are not valid",r?Ik:Tf);case 3:if(!(32768<new Blob([t]).size)){e.next=5;break}throw new gb("The message size is over the 32KB limit",r?ge:qh);case 5:return u=!Nd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([t]).size,c=this.chatManager.getChatInfo(n),l=c.dialogue,d=c.sequence,f=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(f,"-").concat(l,"#").concat(d,'"'),u?" compressed":"",r?"peer":"channel",n),p=(new TextEncoder).encode(t),h=function(e){return{MiscMap:{},sequence:d,dialogue:l,instance:f,dst:n,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,CompressionMethod:u?"Zlib":"Uncompressed",MessageType:r?"PeerTextMessage":"ChannelTextMessage",ToCache:a,ToArchive:s}).toLong(),payload:u?Er(p):p,src:m.context.uid}},e.next=13,Ib(this.sendMessageToRetry(h,!0)).pipe(Za(void 0===o?1e4:o),Ga((function(e){return e instanceof pb&&m.warn("Send message timeout"),ba(e)}))).toPromise();case 13:return v=e.sent,g=v.code,e.abrupt("return",{hasPeerReceived:0===g});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var n=(e=pa(e,2))[1];"channels"===e[0]&&t||(Array.isArray(n)||n instanceof Map?n.forEach((function(e){return e.unsubscribe()})):n&&n.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l,d,f=this,p=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<p.length&&void 0!==p[2]?p[2]:0,this.log("Attempt to send the message ".concat(n?" with retrying, %o":"without retrying"),{retryTimes:r}),0!==(i=this.getLoginSockets()).length){e.next=5;break}throw Error("no logged-in sockets");case 5:return o=t(r),i.forEach((function(e){e.sendPacket("Message",o)})),a=o.dialogue,s=o.sequence,u=o.instance,c=i.map((function(e){return e.fromReceived("Ack").pipe(nb((function(e){return a.eq(e.dialogue)&&s.eq(e.sequence)&&u.eq(e.instance)})))})),e.prev=9,e.next=12,Tb.apply(void 0,I(c)).pipe(Za(6e3),Ga((function(e){return Na(e)&&f.warn("Message send timeout, retry times %d",r),ba(e)})),Pa(1)).toPromise();case 12:return l=e.sent,d=l.code,this.log("The message has been acked, %o",{code:d}),e.abrupt("return",{code:d,retryTimes:r});case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof pb&&n)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,r+1));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(vc((function(t){return uc(0,1e3).pipe(Y((function(){e.incSeqIfNeeded(t.env),t.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:e.seq})})))})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAlive;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(vc((function(e){var t,n=!1,r=e.userJoin$.pipe(Y((function(){n=!0}))),i=e.input$.pipe(Y((function(e){"Ping"!==yi[e.uri].slice(0,-3)&&(n=!1)})));return Tb(uc(5e3,4500).pipe(jt(e.receivedPacket),Y((function(r){r=pa(r,2),r=pa(r[1],2)[1],t!==r||n||e.forceReconnect(),t=r}))),r,i)})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAliveReconnector;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(vc((function(t){return Tb(fb(t,"reconnect").pipe(Y(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(Y(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(Y(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(Y(e.onGroupLeaveNotice())),t.fromReceived("GroupCountNotice").pipe(Y(e.onGroupCountNotice())),t.fromReceived("GroupAttributeAlt").pipe(Y(e.onGroupAttributeAlt())),t.fromReceived("UserJoinNotice").pipe(Y(e.onUserNotice(S.PeerOnlineState.ONLINE))),t.fromReceived("UserQuitNotice").pipe(Y(e.onUserNotice(S.PeerOnlineState.OFFLINE))),t.fromReceived("UserWaitNotice").pipe(Y(e.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(bf(void 0))})))})).forEach((function(t,n){e.loginSocketSubs[n].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,n){var r=this;return Ol(qd((function(){r.userJoinOptions=new Cr(t),e.sendPacket("UserJoin",{account:r.context.uid,instance:r.instanceId,opt:r.userJoinOptions.toLong(),seq:n,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(X((function(e){return n.eq(e.seq)})),Y((function(t){if(0!==(t=t.code))throw r.clearSockets(),r.logError("Connected to gateway success but the Rtm server rejected login"),new ca(["Login failure. The response code from the RTM service is %d",t],sh);r.log("ENV_%d logged in",e.env)})),bf(e),Za(5e3))).pipe(nb((function(e){return void 0!==e})),Ga((function(e){return e instanceof pb&&r.warn("Login response timeout, rejoin: %s",t),ba(e)})))}},{key:"getSocketLoginObservables",value:function(e,t){var n=this;return e.map((function(e){return e.pipe(Y((function(e){0===e.listenerCount("socketUserDrop")&&e.on("socketUserDrop",(function(t){return n.onUserDrop(t,e)}))})),vc((function(e,r){return n.incSeqIfNeeded(e.env),n.requestSocketLogin(e,0!==r,0===r?t:n.seq)})),be())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new Ca({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var e=this.curLoginSockets,t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},{key:"emitMessage",value:function(e,n){var r=e.options,i=e.payload,o=e.src,a=e.dst,s=e.instance,u=e.dialogue,c=e.sequence,l=e.ms,d=e.MiscMap;this.dialogueSequenceLru.set(u.toString(),c),s="".concat(s,"-").concat(u,"#").concat(c),this.msgDedupLru.has(s)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",n,s):(this.msgDedupLru.set(s,void 0),n=new Od(r),this.lastLoginSockets.forEach(function(){var n=K(w.mark((function n(r){var i;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.pipe(Pa(1)).toPromise();case 2:i=n.sent,t.sendMessageAck(e,i);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r=n.isZlibCompressed(),n.isInvitation()?(a=na(r?Wk(Am(i,Uint8Array.of(0,0,0,0))):i),a=JSON.parse(a),this.log("The received invitation body is %o",a),this.emit("invitationMessage",{body:a,type:n.getInvitationType(),peerId:o,serverReceivedTs:l.toNumber()})):n.isTextMessage()?(d=n.isPeerTextMessage(),i=na(r?Wk(Am(i,Uint8Array.of(0,0,0,0))):i),this.info("Received a%s %s text message from %s to %s, %s",r?" compressed":"",d?"peer":"channel",o,a,s),d?(o={text:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerTextMessage",o)):this.emit("channelTextMessage",{channelId:a,memberId:o,text:i,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):n.isRawMessage()?(u=n.isRawPeerMessage(),d=void 0===(d=d.description)?"":na(d),i=r?Wk(i):i,this.info("Received a%s %s raw message from %s to %s, %s",r?" compressed":"",u?"peer":"channel",o,a,s),u?(o={desc:d,raw:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerRawMessage",o)):this.emit("channelRawMessage",{desc:d,raw:i,channelId:a,memberId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):(n.isImageMessage()||n.isFileMessage())&&(i=n.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",i?"peer":"channel",o,a,s),i?this.emit("peerMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:d,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}}):this.emit("channelMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:d,memberId:o,channelId:a,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}})))}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var n=[0,1].filter((function(t){return t!==e.env}))[0];(n=t.connection.curOpenSockets[n])&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserDrop",value:function(e,t){var n,r;e=e.code,cb("KickedOff",{code:0,elapse:db(this.startTime),linkId:parseInt(t.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:t.address,serverCode:e,sid:Sa(this.instanceId),userId:this.context.uid},null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=this.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),10006===e||10001===e?this.warn("Login too often and kicked off, reconnect and login"):10009===e?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=lg(),this.context.sid=Sa(this.instanceId),this.emit("instanceChanged",this.instanceId)):[11,14,15,16].includes(e)&&(this.emit("userDrop",e),this.clearSockets())}},{key:"clearSockets",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(r){e.cleanLoginSubs(r,n),e.connection.closeSocket(r,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(n){var r=n.dialogue,i=n.instance,o=n.sequence,a=n.options;if(n.src===t.context.uid)t.log("The message is from the local account, ignored");else{var s=r.toString(),u=t.dialPendingMsgSubjectMaps[e.env].get(s);if(r="".concat(i,"-").concat(r,"#").concat(o),u)u.next(n),t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,r);else{var c=t.dialogueSequenceLru.get(s);if(u=!c&&o.eq(1),i=void 0!==c&&o.sub(c).eq(1),u||i)t.emitMessage(n,e.env);else{if(c){if(o.lte(c))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,r)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,r);o=new La,t.dialPendingMsgSubjectMaps[e.env].set(s,o);var l=o.pipe(ks(yk),ig((function(e,t){return[].concat(I(e),[t])}),[]),Z((function(e){return e.sort((function(e,t){return e=e.sequence,t=t.sequence,e.eq(t)?0:e.gt(t)?1:-1}))})),Yl(1));a=!(a=new Od(a)).isFromCache()&&!a.isBufferedMessage(),l.pipe(ob(uc(a?750:1500)),X((function(e){if(2>e.length)return!1;for(var t=void 0===c?U.fromNumber(1,!0):c.add(1),n=0;n<e.length;t=t.add(1),n++)if(!e[n].sequence.eq(t))return!1;return!0})),hg((function(){t.dialPendingMsgSubjectMaps[e.env].delete(s)}))).subscribe((function(n){n.forEach((function(n){t.emitMessage(n,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence))}))}),(function(n){n instanceof gg&&l.pipe(Pa(1)).subscribe((function(n){return n.forEach((function(n){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence)),t.emitMessage(n,e.env)}))}))})),o.next(n)}}}}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberJoined",size:t.size})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberLeft",size:t.size})}}},{key:"onGroupCountNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,type:"MemberCountUpdated",size:t.size})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var n=t.group;t=Se(t,["group"]),e.emit("channelAttributesUpdated",Ja({channelId:n},t))}}},{key:"onUserNotice",value:function(e){var t=this;return function(n){t.emit("peerOnlineStatusChanged",{peerId:n.user,instance:n.instance,seq:n.seq,state:e})}}}],[{key:"sendMessageAck",value:function(e,t){var n=new Od(e.options);(n.isInvitation()||n.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),t}(vb());m(Fr,"genTimeoutError",(function(e,t){return mb(void 0).pipe(Wc(void 0===t?1e4:t),Z((function(){throw new bb(["Request timed out after %ds",void 0===t?1e4:t],e)})))}));var Gr,Xk,Yk=0,Zk=0;Id.v1=function(e,t,n){n=t&&n||0;var r=t||[],i=(e=e||{}).node||Gr,o=void 0!==e.clockseq?e.clockseq:Xk;if(null==i||null==o){var a=jq();null==i&&(i=Gr=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=Xk=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:Zk+1,u=a-Yk+(s-Zk)/1e4;if(0>u&&void 0===e.clockseq&&(o=o+1&16383),(0>u||a>Yk)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(Yk=a,Zk=s,Xk=o,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o,o=0;6>o;++o)r[n+o]=i[o];return t||kq(r)},Id.v4=Id;var $k=zh(),jd,Hr,Oe=S.LocalInvitationFailureReason,xa=S.LocalInvitationState,AC=(Hr=function(e){function t(e,i,o){W(this,t);var a=r.call(this,o,"RtmLocalInvitation",!0);return m(n(a),"state",xa.IDLE),m(n(a),"localInvitationEnd$",ya(fb(n(a),"LocalInvitationAccepted"),fb(n(a),"LocalInvitationRefused"),fb(n(a),"LocalInvitationFailure"),fb(n(a),"LocalInvitationCanceled")).pipe(Pa(1))),m(n(a),"callId",Id.v4()),m(n(a),"_content",""),m(n(a),"_channelId",""),m(n(a),"_response",""),m(n(a),"calleeId",void 0),m(n(a),"logger",void 0),m(n(a),"getSession",void 0),a.calleeId=e,a.getSession=i,a.logger=o,a}ka(t,e);var r=la(t);return Ea(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state!==xa.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=e)}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new L('Cannot set the "response" of the LocalInvitation instance.',rc)}},{key:"send",value:function(){var e,t=this;if(this.state===xa.SENT_TO_REMOTE||this.state===xa.RECEIVED_BY_REMOTE)throw new H("The local invitation send failure. The call invitation has already been sent.",Fz);if(this.isLocalInvitationEnd())throw new H("The local invitation send failure. The call invitation has ended.",rh);if(0<this._channelId.length&&!ua(this._channelId))throw new L("Illegal invitation channel ID",rc);if(!ua(this.calleeId))throw new L("Illegal invitation callee user ID",rc);if(8192<sg(this._content))throw new L('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',rc);this.state=xa.SENT_TO_REMOTE,qd(K(w.mark((function n(){var r,i,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(r=n.sent,i=r.hasPeerReceived,o=r.hasReSent,!t.isLocalInvitationEnd()){n.next=7;break}throw new bb("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),i||o){n.next=11;break}throw e=new $k({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(i){n.next=14;break}throw e=new $k({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return n.stop()}}),n)})))).pipe(ae((function(e){return e.pipe(Y((function(e){if(!(e instanceof $k))throw e})),Wc(2e3))})),Za(3e4),Ga((function(e){return Na(e)&&t.warn("local invitation ack timed out"),ba(e)})),ob(this.localInvitationEnd$)).subscribe({next:function(){t.state===xa.RECEIVED_BY_REMOTE?t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):t.state!==xa.SENT_TO_REMOTE?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(t.info("The peer received the local invitation %s.",t.callId),t.state=xa.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(Za(6e4),Ga((function(e){return Na(e)&&t.warn("local invitation expired"),ba(e)}))).subscribe({error:function(){t.state=xa.FAILURE,t.emit("LocalInvitationFailure",Oe.INVITATION_EXPIRE)}}))},error:function(n){t.isLocalInvitationEnd()?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(t.state=xa.FAILURE,Na(n)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",Oe.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",Oe.PEER_NO_RESPONSE):Na(n)?t.emit("LocalInvitationFailure",Oe.PEER_NO_RESPONSE):"RtmInvalidStatusError"===n.name?t.emit("LocalInvitationFailure",Oe.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",Oe.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new H("The local invitation cancel failure",rh);if(this.state===xa.IDLE)throw new H("The local invitation has not been sent",Ez);if(8192<sg(this._content))throw new L('The length of the "content" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',rc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=xa.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==xa.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===xa.IDLE)throw new H("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===xa.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===xa.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=xa.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=xa.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e))}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===xa.IDLE)throw new H("the local have not sent the invitation, how can remote refuse it?");this.state===xa.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=xa.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=xa.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[xa.CANCELED,xa.FAILURE,xa.ACCEPTED_BY_REMOTE,xa.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(vb()),jd=Hr,da(jd.prototype,"send",[ia],Object.getOwnPropertyDescriptor(jd.prototype,"send"),jd.prototype),da(jd.prototype,"cancel",[ia],Object.getOwnPropertyDescriptor(jd.prototype,"cancel"),jd.prototype),jd),Bh=S.RemoteInvitationFailureReason,ib=S.RemoteInvitationState,BC=function(e){function t(e){var i=e.invitationChannel,o=e.extraContent,a=e.callId,s=e.callerId,u=e.logger;e=e.getSession,W(this,t);var c=r.call(this,u,"RtmRemoteInvitation",!0);return m(n(c),"state",ib.INVITATION_RECEIVED),m(n(c),"remoteInvitationEnd$",ya(fb(n(c),"RemoteInvitationCanceled"),fb(n(c),"RemoteInvitationRefused"),fb(n(c),"RemoteInvitationAccepted"),fb(n(c),"RemoteInvitationFailure")).pipe(Pa(1))),m(n(c),"callerId",void 0),m(n(c),"callId",void 0),m(n(c),"_getSession",void 0),m(n(c),"logger",void 0),m(n(c),"_content",void 0),m(n(c),"_channelId",void 0),m(n(c),"_response",""),c._channelId=i,c._content=o,c.callId=a,c.callerId=s,c._getSession=e,c.logger=u,c.remoteInvitationEnd$.pipe(Za(6e4),Ga((function(e){return Na(e)&&c.warn("Remote invitation expired"),ba(e)}))).subscribe({error:function(){c.state=ib.FAILURE,c.emit("RemoteInvitationFailure",Bh.INVITATION_EXPIRE)}}),c}ka(t,e);var r=la(t);return Ea(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new L('Cannot set the "response" of the RemoteInvitation instance.',rc)}},{key:"content",get:function(){return this._content},set:function(e){throw new L('Cannot set the "content" of the RemoteInvitation instance.',rc)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new H("The local invitation has ended. Cannot accept.",rh);if(this.state===ib.ACCEPT_SENT_TO_LOCAL)throw new H("The remote invitation is accepting. Cannot do the operation.",pq);if(8192<sg(this._response))throw new L('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',rc);this.state=ib.ACCEPT_SENT_TO_LOCAL,Tb(Sl(1e3).pipe(eb((function(){return qd(K(w.mark((function e(){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),nb((function(t){return e=t.hasPeerReceived})),Pa(1)),fb(this,"RemoteInvitationAccepted")).pipe(Za(5e3),ob(this.remoteInvitationEnd$)).subscribe({error:function(n){if(t.logError(n),t.state=ib.FAILURE,Na(n))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",Bh.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",Bh.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",Bh.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===ib.ACCEPT_SENT_TO_LOCAL)throw new H("The remote invitation is accepting. Cannot do the operation.",pq);if(this.isRemoteInvitationEnd())throw new H("The invitation is end. Cannot refuse",rh);if(8192<sg(this._response))throw new L('The length of the "response" overflows. The number of bytes representing content must not exceed 8 \xd7 1024 if encoded in UTF-8.',rc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=ib.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===ib.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=ib.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state!==ib.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=ib.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[ib.ACCEPTED,ib.REFUSED,ib.CANCELED,ib.FAILURE].includes(this.state)}}]),t}(vb()),CC=function(e){function t(e,i){W(this,t);var o=r.call(this,i,"InvitationManager");return m(n(o),"getSession",void 0),m(n(o),"invitationDispatcher",new aa.EventEmitter),m(n(o),"outgoingLocalInvitations",new Map),m(n(o),"receivedRemoteInvitations",new nc(void 0,{maxlen:1e4})),m(n(o),"logger",void 0),o.getSession=Fm(e),o.logger=i,o.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,n=e.extra,r=e.callerId;e=e.channelId,o.receivedRemoteInvitations.has(t)||((n=new BC({callerId:r,callId:t,getSession:o.getSession,logger:i,extraContent:n,invitationChannel:e})).remoteInvitationEnd$.subscribe((function(){o.receivedRemoteInvitations.delete(t)})),o.receivedRemoteInvitations.set(t,n),o.emit("remoteInvitationInstance",n))})),o.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){(e=o.receivedRemoteInvitations.get(e.callId))&&e.onAcceptAckReceived()})),o.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.extra;(e=o.receivedRemoteInvitations.get(e.callId))&&e.onCancelReceived(t)})),o.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onAcceptReceived(t)})),o.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onRefuseReceived(t)})),o}ka(t,e);var r=la(t);return Ea(t,[{key:"invitationMessageHandler",value:function(e){var t=e.body,n=t.callId,r=t.extra;r=void 0===r?"":r;var i=t.type,o=void 0===(t=t.channel)?"":t,a=e.type;switch(t=e.peerId,e=e.serverReceivedTs,a){case"CallAccept":"ack"===i?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:n}):"request"===i&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:n,extra:r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:n,callerId:t,extra:r,channelId:o});break;case"CallCancel":if("0"===n){n="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(o,"_").concat(r),this.getSession().emit("peerTextMessage",{peerId:t,properties:{serverReceivedTs:e,isOfflineMessage:!1},text:n});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:n,extra:r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:n,extra:r});break;default:throw mm("invitationType",a)}}},{key:"genLocalInvitation",value:function(e){var t=this,n=new AC(e,this.getSession,this.logger);return n.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(n.callId)})),this.outgoingLocalInvitations.set(n.callId,n),n}}]),t}(vb()),DC=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return jb(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),KB(e,t,{leading:r,maxWait:t,trailing:i})},wb,Ir,Pe;!function(e){e[e.JOINED=0]="JOINED",e[e.LEFT=1]="LEFT"}(Pe||(Pe={}));var Jr=S.ConnectionState,EC=(Ir=function(e){function t(e,i,o,a){W(this,t);var s=r.call(this,a,"RtmChannel",!0);return m(n(s),"onMemberCountUpdated",DC((function(e){e!==s.memberCount&&(s.memberCount=e,s.emit("MemberCountUpdated",e))}),1e3)),m(n(s),"getSession",void 0),m(n(s),"memberCount",0),m(n(s),"memberJoinedLru",new nc(void 0,{maxlen:1e4})),m(n(s),"memberLeftLru",new nc(void 0,{maxlen:1e4})),m(n(s),"memberJoinStateLru",new nc(void 0,{maxlen:1e4})),m(n(s),"attributesSeqLru",new nc(void 0,{maxlen:1e4})),m(n(s),"channelId",void 0),m(n(s),"client",void 0),m(n(s),"onAttributesUpdated",(function(e){var t=e.channelId,n=e.attributeMaps,r=e.seq;e=e.instance.toString();var i=s.attributesSeqLru.get(e);if((!i||r.greaterThan(i))&&(s.attributesSeqLru.set(e,r),t===s.channelId)){for(t={},r=0;r<n.length;r++){var o=n[r];e=o.key,i=o.ms;var a=o.value;if(o=o.origin,"string"!=typeof e||!U.isLong(i)||"string"!=typeof a||!ua(o))break;t[e]={value:a,lastUpdateUserId:o,lastUpdateTs:i.toNumber()}}s.emit("AttributesUpdated",t)}})),m(n(s),"onChannelTextMessage",(function(e){var t=e.memberId,n=e.text,r=e.properties;e.channelId===s.channelId&&s.emit("ChannelMessage",{text:n,messageType:S.MessageType.TEXT},t,r)})),m(n(s),"onChannelMediaMessage",(function(e){var t=e.memberId,n=e.properties,r=e.details,i=e.messageType;e.channelId===s.channelId&&("FILE"===i?s.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(na(r.media_size),10),description:na(r.media_description),fileName:na(r.media_filename),mediaId:na(r.media_id),thumbnail:new Blob([r.media_thumbnail])},t,n):"IMAGE"===i&&s.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(na(r.media_size),10),description:na(r.media_description),fileName:na(r.media_filename),mediaId:na(r.media_id),thumbnail:new Blob([r.media_thumbnail]),height:parseInt(na(r.media_height),10),width:parseInt(na(r.media_width),10),thumbnailHeight:parseInt(na(r.media_thumbnailheight),10),thumbnailWidth:parseInt(na(r.media_thumbnailwidth),10)},t,n))})),m(n(s),"onChannelRawMessage",(function(e){var t=e.desc,n=e.raw,r=e.memberId,i=e.properties;e.channelId===s.channelId&&s.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:n,description:t},r,i)})),m(n(s),"onMemberNotice",(function(e){var t=e.memberId,n=e.type,r=e.size;if(e.channelId===s.channelId){var i=e.instance.toString();e=e.seq.toString();var o={MemberLeft:s.memberLeftLru,MemberJoined:s.memberJoinedLru,MemberCountUpdated:void 0}[n];if(o){if(o.has(i+e))return void s.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",n,e,s.channelId,t);if(o.set(i+e,void 0),"string"!=typeof t)return;if(t!==s.getSession().context.uid){if((i=s.memberJoinStateLru.get(t))===Pe.JOINED&&"MemberJoined"===n)return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,s.channelId,t);if(i===Pe.LEFT&&"MemberLeft"===n)return void s.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,s.channelId,t)}s.memberJoinStateLru.set(t,"MemberJoined"===n?Pe.JOINED:Pe.LEFT)}s.info("Channel %s - %s, memberId: %s",n,s.channelId,"MemberCountUpdated"===n?"[unknown]":t),i=t===s.getSession().context.uid,"MemberLeft"===n&&ua(t)||"MemberJoined"===n&&ua(t)?(i||s.emit(n,t),s.onMemberCountUpdated(r)):"MemberCountUpdated"===n&&"number"==typeof r&&s.onMemberCountUpdated(r)}})),s.getSession=Fm(i),s.channelId=e,s.client=o,s.info("A channel created, id %s",e),s}ka(t,e);var r=la(t);return Ea(t,[{key:"join",value:function(){var e=K(w.mark((function e(){var t,n,r,i,o,a,s,u,c,l,d,f,p;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ua(this.channelId)){e.next=2;break}throw new L(["The %s in the arguments is invalid","channelId"],Gz);case 2:e.prev=2,t=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new H("The client is not logged in. Cannot do the operation",uq);case 9:if(!t.joinedChannels.has(this)){e.next=12;break}throw cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:tq,sid:Sa(t.instanceId)},null===(n=t.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=t.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),new H("The channel has joined. Cannot rejoin",tq);case 12:if(e.prev=12,this.log("Joining the channel %s",this.channelId),!this.hasOtherChannelJoined()){e.next=17;break}throw cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:vq,sid:Sa(t.instanceId)},null===(u=t.context.areaConfig)||void 0===u?void 0:u.EVENT_REPORT_DOMAIN[0],null===(c=t.context.areaConfig)||void 0===c?void 0:c.EVENT_REPORT_BACKUP_DOMAIN[0]),new H("A channel of the same channel ID has already joined. Cannot rejoin",vq);case 17:if(20!==t.joinedChannels.size){e.next=20;break}throw cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:sq,sid:Sa(t.instanceId)},null===(l=t.context.areaConfig)||void 0===l?void 0:l.EVENT_REPORT_DOMAIN[0],null===(d=t.context.areaConfig)||void 0===d?void 0:d.EVENT_REPORT_BACKUP_DOMAIN[0]),new gb("The joined channels has exceeded the limit of 20",sq);case 20:return cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:0,sid:Sa(t.instanceId)},null===(i=t.context.areaConfig)||void 0===i?void 0:i.EVENT_REPORT_DOMAIN[0],null===(o=t.context.areaConfig)||void 0===o?void 0:o.EVENT_REPORT_BACKUP_DOMAIN[0]),e.next=23,t.requestChannelJoin(this,this.channelId);case 23:cb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(t.startTime),errCode:0,sid:Sa(t.instanceId),serverErrCode:0,userId:t.context.uid},null===(a=t.context.areaConfig)||void 0===a?void 0:a.EVENT_REPORT_DOMAIN[0],null===(s=t.context.areaConfig)||void 0===s?void 0:s.EVENT_REPORT_BACKUP_DOMAIN[0]),this.info("The channel %s joined successfully",this.channelId),t.on("channelTextMessage",this.onChannelTextMessage),t.on("channelRawMessage",this.onChannelRawMessage),t.on("channelMediaMessage",this.onChannelMediaMessage),t.on("memberNotice",this.onMemberNotice),t.on("channelAttributesUpdated",this.onAttributesUpdated),e.next=41;break;case 32:if(e.prev=32,e.t1=e.catch(12),this.logError(e.t1),!wa(e.t1)){e.next=37;break}throw e.t1;case 37:if(!Na(e.t1)){e.next=40;break}throw cb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(t.startTime),errCode:rq,sid:Sa(t.instanceId),serverErrCode:0,userId:t.context.uid},null===(f=t.context.areaConfig)||void 0===f?void 0:f.EVENT_REPORT_DOMAIN[0],null===(p=t.context.areaConfig)||void 0===p?void 0:p.EVENT_REPORT_BACKUP_DOMAIN[0]),new bb(["Join channel %s timed out",this.channelId],rq);case 40:throw new Pc(["The channel %s join failure",this.channelId],{code:qq,originalError:e.t1});case 41:case"end":return e.stop()}}),e,this,[[2,6],[12,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=K(w.mark((function e(){var t,n,r,i,o,a,s;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new H("The client is not logged in. Cannot do the operation",Iz);case 7:if(r.joinedChannels.has(this)){e.next=9;break}throw new H("The channel does not join. Cannot do the operation",Hz);case 9:e.prev=9,r.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,r.removeListener("channelTextMessage",this.onChannelTextMessage),r.removeListener("channelRawMessage",this.onChannelRawMessage),r.removeListener("channelMediaMessage",this.onChannelMediaMessage),r.removeListener("memberNotice",this.onMemberNotice),r.removeListener("channelAttributesUpdated",this.onAttributesUpdated),e.next=32;break;case 23:if(e.prev=23,e.t1=e.catch(9),this.logError(e.t1),!wa(e.t1)){e.next=30;break}throw void 0===e.t1.code&&(e.t1.code=xq),cb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(r.startTime),errCode:xq,sid:Sa(r.instanceId),userId:r.context.uid},null===(a=r.context.areaConfig)||void 0===a?void 0:a.EVENT_REPORT_DOMAIN[0],null===(s=r.context.areaConfig)||void 0===s?void 0:s.EVENT_REPORT_BACKUP_DOMAIN[0]),e.t1;case 30:throw cb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(r.startTime),errCode:wq,sid:Sa(r.instanceId),userId:r.context.uid},null===(i=r.context.areaConfig)||void 0===i?void 0:i.EVENT_REPORT_DOMAIN[0],null===(o=r.context.areaConfig)||void 0===o?void 0:o.EVENT_REPORT_BACKUP_DOMAIN[0]),new Pc("The channel leave failure",{code:wq,originalError:e.t1});case 32:cb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(r.startTime),errCode:0,sid:Sa(r.instanceId),userId:r.context.uid},null===(t=r.context.areaConfig)||void 0===t?void 0:t.EVENT_REPORT_DOMAIN[0],null===(n=r.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_BACKUP_DOMAIN[0]);case 33:case"end":return e.stop()}}),e,this,[[0,4],[9,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s=this,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1<u.length&&void 0!==u[1]?u[1]:{},r=n.enableHistoricalMessaging,i=void 0!==r&&r,ym(t,qh),e.prev=2,o=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new H("The client is not logged in. Cannot do the operation",Uf);case 9:if(o.joinedChannels.has(this)){e.next=11;break}throw new H("The channel does not join. Cannot do the operation",Uf);case 11:if(this.client.connectionState!==Jr.RECONNECTING){e.next=16;break}return a=Date.now(),e.next=15,new Promise((function(e,n){var r=function(){var r=K(w.mark((function r(){var u;return w.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=Date.now()-a,r.prev=1,r.next=4,pg({message:t,peerId:s.channelId,toPeer:!1,session:s.getSession(),errorCodes:{NOT_LOGGED_IN:Uf,TOO_OFTEN:mq},diff:u,logger:s.logger,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}});case 4:e(),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),Na(r.t0)&&n(new bb(Md(s.name,"sendMessageToPeer",1e4),Gk)),wa(r.t0)&&n(r.t0),n(new ca("Channel message send failure",{code:Tf,originalError:r.t0}));case 12:return r.prev=12,clearTimeout(o),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[1,7,12,15]])})));return function(){return r.apply(this,arguments)}}();s.client.internalEmitter.once("RECONNECTED",r);var o=setTimeout((function(){s.client.internalEmitter.off("RECONNECTED",r),n(new bb(Md(s.name,"sendMessageToPeer",1e4),Gk))}),9e3)}));case 15:return e.abrupt("return");case 16:if(this.client.connectionState===Jr.CONNECTED){e.next=18;break}throw new H("The client is not logged in. Cannot do the operation",Uf);case 18:return e.prev=18,e.next=21,pg({message:t,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:Uf,TOO_OFTEN:mq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}});case 21:e.next=31;break;case 23:if(e.prev=23,e.t1=e.catch(18),!Na(e.t1)){e.next=27;break}throw new bb(Md(this.name,"sendMessage",1e4),Gk);case 27:if(!wa(e.t1)){e.next=30;break}throw this.logError(e.t1),e.t1;case 30:throw new Pc("The channel message send failure",Tf);case 31:case"end":return e.stop()}}),e,this,[[2,6],[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=K(w.mark((function e(){var t,n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.prev=1,t=this.getSession(),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),new H("The client is not logged in. Cannot do the operation",Dz);case 8:if(t.joinedChannels.has(this)){e.next=10;break}throw new H("The channel does not join. Cannot do the operation",Cz);case 10:return n=this.getSession().requestChannelMemberList(this.channelId),e.next=13,n.pipe(Z((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise();case 13:return r=e.sent,this.info("Channel %s - get members success, %o",this.channelId,r),e.abrupt("return",r);case 18:if(e.prev=18,e.t1=e.catch(0),!wa(e.t1)){e.next=23;break}throw this.logError(e.t1),e.t1;case 23:throw new Pc("The channel members get failure",Az);case 24:case"end":return e.stop()}}),e,this,[[0,18],[1,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var e=this;return!this.getSession().joinedChannels.has(this)&&Array.from(this.getSession().joinedChannels).some((function(t){return t.channelId===e.channelId}))}}]),t}(vb()),wb=Ir,da(wb.prototype,"join",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"join"),wb.prototype),da(wb.prototype,"leave",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"leave"),wb.prototype),da(wb.prototype,"sendMessage",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"sendMessage"),wb.prototype),da(wb.prototype,"getMembers",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"getMembers"),wb.prototype),wb),C,Kr,Cb=S.ConnectionChangeReason,Q=S.ConnectionState,Lr={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},FC={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},GC=(Kr=function(e){function t(e,i,o,a,s){W(this,t);var u=r.call(this,i,"RtmClient",!0);return m(n(u),"connectionState",Q.DISCONNECTED),m(n(u),"internalEmitter",new aa),m(n(u),"context",void 0),m(n(u),"attributes",{}),m(n(u),"loginPromise",void 0),m(n(u),"attributeDrafts",new Set),m(n(u),"session",void 0),m(n(u),"lastLoginTime",void 0),m(n(u),"reconnId",0),m(n(u),"channelAttributesCacheLru",new nc(void 0,{maxlen:1e4})),m(n(u),"invitationManager",void 0),m(n(u),"subscribedPeerStatusCache",{}),m(n(u),"peerStatusSeqLru",new nc(void 0,{maxlen:1e4})),m(n(u),"peerUnreachableTimers",{}),m(n(u),"mediaTaskManager",void 0),m(n(u),"config",void 0),m(n(u),"setParameters",void 0),m(n(u),"updateConfig",void 0),m(n(u),"userDropHandler",(function(e){if(u.connectionState!==Q.ABORTED)switch(e){case 11:u.logError("Kicked off by remote session"),u.onConnectionStateChanged(Q.ABORTED,Cb.REMOTE_LOGIN);break;case 14:case 15:case 16:u.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),u.onConnectionStateChanged(Q.ABORTED,Cb.BANNED_BY_SERVER);break;default:u.logError("User kicked off for unknown code: ".concat(e)),u.onConnectionStateChanged(Q.ABORTED,Cb.INTERRUPTED)}})),u.context=new qC(e,i),u.mediaTaskManager=new zr(i),u.config=o,u.internalEmitter.setMaxListeners(512),u.setParameters=a.bind(n(u)),u.updateConfig=a.bind(n(u)),void 0!==s&&u.context.setAreaConfig(s),u.invitationManager=new CC((function(){return u.session}),i),u.invitationManager.on("remoteInvitationInstance",(function(e){u.emit("RemoteInvitationReceived",e)})),u}ka(t,e);var r=la(t);return Ea(t,[{key:"renewToken",value:function(){var e=K(w.mark((function e(t){var n,r,i,o=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new L("Invalid argument",Qz);case 2:if(this.connectionState!==Q.ABORTED){e.next=5;break}return e.next=5,new Promise((function(){}));case 5:if(this.connectionState===Q.CONNECTED||this.connectionState===Q.RECONNECTING){e.next=7;break}throw new H("The client is not logged in",Tz);case 7:if(void 0!==this.session){e.next=9;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,n=this.context.token,this.context.token=t,e.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(rd((function(){return Error("No available edge address to connect")})),ae((function(e){return e.pipe(Y((function(e){if(wa(e))throw e})),Wc(1500),Pa(4))})),Pa(1),Za(1e4),Ga((function(e){return Na(e)&&o.warn("renewToken timed out"),ba(e)}))).toPromise();case 14:r=e.sent,i=r.ticket,e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(9),this.context.token=n,e.t0.code!==zq&&e.t0.code!==Aq){e.next=23;break}throw new Ke("Invalid token",Sz);case 23:if(e.t0.code!==uh){e.next=25;break}throw new Ke("The token expired",Rz);case 25:if(!Na(e.t0)){e.next=27;break}throw new bb("Renew token timed out",Pz);case 27:this.session.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=i}));case 28:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var e=K(w.mark((function e(t){var n,r,i=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Oz);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(t)||0===t.length||t.some((function(e){return!ua(e)}))||256<t.length)){e.next=6;break}throw new L("invalid arguments",Eq);case 6:return e.next=8,this.session.requestPeersOnlineStatus(t).toPromise();case 8:return n=e.sent,r=oc(sk(n.userInfos,"account"),(function(e){return!!e.ts})),Object.keys(r).forEach((function(e){if(e in i.subscribedPeerStatusCache&&i.subscribedPeerStatusCache[e]!==S.PeerOnlineState.UNREACHABLE){var t=r[e]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;i.emit("PeersOnlineStatusChanged",m({},e,t)),i.subscribedPeerStatusCache[e]=t}})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u,c=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",zz);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: channelIds",nq);case 6:if(!(32<t.length)){e.next=8;break}throw new L("getChannelMemberCount exceed limit of 32 channelIds",yz);case 8:n=0;case 9:if(!(n<t.length)){e.next=16;break}if(ua(r=t[n])){e.next=13;break}throw new L(["getChannelMemberCount channel id %s is invalid",r],nq);case 13:n++,e.next=9;break;case 16:return e.next=18,this.session.requestGetChannelMemberCount(t).toPromise();case 18:for(i=e.sent,o=i.groupInfos,a={},s=function(e){var t=(e=o[e]).group,n=e.memberCount;ua(t)&&"number"==typeof n&&(c.session.joinedChannels.forEach((function(e){e.channelId===t&&e.onMemberCountUpdated(n)})),a[t]=n)},u=0;u<o.length;u++)s(u);return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var e=K(w.mark((function e(t){var n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ff({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===Q.CONNECTED){e.next=3;break}throw new H("The client is not logged in",Qb);case 3:if(void 0!==this.session){e.next=5;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return n=this.session.requestSetLocalUserAttributes(t).toPromise(),r={attribute:t,promise:n},this.attributeDrafts.add(r),e.prev=8,e.next=11,n;case 11:this.attributes=t,e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(8),!wa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("arguments is not valid",Fa);case 19:return e.prev=19,this.attributeDrafts.delete(r),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[8,14,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<u.length&&void 0!==u[2]?u[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,ff({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return a=this.session.requestSetChannelAttributes(t,n,o).toPromise(),e.prev=7,e.next=10,a;case 10:s=oc(n,(function(e){return new Blob([e]).size})),this.channelAttributesCacheLru.set(t,s),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(7),!wa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("arguments is not valid",Fa);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ja(Ja({},this.attributes),t),ff({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),ff({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===Q.CONNECTED){e.next=5;break}throw new H("The client is not logged in",Qb);case 5:if(void 0!==this.session){e.next=7;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return r=this.session.requestAddOrUpdateLocalUserAttributes(t).toPromise(),i={attribute:n,promise:r},this.attributeDrafts.add(i),e.prev=10,e.next=13,r;case 13:this.attributes=n,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!wa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Eq);case 21:return e.prev=21,this.attributeDrafts.delete(i),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[10,16,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,a=this.channelAttributesCacheLru.get(t,{}),s=oc(n,(function(e){return new Blob([e]).size})),u=Ja(Ja({},a),s),ff({attributes:n,attrSizeMap:u,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===Q.CONNECTED){e.next=7;break}throw new H("The client is not logged in",Qb);case 7:if(void 0!==this.session){e.next=9;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return c=this.session.requestAddOrUpdateChannelAttributes(t,n,o).toPromise(),e.prev=10,e.next=13,c;case 13:this.channelAttributesCacheLru.set(t,u),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!wa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Fa);case 21:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var e=K(w.mark((function e(t){var n,r,i,o;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return 0===e.length}))){e.next=2;break}throw new H("arguments is not valid",Fa);case 2:if(this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return n=this.session.requestDeleteLocalUserAttributesByKeys(t).toPromise(),r={attribute:rg(this.attributes,t),promise:n},this.attributeDrafts.add(r),e.prev=9,e.next=12,n;case 12:for(i=0;i<t.length;i++)o=t[i],delete this.attributes[o];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),!wa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new L("arguments is not valid",Fa);case 20:return e.prev=20,this.attributeDrafts.delete(r),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,Array.isArray(n)&&0!==n.length&&ua(t)&&!n.some((function(e){return 0===e.length||512<e.length}))){e.next=3;break}throw new H("arguments is not valid",Fa);case 3:if(this.connectionState===Q.CONNECTED){e.next=5;break}throw new H("The client is not logged in",Qb);case 5:if(void 0!==this.session){e.next=7;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return a=this.session.requestDeleteChannelAttributesByKeys(t,n,o).toPromise(),e.prev=8,e.next=11,a;case 11:if(s=this.channelAttributesCacheLru.get(t))for(u=0;u<n.length;u++)c=n[u],delete s[c];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!wa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new L("arguments is not valid",Fa);case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var e=K(w.mark((function e(){var t,n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Qb);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return t=this.session.requestClearLocalUserAttributes().toPromise(),n={attribute:{},promise:t},this.attributeDrafts.add(n),e.prev=7,e.next=10,t;case 10:this.attributes={},e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!wa(e.t0)){e.next=17;break}throw e.t0;case 17:throw new L("arguments is not valid",Fa);case 18:return e.prev=18,this.attributeDrafts.delete(n),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<a.length&&void 0!==a[1]?a[1]:{},r=n.enableNotificationToChannelMembers,i=void 0!==r&&r,this.connectionState===Q.CONNECTED){e.next=3;break}throw new H("The client is not logged in",Qb);case 3:if(void 0!==this.session){e.next=5;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return o=this.session.requestClearChannelAttributes(t,i).toPromise(),e.prev=6,e.next=9,o;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!wa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new L("arguments is not valid",Fa);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ua(t)){e.next=2;break}throw new L("Not a valid user ID",Fa);case 2:if(this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetUserAttributeKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetUserAttributesByKeys(t,r.slice(0,512)).toPromise();case 13:i=e.sent,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(6),!wa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Fa);case 21:return e.abrupt("return",yp(i.attributeInfos.map((function(e){return[e.key,e.value]}))));case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u,c,l,d,f;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ua(t)){e.next=2;break}throw new L("Not a valid channel ID",Fa);case 2:if(this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 13:i=e.sent,o=i.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!wa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new L("arguments is not valid",Fa);case 22:a={},s=0;case 24:if(!(s<o.length)){e.next=32;break}if(u=o[s],c=u.key,l=u.ms,d=u.value,f=u.origin,"string"==typeof c&&U.isLong(l)&&"string"==typeof d&&ua(f)){e.next=28;break}return e.abrupt("break",32);case 28:a[c]={value:d,lastUpdateUserId:f,lastUpdateTs:l.toNumber()};case 29:s++,e.next=24;break;case 32:return this.channelAttributesCacheLru.set(t,oc(a,(function(e){return new Blob([e.value]).size}))),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c,l,d,f;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Qb);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return lm(t,n),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 8:r=e.sent,i=r.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!wa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new L("arguments is not valid",Fa);case 17:o={},a=this.channelAttributesCacheLru.get(t,{}),s=0;case 20:if(!(s<i.length)){e.next=29;break}if(u=i[s],c=u.key,l=u.ms,d=u.value,f=u.origin,"string"==typeof c&&U.isLong(l)&&"string"==typeof d&&ua(f)){e.next=24;break}return e.abrupt("break",29);case 24:a[c]=new Blob([d]).size,o[c]={value:d,lastUpdateUserId:f,lastUpdateTs:l.toNumber()};case 26:s++,e.next=20;break;case 29:return this.channelAttributesCacheLru.set(t,a),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var e=K(w.mark((function e(t,n){var r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Qb);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return lm(t,n),e.prev=5,e.next=8,this.session.requestGetUserAttributesByKeys(t,n).toPromise();case 8:r=e.sent,e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(5),!wa(e.t0)){e.next=15;break}throw e.t0;case 15:throw new L("arguments is not valid",Fa);case 16:return e.abrupt("return",yp(r.attributeInfos.map((function(e){return[e.key,e.value]}))));case 17:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lg(),o=t.token,t.token===this.context.appId&&(o=void 0),cb("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:db(this.session&&this.session.startTime),index:{index1:t.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.config.enableLogUpload)},installId:Sf,lts:U.fromNumber(Date.now()),os:7,sid:Sa(i),token:o||"",userId:t.uid,ver:"1.4.2",buildno:801,subVersion:301,version:5},null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=this.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),md(t)&&ua(t.uid)){e.next=6;break}throw new L("not a valid user id",th);case 6:if("string"!=typeof o||!o){e.next=10;break}this.context.token=o,e.next=12;break;case 10:if("string"==typeof o||null==o){e.next=12;break}throw new L('The "token" is not a valid string.',th);case 12:return a=Date.now(),this.context.sid=Sa(i),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:i}),this.info("RTM Client logging in as ".concat(t.uid)),e.prev=16,e.next=19,this.loginPromise;case 19:e.next=26;break;case 21:throw e.prev=21,e.t0=e.catch(16),wa(e.t0)&&cb("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:db(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-a,sid:Sa(i),userId:t.uid},null===(s=this.context.areaConfig)||void 0===s?void 0:s.EVENT_REPORT_DOMAIN[0],null===(u=this.context.areaConfig)||void 0===u?void 0:u.EVENT_REPORT_BACKUP_DOMAIN[0]),this.context.token=void 0,e.t0;case 26:return e.prev=26,this.loginPromise=void 0,e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[16,21,26,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=K(w.mark((function e(){var t,n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginPromise){e.next=3;break}return e.next=3,this.loginPromise;case 3:if(this.connectionState!==Q.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new H("Logout failure. The client has already been logged out",Bq);case 6:if(this.connectionState!==Q.ABORTED){e.next=10;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT),e.abrupt("return");case 10:if(void 0!==this.session){e.next=13;break}return this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT),e.abrupt("return");case 13:return cb("Logout",{elapse:db(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Sa(this.session.instanceId),userId:this.context.uid},null===(t=this.context.areaConfig)||void 0===t?void 0:t.EVENT_REPORT_DOMAIN[0],null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_BACKUP_DOMAIN[0]),e.next=16,this.session.logoutHandler();case 16:this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT),this.log("Log out success");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var e,t,n=this;if(this.connectionState===Q.DISCONNECTED)throw this.logError("Already in logout state"),new H("Logout failure. The client has already been logged out",Bq);this.connectionState===Q.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(cb("Logout",{elapse:db(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Sa(this.session.instanceId),userId:this.context.uid},null===(e=this.context.areaConfig)||void 0===e?void 0:e.EVENT_REPORT_DOMAIN[0],null===(t=this.context.areaConfig)||void 0===t?void 0:t.EVENT_REPORT_BACKUP_DOMAIN[0]),this.session.logoutHandler().then((function(){n.log("Log out success")}))),this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,a,s,u,c=this,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableOfflineMessaging,o=void 0!==i&&i,a=r.enableHistoricalMessaging,s=void 0!==a&&a,ym(t,ge),this.connectionState!==Q.RECONNECTING){e.next=5;break}return u=Date.now(),e.abrupt("return",new Promise((function(e,r){var i=function(){var i=K(w.mark((function i(){var l;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==c.session){i.next=2;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return l=Date.now()-u,i.prev=3,i.t0=e,i.next=7,pg({message:t,peerId:n,toPeer:!0,session:c.session,errorCodes:{NOT_LOGGED_IN:Jk,TOO_OFTEN:Dq},diff:l,logger:c.logger,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 7:i.t1=i.sent,(0,i.t0)(i.t1),i.next=16;break;case 11:i.prev=11,i.t2=i.catch(3),Na(i.t2)&&r(new bb(Md(c.name,"sendMessageToPeer",1e4),Hk)),wa(i.t2)&&r(i.t2),r(new ca("Peer-to-peer message send failure",{code:Cq,originalError:i.t2}));case 16:return i.prev=16,clearTimeout(a),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[3,11,16,19]])})));return function(){return i.apply(this,arguments)}}();c.internalEmitter.once("RECONNECTED",i);var a=setTimeout((function(){c.internalEmitter.off("RECONNECTED",i),r(new bb(Md(c.name,"sendMessageToPeer",1e4),Hk))}),9e3)})));case 5:if(this.connectionState===Q.CONNECTED){e.next=7;break}throw new H("Failed to send the peer-to-peer message. The client is not logged in",Jk);case 7:if(void 0!==this.session){e.next=9;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,e.next=12,pg({message:t,peerId:n,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:Jk,TOO_OFTEN:Dq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:s,enableOfflineMessaging:o}});case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),!Na(e.t0)){e.next=19;break}throw new bb(Md(this.name,"sendMessageToPeer",1e4),Hk);case 19:if(!wa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new ca("Peer-to-peer message send failure",{code:Cq,originalError:e.t0});case 22:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){var t=this;if(!ua(e))throw new L(["The %s in the arguments is invalid",Object.keys({channelId:e})[0]],wz);return new EC(e,(function(){return t.session}),this,this.logger)}},{key:"createLocalInvitation",value:function(e){if(!ua(e))throw new L(["The %s in the arguments is invalid",Object.keys({calleeId:e})[0]],rc);return this.invitationManager.genLocalInvitation(e)}},{key:"subscribePeersOnlineStatus",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u,c,l,d,f,p,h,v=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Kk);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: peerIds",Vf);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(ua(r=t[n])){e.next=11;break}throw new L(["subscribePeersOnlineStatus peer id %s is invalid",r],Vf);case 11:n++,e.next=7;break;case 14:if(!(512<(i=t&&t.length?fk(t):[]).length+Object.keys(this.subscribedPeerStatusCache).length)){e.next=17;break}throw new gb("Subscribed peers overflows",Gq);case 17:return e.next=19,this.session.requestSubscribePeersOnlineStatus(i).toPromise();case 19:o=e.sent,a=o.errors,s=[],u=[],c=0;case 24:if(!(c<a.length)){e.next=32;break}if(l=a[c],d=l.code,"string"==typeof(f=l.account)){e.next=28;break}throw new ca("Returned account is invalid",Fq);case 28:0!==d&&s.push(f);case 29:c++,e.next=24;break;case 32:for(p=0;p<i.length;p++)h=i[p],s.includes(h)||(u.push(h),this.subscribedPeerStatusCache[h]=void 0);if(this.session.requestPeersOnlineStatus(u).pipe(Z((function(e){return oc(sk(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=oc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,v.subscribedPeerStatusCache[t]=e})),v.emit("PeersOnlineStatusChanged",e)})),0===s.length){e.next=36;break}throw new ca("Subscription failed",Fq);case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Kk);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: peerIds",Vf);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(ua(r=t[n])){e.next=11;break}throw new L(["subscribePeersOnlineStatus peer id %s is invalid",r],Vf);case 11:n++,e.next=7;break;case 14:if(!(512<t.length)){e.next=16;break}throw new gb("Unsubscribed peers overflows",Gq);case 16:for(i=t&&t.length?fk(t):[],this.session.requestUnsubscribePeersOnlineStatus(i),o=0;o<i.length;o++)a=i[o],delete this.subscribedPeerStatusCache[a];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var e=K(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Kk);case 2:if(t!==S.PeerSubscriptionOption.ONLINE_STATUS){e.next=4;break}return e.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new L("Subscription option not supported",Vf);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMessage",value:function(e){return"IMAGE"===e.messageType?Ja({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},e):"FILE"===e.messageType?Ja({fileName:"",description:"",thumbnail:new Blob,size:0},e):e}},{key:"downloadMedia",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u,c,l,d,f,p,h,v,g=this,m=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<m.length&&void 0!==m[1]?m[1]:{},"string"==typeof t){e.next=3;break}throw new L("invalid mediaId format",Lk);case 3:if(e.prev=3,r=t.split("z"),i=pa(r,3),o=i[0],a=i[1],s=i[2],u=o.slice(1,65),c=tC(u),l=parseInt(o.slice(65),10),d=parseInt(a,10),f=parseInt(s,10),!(Number.isNaN(l)||Number.isNaN(d)||Number.isNaN(f))){e.next=12;break}throw new L("Invalid mediaId content",Lk);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(3),!wa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("parse mediaId failure",{code:Lk,originalError:e.t0});case 19:if(this.connectionState===Q.CONNECTED){e.next=21;break}throw new H("The client is not logged in, cannot download",aA);case 21:if(void 0!==this.session){e.next=23;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return p=this.mediaTaskManager.addDownloadTask({unit:d,zone:l,hashHexStr:u,size:f},(function(){if(void 0===g.session)throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});return g.session.requestFileDownloadIndexGet({hash:c,zone:l,unit:d,size:f}).toPromise()}),n),e.next=26,this.mediaTaskManager.waitMediaTask(p);case 26:return h=e.sent,v=h.payload,e.abrupt("return",v);case 29:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a,s,u,c,l,d,f,p,h,v,g,m,y,b,_,E,S,I,O,T,A=this,R=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<R.length&&void 0!==R[1]?R[1]:{},r=2<R.length&&void 0!==R[2]?R[2]:{},md(n)){e.next=4;break}throw new L("Invalid params",jf);case 4:if(i="thumbnailWidth"in n||"thumbnailHeight"in n||"width"in n||"height"in n,o=n.messageType,a=void 0===o?i?"IMAGE":"FILE":o,s=n.description,u=void 0===s?"":s,c=n.fileName,l=void 0===c?"":c,d=n.thumbnail,"string"==typeof n.messageType&&"string"==typeof u&&"string"==typeof l&&(um(d)||void 0===d)&&um(t)){e.next=8;break}throw new L("Invalid message params type",jf);case 8:if(!i||"FILE"!==a){e.next=10;break}throw new L("Invalid message params, unexpected field in RtmFileMessage",jf);case 10:if(!(33554432<(f=t.size))){e.next=13;break}throw new gb("The payload size overflow 32 MB",Vz);case 13:return e.next=15,wi(t);case 15:return p=e.sent,e.next=18,sC(p);case 18:if(h=e.sent,this.connectionState===Q.CONNECTED){e.next=21;break}throw new H("The client is not logged in",Xz);case 21:if("IMAGE"!==a){e.next=29;break}return e.next=24,st(n,p);case 24:v=e.sent,g=v.height,m=v.width,y=v.thumbnailWidth,b=v.thumbnailHeight;case 29:return _=this.mediaTaskManager.addUploadTask({file:new Uint8Array(p),hash:h},(function(){if(void 0===A.session)throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});return A.session.fetchFileUploadIndexGet({hash:h,size:f})}),(function(e,t){if(void 0===A.session)throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});return A.session.requestFileUploadIndexSet({hash:h,unit:e,servers:t}).toPromise()}),r),e.next=32,this.mediaTaskManager.waitMediaTask(_);case 32:if(E=e.sent,S=E.zone,I=E.retUnit,"IMAGE"!==a){e.next=38;break}return O={height:g,width:m,fileName:l,size:f,description:u,thumbnail:d,messageType:a,thumbnailWidth:y,thumbnailHeight:b,mediaId:"0".concat(tr(h)).concat(S,"z").concat(I,"z").concat(f,"z").concat(g,"z").concat(m)},e.abrupt("return",O);case 38:return T={fileName:l,size:f,description:u,mediaId:"0".concat(tr(h)).concat(S,"z").concat(I,"z").concat(f),thumbnail:d,messageType:a},e.abrupt("return",T);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,a=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){e.next=4;break}throw new LB(["The frequency of login exceeded the limit of %d queries per second",2],Lz);case 4:if(this.connectionState===Q.DISCONNECTED){e.next=6;break}throw new H("The SDK is either logging in or has logged in the Agora RTM system",Jz);case 6:e.prev=6,this.context.uid=n,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new L(["The %s in the arguments is invalid",Object.keys({uid:n})[0]],th);case 13:return this.onConnectionStateChanged(Q.CONNECTING,Cb.LOGIN),this.session=i=new Fr(this.context,new sr(this.context,this.logger,!1),r,this.logger),o=function(){a.connectionState===Q.CONNECTED&&(a.onConnectionStateChanged(Q.RECONNECTING,Cb.INTERRUPTED),a.session)&&a.session.once("userJoined",(function(){a.onConnectionStateChanged(Q.CONNECTED,Cb.LOGIN_SUCCESS)}))},i.on("connectionLost",o),i.on("tokenExpired",(function(){a.emit("TokenExpired")})),i.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){a.emit("MessageFromPeer",{text:e.text,messageType:S.MessageType.TEXT},e.peerId,e.properties)})),this.session.on("peerMediaMessage",(function(e){var t=e.peerId,n=e.properties,r=e.messageType;e=e.details,"FILE"===r?a.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(na(e.media_size),10),description:na(e.media_description),fileName:na(e.media_filename),mediaId:na(e.media_id),thumbnail:new Blob([e.media_thumbnail])},t,n):"IMAGE"===r&&a.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(na(e.media_size),10),description:na(e.media_description),fileName:na(e.media_filename),mediaId:na(e.media_id),thumbnail:new Blob([e.media_thumbnail]),height:parseInt(na(e.media_height),10),width:parseInt(na(e.media_width),10),thumbnailHeight:parseInt(na(e.media_thumbnailheight),10),thumbnailWidth:parseInt(na(e.media_thumbnailwidth),10)},t,n)})),this.session.on("peerRawMessage",(function(e){a.emit("MessageFromPeer",{rawMessage:e.raw,description:e.desc,messageType:S.MessageType.RAW},e.peerId,e.properties)})),i.on("instanceChanged",(function(e){return r=e})),i.on("peerOnlineStatusChanged",(function(e){var t=e.instance.toString()+e.state,n=a.peerStatusSeqLru.get(t);!n||e.seq.greaterThan(n)?(a.peerStatusSeqLru.set(t,e.seq),e.state!==a.subscribedPeerStatusCache[e.peerId]?a.emit("PeersOnlineStatusChanged",m({},e.peerId,e.state)):a.log("peer status for %s not changed, previous %s",e.peerId,e.state),a.subscribedPeerStatusCache[e.peerId]=e.state,clearTimeout(a.peerUnreachableTimers[t]),e.state===S.PeerOnlineState.UNREACHABLE&&(a.peerUnreachableTimers[t]=setTimeout((function(){a.subscribedPeerStatusCache[e.peerId]===S.PeerOnlineState.UNREACHABLE&&(a.subscribedPeerStatusCache[e.peerId]=S.PeerOnlineState.ONLINE,a.emit("PeersOnlineStatusChanged",m({},e.peerId,S.PeerOnlineState.ONLINE)))}),3e4))):a.log("peerOnlineStatusChanged dedup for %s, %d",t,e.seq.toNumber())})),i.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),i.on("channelAttributesUpdated",(function(e){var t=e.channelId;e=e.attributeMaps;for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.key,s=i.ms,u=i.value;if(i=i.origin,"string"!=typeof o||!U.isLong(s)||"string"!=typeof u||!ua(i))break;n[o]=new Blob([u]).size}a.channelAttributesCacheLru.set(t,n)})),i.on("userJoined",(function(e){if(0!==Object.keys(a.attributes).length){if(void 0===a.session)return;a.session.requestSetLocalUserAttributes(a.attributes,e).toPromise()}if(0!==a.attributeDrafts.size)for(var t=function(t,n){var r=(t=n[t]).attribute;t.promise.then((function(){void 0!==a.session&&a.session.requestSetLocalUserAttributes(r,e).toPromise()}))},n=0,r=Array.from(a.attributeDrafts);n<r.length;n++)t(n,r);0!==Object.keys(a.subscribedPeerStatusCache).length&&i.requestSubscribePeersOnlineStatus(Object.keys(a.subscribedPeerStatusCache))})),this.lastLoginTime=Date.now(),e.prev=29,e.next=32,i.loginHandler().toPromise();case 32:this.mediaTaskManager.setAuthInfo({ticket:i.connection.curOpenSockets.filter((function(e){return void 0!==e}))[0].ticket,instance:i.instanceId,isAreaCN:"CN"===this.context.area,loginOpt:i.userJoinOptions.toLong()}),e.next=44;break;case 35:if(e.prev=35,e.t1=e.catch(29),!Na(e.t1)){e.next=40;break}throw this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGIN_TIMEOUT),new bb(Md(this.name,"login",1e4),Kz);case 40:if(this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGIN_FAILURE),!wa(e.t1)){e.next=43;break}throw e.t1;case 43:throw new ca("Login failure",{code:yq,originalError:e.t1});case 44:this.onConnectionStateChanged(Q.CONNECTED,Cb.LOGIN_SUCCESS);case 45:case"end":return e.stop()}}),e,this,[[6,10],[29,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(e,t){var n,r,i=this;e===Q.RECONNECTING&&(this.reconnId+=1),cb("ConnectionStateChange",{elapse:db(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:Lr[e],oldState:Lr[this.connectionState],reason:FC[t],sid:Sa(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=this.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),this.connectionState===Q.RECONNECTING&&e===Q.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(Z((function(e){return oc(sk(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=oc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,i.subscribedPeerStatusCache[t]=e})),i.emit("PeersOnlineStatusChanged",e)})),this.internalEmitter.emit("RECONNECTED")),this.connectionState=e,e!==Q.ABORTED&&e!==Q.DISCONNECTED||(this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty()),this.session=void 0,this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",e),this.emit("ConnectionStateChanged",e,t)}}]),t}(vb()),C=Kr,da(C.prototype,"renewToken",[ia],Object.getOwnPropertyDescriptor(C.prototype,"renewToken"),C.prototype),da(C.prototype,"queryPeersOnlineStatus",[ia],Object.getOwnPropertyDescriptor(C.prototype,"queryPeersOnlineStatus"),C.prototype),da(C.prototype,"getChannelMemberCount",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getChannelMemberCount"),C.prototype),da(C.prototype,"setLocalUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"setLocalUserAttributes"),C.prototype),da(C.prototype,"setChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"setChannelAttributes"),C.prototype),da(C.prototype,"addOrUpdateLocalUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"addOrUpdateLocalUserAttributes"),C.prototype),da(C.prototype,"addOrUpdateChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"addOrUpdateChannelAttributes"),C.prototype),da(C.prototype,"deleteLocalUserAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"deleteLocalUserAttributesByKeys"),C.prototype),da(C.prototype,"deleteChannelAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"deleteChannelAttributesByKeys"),C.prototype),da(C.prototype,"clearLocalUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"clearLocalUserAttributes"),C.prototype),da(C.prototype,"clearChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"clearChannelAttributes"),C.prototype),da(C.prototype,"getUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getUserAttributes"),C.prototype),da(C.prototype,"getChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getChannelAttributes"),C.prototype),da(C.prototype,"getChannelAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getChannelAttributesByKeys"),C.prototype),da(C.prototype,"getUserAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getUserAttributesByKeys"),C.prototype),da(C.prototype,"login",[ia],Object.getOwnPropertyDescriptor(C.prototype,"login"),C.prototype),da(C.prototype,"logout",[ia],Object.getOwnPropertyDescriptor(C.prototype,"logout"),C.prototype),da(C.prototype,"logoutSync",[ia],Object.getOwnPropertyDescriptor(C.prototype,"logoutSync"),C.prototype),da(C.prototype,"sendMessageToPeer",[ia],Object.getOwnPropertyDescriptor(C.prototype,"sendMessageToPeer"),C.prototype),da(C.prototype,"createChannel",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createChannel"),C.prototype),da(C.prototype,"createLocalInvitation",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createLocalInvitation"),C.prototype),da(C.prototype,"subscribePeersOnlineStatus",[ia],Object.getOwnPropertyDescriptor(C.prototype,"subscribePeersOnlineStatus"),C.prototype),da(C.prototype,"unsubscribePeersOnlineStatus",[ia],Object.getOwnPropertyDescriptor(C.prototype,"unsubscribePeersOnlineStatus"),C.prototype),da(C.prototype,"queryPeersBySubscriptionOption",[ia],Object.getOwnPropertyDescriptor(C.prototype,"queryPeersBySubscriptionOption"),C.prototype),da(C.prototype,"createMessage",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createMessage"),C.prototype),da(C.prototype,"downloadMedia",[ia],Object.getOwnPropertyDescriptor(C.prototype,"downloadMedia"),C.prototype),da(C.prototype,"createMediaMessageByUploading",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createMediaMessageByUploading"),C.prototype),C),Mr={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},Nd=Ja(Ja({createInstance:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.enableLogUpload;n=void 0!==n&&n;var r=void 0===(t=t.logFilter)?Mr.LOG_FILTER_INFO:t;if(t=2<arguments.length?arguments[2]:void 0,!/^[\dA-Za-z]{32}$/.test(e))throw new L(["The %s in the arguments is invalid",Object.keys({appId:e})[0]],xz);var i={enableLogUpload:n,logFilter:r};if(null!=t){var o=fC(t);i._areaConfig=o}n=Sk=Ta.__global_unique_id__=(Ta.__global_unique_id__||0)+1,r=TB(i);var a=UB(i),s=VB(i),u=WB(n,i),c=nr(n,i),l=c("RTM:DEBUG","<Entry> ");return r("The Agora RTM Web SDK version is %s","1.4.2"),void 0!==t&&r("RTM areas are set to %s",t.join(", ")),l("Creating an RtmClient instance"),l('The Git commit ID is "'.concat("v1.4.2-0-gcddbca54",'"')),r("The process ID is %s",Sf),r("The build is %s","v1.4.2-0-gcddbca54"),l("NODE_ENV is %s","production"),new GC(e,{genLogger:c,genTracker:u,info:r,warn:a,logError:s,loggerId:n},i,(function(e){for(var t=0,n=Rk(e);t<n.length;t++){var r=n[t];try{var o=e[r];null!=o&&(i[r]=o)}catch(e){throw new L(["The %s in the arguments is invalid",r],void 0)}}}),o)},BUILD:"v1.4.2-0-gcddbca54",VERSION:"1.4.2",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:Sf,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},Mr),{},{setParameter:function(e,t){Object.keys(dd).includes(e)&&(dd[e]=t)},getParameter:function(e){return dd[e]}});return Nd},module.exports=t()}).call(this,__webpack_require__(20),__webpack_require__(37),__webpack_require__(36)(module))},function(e,t,n){"use strict";var r,i="object"===typeof Reflect?Reflect:null,o=i&&"function"===typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"===typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!==e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,o,a,s;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"===typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"===typeof u)o(u,this,t);else{var c=u.length,l=g(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},s.prototype.listenerCount=v,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(4),i=n(14),o=n(1),a=n.n(o),s=n(16),u=(n(2),n(5)),c=n(21),l=n(13);a.a.Component;var d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(s.b)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return a.a.createElement(r.b,{history:this.history,children:this.props.children})},t}(a.a.Component);var f=function(e,t){return"function"===typeof e?e(t):e},p=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},h=function(e){return e},v=a.a.forwardRef;"undefined"===typeof v&&(v=h);var g=v((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=Object(c.a)(e,["innerRef","navigate","onClick"]),s=o.target,l=Object(u.a)({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=h!==v&&t||n,a.a.createElement("a",l)}));var m=v((function(e,t){var n=e.component,i=void 0===n?g:n,o=e.replace,s=e.to,d=e.innerRef,m=Object(c.a)(e,["component","replace","to","innerRef"]);return a.a.createElement(r.c.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,r=p(f(s,e.location),e.location),c=r?n.createHref(r):"",g=Object(u.a)({},m,{href:c,navigate:function(){var t=f(s,e.location);(o?n.replace:n.push)(t)}});return h!==v?g.ref=t||d:g.innerRef=d,a.a.createElement(i,g)}))})),y=function(e){return e},b=a.a.forwardRef;"undefined"===typeof b&&(b=y);b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,d=e.activeStyle,h=e.className,v=e.exact,g=e.isActive,_=e.location,E=e.sensitive,w=e.strict,S=e.style,I=e.to,O=e.innerRef,T=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(r.c.Consumer,null,(function(e){e||Object(l.a)(!1);var n=_||e.location,o=p(f(I,n),n),c=o.pathname,A=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),R=A?Object(r.d)(n.pathname,{path:A,exact:v,sensitive:E,strict:w}):null,k=!!(g?g(R,n):R),C=k?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(h,s):h,N=k?Object(u.a)({},S,{},d):S,x=Object(u.a)({"aria-current":k&&i||null,className:C,style:N,to:o},T);return y!==b?x.ref=t||O:x.innerRef=O,a.a.createElement(m,x)}))}))},function(e,t,n){"use strict";var r=n(38),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var a=l(n);d&&(a=a.concat(d(n)));for(var s=u(t),v=u(n),g=0;g<a.length;++g){var m=a[g];if(!o[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var y=f(n,m);try{c(t,m,y)}catch(b){}}}}return t}},function(e,t,n){"use strict";var r=n(28),i=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;i=d("react.element"),o=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),a=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),l=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function m(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=g.prototype;var b=y.prototype=new m;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var _={current:null},E=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,o={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&!w.hasOwnProperty(r)&&(o[r]=t[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:e,key:a,ref:s,props:o,_owner:_.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var O=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,n,r,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=e),e=""===r?"."+T(u,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),A(a,t,n,"",(function(e){return e}))):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=A(s,t,n,l,a)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(s=e.next()).done;)u+=A(s=s.value,t,n,l=r+T(s,c++),a);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function R(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function k(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function N(){var e=C.current;if(null===e)throw Error(p(321));return e}var x={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(p(143));return e}},t.Component=g,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)E.call(t,l)&&!w.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];o.children=c}return{$$typeof:i,type:e.type,key:a,ref:s,props:o,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return N().useCallback(e,t)},t.useContext=function(e,t){return N().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return N().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return N().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return N().useLayoutEffect(e,t)},t.useMemo=function(e,t){return N().useMemo(e,t)},t.useReducer=function(e,t,n){return N().useReducer(e,t,n)},t.useRef=function(e){return N().useRef(e)},t.useState=function(e){return N().useState(e)},t.version="17.0.1"},function(e,t,n){"use strict";var r=n(1),i=n(28),o=n(48);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},v={};function g(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(v,e)||!p.call(h,e)&&(f.test(e)?v[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var E=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,S=60106,I=60107,O=60108,T=60114,A=60109,R=60110,k=60112,C=60113,N=60120,x=60115,L=60116,P=60121,D=60128,M=60129,j=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var F=Symbol.for;w=F("react.element"),S=F("react.portal"),I=F("react.fragment"),O=F("react.strict_mode"),T=F("react.profiler"),A=F("react.provider"),R=F("react.context"),k=F("react.forward_ref"),C=F("react.suspense"),N=F("react.suspense_list"),x=F("react.memo"),L=F("react.lazy"),P=F("react.block"),F("react.scope"),D=F("react.opaque.id"),M=F("react.debug_trace_mode"),j=F("react.offscreen"),U=F("react.legacy_hidden")}var B,q="function"===typeof Symbol&&Symbol.iterator;function V(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function G(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var z=!1;function H(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?G(e):""}function W(e){switch(e.tag){case 5:return G(e.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case T:return"Profiler";case O:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case R:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case x:return K(e.type);case P:return K(e._render);case L:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function J(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function oe(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function ae(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function ce(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ge,me=(ge=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function Ee(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Ee(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(be).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var Se=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function Oe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Re=null,ke=null;function Ce(e){if(e=ei(e)){if("function"!==typeof Ae)throw Error(a(280));var t=e.stateNode;t&&(t=ni(t),Ae(e.stateNode,e.type,t))}}function Ne(e){Re?ke?ke.push(e):ke=[e]:Re=e}function xe(){if(Re){var e=Re,t=ke;if(ke=Re=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Le(e,t){return e(t)}function Pe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Me=Le,je=!1,Ue=!1;function Fe(){null===Re&&null===ke||(De(),xe())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var r=ni(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var qe=!1;if(d)try{var Ve={};Object.defineProperty(Ve,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Ve,Ve),window.removeEventListener("test",Ve,Ve)}catch(ge){qe=!1}function Ge(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var ze=!1,He=null,We=!1,Ke=null,Je={onError:function(e){ze=!0,He=e}};function Ye(e,t,n,r,i,o,a,s,u){ze=!1,He=null,Ge.apply(Je,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if($e(e)!==e)throw Error(a(188))}function Ze(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Xe(i),e;if(o===r)return Xe(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,ot=!1,at=[],st=null,ut=null,ct=null,lt=new Map,dt=new Map,ft=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=ht(t,n,r,i,o),null!==t&&(null!==(t=ei(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=Zr(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ei(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){yt(e)&&n.delete(t)}function _t(){for(ot=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ei(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==st&&yt(st)&&(st=null),null!==ut&&yt(ut)&&(ut=null),null!==ct&&yt(ct)&&(ct=null),lt.forEach(bt),dt.forEach(bt)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_t)))}function wt(e){function t(t){return Et(t,e)}if(0<at.length){Et(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&Et(st,e),null!==ut&&Et(ut,e),null!==ct&&Et(ct,e),lt.forEach(t),dt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Ot={},Tt={};function At(e){if(Ot[e])return Ot[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Ot[e]=n[t];return e}d&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Rt=At("animationend"),kt=At("animationiteration"),Ct=At("animationstart"),Nt=At("transitionend"),xt=new Map,Lt=new Map,Pt=["abort","abort",Rt,"animationEnd",kt,"animationIteration",Ct,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lt.set(r,t),xt.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Mt=8;function jt(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Mt=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=jt(u),i=Mt):0!==(s&=o)&&(r=jt(s),i=Mt)}else 0!==(o=n&~a)?(r=jt(o),i=Mt):0!==s&&(r=jt(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-zt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&a)){if(jt(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-zt(t)),r|=e[n],t&=~i;return r}function Ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Bt(10,t):e;case 10:return 0===(e=qt(192&~t))?Bt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(a(358,e))}function qt(e){return e&-e}function Vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Gt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-zt(t)]=n}var zt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Kt=o.unstable_UserBlockingPriority,Jt=o.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){je||De();var i=Xt,o=je;je=!0;try{Pe(i,e,t,n,r)}finally{(je=o)||Fe()}}function Qt(e,t,n,r){Jt(Kt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<at.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),at.push(e);else{var o=Zt(e,t,n,r);if(null===o)i&&vt(e,r);else{if(i){if(-1<pt.indexOf(e))return e=ht(o,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=gt(st,e,t,n,r,i),!0;case"dragenter":return ut=gt(ut,e,t,n,r,i),!0;case"mouseover":return ct=gt(ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return lt.set(o,gt(lt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,dt.set(o,gt(dt.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;vt(e,r)}xr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=Zr(i))){var o=$e(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Qe(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return xr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function on(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var cn,ln,dn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(fn),hn=i({},fn,{view:0,detail:0}),vn=un(hn),gn=i({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(cn=e.screenX-dn.screenX,ln=e.screenY-dn.screenY):ln=cn=0,dn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=un(gn),yn=un(i({},gn,{dataTransfer:0})),bn=un(i({},hn,{relatedTarget:0})),_n=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),En=un(i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),wn=un(i({},fn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=On[e])&&!!t[e]}function An(){return Tn}var Rn=un(i({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=on(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?on(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?on(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),kn=un(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=un(i({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Nn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),xn=un(i({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Ln=[9,13,27,32],Pn=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Mn=d&&"TextEvent"in window&&!Dn,jn=d&&(!Pn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Pr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Jn(e){Tr(e,0)}function Yn(e){if(Q(ti(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Qn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];if(Hn(t,Kn,e,Te(e)),e=Jn,je)e(t);else{je=!0;try{Le(e,t)}finally{je=!1,Fe()}}}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ur=Object.prototype.hasOwnProperty;function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ur.call(t,n[r])||!sr(e[n[r]],t[n[r]]))return!1;return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var vr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,mr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Pr(mr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Pt,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wr=0;wr<Er.length;wr++)Lt.set(Er[wr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ye.apply(this,arguments),ze){if(!ze)throw Error(a(198));var l=He;ze=!1,He=null,We||(We=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function Tr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Or(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Or(i,s,c),o=u}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Ar(e,t){var n=ri(t),r=e+"__bubble";n.has(r)||(Nr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function kr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Ir.has(t)||Cr(t,!1,e,null),Cr(t,!0,e,null)})))}function Cr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=ri(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Nr(o,e,i,t),a.add(s))}function Nr(e,t,n,r){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function xr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Zr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Fe()}}((function(){var r=o,i=Te(n),a=[];e:{var s=xt.get(e);if(void 0!==s){var u=pn,c=e;switch(e){case"keypress":if(0===on(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Cn;break;case Rt:case kt:case Ct:u=_n;break;case Nt:u=Nn;break;case"scroll":u=vn;break;case"wheel":u=xn;break;case"copy":case"cut":case"paste":u=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=kn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=Be(h,f))&&l.push(Lr(h,v,p)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!Zr(c)&&!c[Qr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Zr(c):null)&&(c!==(d=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=kn,v="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==u?s:ti(u),p=null==c?s:ti(c),(s=new l(v,h+"leave",u,n,i)).target=d,s.relatedTarget=p,v=null,Zr(i)===r&&((l=new l(f,h+"enter",c,n,i)).target=p,l.relatedTarget=d,v=l),d=v,u&&c)e:{for(f=c,h=0,p=l=u;p;p=Dr(p))h++;for(p=0,v=f;v;v=Dr(v))p++;for(;0<h-p;)l=Dr(l),h--;for(;0<p-h;)f=Dr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Dr(l),f=Dr(f)}l=null}else l=null;null!==u&&Mr(a,s,u,l,!1),null!==c&&null!==d&&Mr(a,d,c,l,!0)}if("select"===(u=(s=r?ti(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=$n;else if(zn(s))if(Qn)g=ar;else{g=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ti(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(gr=m,mr=r,yr=null);break;case"focusout":yr=mr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(a,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=rn()):(tn="value"in(en=i)?en.value:en.textContent,Vn=!0)),0<(m=Pr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:m}),y?b.data=y:null!==(y=qn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=rn(),nn=tn=en=null,Vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Pr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Tr(a,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Pr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Be(e,n))&&r.unshift(Lr(e,o,i)),null!=(o=Be(e,t))&&r.push(Lr(e,o,i))),e=e.return}return r}function Dr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Mr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Be(n,o))&&a.unshift(Lr(n,u,s)):i||null!=(u=Be(n,o))&&a.push(Lr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function jr(){}var Ur=null,Fr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Vr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function zr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Wr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Kr=0;var Jr=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Jr,$r="__reactProps$"+Jr,Qr="__reactContainer$"+Jr,Xr="__reactEvents$"+Jr;function Zr(e){var t=e[Yr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qr]||n[Yr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Wr(e);null!==e;){if(n=e[Yr])return n;e=Wr(e)}return t}n=(e=n).parentNode}return null}function ei(e){return!(e=e[Yr]||e[Qr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ti(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function ni(e){return e[$r]||null}function ri(e){var t=e[Xr];return void 0===t&&(t=e[Xr]=new Set),t}var ii=[],oi=-1;function ai(e){return{current:e}}function si(e){0>oi||(e.current=ii[oi],ii[oi]=null,oi--)}function ui(e,t){oi++,ii[oi]=e.current,e.current=t}var ci={},li=ai(ci),di=ai(!1),fi=ci;function pi(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function hi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vi(){si(di),si(li)}function gi(e,t,n){if(li.current!==ci)throw Error(a(168));ui(li,t),ui(di,n)}function mi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,K(t)||"Unknown",o));return i({},n,r)}function yi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,fi=li.current,ui(li,e),ui(di,di.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=mi(e,t,fi),r.__reactInternalMemoizedMergedChildContext=e,si(di),si(li),ui(li,e)):si(di),ui(di,n)}var _i=null,Ei=null,wi=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ii=o.unstable_cancelCallback,Oi=o.unstable_shouldYield,Ti=o.unstable_requestPaint,Ai=o.unstable_now,Ri=o.unstable_getCurrentPriorityLevel,ki=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,Ni=o.unstable_NormalPriority,xi=o.unstable_LowPriority,Li=o.unstable_IdlePriority,Pi={},Di=void 0!==Ti?Ti:function(){},Mi=null,ji=null,Ui=!1,Fi=Ai(),Bi=1e4>Fi?Ai:function(){return Ai()-Fi};function qi(){switch(Ri()){case ki:return 99;case Ci:return 98;case Ni:return 97;case xi:return 96;case Li:return 95;default:throw Error(a(332))}}function Vi(e){switch(e){case 99:return ki;case 98:return Ci;case 97:return Ni;case 96:return xi;case 95:return Li;default:throw Error(a(332))}}function Gi(e,t){return e=Vi(e),wi(e,t)}function zi(e,t,n){return e=Vi(e),Si(e,t,n)}function Hi(){if(null!==ji){var e=ji;ji=null,Ii(e)}Wi()}function Wi(){if(!Ui&&null!==Mi){Ui=!0;var e=0;try{var t=Mi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(n){throw null!==Mi&&(Mi=Mi.slice(e+1)),Si(ki,Hi),n}finally{Ui=!1}}}var Ki=E.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Yi=ai(null),$i=null,Qi=null,Xi=null;function Zi(){Xi=Qi=$i=null}function eo(e){var t=Yi.current;si(Yi),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function no(e,t){$i=e,Xi=Qi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Pa=!0),e.firstContext=null)}function ro(e,t){if(Xi!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(Xi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qi){if(null===$i)throw Error(a(308));Qi=t,$i.dependencies={lanes:0,firstContext:t,responders:null}}else Qi=Qi.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function so(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function co(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lo(e,t,n,r){var o=e.updateQueue;io=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=l:f.next=l,d.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,d=l=c=null;;){u=a.lane;var p=a.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,v=a;switch(u=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){f=h.call(p,f,u);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(u="function"===typeof(h=v.payload)?h.call(p,f,u):h)||void 0===u)break e;f=i({},f,u);break e;case 2:io=!0}}null!==a.callback&&(e.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===d?(l=d=p,c=f):d=d.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===d&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=d,Us|=s,e.lanes=s,e.memoizedState=f}}function fo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var po=(new r.Component).refs;function ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var vo={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=cu(),i=lu(e),o=so(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),uo(e,o),du(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=cu(),i=lu(e),o=so(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),uo(e,o),du(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cu(),r=lu(e),i=so(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),uo(e,i),du(e,r,n)}};function go(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,o))}function mo(e,t,n){var r=!1,i=ci,o=t.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=hi(t)?fi:li.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?pi(e,i):ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function yo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vo.enqueueReplaceState(t,t.state,null)}function bo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=po,oo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=hi(t)?fi:li.current,i.context=pi(e,o)),lo(e,n,i,r),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ho(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&vo.enqueueReplaceState(i,i.state,null),lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _o=Array.isArray;function Eo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===po&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function wo(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ku(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Eo(e,t,n),r.return=e,r):((r=zu(n.type,n.key,n.props,null,e.mode,r)).ref=Eo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Hu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ku(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=zu(t.type,t.key,t.props,null,e.mode,n)).ref=Eo(e,null,t),n.return=e,n;case S:return(t=Ju(t,e.mode,n)).return=e,t}if(_o(t)||V(t))return(t=Hu(t,e.mode,n,null)).return=e,t;wo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===I?d(e,t,n.props.children,r,i):c(e,t,n,r):null;case S:return n.key===i?l(e,t,n,r):null}if(_o(n)||V(n))return null!==i?null:d(e,t,n,r,null);wo(e,n)}return null}function h(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===I?d(t,e,r.props.children,i,r.key):c(t,e,r,i);case S:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_o(r)||V(r))return d(t,e=e.get(n)||null,r,i,null);wo(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,d=a,v=a=0,g=null;null!==d&&v<s.length;v++){d.index>v?(g=d,d=null):g=d.sibling;var m=p(i,d,s[v],u);if(null===m){null===d&&(d=g);break}e&&d&&null===m.alternate&&t(i,d),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,d=g}if(v===s.length)return n(i,d),c;if(null===d){for(;v<s.length;v++)null!==(d=f(i,s[v],u))&&(a=o(d,a,v),null===l?c=d:l.sibling=d,l=d);return c}for(d=r(i,d);v<s.length;v++)null!==(g=h(d,i,v,s[v],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g);return e&&d.forEach((function(e){return t(i,e)})),c}function g(i,s,u,c){var l=V(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var d=l=null,v=s,g=s=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=p(i,v,y.value,c);if(null===b){null===v&&(v=m);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,g),null===d?l=b:d.sibling=b,d=b,v=m}if(y.done)return n(i,v),l;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,g),null===d?l=y:d.sibling=y,d=y);return l}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=h(v,i,g,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?l=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===I&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case w:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===I){n(e,c.sibling),(r=i(c,o.props.children)).return=e,e=r;break e}break;default:if(c.elementType===o.type){n(e,c.sibling),(r=i(c,o.props)).ref=Eo(e,c,o),r.return=e,e=r;break e}}n(e,c);break}t(e,c),c=c.sibling}o.type===I?((r=Hu(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=zu(o.type,o.key,o.props,null,e.mode,u)).ref=Eo(e,r,o),u.return=e,e=u)}return s(e);case S:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Ku(o,e.mode,u)).return=e,e=r),s(e);if(_o(o))return v(e,r,o,u);if(V(o))return g(e,r,o,u);if(l&&wo(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,K(e.type)||"Component"))}return n(e,r)}}var Io=So(!0),Oo=So(!1),To={},Ao=ai(To),Ro=ai(To),ko=ai(To);function Co(e){if(e===To)throw Error(a(174));return e}function No(e,t){switch(ui(ko,t),ui(Ro,e),ui(Ao,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}si(Ao),ui(Ao,t)}function xo(){si(Ao),si(Ro),si(ko)}function Lo(e){Co(ko.current);var t=Co(Ao.current),n=he(t,e.type);t!==n&&(ui(Ro,e),ui(Ao,n))}function Po(e){Ro.current===e&&(si(Ao),si(Ro))}var Do=ai(0);function Mo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jo=null,Uo=null,Fo=!1;function Bo(e,t){var n=qu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function qo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Vo(e){if(Fo){var t=Uo;if(t){var n=t;if(!qo(e,t)){if(!(t=Hr(n.nextSibling))||!qo(e,t))return e.flags=-1025&e.flags|2,Fo=!1,void(jo=e);Bo(jo,n)}jo=e,Uo=Hr(t.firstChild)}else e.flags=-1025&e.flags|2,Fo=!1,jo=e}}function Go(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jo=e}function zo(e){if(e!==jo)return!1;if(!Fo)return Go(e),Fo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Uo;t;)Bo(e,t),t=Hr(t.nextSibling);if(Go(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Uo=Hr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Uo=null}}else Uo=jo?Hr(e.stateNode.nextSibling):null;return!0}function Ho(){Uo=jo=null,Fo=!1}var Wo=[];function Ko(){for(var e=0;e<Wo.length;e++)Wo[e]._workInProgressVersionPrimary=null;Wo.length=0}var Jo=E.ReactCurrentDispatcher,Yo=E.ReactCurrentBatchConfig,$o=0,Qo=null,Xo=null,Zo=null,ea=!1,ta=!1;function na(){throw Error(a(321))}function ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ia(e,t,n,r,i,o){if($o=o,Qo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Jo.current=null===e||null===e.memoizedState?Ca:Na,e=n(r,i),ta){o=0;do{if(ta=!1,!(25>o))throw Error(a(301));o+=1,Zo=Xo=null,t.updateQueue=null,Jo.current=xa,e=n(r,i)}while(ta)}if(Jo.current=ka,t=null!==Xo&&null!==Xo.next,$o=0,Zo=Xo=Qo=null,ea=!1,t)throw Error(a(300));return e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zo?Qo.memoizedState=Zo=e:Zo=Zo.next=e,Zo}function aa(){if(null===Xo){var e=Qo.alternate;e=null!==e?e.memoizedState:null}else e=Xo.next;var t=null===Zo?Qo.memoizedState:Zo.next;if(null!==t)Zo=t,Xo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Xo=e).memoizedState,baseState:Xo.baseState,baseQueue:Xo.baseQueue,queue:Xo.queue,next:null},null===Zo?Qo.memoizedState=Zo=e:Zo=Zo.next=e}return Zo}function sa(e,t){return"function"===typeof t?t(e):t}function ua(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Xo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if(($o&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=d,o=r):u=u.next=d,Qo.lanes|=l,Us|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,sr(r,t.memoizedState)||(Pa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function ca(e){var t=aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(Pa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function la(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($o&e)===e)&&(t._workInProgressVersionPrimary=r,Wo.push(t))),e)return n(t._source);throw Wo.push(t),Error(a(350))}function da(e,t,n,r){var i=Cs;if(null===i)throw Error(a(349));var o=t._getVersion,s=o(t._source),u=Jo.current,c=u.useState((function(){return la(i,t,n)})),l=c[1],d=c[0];c=Zo;var f=e.memoizedState,p=f.refs,h=p.getSnapshot,v=f.source;f=f.subscribe;var g=Qo;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=o(t._source);if(!sr(s,e)){e=n(t._source),sr(d,e)||(l(e),e=lu(g),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,a=e;0<a;){var u=31-zt(a),c=1<<u;r[u]|=e,a&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=lu(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[t,r]),sr(h,n)&&sr(v,t)&&sr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:d}).dispatch=l=Ra.bind(null,Qo,e),c.queue=e,c.baseQueue=null,d=la(i,t,n),c.memoizedState=c.baseState=d),d}function fa(e,t,n){return da(aa(),e,t,n)}function pa(e){var t=oa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:e}).dispatch=Ra.bind(null,Qo,e),[t.memoizedState,e]}function ha(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Qo.updateQueue)?(t={lastEffect:null},Qo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function va(e){return e={current:e},oa().memoizedState=e}function ga(){return aa().memoizedState}function ma(e,t,n,r){var i=oa();Qo.flags|=e,i.memoizedState=ha(1|t,n,void 0,void 0===r?null:r)}function ya(e,t,n,r){var i=aa();r=void 0===r?null:r;var o=void 0;if(null!==Xo){var a=Xo.memoizedState;if(o=a.destroy,null!==r&&ra(r,a.deps))return void ha(t,n,o,r)}Qo.flags|=e,i.memoizedState=ha(1|t,n,o,r)}function ba(e,t){return ma(516,4,e,t)}function _a(e,t){return ya(516,4,e,t)}function Ea(e,t){return ya(4,2,e,t)}function wa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,2,wa.bind(null,t,e),n)}function Ia(){}function Oa(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ta(e,t){var n=aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ra(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Aa(e,t){var n=qi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Yo.transition;Yo.transition=1;try{e(!1),t()}finally{Yo.transition=n}}))}function Ra(e,t,n){var r=cu(),i=lu(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Qo||null!==a&&a===Qo)ta=ea=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,sr(u,s))return}catch(c){}du(e,i,r)}}var ka={readContext:ro,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},Ca={readContext:ro,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:ro,useEffect:ba,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ma(4,2,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4,2,e,t)},useMemo:function(e,t){var n=oa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ra.bind(null,Qo,e),[r.memoizedState,e]},useRef:va,useState:pa,useDebugValue:Ia,useDeferredValue:function(e){var t=pa(e),n=t[0],r=t[1];return ba((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=pa(!1),t=e[0];return va(e=Aa.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oa();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},da(r,e,t,n)},useOpaqueIdentifier:function(){if(Fo){var e=!1,t=function(e){return{$$typeof:D,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Kr++).toString(36))),Error(a(355))})),n=pa(t)[1];return 0===(2&Qo.mode)&&(Qo.flags|=516,ha(5,(function(){n("r:"+(Kr++).toString(36))}),void 0,null)),t}return pa(t="r:"+(Kr++).toString(36)),t},unstable_isNewReconciler:!1},Na={readContext:ro,useCallback:Oa,useContext:ro,useEffect:_a,useImperativeHandle:Sa,useLayoutEffect:Ea,useMemo:Ta,useReducer:ua,useRef:ga,useState:function(){return ua(sa)},useDebugValue:Ia,useDeferredValue:function(e){var t=ua(sa),n=t[0],r=t[1];return _a((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=ua(sa)[0];return[ga().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},xa={readContext:ro,useCallback:Oa,useContext:ro,useEffect:_a,useImperativeHandle:Sa,useLayoutEffect:Ea,useMemo:Ta,useReducer:ca,useRef:ga,useState:function(){return ca(sa)},useDebugValue:Ia,useDeferredValue:function(e){var t=ca(sa),n=t[0],r=t[1];return _a((function(){var t=Yo.transition;Yo.transition=1;try{r(e)}finally{Yo.transition=t}}),[e]),n},useTransition:function(){var e=ca(sa)[0];return[ga().current,e]},useMutableSource:fa,useOpaqueIdentifier:function(){return ca(sa)[0]},unstable_isNewReconciler:!1},La=E.ReactCurrentOwner,Pa=!1;function Da(e,t,n,r){t.child=null===e?Oo(t,null,n,r):Io(t,e.child,n,r)}function Ma(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=ia(e,t,n,r,o,i),null===e||Pa?(t.flags|=1,Da(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function ja(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||Vu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zu(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ua(e,t,a,r,i,o))}return a=e.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:cr)(i,r)&&e.ref===t.ref)?ns(e,t,o):(t.flags|=1,(e=Gu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ua(e,t,n,r,i,o){if(null!==e&&cr(e.memoizedProps,r)&&e.ref===t.ref){if(Pa=!1,0===(o&i))return t.lanes=e.lanes,ns(e,t,o);0!==(16384&e.flags)&&(Pa=!0)}return qa(e,t,n,r,o)}function Fa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,n);else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,bu(t,r);return Da(e,t,i,n),t.child}function Ba(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qa(e,t,n,r,i){var o=hi(n)?fi:li.current;return o=pi(t,o),no(t,i),n=ia(e,t,n,r,o,i),null===e||Pa?(t.flags|=1,Da(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,ns(e,t,i))}function Va(e,t,n,r,i){if(hi(n)){var o=!0;yi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),mo(t,n,r),bo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=pi(t,c=hi(n)?fi:li.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&yo(t,a,r,c),io=!1;var f=t.memoizedState;a.state=f,lo(t,r,a,i),u=t.memoizedState,s!==r||f!==u||di.current||io?("function"===typeof l&&(ho(t,n,l,r),u=t.memoizedState),(s=io||go(t,n,s,r,f,u,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4)):("function"===typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ao(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ji(t.type,s),a.props=c,d=t.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=ro(u):u=pi(t,u=hi(n)?fi:li.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||f!==u)&&yo(t,a,r,u),io=!1,f=t.memoizedState,a.state=f,lo(t,r,a,i);var h=t.memoizedState;s!==d||f!==h||di.current||io?("function"===typeof p&&(ho(t,n,p,r),h=t.memoizedState),(c=io||go(t,n,c,r,f,h,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Ga(e,t,n,r,o,i)}function Ga(e,t,n,r,i,o){Ba(e,t);var a=0!==(64&t.flags);if(!r&&!a)return i&&bi(t,n,!1),ns(e,t,o);r=t.stateNode,La.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Io(t,e.child,null,o),t.child=Io(t,null,s,o)):Da(e,t,s,o),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function za(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),No(e,t.containerInfo)}var Ha,Wa,Ka,Ja={dehydrated:null,retryLane:0};function Ya(e,t,n){var r,i=t.pendingProps,o=Do.current,a=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ui(Do,1&o),null===e?(void 0!==i.fallback&&Vo(t),e=i.children,o=i.fallback,a?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ja,e):"number"===typeof i.unstable_expectedLoadTime?(e=$a(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Ja,t.lanes=33554432,e):((n=Wu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Xa(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Ja,i):(n=Qa(e,t,i.children,n),t.memoizedState=null,n))}function $a(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Wu(t,i,0,null),n=Hu(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Qa(e,t,n,r){var i=e.child;return e=i.sibling,n=Gu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Xa(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(a,s),null!==e?r=Gu(e,r):(r=Hu(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Za(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),to(e.return,t)}function es(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function ts(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Da(e,t,r.children,n),0!==(2&(r=Do.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Za(e,n);else if(19===e.tag)Za(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Do,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Mo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),es(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Mo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}es(t,!0,n,null,o,t.lastEffect);break;case"together":es(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ns(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Us|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function rs(e,t){if(!Fo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function is(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return hi(t.type)&&vi(),null;case 3:return xo(),si(di),si(li),Ko(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(zo(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Po(t);var o=Co(ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Wa(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=Co(Ao.current),zo(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Yr]=t,r[$r]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ie(n,s),e=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(e=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(e=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,e===de&&(e=pe(n)),e===de?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Yr]=t,e[$r]=r,Ha(e,t),t.stateNode=e,c=Oe(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),o=r;break;case"iframe":case"object":case"embed":Ar("load",e),o=r;break;case"video":case"audio":for(o=0;o<Sr.length;o++)Ar(Sr[o],e);o=r;break;case"source":Ar("error",e),o=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),o=r;break;case"details":Ar("toggle",e),o=r;break;case"input":ee(e,r),o=Z(e,r),Ar("invalid",e);break;case"option":o=oe(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),o=se(e,r),Ar("invalid",e);break;default:o=r}Ie(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&me(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ye(e,d):"number"===typeof d&&ye(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Ar("scroll",e):null!=d&&_(e,s,d,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ae(e,!!r.multiple,s,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=jr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ka(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));n=Co(ko.current),Co(Ao.current),zo(t)?(r=t.stateNode,n=t.memoizedProps,r[Yr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Yr]=t,t.stateNode=r)}return null;case 13:return si(Do),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&zo(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Do.current)?0===Ds&&(Ds=3):(0!==Ds&&3!==Ds||(Ds=4),null===Cs||0===(134217727&Us)&&0===(134217727&Fs)||vu(Cs,xs))),(r||n)&&(t.flags|=4),null);case 4:return xo(),null===e&&kr(t.stateNode.containerInfo),null;case 10:return eo(t),null;case 17:return hi(t.type)&&vi(),null;case 19:if(si(Do),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)rs(r,!1);else{if(0!==Ds||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Mo(e))){for(t.flags|=64,rs(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ui(Do,1&Do.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Gs&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Mo(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),rs(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Fo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,rs(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Do.current,ui(Do,s?1&t|2:1&t),n):null;case 23:case 24:return _u(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(a(156,t.tag))}function os(e){switch(e.tag){case 1:hi(e.type)&&vi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(xo(),si(di),si(li),Ko(),0!==(64&(t=e.flags)))throw Error(a(285));return e.flags=-4097&t|64,e;case 5:return Po(e),null;case 13:return si(Do),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return si(Do),null;case 4:return xo(),null;case 10:return eo(e),null;case 23:case 24:return _u(),null;default:return null}}function as(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Ha=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wa=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Co(Ao.current);var a,s=null;switch(n){case"input":o=Z(e,o),r=Z(e,r),s=[];break;case"option":o=oe(e,o),r=oe(e,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=se(e,o),r=se(e,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(d in Ie(n,r),n=null,o)if(!r.hasOwnProperty(d)&&o.hasOwnProperty(d)&&null!=o[d])if("style"===d){var c=o[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(c=null!=o?o[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(null!=l||null!=c))if("style"===d)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===D?l.toString():(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Ka=function(e,t,n,r){n!==r&&(t.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function cs(e,t,n){(n=so(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Js=r),ss(0,t)},n}function ls(e,t,n){(n=so(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ss(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ys?Ys=new Set([this]):Ys.add(this),ss(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ds="function"===typeof WeakSet?WeakSet:Set;function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){ju(e,n)}else t.current=null}function ps(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&zr(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function hs(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Pu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&fo(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}fo(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function vs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=Ee("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function gs(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(_i,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Pu(t,n);else{r=t;try{i()}catch(o){ju(r,o)}}n=n.next}while(n!==e)}break;case 1:if(fs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){ju(t,o)}break;case 5:fs(t);break;case 4:ws(e,t)}}function ms(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ys(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ys(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ys(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_s(e,n,t):Es(e,n,t)}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function ws(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(gs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(gs(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Oe(e,i),t=Oe(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ye(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ae(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ae(n,!!r.multiple,r.defaultValue,!0):ae(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Vs=Bi(),vs(t.child,!0)),void Is(t);case 19:return void Is(t);case 17:return;case 23:case 24:return void vs(t,null!==t.memoizedState)}throw Error(a(163))}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ds),t.forEach((function(t){var r=Fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Os(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ts=Math.ceil,As=E.ReactCurrentDispatcher,Rs=E.ReactCurrentOwner,ks=0,Cs=null,Ns=null,xs=0,Ls=0,Ps=ai(0),Ds=0,Ms=null,js=0,Us=0,Fs=0,Bs=0,qs=null,Vs=0,Gs=1/0;function zs(){Gs=Bi()+500}var Hs,Ws=null,Ks=!1,Js=null,Ys=null,$s=!1,Qs=null,Xs=90,Zs=[],eu=[],tu=null,nu=0,ru=null,iu=-1,ou=0,au=0,su=null,uu=!1;function cu(){return 0!==(48&ks)?Bi():-1!==iu?iu:iu=Bi()}function lu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qi()?1:2;if(0===ou&&(ou=js),0!==Ki.transition){0!==au&&(au=null!==qs?qs.pendingLanes:0),e=ou;var t=4186112&~au;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qi(),0!==(4&ks)&&98===e?e=Bt(12,ou):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ou),e}function du(e,t,n){if(50<nu)throw nu=0,ru=null,Error(a(185));if(null===(e=fu(e,t)))return null;Gt(e,t,n),e===Cs&&(Fs|=t,4===Ds&&vu(e,xs));var r=qi();1===t?0!==(8&ks)&&0===(48&ks)?gu(e):(pu(e,n),0===ks&&(zs(),Hi())):(0===(4&ks)||98!==r&&99!==r||(null===tu?tu=new Set([e]):tu.add(e)),pu(e,n)),qs=e}function fu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function pu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-zt(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,jt(c);var d=Mt;o[u]=10<=d?l+250:6<=d?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Cs?xs:0),t=Mt,0===r)null!==n&&(n!==Pi&&Ii(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Pi&&Ii(n)}15===t?(n=gu.bind(null,e),null===Mi?(Mi=[n],ji=Si(ki,Wi)):Mi.push(n),n=Pi):14===t?n=zi(99,gu.bind(null,e)):n=zi(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,e))}}(t),hu.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function hu(e){if(iu=-1,au=ou=0,0!==(48&ks))throw Error(a(327));var t=e.callbackNode;if(xu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Cs?xs:0);if(0===n)return null;var r=n,i=ks;ks|=16;var o=Su();for(Cs===e&&xs===r||(zs(),Eu(e,r));;)try{Tu();break}catch(u){wu(e,u)}if(Zi(),As.current=o,ks=i,null!==Ns?r=0:(Cs=null,xs=0,r=Ds),0!==(js&Fs))Eu(e,0);else if(0!==r){if(2===r&&(ks|=64,e.hydrate&&(e.hydrate=!1,zr(e.containerInfo)),0!==(n=Ft(e))&&(r=Iu(e,n))),1===r)throw t=Ms,Eu(e,0),vu(e,n),pu(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:ku(e);break;case 3:if(vu(e,n),(62914560&n)===n&&10<(r=Vs+500-Bi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){cu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Vr(ku.bind(null,e),r);break}ku(e);break;case 4:if(vu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-zt(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ts(n/1960))-n)){e.timeoutHandle=Vr(ku.bind(null,e),n);break}ku(e);break;case 5:ku(e);break;default:throw Error(a(329))}}return pu(e,Bi()),e.callbackNode===t?hu.bind(null,e):null}function vu(e,t){for(t&=~Bs,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function gu(e){if(0!==(48&ks))throw Error(a(327));if(xu(),e===Cs&&0!==(e.expiredLanes&xs)){var t=xs,n=Iu(e,t);0!==(js&Fs)&&(n=Iu(e,t=Ut(e,t)))}else n=Iu(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(ks|=64,e.hydrate&&(e.hydrate=!1,zr(e.containerInfo)),0!==(t=Ft(e))&&(n=Iu(e,t))),1===n)throw n=Ms,Eu(e,0),vu(e,t),pu(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,ku(e),pu(e,Bi()),null}function mu(e,t){var n=ks;ks|=1;try{return e(t)}finally{0===(ks=n)&&(zs(),Hi())}}function yu(e,t){var n=ks;ks&=-2,ks|=8;try{return e(t)}finally{0===(ks=n)&&(zs(),Hi())}}function bu(e,t){ui(Ps,Ls),Ls|=t,js|=t}function _u(){Ls=Ps.current,si(Ps)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&vi();break;case 3:xo(),si(di),si(li),Ko();break;case 5:Po(r);break;case 4:xo();break;case 13:case 19:si(Do);break;case 10:eo(r);break;case 23:case 24:_u()}n=n.return}Cs=e,Ns=Gu(e.current,null),xs=Ls=js=t,Ds=0,Ms=null,Bs=Fs=Us=0}function wu(e,t){for(;;){var n=Ns;try{if(Zi(),Jo.current=ka,ea){for(var r=Qo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ea=!1}if($o=0,Zo=Xo=Qo=null,ta=!1,Rs.current=null,null===n||null===n.return){Ds=1,Ms=t,Ns=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=xs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Do.current),f=a;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var v=f.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!d)}}if(p){var g=f.updateQueue;if(null===g){var m=new Set;m.add(c),f.updateQueue=m}else g.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var y=so(-1,1);y.tag=2,uo(s,y)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new us,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var _=Uu.bind(null,o,c,s);c.then(_,_)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ds&&(Ds=2),u=as(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,t&=-t,f.lanes|=t,co(f,cs(0,o,t));break e;case 1:o=u;var E=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof E.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Ys||!Ys.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,co(f,ls(f,o,t));break e}}f=f.return}while(null!==f)}Ru(n)}catch(S){t=S,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function Su(){var e=As.current;return As.current=ka,null===e?ka:e}function Iu(e,t){var n=ks;ks|=16;var r=Su();for(Cs===e&&xs===t||Eu(e,t);;)try{Ou();break}catch(i){wu(e,i)}if(Zi(),ks=n,As.current=r,null!==Ns)throw Error(a(261));return Cs=null,xs=0,Ds}function Ou(){for(;null!==Ns;)Au(Ns)}function Tu(){for(;null!==Ns&&!Oi();)Au(Ns)}function Au(e){var t=Hs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ns=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=is(n,t,Ls)))return void(Ns=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=os(t)))return n.flags&=2047,void(Ns=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ds&&(Ds=5)}function ku(e){var t=qi();return Gi(99,Cu.bind(null,e,t)),null}function Cu(e,t){do{xu()}while(null!==Qs);if(0!==(48&ks))throw Error(a(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<o;){var c=31-zt(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==tu&&0===(24&r)&&tu.has(e)&&tu.delete(e),e===Cs&&(Ns=Cs=null,xs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=ks,ks|=32,Rs.current=null,Ur=Yt,hr(s=pr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var d=0,f=-1,p=-1,h=0,v=0,g=s,m=null;t:for(;;){for(var y;g!==u||0!==o&&3!==g.nodeType||(f=d+o),g!==c||0!==l&&3!==g.nodeType||(p=d+l),3===g.nodeType&&(d+=g.nodeValue.length),null!==(y=g.firstChild);)m=g,g=y;for(;;){if(g===s)break t;if(m===u&&++h===o&&(f=d),m===c&&++v===l&&(p=d),null!==(y=g.nextSibling))break;m=(g=m).parentNode}g=y}u=-1===f||-1===p?null:{start:f,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Fr={focusedElem:s,selectionRange:u},Yt=!1,su=null,uu=!1,Ws=r;do{try{Nu()}catch(T){if(null===Ws)throw Error(a(330));ju(Ws,T),Ws=Ws.nextEffect}}while(null!==Ws);su=null,Ws=r;do{try{for(s=e;null!==Ws;){var b=Ws.flags;if(16&b&&ye(Ws.stateNode,""),128&b){var _=Ws.alternate;if(null!==_){var E=_.ref;null!==E&&("function"===typeof E?E(null):E.current=null)}}switch(1038&b){case 2:bs(Ws),Ws.flags&=-3;break;case 6:bs(Ws),Ws.flags&=-3,Ss(Ws.alternate,Ws);break;case 1024:Ws.flags&=-1025;break;case 1028:Ws.flags&=-1025,Ss(Ws.alternate,Ws);break;case 4:Ss(Ws.alternate,Ws);break;case 8:ws(s,u=Ws);var w=u.alternate;ms(u),null!==w&&ms(w)}Ws=Ws.nextEffect}}catch(T){if(null===Ws)throw Error(a(330));ju(Ws,T),Ws=Ws.nextEffect}}while(null!==Ws);if(E=Fr,_=pr(),b=E.focusedElem,s=E.selectionRange,_!==b&&b&&b.ownerDocument&&fr(b.ownerDocument.documentElement,b)){null!==s&&hr(b)&&(_=s.start,void 0===(E=s.end)&&(E=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(E,b.value.length)):(E=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(E=E.getSelection(),u=b.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!E.extend&&w>s&&(u=s,s=w,w=u),u=dr(b,w),o=dr(b,s),u&&o&&(1!==E.rangeCount||E.anchorNode!==u.node||E.anchorOffset!==u.offset||E.focusNode!==o.node||E.focusOffset!==o.offset)&&((_=_.createRange()).setStart(u.node,u.offset),E.removeAllRanges(),w>s?(E.addRange(_),E.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),E.addRange(_))))),_=[];for(E=b;E=E.parentNode;)1===E.nodeType&&_.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(E=_[b]).element.scrollLeft=E.left,E.element.scrollTop=E.top}Yt=!!Ur,Fr=Ur=null,e.current=n,Ws=r;do{try{for(b=e;null!==Ws;){var S=Ws.flags;if(36&S&&hs(b,Ws.alternate,Ws),128&S){_=void 0;var I=Ws.ref;if(null!==I){var O=Ws.stateNode;switch(Ws.tag){case 5:_=O;break;default:_=O}"function"===typeof I?I(_):I.current=_}}Ws=Ws.nextEffect}}catch(T){if(null===Ws)throw Error(a(330));ju(Ws,T),Ws=Ws.nextEffect}}while(null!==Ws);Ws=null,Di(),ks=i}else e.current=n;if($s)$s=!1,Qs=e,Xs=t;else for(Ws=r;null!==Ws;)t=Ws.nextEffect,Ws.nextEffect=null,8&Ws.flags&&((S=Ws).sibling=null,S.stateNode=null),Ws=t;if(0===(r=e.pendingLanes)&&(Ys=null),1===r?e===ru?nu++:(nu=0,ru=e):nu=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(pu(e,Bi()),Ks)throw Ks=!1,e=Js,Js=null,e;return 0!==(8&ks)||Hi(),null}function Nu(){for(;null!==Ws;){var e=Ws.alternate;uu||null===su||(0!==(8&Ws.flags)?et(Ws,su)&&(uu=!0):13===Ws.tag&&Os(e,Ws)&&et(Ws,su)&&(uu=!0));var t=Ws.flags;0!==(256&t)&&ps(e,Ws),0===(512&t)||$s||($s=!0,zi(97,(function(){return xu(),null}))),Ws=Ws.nextEffect}}function xu(){if(90!==Xs){var e=97<Xs?97:Xs;return Xs=90,Gi(e,Du)}return!1}function Lu(e,t){Zs.push(t,e),$s||($s=!0,zi(97,(function(){return xu(),null})))}function Pu(e,t){eu.push(t,e),$s||($s=!0,zi(97,(function(){return xu(),null})))}function Du(){if(null===Qs)return!1;var e=Qs;if(Qs=null,0!==(48&ks))throw Error(a(331));var t=ks;ks|=32;var n=eu;eu=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));ju(o,c)}}for(n=Zs,Zs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));ju(o,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return ks=t,Hi(),!0}function Mu(e,t,n){uo(e,t=cs(0,t=as(n,t),1)),t=cu(),null!==(e=fu(e,1))&&(Gt(e,1,t),pu(e,t))}function ju(e,t){if(3===e.tag)Mu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Mu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r))){var i=ls(n,e=as(t,e),1);if(uo(n,i),i=cu(),null!==(n=fu(n,1)))Gt(n,1,i),pu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ys||!Ys.has(r)))try{r.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Uu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=cu(),e.pingedLanes|=e.suspendedLanes&n,Cs===e&&(xs&n)===n&&(4===Ds||3===Ds&&(62914560&xs)===xs&&500>Bi()-Vs?Eu(e,0):Bs|=n),pu(e,t)}function Fu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qi()?1:2:(0===ou&&(ou=js),0===(t=qt(62914560&~ou))&&(t=4194304))),n=cu(),null!==(e=fu(e,t))&&(Gt(e,t,n),pu(e,n))}function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(e,t,n,r){return new Bu(e,t,n,r)}function Vu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=qu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Vu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return Hu(n.children,i,o,t);case M:s=8,i|=16;break;case O:s=8,i|=1;break;case T:return(e=qu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=o,e;case C:return(e=qu(13,n,t,i)).type=C,e.elementType=C,e.lanes=o,e;case N:return(e=qu(19,n,t,i)).elementType=N,e.lanes=o,e;case j:return Wu(n,i,o,t);case U:return(e=qu(24,n,t,i)).elementType=U,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case R:s=9;break e;case k:s=11;break e;case x:s=14;break e;case L:s=16,r=null;break e;case P:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=qu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Hu(e,t,n,r){return(e=qu(7,e,r,t)).lanes=n,e}function Wu(e,t,n,r){return(e=qu(23,e,r,t)).elementType=j,e.lanes=n,e}function Ku(e,t,n){return(e=qu(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=qu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Vt(0),this.expirationTimes=Vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Qu(e,t,n,r){var i=t.current,o=cu(),s=lu(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(hi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(hi(c)){n=mi(n,c,u);break e}}n=u}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),uo(i,t),du(i,s,o),s}function Xu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ec(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function tc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Yu(e,t,null!=n&&!0===n.hydrate),t=qu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,oo(t),e[Qr]=n.current,kr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function rc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Xu(a);s.call(e)}}Qu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new tc(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Xu(a);u.call(e)}}yu((function(){Qu(t,a,e,i)}))}return Xu(a)}function ic(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nc(t))throw Error(a(200));return $u(e,t,null,n)}Hs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Pa=!0;else{if(0===(n&r)){switch(Pa=!1,t.tag){case 3:za(t),Ho();break;case 5:Lo(t);break;case 1:hi(t.type)&&yi(t);break;case 4:No(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;ui(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Ya(e,t,n):(ui(Do,1&Do.current),null!==(t=ns(e,t,n))?t.sibling:null);ui(Do,1&Do.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ts(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ui(Do,Do.current),r)break;return null;case 23:case 24:return t.lanes=0,Fa(e,t,n)}return ns(e,t,n)}Pa=0!==(16384&e.flags)}else Pa=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=pi(t,li.current),no(t,n),i=ia(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,hi(r)){var o=!0;yi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ho(t,r,s,e),i.updater=vo,t.stateNode=i,i._reactInternals=t,bo(t,r,e,n),t=Ga(null,t,r,!0,o,n)}else t.tag=0,Da(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"===typeof e)return Vu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===x)return 14}return 2}(i),e=Ji(i,e),o){case 0:t=qa(null,t,i,e,n);break e;case 1:t=Va(null,t,i,e,n);break e;case 11:t=Ma(null,t,i,e,n);break e;case 14:t=ja(null,t,i,Ji(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,qa(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Va(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(za(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),lo(t,r,null,n),(r=t.memoizedState.element)===i)Ho(),t=ns(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(Uo=Hr(t.stateNode.containerInfo.firstChild),jo=t,o=Fo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],Wo.push(o);for(n=Oo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Da(e,t,r,n),Ho();t=t.child}return t;case 5:return Lo(t),null===e&&Vo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,qr(r,i)?s=null:null!==o&&qr(r,o)&&(t.flags|=16),Ba(e,t),Da(e,t,s,n),t.child;case 6:return null===e&&Vo(t),null;case 13:return Ya(e,t,n);case 4:return No(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Io(t,null,r,n):Da(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Da(e,t,t.pendingProps,n),t.child;case 8:case 12:return Da(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var u=t.type._context;if(ui(Yi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=sr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!di.current){t=ns(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(-1,n&-n)).tag=2,uo(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),to(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Da(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.flags|=1,Da(e,t,r,n),t.child;case 14:return o=Ji(i=t.type,t.pendingProps),ja(e,t,i,o=Ji(i.type,o),r,n);case 15:return Ua(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,hi(r)?(e=!0,yi(t)):e=!1,no(t,n),mo(t,r,i),bo(t,r,i,n),Ga(null,t,r,!0,e,n);case 19:return ts(e,t,n);case 23:case 24:return Fa(e,t,n)}throw Error(a(156,t.tag))},tc.prototype.render=function(e){Qu(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qu(null,e,null,(function(){t[Qr]=null}))},tt=function(e){13===e.tag&&(du(e,4,cu()),ec(e,4))},nt=function(e){13===e.tag&&(du(e,67108864,cu()),ec(e,67108864))},rt=function(e){if(13===e.tag){var t=cu(),n=lu(e);du(e,n,t),ec(e,n)}},it=function(e,t){return t()},Ae=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ni(r);if(!i)throw Error(a(90));Q(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&ae(e,!!n.multiple,t,!1)}},Le=mu,Pe=function(e,t,n,r,i){var o=ks;ks|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(ks=o)&&(zs(),Hi())}},De=function(){0===(49&ks)&&(function(){if(null!==tu){var e=tu;tu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pu(e,Bi())}))}Hi()}(),xu())},Me=function(e,t){var n=ks;ks|=2;try{return e(t)}finally{0===(ks=n)&&(zs(),Hi())}};var oc={Events:[ei,ti,ni,Ne,xe,xu,{current:!1}]},ac={findFiberByHostInstance:Zr,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},sc={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{_i=uc.inject(sc),Ei=uc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oc,t.createPortal=ic,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=ks;if(0!==(48&n))return e(t);ks|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{ks=n,Hi()}},t.hydrate=function(e,t,n){if(!nc(t))throw Error(a(200));return rc(null,e,t,!0,n)},t.render=function(e,t,n){if(!nc(t))throw Error(a(200));return rc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(a(40));return!!e._reactRootContainer&&(yu((function(){rc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Qr]=null}))})),!0)},t.unstable_batchedUpdates=mu,t.unstable_createPortal=function(e,t){return ic(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!nc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return rc(e,t,n,!1,r)},t.version="17.0.1"},function(e,t,n){"use strict";e.exports=n(49)},function(e,t,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,d=null,f=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(e,0),r}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(f,0))},i=function(e,t){d=setTimeout(e,t)},o=function(){clearTimeout(d)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,h=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,y=-1,b=5,_=0;t.unstable_shouldYield=function(){return t.unstable_now()>=_},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var E=new MessageChannel,w=E.port2;E.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();_=e+b;try{m(!0,e)?w.postMessage(null):(g=!1,m=null)}catch(n){throw w.postMessage(null),n}}else g=!1},r=function(e){m=e,g||(g=!0,w.postMessage(null))},i=function(e,n){y=p((function(){e(t.unstable_now())}),n)},o=function(){h(y),y=-1}}function S(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<T(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function O(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>T(a,n))void 0!==u&&0>T(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>T(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var A=[],R=[],k=1,C=null,N=3,x=!1,L=!1,P=!1;function D(e){for(var t=I(R);null!==t;){if(null===t.callback)O(R);else{if(!(t.startTime<=e))break;O(R),t.sortIndex=t.expirationTime,S(A,t)}t=I(R)}}function M(e){if(P=!1,D(e),!L)if(null!==I(A))L=!0,r(j);else{var t=I(R);null!==t&&i(M,t.startTime-e)}}function j(e,n){L=!1,P&&(P=!1,o()),x=!0;var r=N;try{for(D(n),C=I(A);null!==C&&(!(C.expirationTime>n)||e&&!t.unstable_shouldYield());){var a=C.callback;if("function"===typeof a){C.callback=null,N=C.priorityLevel;var s=a(C.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?C.callback=s:C===I(A)&&O(A),D(n)}else O(A);C=I(A)}if(null!==C)var u=!0;else{var c=I(R);null!==c&&i(M,c.startTime-n),u=!1}return u}finally{C=null,N=r,x=!1}}var U=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){L||x||(L=!0,r(j))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return I(A)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:k++,callback:n,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(e.sortIndex=a,S(R,e),null===I(A)&&e===I(R)&&(P?o():P=!0,i(M,a-s))):(e.sortIndex=u,S(A,e),L||x||(L=!0,r(j))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},function(e,t,n){},,,function(e,t,n){"use strict";n(28);var r=n(1),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),t.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},,,,function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(58),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(20))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i=1,o={},a=!1,s=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){l(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var n=s.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return o[i]=a,r(i),i++},u.clearImmediate=c}function c(e){delete o[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{c(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(20),n(37))},function(e,t,n){"use strict";var r=n(60);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(err){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),a=new R(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return C()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(err){return{type:"throw",arg:err}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function g(){}function m(){}function y(){}var b={};b[o]=function(){return this};var _=Object.getPrototypeOf,E=_&&_(_(k([])));E&&E!==n&&r.call(E,o)&&(b=E);var w=y.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,o,a,s){var u=l(e[i],e,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:C}}function C(){return{value:t,done:!0}}return m.prototype=w.constructor=y,y.constructor=m,m.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},S(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(w),u(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case f:case a:case u:case s:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case m:case g:case c:return e;default:return t}}case o:return t}}}function S(e){return w(e)===f}t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=h,t.isAsyncMode=function(e){return S(e)||w(e)===d},t.isConcurrentMode=S,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===g},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===h||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===b||e.$$typeof===_||e.$$typeof===E||e.$$typeof===y)},t.typeOf=w}]]);
//# sourceMappingURL=2.f739a517.chunk.js.map